(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function xR(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Wp={exports:{}},Uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function DR(){if(FT)return Uu;FT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Uu.Fragment=e,Uu.jsx=t,Uu.jsxs=t,Uu}var GT;function NR(){return GT||(GT=1,Wp.exports=DR()),Wp.exports}var O=NR(),Jp={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function VR(){if(KT)return Ce;KT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function S(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,F={};function U(N,ne,fe){this.props=N,this.context=ne,this.refs=F,this.updater=fe||D}U.prototype.isReactComponent={},U.prototype.setState=function(N,ne){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ne,"setState")},U.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Y(){}Y.prototype=U.prototype;function ie(N,ne,fe){this.props=N,this.context=ne,this.refs=F,this.updater=fe||D}var te=ie.prototype=new Y;te.constructor=ie,P(te,U.prototype),te.isPureReactComponent=!0;var pe=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},le=Object.prototype.hasOwnProperty;function x(N,ne,fe,se,Te,Ve){return fe=Ve.ref,{$$typeof:i,type:N,key:ne,ref:fe!==void 0?fe:null,props:Ve}}function b(N,ne){return x(N.type,ne,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function M(N){var ne={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(fe){return ne[fe]})}var k=/\/+/g;function B(N,ne){return typeof N=="object"&&N!==null&&N.key!=null?M(""+N.key):ne.toString(36)}function C(){}function Qt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(ne){N.status==="pending"&&(N.status="fulfilled",N.value=ne)},function(ne){N.status==="pending"&&(N.status="rejected",N.reason=ne)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function dt(N,ne,fe,se,Te){var Ve=typeof N;(Ve==="undefined"||Ve==="boolean")&&(N=null);var Ie=!1;if(N===null)Ie=!0;else switch(Ve){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(N.$$typeof){case i:case e:Ie=!0;break;case _:return Ie=N._init,dt(Ie(N._payload),ne,fe,se,Te)}}if(Ie)return Te=Te(N),Ie=se===""?"."+B(N,0):se,pe(Te)?(fe="",Ie!=null&&(fe=Ie.replace(k,"$&/")+"/"),dt(Te,ne,fe,"",function(dr){return dr})):Te!=null&&(R(Te)&&(Te=b(Te,fe+(Te.key==null||N&&N.key===Te.key?"":(""+Te.key).replace(k,"$&/")+"/")+Ie)),ne.push(Te)),1;Ie=0;var Ut=se===""?".":se+":";if(pe(N))for(var it=0;it<N.length;it++)se=N[it],Ve=Ut+B(se,it),Ie+=dt(se,ne,fe,Ve,Te);else if(it=S(N),typeof it=="function")for(N=it.call(N),it=0;!(se=N.next()).done;)se=se.value,Ve=Ut+B(se,it++),Ie+=dt(se,ne,fe,Ve,Te);else if(Ve==="object"){if(typeof N.then=="function")return dt(Qt(N),ne,fe,se,Te);throw ne=String(N),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function W(N,ne,fe){if(N==null)return N;var se=[],Te=0;return dt(N,se,"","",function(Ve){return ne.call(fe,Ve,Te++)}),se}function he(N){if(N._status===-1){var ne=N._result;ne=ne(),ne.then(function(fe){(N._status===0||N._status===-1)&&(N._status=1,N._result=fe)},function(fe){(N._status===0||N._status===-1)&&(N._status=2,N._result=fe)}),N._status===-1&&(N._status=0,N._result=ne)}if(N._status===1)return N._result.default;throw N._result}var ve=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Fe(){}return Ce.Children={map:W,forEach:function(N,ne,fe){W(N,function(){ne.apply(this,arguments)},fe)},count:function(N){var ne=0;return W(N,function(){ne++}),ne},toArray:function(N){return W(N,function(ne){return ne})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ce.Component=U,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=ie,Ce.StrictMode=r,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(N){return ue.H.useMemoCache(N)}},Ce.cache=function(N){return function(){return N.apply(null,arguments)}},Ce.cloneElement=function(N,ne,fe){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var se=P({},N.props),Te=N.key,Ve=void 0;if(ne!=null)for(Ie in ne.ref!==void 0&&(Ve=void 0),ne.key!==void 0&&(Te=""+ne.key),ne)!le.call(ne,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ne.ref===void 0||(se[Ie]=ne[Ie]);var Ie=arguments.length-2;if(Ie===1)se.children=fe;else if(1<Ie){for(var Ut=Array(Ie),it=0;it<Ie;it++)Ut[it]=arguments[it+2];se.children=Ut}return x(N.type,Te,void 0,void 0,Ve,se)},Ce.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Ce.createElement=function(N,ne,fe){var se,Te={},Ve=null;if(ne!=null)for(se in ne.key!==void 0&&(Ve=""+ne.key),ne)le.call(ne,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Te[se]=ne[se]);var Ie=arguments.length-2;if(Ie===1)Te.children=fe;else if(1<Ie){for(var Ut=Array(Ie),it=0;it<Ie;it++)Ut[it]=arguments[it+2];Te.children=Ut}if(N&&N.defaultProps)for(se in Ie=N.defaultProps,Ie)Te[se]===void 0&&(Te[se]=Ie[se]);return x(N,Ve,void 0,void 0,null,Te)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(N){return{$$typeof:d,render:N}},Ce.isValidElement=R,Ce.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:he}},Ce.memo=function(N,ne){return{$$typeof:g,type:N,compare:ne===void 0?null:ne}},Ce.startTransition=function(N){var ne=ue.T,fe={};ue.T=fe;try{var se=N(),Te=ue.S;Te!==null&&Te(fe,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Fe,ve)}catch(Ve){ve(Ve)}finally{ue.T=ne}},Ce.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Ce.use=function(N){return ue.H.use(N)},Ce.useActionState=function(N,ne,fe){return ue.H.useActionState(N,ne,fe)},Ce.useCallback=function(N,ne){return ue.H.useCallback(N,ne)},Ce.useContext=function(N){return ue.H.useContext(N)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(N,ne){return ue.H.useDeferredValue(N,ne)},Ce.useEffect=function(N,ne,fe){var se=ue.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(N,ne)},Ce.useId=function(){return ue.H.useId()},Ce.useImperativeHandle=function(N,ne,fe){return ue.H.useImperativeHandle(N,ne,fe)},Ce.useInsertionEffect=function(N,ne){return ue.H.useInsertionEffect(N,ne)},Ce.useLayoutEffect=function(N,ne){return ue.H.useLayoutEffect(N,ne)},Ce.useMemo=function(N,ne){return ue.H.useMemo(N,ne)},Ce.useOptimistic=function(N,ne){return ue.H.useOptimistic(N,ne)},Ce.useReducer=function(N,ne,fe){return ue.H.useReducer(N,ne,fe)},Ce.useRef=function(N){return ue.H.useRef(N)},Ce.useState=function(N){return ue.H.useState(N)},Ce.useSyncExternalStore=function(N,ne,fe){return ue.H.useSyncExternalStore(N,ne,fe)},Ce.useTransition=function(){return ue.H.useTransition()},Ce.version="19.1.0",Ce}var QT;function oy(){return QT||(QT=1,Jp.exports=VR()),Jp.exports}var Q=oy();const Ia=xR(Q);var Zp={exports:{}},Bu={},eg={exports:{}},tg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function OR(){return $T||($T=1,function(i){function e(W,he){var ve=W.length;W.push(he);e:for(;0<ve;){var Fe=ve-1>>>1,N=W[Fe];if(0<a(N,he))W[Fe]=he,W[ve]=N,ve=Fe;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var he=W[0],ve=W.pop();if(ve!==he){W[0]=ve;e:for(var Fe=0,N=W.length,ne=N>>>1;Fe<ne;){var fe=2*(Fe+1)-1,se=W[fe],Te=fe+1,Ve=W[Te];if(0>a(se,ve))Te<N&&0>a(Ve,se)?(W[Fe]=Ve,W[Te]=ve,Fe=Te):(W[Fe]=se,W[fe]=ve,Fe=fe);else if(Te<N&&0>a(Ve,ve))W[Fe]=Ve,W[Te]=ve,Fe=Te;else break e}}return he}function a(W,he){var ve=W.sortIndex-he.sortIndex;return ve!==0?ve:W.id-he.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,T=null,S=3,D=!1,P=!1,F=!1,U=!1,Y=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function pe(W){for(var he=t(g);he!==null;){if(he.callback===null)r(g);else if(he.startTime<=W)r(g),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(g)}}function ue(W){if(F=!1,pe(W),!P)if(t(m)!==null)P=!0,le||(le=!0,B());else{var he=t(g);he!==null&&dt(ue,he.startTime-W)}}var le=!1,x=-1,b=5,R=-1;function M(){return U?!0:!(i.unstable_now()-R<b)}function k(){if(U=!1,le){var W=i.unstable_now();R=W;var he=!0;try{e:{P=!1,F&&(F=!1,ie(x),x=-1),D=!0;var ve=S;try{t:{for(pe(W),T=t(m);T!==null&&!(T.expirationTime>W&&M());){var Fe=T.callback;if(typeof Fe=="function"){T.callback=null,S=T.priorityLevel;var N=Fe(T.expirationTime<=W);if(W=i.unstable_now(),typeof N=="function"){T.callback=N,pe(W),he=!0;break t}T===t(m)&&r(m),pe(W)}else r(m);T=t(m)}if(T!==null)he=!0;else{var ne=t(g);ne!==null&&dt(ue,ne.startTime-W),he=!1}}break e}finally{T=null,S=ve,D=!1}he=void 0}}finally{he?B():le=!1}}}var B;if(typeof te=="function")B=function(){te(k)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Qt=C.port2;C.port1.onmessage=k,B=function(){Qt.postMessage(null)}}else B=function(){Y(k,0)};function dt(W,he){x=Y(function(){W(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(W){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var ve=S;S=he;try{return W()}finally{S=ve}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(W,he){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ve=S;S=W;try{return he()}finally{S=ve}},i.unstable_scheduleCallback=function(W,he,ve){var Fe=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Fe+ve:Fe):ve=Fe,W){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ve+N,W={id:_++,callback:he,priorityLevel:W,startTime:ve,expirationTime:N,sortIndex:-1},ve>Fe?(W.sortIndex=ve,e(g,W),t(m)===null&&W===t(g)&&(F?(ie(x),x=-1):F=!0,dt(ue,ve-Fe))):(W.sortIndex=N,e(m,W),P||D||(P=!0,le||(le=!0,B()))),W},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(W){var he=S;return function(){var ve=S;S=he;try{return W.apply(this,arguments)}finally{S=ve}}}}(tg)),tg}var YT;function MR(){return YT||(YT=1,eg.exports=OR()),eg.exports}var ng={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function PR(){if(XT)return rn;XT=1;var i=oy();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:g,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},rn.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},rn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},rn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},rn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:D}):_==="script"&&r.d.X(m,{crossOrigin:T,integrity:S,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},rn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},rn.requestFormReset=function(m){r.d.r(m)},rn.unstable_batchedUpdates=function(m,g){return m(g)},rn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.1.0",rn}var WT;function dS(){if(WT)return ng.exports;WT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ng.exports=PR(),ng.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function kR(){if(JT)return Bu;JT=1;var i=MR(),e=oy(),t=dS();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function m(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),n;if(p===u)return d(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=p;break}if(A===u){E=!0,u=f,o=p;break}A=A.sibling}if(!E){for(A=p.child;A;){if(A===o){E=!0,o=p,u=f;break}if(A===u){E=!0,u=p,o=f;break}A=A.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),te=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Qt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case U:return"Profiler";case F:return"StrictMode";case ue:return"Suspense";case le:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case te:return(n.displayName||"Context")+".Provider";case ie:return(n._context.displayName||"Context")+".Consumer";case pe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return s=n.displayName||null,s!==null?s:Qt(n.type)||"Memo";case b:s=n._payload,n=n._init;try{return Qt(n(s))}catch{}}return null}var dt=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Fe=[],N=-1;function ne(n){return{current:n}}function fe(n){0>N||(n.current=Fe[N],Fe[N]=null,N--)}function se(n,s){N++,Fe[N]=n.current,n.current=s}var Te=ne(null),Ve=ne(null),Ie=ne(null),Ut=ne(null);function it(n,s){switch(se(Ie,s),se(Ve,n),se(Te,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?_T(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=_T(s),n=vT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}fe(Te),se(Te,n)}function dr(){fe(Te),fe(Ve),fe(Ie)}function Ni(n){n.memoizedState!==null&&se(Ut,n);var s=Te.current,o=vT(s,n.type);s!==o&&(se(Ve,n),se(Te,o))}function zr(n){Ve.current===n&&(fe(Te),fe(Ve)),Ut.current===n&&(fe(Ut),Ou._currentValue=ve)}var Os=Object.prototype.hasOwnProperty,Ms=i.unstable_scheduleCallback,Ps=i.unstable_cancelCallback,Dl=i.unstable_shouldYield,Fc=i.unstable_requestPaint,Un=i.unstable_now,Wd=i.unstable_getCurrentPriorityLevel,Nl=i.unstable_ImmediatePriority,Ka=i.unstable_UserBlockingPriority,ks=i.unstable_NormalPriority,Jd=i.unstable_LowPriority,Qa=i.unstable_IdlePriority,Vl=i.log,Gc=i.unstable_setDisableYieldValue,mt=null,$e=null;function wn(n){if(typeof Vl=="function"&&Gc(n),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(mt,n)}catch{}}var tn=Math.clz32?Math.clz32:Ls,Kc=Math.log,Zd=Math.LN2;function Ls(n){return n>>>=0,n===0?32:31-(Kc(n)/Zd|0)|0}var Us=256,Bs=4194304;function tr(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function $a(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?f=tr(u):(E&=A,E!==0?f=tr(E):o||(o=A&~n,o!==0&&(f=tr(o))))):(A=u&~p,A!==0?f=tr(A):E!==0?f=tr(E):o||(o=u&~n,o!==0&&(f=tr(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function zs(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Ol(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ml(){var n=Us;return Us<<=1,(Us&4194048)===0&&(Us=256),n}function Pl(){var n=Bs;return Bs<<=1,(Bs&62914560)===0&&(Bs=4194304),n}function jr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function qr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function kl(n,s,o,u,f,p){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,I=n.expirationTimes,H=n.hiddenUpdates;for(o=E&~o;0<o;){var J=31-tn(o),ee=1<<J;A[J]=0,I[J]=-1;var G=H[J];if(G!==null)for(H[J]=null,J=0;J<G.length;J++){var K=G[J];K!==null&&(K.lane&=-536870913)}o&=~ee}u!==0&&mr(n,u,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~s))}function mr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-tn(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Ll(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-tn(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Vi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ya(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Oi(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:UT(n.type))}function Qc(n,s){var o=he.p;try{return he.p=n,s()}finally{he.p=o}}var ot=Math.random().toString(36).slice(2),Nt="__reactFiber$"+ot,bt="__reactProps$"+ot,Bn="__reactContainer$"+ot,Ul="__reactEvents$"+ot,em="__reactListeners$"+ot,Mi="__reactHandles$"+ot,$c="__reactResources$"+ot,js="__reactMarker$"+ot;function Pi(n){delete n[Nt],delete n[bt],delete n[Ul],delete n[em],delete n[Mi]}function Hr(n){var s=n[Nt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Bn]||o[Nt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=ST(n);n!==null;){if(o=n[Nt])return o;n=ST(n)}return s}n=o,o=n.parentNode}return null}function pr(n){if(n=n[Nt]||n[Bn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function gr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function hn(n){var s=n[$c];return s||(s=n[$c]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function _t(n){n[js]=!0}var Bl=new Set,Xa={};function nr(n,s){Fr(n,s),Fr(n+"Capture",s)}function Fr(n,s){for(Xa[n]=s,n=0;n<s.length;n++)Bl.add(s[n])}var Yc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xc={},qs={};function Wc(n){return Os.call(qs,n)?!0:Os.call(Xc,n)?!1:Yc.test(n)?qs[n]=!0:(Xc[n]=!0,!1)}function ki(n,s,o){if(Wc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function yr(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function $t(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}var Hs,Jc;function Gr(n){if(Hs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Hs=s&&s[1]||"",Jc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hs+n+Jc}var Wa=!1;function Ja(n,s){if(!n||Wa)return"";Wa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var G=K}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(K){G=K}n.call(ee.prototype)}}else{try{throw Error()}catch(K){G=K}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],A=p[1];if(E&&A){var I=E.split(`
`),H=A.split(`
`);for(f=u=0;u<I.length&&!I[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===I.length||f===H.length)for(u=I.length-1,f=H.length-1;1<=u&&0<=f&&I[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(I[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||I[u]!==H[f]){var J=`
`+I[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=f);break}}}finally{Wa=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Gr(o):""}function zl(n){switch(n.tag){case 26:case 27:case 5:return Gr(n.type);case 16:return Gr("Lazy");case 13:return Gr("Suspense");case 19:return Gr("SuspenseList");case 0:case 15:return Ja(n.type,!1);case 11:return Ja(n.type.render,!1);case 1:return Ja(n.type,!0);case 31:return Gr("Activity");default:return""}}function Za(n){try{var s="";do s+=zl(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function fn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jl(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function tm(n){var s=jl(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function eo(n){n._valueTracker||(n._valueTracker=tm(n))}function ql(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=jl(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Fs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var nm=/[\n"\\]/g;function It(n){return n.replace(nm,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function bn(n,s,o,u,f,p,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+fn(s)):n.value!==""+fn(s)&&(n.value=""+fn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Li(n,E,fn(s)):o!=null?Li(n,E,fn(o)):u!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+fn(A):n.removeAttribute("name")}function Gs(n,s,o,u,f,p,E,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+fn(o):"",s=s!=null?""+fn(s):o,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Li(n,s,o){s==="number"&&Fs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Kr(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+fn(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Ze(n,s,o){if(s!=null&&(s=""+fn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+fn(o):""}function Ks(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(dt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=fn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function zn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zc(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||Qs.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Hl(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Zc(n,f,u)}else for(var p in s)s.hasOwnProperty(p)&&Zc(n,p,s[p])}function Fl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),im=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(n){return im.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Qr=null;function jn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $r=null,Yr=null;function Gl(n){var s=pr(n);if(s&&(n=s.stateNode)){var o=n[bt]||null;e:switch(n=s.stateNode,s.type){case"input":if(bn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+It(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[bt]||null;if(!f)throw Error(r(90));bn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&ql(u)}break e;case"textarea":Ze(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Kr(n,!!o.multiple,s,!1)}}}var _r=!1;function eh(n,s,o){if(_r)return n(s,o);_r=!0;try{var u=n(s);return u}finally{if(_r=!1,($r!==null||Yr!==null)&&(Qh(),$r&&(s=$r,n=Yr,Yr=$r=null,Gl(s),n)))for(s=0;s<n.length;s++)Gl(n[s])}}function $s(n,s){var o=n.stateNode;if(o===null)return null;var u=o[bt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qn=!1;if(rr)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{qn=!1}var vr=null,Ui=null,Xr=null;function Kl(){if(Xr)return Xr;var n,s=Ui,o=s.length,u,f="value"in vr?vr.value:vr.textContent,p=f.length;for(n=0;n<o&&s[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&s[o-u]===f[p-u];u++);return Xr=f.slice(n,1<u?1-u:void 0)}function Er(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Tr(){return!0}function Ql(){return!1}function Bt(n){function s(o,u,f,p,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Tr:Ql,this.isPropagationStopped=Ql,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),s}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Bt(Qe),Xs=_({},Qe,{view:0,detail:0}),th=Bt(Xs),ro,io,Ar,Ws=_({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ea,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ar&&(Ar&&n.type==="mousemove"?(ro=n.screenX-Ar.screenX,io=n.screenY-Ar.screenY):io=ro=0,Ar=n),ro)},movementY:function(n){return"movementY"in n?n.movementY:io}}),Hn=Bt(Ws),nh=_({},Ws,{dataTransfer:0}),sm=Bt(nh),Js=_({},Xs,{relatedTarget:0}),so=Bt(Js),$l=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ao=Bt($l),rh=_({},Qe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oo=Bt(rh),am=_({},Qe,{data:0}),Yl=Bt(am),Zs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=sh[n])?!!s[n]:!1}function ea(){return Xl}var ah=_({},Xs,{key:function(n){if(n.key){var s=Zs[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Er(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ih[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ea,charCode:function(n){return n.type==="keypress"?Er(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Er(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),lo=Bt(ah),oh=_({},Ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wl=Bt(oh),Wr=_({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ea}),lh=Bt(Wr),uh=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),ch=Bt(uh),hh=_({},Ws,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),uo=Bt(hh),dn=_({},Qe,{newState:0,oldState:0}),fh=Bt(dn),dh=[9,13,27,32],Sr=rr&&"CompositionEvent"in window,h=null;rr&&"documentMode"in document&&(h=document.documentMode);var y=rr&&"TextEvent"in window&&!h,v=rr&&(!Sr||h&&8<h&&11>=h),w=" ",z=!1;function $(n,s){switch(n){case"keyup":return dh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ue=!1;function Vt(n,s){switch(n){case"compositionend":return oe(s);case"keypress":return s.which!==32?null:(z=!0,w);case"textInput":return n=s.data,n===w&&z?null:n;default:return null}}function Be(n,s){if(Ue)return n==="compositionend"||!Sr&&$(n,s)?(n=Kl(),Xr=Ui=vr=null,Ue=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!zt[n.type]:s==="textarea"}function Jr(n,s,o,u){$r?Yr?Yr.push(u):Yr=[u]:$r=u,s=Zh(s,"onChange"),0<s.length&&(o=new no("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Yt=null,wr=null;function Jl(n){dT(n,0)}function mh(n){var s=gr(n);if(ql(s))return n}function M_(n,s){if(n==="change")return s}var P_=!1;if(rr){var om;if(rr){var lm="oninput"in document;if(!lm){var k_=document.createElement("div");k_.setAttribute("oninput","return;"),lm=typeof k_.oninput=="function"}om=lm}else om=!1;P_=om&&(!document.documentMode||9<document.documentMode)}function L_(){Yt&&(Yt.detachEvent("onpropertychange",U_),wr=Yt=null)}function U_(n){if(n.propertyName==="value"&&mh(wr)){var s=[];Jr(s,wr,n,jn(n)),eh(Jl,s)}}function sI(n,s,o){n==="focusin"?(L_(),Yt=s,wr=o,Yt.attachEvent("onpropertychange",U_)):n==="focusout"&&L_()}function aI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return mh(wr)}function oI(n,s){if(n==="click")return mh(s)}function lI(n,s){if(n==="input"||n==="change")return mh(s)}function uI(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var In=typeof Object.is=="function"?Object.is:uI;function Zl(n,s){if(In(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Os.call(s,f)||!In(n[f],s[f]))return!1}return!0}function B_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function z_(n,s){var o=B_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=B_(o)}}function j_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?j_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function q_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Fs(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Fs(n.document)}return s}function um(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var cI=rr&&"documentMode"in document&&11>=document.documentMode,co=null,cm=null,eu=null,hm=!1;function H_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;hm||co==null||co!==Fs(u)||(u=co,"selectionStart"in u&&um(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),eu&&Zl(eu,u)||(eu=u,u=Zh(cm,"onSelect"),0<u.length&&(s=new no("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=co)))}function ta(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var ho={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},fm={},F_={};rr&&(F_=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function na(n){if(fm[n])return fm[n];if(!ho[n])return n;var s=ho[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in F_)return fm[n]=s[o];return n}var G_=na("animationend"),K_=na("animationiteration"),Q_=na("animationstart"),hI=na("transitionrun"),fI=na("transitionstart"),dI=na("transitioncancel"),$_=na("transitionend"),Y_=new Map,dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dm.push("scrollEnd");function ir(n,s){Y_.set(n,s),nr(s,[n])}var X_=new WeakMap;function Fn(n,s){if(typeof n=="object"&&n!==null){var o=X_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Za(s)},X_.set(n,s),s)}return{value:n,source:s,stack:Za(s)}}var Gn=[],fo=0,mm=0;function ph(){for(var n=fo,s=mm=fo=0;s<n;){var o=Gn[s];Gn[s++]=null;var u=Gn[s];Gn[s++]=null;var f=Gn[s];Gn[s++]=null;var p=Gn[s];if(Gn[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}p!==0&&W_(o,f,p)}}function gh(n,s,o,u){Gn[fo++]=n,Gn[fo++]=s,Gn[fo++]=o,Gn[fo++]=u,mm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function pm(n,s,o,u){return gh(n,s,o,u),yh(n)}function mo(n,s){return gh(n,null,null,s),yh(n)}function W_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&s!==null&&(f=31-tn(o),n=p.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function yh(n){if(50<bu)throw bu=0,Tp=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var po={};function mI(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,s,o,u){return new mI(n,s,o,u)}function gm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Zr(n,s){var o=n.alternate;return o===null?(o=Rn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function J_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function _h(n,s,o,u,f,p){var E=0;if(u=n,typeof n=="function")gm(n)&&(E=1);else if(typeof n=="string")E=gR(n,o,Te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=Rn(31,o,s,f),n.elementType=R,n.lanes=p,n;case P:return ra(o.children,f,p,s);case F:E=8,f|=24;break;case U:return n=Rn(12,o,s,f|2),n.elementType=U,n.lanes=p,n;case ue:return n=Rn(13,o,s,f),n.elementType=ue,n.lanes=p,n;case le:return n=Rn(19,o,s,f),n.elementType=le,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:case te:E=10;break e;case ie:E=9;break e;case pe:E=11;break e;case x:E=14;break e;case b:E=16,u=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=Rn(E,o,s,f),s.elementType=n,s.type=u,s.lanes=p,s}function ra(n,s,o,u){return n=Rn(7,n,u,s),n.lanes=o,n}function ym(n,s,o){return n=Rn(6,n,null,s),n.lanes=o,n}function _m(n,s,o){return s=Rn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var go=[],yo=0,vh=null,Eh=0,Kn=[],Qn=0,ia=null,ei=1,ti="";function sa(n,s){go[yo++]=Eh,go[yo++]=vh,vh=n,Eh=s}function Z_(n,s,o){Kn[Qn++]=ei,Kn[Qn++]=ti,Kn[Qn++]=ia,ia=n;var u=ei;n=ti;var f=32-tn(u)-1;u&=~(1<<f),o+=1;var p=32-tn(s)+f;if(30<p){var E=f-f%5;p=(u&(1<<E)-1).toString(32),u>>=E,f-=E,ei=1<<32-tn(s)+f|o<<f|u,ti=p+n}else ei=1<<p|o<<f|u,ti=n}function vm(n){n.return!==null&&(sa(n,1),Z_(n,1,0))}function Em(n){for(;n===vh;)vh=go[--yo],go[yo]=null,Eh=go[--yo],go[yo]=null;for(;n===ia;)ia=Kn[--Qn],Kn[Qn]=null,ti=Kn[--Qn],Kn[Qn]=null,ei=Kn[--Qn],Kn[Qn]=null}var mn=null,pt=null,Ge=!1,aa=null,br=!1,Tm=Error(r(519));function oa(n){var s=Error(r(418,""));throw ru(Fn(s,n)),Tm}function ev(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Nt]=n,s[bt]=u,o){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(o=0;o<Ru.length;o++)Pe(Ru[o],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),Gs(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),eo(s);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),Ks(s,u.value,u.defaultValue,u.children),eo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||yT(s.textContent,o)?(u.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),u.onScroll!=null&&Pe("scroll",s),u.onScrollEnd!=null&&Pe("scrollend",s),u.onClick!=null&&(s.onclick=ef),s=!0):s=!1,s||oa(n)}function tv(n){for(mn=n.return;mn;)switch(mn.tag){case 5:case 13:br=!1;return;case 27:case 3:br=!0;return;default:mn=mn.return}}function tu(n){if(n!==mn)return!1;if(!Ge)return tv(n),Ge=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Lp(n.type,n.memoizedProps)),o=!o),o&&pt&&oa(n),tv(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){pt=ar(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}pt=null}}else s===27?(s=pt,es(n.type)?(n=jp,jp=null,pt=n):pt=s):pt=mn?ar(n.stateNode.nextSibling):null;return!0}function nu(){pt=mn=null,Ge=!1}function nv(){var n=aa;return n!==null&&(En===null?En=n:En.push.apply(En,n),aa=null),n}function ru(n){aa===null?aa=[n]:aa.push(n)}var Am=ne(null),la=null,ni=null;function Bi(n,s,o){se(Am,s._currentValue),s._currentValue=o}function ri(n){n._currentValue=Am.current,fe(Am)}function Sm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function wm(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var I=0;I<s.length;I++)if(A.context===s[I]){p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),Sm(p.return,o,n),u||(E=null);break e}p=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),Sm(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function iu(n,s,o,u){n=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=f.type;In(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===Ut.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Ou):n=[Ou])}f=f.return}n!==null&&wm(s,n,o,u),s.flags|=262144}function Th(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ua(n){la=n,ni=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return rv(la,n)}function Ah(n,s){return la===null&&ua(n),rv(n,s)}function rv(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ni===null){if(n===null)throw Error(r(308));ni=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ni=ni.next=s;return o}var pI=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},gI=i.unstable_scheduleCallback,yI=i.unstable_NormalPriority,Mt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bm(){return{controller:new pI,data:new Map,refCount:0}}function su(n){n.refCount--,n.refCount===0&&gI(yI,function(){n.controller.abort()})}var au=null,Im=0,_o=0,vo=null;function _I(n,s){if(au===null){var o=au=[];Im=0,_o=Cp(),vo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Im++,s.then(iv,iv),s}function iv(){if(--Im===0&&au!==null){vo!==null&&(vo.status="fulfilled");var n=au;au=null,_o=0,vo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function vI(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var sv=W.S;W.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&_I(n,s),sv!==null&&sv(n,s)};var ca=ne(null);function Rm(){var n=ca.current;return n!==null?n:st.pooledCache}function Sh(n,s){s===null?se(ca,ca.current):se(ca,s.pool)}function av(){var n=Rm();return n===null?null:{parent:Mt._currentValue,pool:n}}var ou=Error(r(460)),ov=Error(r(474)),wh=Error(r(542)),Cm={then:function(){}};function lv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function bh(){}function uv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(bh,bh),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,hv(n),n;default:if(typeof s.status=="string")s.then(bh,bh);else{if(n=st,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,hv(n),n}throw lu=s,ou}}var lu=null;function cv(){if(lu===null)throw Error(r(459));var n=lu;return lu=null,n}function hv(n){if(n===ou||n===wh)throw Error(r(483))}var zi=!1;function xm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ji(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function qi(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=yh(n),W_(n,null,o),s}return gh(n,u,s,o),yh(n)}function uu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Ll(n,o)}}function Nm(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Vm=!1;function cu(){if(Vm){var n=vo;if(n!==null)throw n}}function hu(n,s,o,u){Vm=!1;var f=n.updateQueue;zi=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var I=A,H=I.next;I.next=null,E===null?p=H:E.next=H,E=I;var J=n.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==E&&(A===null?J.firstBaseUpdate=H:A.next=H,J.lastBaseUpdate=I))}if(p!==null){var ee=f.baseState;E=0,J=H=I=null,A=p;do{var G=A.lane&-536870913,K=G!==A.lane;if(K?(ze&G)===G:(u&G)===G){G!==0&&G===_o&&(Vm=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var we=n,Ae=A;G=s;var nt=o;switch(Ae.tag){case 1:if(we=Ae.payload,typeof we=="function"){ee=we.call(nt,ee,G);break e}ee=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ae.payload,G=typeof we=="function"?we.call(nt,ee,G):we,G==null)break e;ee=_({},ee,G);break e;case 2:zi=!0}}G=A.callback,G!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[G]:K.push(G))}else K={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(H=J=K,I=ee):J=J.next=K,E|=G;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;K=A,A=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);J===null&&(I=ee),f.baseState=I,f.firstBaseUpdate=H,f.lastBaseUpdate=J,p===null&&(f.shared.lanes=0),Xi|=E,n.lanes=E,n.memoizedState=ee}}function fv(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function dv(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)fv(o[n],s)}var Eo=ne(null),Ih=ne(0);function mv(n,s){n=ci,se(Ih,n),se(Eo,s),ci=n|s.baseLanes}function Om(){se(Ih,ci),se(Eo,Eo.current)}function Mm(){ci=Ih.current,fe(Eo),fe(Ih)}var Hi=0,xe=null,et=null,Rt=null,Rh=!1,To=!1,ha=!1,Ch=0,fu=0,Ao=null,EI=0;function vt(){throw Error(r(321))}function Pm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!In(n[o],s[o]))return!1;return!0}function km(n,s,o,u,f,p){return Hi=p,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=n===null||n.memoizedState===null?Wv:Jv,ha=!1,p=o(u,f),ha=!1,To&&(p=gv(s,o,u,f)),pv(n),p}function pv(n){W.H=Mh;var s=et!==null&&et.next!==null;if(Hi=0,Rt=et=xe=null,Rh=!1,fu=0,Ao=null,s)throw Error(r(300));n===null||jt||(n=n.dependencies,n!==null&&Th(n)&&(jt=!0))}function gv(n,s,o,u){xe=n;var f=0;do{if(To&&(Ao=null),fu=0,To=!1,25<=f)throw Error(r(301));if(f+=1,Rt=et=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}W.H=RI,p=s(o,u)}while(To);return p}function TI(){var n=W.H,s=n.useState()[0];return s=typeof s.then=="function"?du(s):s,n=n.useState()[0],(et!==null?et.memoizedState:null)!==n&&(xe.flags|=1024),s}function Lm(){var n=Ch!==0;return Ch=0,n}function Um(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Bm(n){if(Rh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Rh=!1}Hi=0,Rt=et=xe=null,To=!1,fu=Ch=0,Ao=null}function _n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?xe.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function Ct(){if(et===null){var n=xe.alternate;n=n!==null?n.memoizedState:null}else n=et.next;var s=Rt===null?xe.memoizedState:Rt.next;if(s!==null)Rt=s,et=n;else{if(n===null)throw xe.alternate===null?Error(r(467)):Error(r(310));et=n,n={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Rt===null?xe.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function zm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(n){var s=fu;return fu+=1,Ao===null&&(Ao=[]),n=uv(Ao,n,s),s=xe,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?Wv:Jv),n}function xh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return du(n);if(n.$$typeof===te)return nn(n)}throw Error(r(438,String(n)))}function jm(n){var s=null,o=xe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=zm(),xe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=M;return s.index++,o}function ii(n,s){return typeof s=="function"?s(n):s}function Dh(n){var s=Ct();return qm(s,et,n)}function qm(n,s,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,p=u.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}s.baseQueue=f=p,u.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{s=f.next;var A=E=null,I=null,H=s,J=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?(ze&ee)===ee:(Hi&ee)===ee){var G=H.revertLane;if(G===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===_o&&(J=!0);else if((Hi&G)===G){H=H.next,G===_o&&(J=!0);continue}else ee={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(A=I=ee,E=p):I=I.next=ee,xe.lanes|=G,Xi|=G;ee=H.action,ha&&o(p,ee),p=H.hasEagerState?H.eagerState:o(p,ee)}else G={lane:ee,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(A=I=G,E=p):I=I.next=G,xe.lanes|=ee,Xi|=ee;H=H.next}while(H!==null&&H!==s);if(I===null?E=p:I.next=A,!In(p,n.memoizedState)&&(jt=!0,J&&(o=vo,o!==null)))throw o;n.memoizedState=p,n.baseState=E,n.baseQueue=I,u.lastRenderedState=p}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Hm(n){var s=Ct(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do p=n(p,E.action),E=E.next;while(E!==f);In(p,s.memoizedState)||(jt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function yv(n,s,o){var u=xe,f=Ct(),p=Ge;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var E=!In((et||f).memoizedState,o);E&&(f.memoizedState=o,jt=!0),f=f.queue;var A=Ev.bind(null,u,f,n);if(mu(2048,8,A,[n]),f.getSnapshot!==s||E||Rt!==null&&Rt.memoizedState.tag&1){if(u.flags|=2048,So(9,Nh(),vv.bind(null,u,f,o,s),null),st===null)throw Error(r(349));p||(Hi&124)!==0||_v(u,s,o)}return o}function _v(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=xe.updateQueue,s===null?(s=zm(),xe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function vv(n,s,o,u){s.value=o,s.getSnapshot=u,Tv(s)&&Av(n)}function Ev(n,s,o){return o(function(){Tv(s)&&Av(n)})}function Tv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!In(n,o)}catch{return!0}}function Av(n){var s=mo(n,2);s!==null&&Vn(s,n,2)}function Fm(n){var s=_n();if(typeof n=="function"){var o=n;if(n=o(),ha){wn(!0);try{o()}finally{wn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:n},s}function Sv(n,s,o,u){return n.baseState=o,qm(n,et,typeof u=="function"?u:ii)}function AI(n,s,o,u,f){if(Oh(n))throw Error(r(485));if(n=s.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};W.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,wv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function wv(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var p=W.T,E={};W.T=E;try{var A=o(f,u),I=W.S;I!==null&&I(E,A),bv(n,s,A)}catch(H){Gm(n,s,H)}finally{W.T=p}}else try{p=o(f,u),bv(n,s,p)}catch(H){Gm(n,s,H)}}function bv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Iv(n,s,u)},function(u){return Gm(n,s,u)}):Iv(n,s,o)}function Iv(n,s,o){s.status="fulfilled",s.value=o,Rv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,wv(n,o)))}function Gm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Rv(s),s=s.next;while(s!==u)}n.action=null}function Rv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Cv(n,s){return s}function xv(n,s){if(Ge){var o=st.formState;if(o!==null){e:{var u=xe;if(Ge){if(pt){t:{for(var f=pt,p=br;f.nodeType!==8;){if(!p){f=null;break t}if(f=ar(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){pt=ar(f.nextSibling),u=f.data==="F!";break e}}oa(u)}u=!1}u&&(s=o[0])}}return o=_n(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cv,lastRenderedState:s},o.queue=u,o=$v.bind(null,xe,u),u.dispatch=o,u=Fm(!1),p=Xm.bind(null,xe,!1,u.queue),u=_n(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=AI.bind(null,xe,f,p,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function Dv(n){var s=Ct();return Nv(s,et,n)}function Nv(n,s,o){if(s=qm(n,s,Cv)[0],n=Dh(ii)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=du(s)}catch(E){throw E===ou?wh:E}else u=s;s=Ct();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(xe.flags|=2048,So(9,Nh(),SI.bind(null,f,o),null)),[u,p,n]}function SI(n,s){n.action=s}function Vv(n){var s=Ct(),o=et;if(o!==null)return Nv(s,o,n);Ct(),s=s.memoizedState,o=Ct();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function So(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=xe.updateQueue,s===null&&(s=zm(),xe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Nh(){return{destroy:void 0,resource:void 0}}function Ov(){return Ct().memoizedState}function Vh(n,s,o,u){var f=_n();u=u===void 0?null:u,xe.flags|=n,f.memoizedState=So(1|s,Nh(),o,u)}function mu(n,s,o,u){var f=Ct();u=u===void 0?null:u;var p=f.memoizedState.inst;et!==null&&u!==null&&Pm(u,et.memoizedState.deps)?f.memoizedState=So(s,p,o,u):(xe.flags|=n,f.memoizedState=So(1|s,p,o,u))}function Mv(n,s){Vh(8390656,8,n,s)}function Pv(n,s){mu(2048,8,n,s)}function kv(n,s){return mu(4,2,n,s)}function Lv(n,s){return mu(4,4,n,s)}function Uv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Bv(n,s,o){o=o!=null?o.concat([n]):null,mu(4,4,Uv.bind(null,s,n),o)}function Km(){}function zv(n,s){var o=Ct();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Pm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function jv(n,s){var o=Ct();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Pm(s,u[1]))return u[0];if(u=n(),ha){wn(!0);try{n()}finally{wn(!1)}}return o.memoizedState=[u,s],u}function Qm(n,s,o){return o===void 0||(Hi&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=FE(),xe.lanes|=n,Xi|=n,o)}function qv(n,s,o,u){return In(o,s)?o:Eo.current!==null?(n=Qm(n,o,u),In(n,s)||(jt=!0),n):(Hi&42)===0?(jt=!0,n.memoizedState=o):(n=FE(),xe.lanes|=n,Xi|=n,s)}function Hv(n,s,o,u,f){var p=he.p;he.p=p!==0&&8>p?p:8;var E=W.T,A={};W.T=A,Xm(n,!1,s,o);try{var I=f(),H=W.S;if(H!==null&&H(A,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var J=vI(I,u);pu(n,s,J,Nn(n))}else pu(n,s,u,Nn(n))}catch(ee){pu(n,s,{then:function(){},status:"rejected",reason:ee},Nn())}finally{he.p=p,W.T=E}}function wI(){}function $m(n,s,o,u){if(n.tag!==5)throw Error(r(476));var f=Fv(n).queue;Hv(n,f,s,ve,o===null?wI:function(){return Gv(n),o(u)})}function Fv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:ve},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Gv(n){var s=Fv(n).next.queue;pu(n,s,{},Nn())}function Ym(){return nn(Ou)}function Kv(){return Ct().memoizedState}function Qv(){return Ct().memoizedState}function bI(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Nn();n=ji(o);var u=qi(s,n,o);u!==null&&(Vn(u,s,o),uu(u,s,o)),s={cache:bm()},n.payload=s;return}s=s.return}}function II(n,s,o){var u=Nn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Oh(n)?Yv(s,o):(o=pm(n,s,o,u),o!==null&&(Vn(o,n,u),Xv(o,s,u)))}function $v(n,s,o){var u=Nn();pu(n,s,o,u)}function pu(n,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Oh(n))Yv(s,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,A=p(E,o);if(f.hasEagerState=!0,f.eagerState=A,In(A,E))return gh(n,s,f,0),st===null&&ph(),!1}catch{}finally{}if(o=pm(n,s,f,u),o!==null)return Vn(o,n,u),Xv(o,s,u),!0}return!1}function Xm(n,s,o,u){if(u={lane:2,revertLane:Cp(),action:u,hasEagerState:!1,eagerState:null,next:null},Oh(n)){if(s)throw Error(r(479))}else s=pm(n,o,u,2),s!==null&&Vn(s,n,2)}function Oh(n){var s=n.alternate;return n===xe||s!==null&&s===xe}function Yv(n,s){To=Rh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Xv(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Ll(n,o)}}var Mh={readContext:nn,use:xh,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt},Wv={readContext:nn,use:xh,useCallback:function(n,s){return _n().memoizedState=[n,s===void 0?null:s],n},useContext:nn,useEffect:Mv,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Vh(4194308,4,Uv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Vh(4194308,4,n,s)},useInsertionEffect:function(n,s){Vh(4,2,n,s)},useMemo:function(n,s){var o=_n();s=s===void 0?null:s;var u=n();if(ha){wn(!0);try{n()}finally{wn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=_n();if(o!==void 0){var f=o(s);if(ha){wn(!0);try{o(s)}finally{wn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=II.bind(null,xe,n),[u.memoizedState,n]},useRef:function(n){var s=_n();return n={current:n},s.memoizedState=n},useState:function(n){n=Fm(n);var s=n.queue,o=$v.bind(null,xe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Km,useDeferredValue:function(n,s){var o=_n();return Qm(o,n,s)},useTransition:function(){var n=Fm(!1);return n=Hv.bind(null,xe,n.queue,!0,!1),_n().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=xe,f=_n();if(Ge){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),st===null)throw Error(r(349));(ze&124)!==0||_v(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,Mv(Ev.bind(null,u,p,n),[n]),u.flags|=2048,So(9,Nh(),vv.bind(null,u,p,o,s),null),o},useId:function(){var n=_n(),s=st.identifierPrefix;if(Ge){var o=ti,u=ei;o=(u&~(1<<32-tn(u)-1)).toString(32)+o,s=""+s+"R"+o,o=Ch++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=EI++,s=""+s+"r"+o.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:Ym,useFormState:xv,useActionState:xv,useOptimistic:function(n){var s=_n();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Xm.bind(null,xe,!0,o),o.dispatch=s,[n,s]},useMemoCache:jm,useCacheRefresh:function(){return _n().memoizedState=bI.bind(null,xe)}},Jv={readContext:nn,use:xh,useCallback:zv,useContext:nn,useEffect:Pv,useImperativeHandle:Bv,useInsertionEffect:kv,useLayoutEffect:Lv,useMemo:jv,useReducer:Dh,useRef:Ov,useState:function(){return Dh(ii)},useDebugValue:Km,useDeferredValue:function(n,s){var o=Ct();return qv(o,et.memoizedState,n,s)},useTransition:function(){var n=Dh(ii)[0],s=Ct().memoizedState;return[typeof n=="boolean"?n:du(n),s]},useSyncExternalStore:yv,useId:Kv,useHostTransitionStatus:Ym,useFormState:Dv,useActionState:Dv,useOptimistic:function(n,s){var o=Ct();return Sv(o,et,n,s)},useMemoCache:jm,useCacheRefresh:Qv},RI={readContext:nn,use:xh,useCallback:zv,useContext:nn,useEffect:Pv,useImperativeHandle:Bv,useInsertionEffect:kv,useLayoutEffect:Lv,useMemo:jv,useReducer:Hm,useRef:Ov,useState:function(){return Hm(ii)},useDebugValue:Km,useDeferredValue:function(n,s){var o=Ct();return et===null?Qm(o,n,s):qv(o,et.memoizedState,n,s)},useTransition:function(){var n=Hm(ii)[0],s=Ct().memoizedState;return[typeof n=="boolean"?n:du(n),s]},useSyncExternalStore:yv,useId:Kv,useHostTransitionStatus:Ym,useFormState:Vv,useActionState:Vv,useOptimistic:function(n,s){var o=Ct();return et!==null?Sv(o,et,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:jm,useCacheRefresh:Qv},wo=null,gu=0;function Ph(n){var s=gu;return gu+=1,wo===null&&(wo=[]),uv(wo,n,s)}function yu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function kh(n,s){throw s.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Zv(n){var s=n._init;return s(n._payload)}function eE(n){function s(L,V){if(n){var q=L.deletions;q===null?(L.deletions=[V],L.flags|=16):q.push(V)}}function o(L,V){if(!n)return null;for(;V!==null;)s(L,V),V=V.sibling;return null}function u(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function f(L,V){return L=Zr(L,V),L.index=0,L.sibling=null,L}function p(L,V,q){return L.index=q,n?(q=L.alternate,q!==null?(q=q.index,q<V?(L.flags|=67108866,V):q):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function E(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function A(L,V,q,Z){return V===null||V.tag!==6?(V=ym(q,L.mode,Z),V.return=L,V):(V=f(V,q),V.return=L,V)}function I(L,V,q,Z){var me=q.type;return me===P?J(L,V,q.props.children,Z,q.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===b&&Zv(me)===V.type)?(V=f(V,q.props),yu(V,q),V.return=L,V):(V=_h(q.type,q.key,q.props,null,L.mode,Z),yu(V,q),V.return=L,V)}function H(L,V,q,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=_m(q,L.mode,Z),V.return=L,V):(V=f(V,q.children||[]),V.return=L,V)}function J(L,V,q,Z,me){return V===null||V.tag!==7?(V=ra(q,L.mode,Z,me),V.return=L,V):(V=f(V,q),V.return=L,V)}function ee(L,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=ym(""+V,L.mode,q),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return q=_h(V.type,V.key,V.props,null,L.mode,q),yu(q,V),q.return=L,q;case D:return V=_m(V,L.mode,q),V.return=L,V;case b:var Z=V._init;return V=Z(V._payload),ee(L,V,q)}if(dt(V)||B(V))return V=ra(V,L.mode,q,null),V.return=L,V;if(typeof V.then=="function")return ee(L,Ph(V),q);if(V.$$typeof===te)return ee(L,Ah(L,V),q);kh(L,V)}return null}function G(L,V,q,Z){var me=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return me!==null?null:A(L,V,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===me?I(L,V,q,Z):null;case D:return q.key===me?H(L,V,q,Z):null;case b:return me=q._init,q=me(q._payload),G(L,V,q,Z)}if(dt(q)||B(q))return me!==null?null:J(L,V,q,Z,null);if(typeof q.then=="function")return G(L,V,Ph(q),Z);if(q.$$typeof===te)return G(L,V,Ah(L,q),Z);kh(L,q)}return null}function K(L,V,q,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(q)||null,A(V,L,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return L=L.get(Z.key===null?q:Z.key)||null,I(V,L,Z,me);case D:return L=L.get(Z.key===null?q:Z.key)||null,H(V,L,Z,me);case b:var Oe=Z._init;return Z=Oe(Z._payload),K(L,V,q,Z,me)}if(dt(Z)||B(Z))return L=L.get(q)||null,J(V,L,Z,me,null);if(typeof Z.then=="function")return K(L,V,q,Ph(Z),me);if(Z.$$typeof===te)return K(L,V,q,Ah(V,Z),me);kh(V,Z)}return null}function we(L,V,q,Z){for(var me=null,Oe=null,_e=V,Se=V=0,Ht=null;_e!==null&&Se<q.length;Se++){_e.index>Se?(Ht=_e,_e=null):Ht=_e.sibling;var He=G(L,_e,q[Se],Z);if(He===null){_e===null&&(_e=Ht);break}n&&_e&&He.alternate===null&&s(L,_e),V=p(He,V,Se),Oe===null?me=He:Oe.sibling=He,Oe=He,_e=Ht}if(Se===q.length)return o(L,_e),Ge&&sa(L,Se),me;if(_e===null){for(;Se<q.length;Se++)_e=ee(L,q[Se],Z),_e!==null&&(V=p(_e,V,Se),Oe===null?me=_e:Oe.sibling=_e,Oe=_e);return Ge&&sa(L,Se),me}for(_e=u(_e);Se<q.length;Se++)Ht=K(_e,L,Se,q[Se],Z),Ht!==null&&(n&&Ht.alternate!==null&&_e.delete(Ht.key===null?Se:Ht.key),V=p(Ht,V,Se),Oe===null?me=Ht:Oe.sibling=Ht,Oe=Ht);return n&&_e.forEach(function(ss){return s(L,ss)}),Ge&&sa(L,Se),me}function Ae(L,V,q,Z){if(q==null)throw Error(r(151));for(var me=null,Oe=null,_e=V,Se=V=0,Ht=null,He=q.next();_e!==null&&!He.done;Se++,He=q.next()){_e.index>Se?(Ht=_e,_e=null):Ht=_e.sibling;var ss=G(L,_e,He.value,Z);if(ss===null){_e===null&&(_e=Ht);break}n&&_e&&ss.alternate===null&&s(L,_e),V=p(ss,V,Se),Oe===null?me=ss:Oe.sibling=ss,Oe=ss,_e=Ht}if(He.done)return o(L,_e),Ge&&sa(L,Se),me;if(_e===null){for(;!He.done;Se++,He=q.next())He=ee(L,He.value,Z),He!==null&&(V=p(He,V,Se),Oe===null?me=He:Oe.sibling=He,Oe=He);return Ge&&sa(L,Se),me}for(_e=u(_e);!He.done;Se++,He=q.next())He=K(_e,L,Se,He.value,Z),He!==null&&(n&&He.alternate!==null&&_e.delete(He.key===null?Se:He.key),V=p(He,V,Se),Oe===null?me=He:Oe.sibling=He,Oe=He);return n&&_e.forEach(function(CR){return s(L,CR)}),Ge&&sa(L,Se),me}function nt(L,V,q,Z){if(typeof q=="object"&&q!==null&&q.type===P&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var me=q.key;V!==null;){if(V.key===me){if(me=q.type,me===P){if(V.tag===7){o(L,V.sibling),Z=f(V,q.props.children),Z.return=L,L=Z;break e}}else if(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===b&&Zv(me)===V.type){o(L,V.sibling),Z=f(V,q.props),yu(Z,q),Z.return=L,L=Z;break e}o(L,V);break}else s(L,V);V=V.sibling}q.type===P?(Z=ra(q.props.children,L.mode,Z,q.key),Z.return=L,L=Z):(Z=_h(q.type,q.key,q.props,null,L.mode,Z),yu(Z,q),Z.return=L,L=Z)}return E(L);case D:e:{for(me=q.key;V!==null;){if(V.key===me)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){o(L,V.sibling),Z=f(V,q.children||[]),Z.return=L,L=Z;break e}else{o(L,V);break}else s(L,V);V=V.sibling}Z=_m(q,L.mode,Z),Z.return=L,L=Z}return E(L);case b:return me=q._init,q=me(q._payload),nt(L,V,q,Z)}if(dt(q))return we(L,V,q,Z);if(B(q)){if(me=B(q),typeof me!="function")throw Error(r(150));return q=me.call(q),Ae(L,V,q,Z)}if(typeof q.then=="function")return nt(L,V,Ph(q),Z);if(q.$$typeof===te)return nt(L,V,Ah(L,q),Z);kh(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(o(L,V.sibling),Z=f(V,q),Z.return=L,L=Z):(o(L,V),Z=ym(q,L.mode,Z),Z.return=L,L=Z),E(L)):o(L,V)}return function(L,V,q,Z){try{gu=0;var me=nt(L,V,q,Z);return wo=null,me}catch(_e){if(_e===ou||_e===wh)throw _e;var Oe=Rn(29,_e,null,L.mode);return Oe.lanes=Z,Oe.return=L,Oe}finally{}}}var bo=eE(!0),tE=eE(!1),$n=ne(null),Ir=null;function Fi(n){var s=n.alternate;se(Pt,Pt.current&1),se($n,n),Ir===null&&(s===null||Eo.current!==null||s.memoizedState!==null)&&(Ir=n)}function nE(n){if(n.tag===22){if(se(Pt,Pt.current),se($n,n),Ir===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Ir=n)}}else Gi()}function Gi(){se(Pt,Pt.current),se($n,$n.current)}function si(n){fe($n),Ir===n&&(Ir=null),fe(Pt)}var Pt=ne(0);function Lh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||zp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Wm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Jm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Nn(),f=ji(u);f.payload=s,o!=null&&(f.callback=o),s=qi(n,f,u),s!==null&&(Vn(s,n,u),uu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Nn(),f=ji(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=qi(n,f,u),s!==null&&(Vn(s,n,u),uu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Nn(),u=ji(o);u.tag=2,s!=null&&(u.callback=s),s=qi(n,u,o),s!==null&&(Vn(s,n,o),uu(s,n,o))}};function rE(n,s,o,u,f,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,E):s.prototype&&s.prototype.isPureReactComponent?!Zl(o,u)||!Zl(f,p):!0}function iE(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Jm.enqueueReplaceState(s,s.state,null)}function fa(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Uh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function sE(n){Uh(n)}function aE(n){console.error(n)}function oE(n){Uh(n)}function Bh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function lE(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Zm(n,s,o){return o=ji(o),o.tag=3,o.payload={element:null},o.callback=function(){Bh(n,s)},o}function uE(n){return n=ji(n),n.tag=3,n}function cE(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;n.payload=function(){return f(p)},n.callback=function(){lE(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){lE(s,o,u),typeof f!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function CI(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&iu(s,o,f,!0),o=$n.current,o!==null){switch(o.tag){case 13:return Ir===null?Sp():o.alternate===null&&gt===0&&(gt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Cm?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),bp(n,u,f)),!1;case 22:return o.flags|=65536,u===Cm?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),bp(n,u,f)),!1}throw Error(r(435,o.tag))}return bp(n,u,f),Sp(),!1}if(Ge)return s=$n.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Tm&&(n=Error(r(422),{cause:u}),ru(Fn(n,o)))):(u!==Tm&&(s=Error(r(423),{cause:u}),ru(Fn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Fn(u,o),f=Zm(n.stateNode,u,f),Nm(n,f),gt!==4&&(gt=2)),!1;var p=Error(r(520),{cause:u});if(p=Fn(p,o),wu===null?wu=[p]:wu.push(p),gt!==4&&(gt=2),s===null)return!0;u=Fn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Zm(o.stateNode,u,n),Nm(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Wi===null||!Wi.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=uE(f),cE(f,n,o,u),Nm(o,f),!1}o=o.return}while(o!==null);return!1}var hE=Error(r(461)),jt=!1;function Xt(n,s,o,u){s.child=n===null?tE(s,null,o,u):bo(s,n.child,o,u)}function fE(n,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return ua(s),u=km(n,s,o,E,p,f),A=Lm(),n!==null&&!jt?(Um(n,s,f),ai(n,s,f)):(Ge&&A&&vm(s),s.flags|=1,Xt(n,s,u,f),s.child)}function dE(n,s,o,u,f){if(n===null){var p=o.type;return typeof p=="function"&&!gm(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,mE(n,s,p,u,f)):(n=_h(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!op(n,f)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:Zl,o(E,u)&&n.ref===s.ref)return ai(n,s,f)}return s.flags|=1,n=Zr(p,u),n.ref=s.ref,n.return=s,s.child=n}function mE(n,s,o,u,f){if(n!==null){var p=n.memoizedProps;if(Zl(p,u)&&n.ref===s.ref)if(jt=!1,s.pendingProps=u=p,op(n,f))(n.flags&131072)!==0&&(jt=!0);else return s.lanes=n.lanes,ai(n,s,f)}return ep(n,s,o,u,f)}function pE(n,s,o){var u=s.pendingProps,f=u.children,p=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,n!==null){for(f=s.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return gE(n,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Sh(s,p!==null?p.cachePool:null),p!==null?mv(s,p):Om(),nE(s);else return s.lanes=s.childLanes=536870912,gE(n,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Sh(s,p.cachePool),mv(s,p),Gi(),s.memoizedState=null):(n!==null&&Sh(s,null),Om(),Gi());return Xt(n,s,f,o),s.child}function gE(n,s,o,u){var f=Rm();return f=f===null?null:{parent:Mt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},n!==null&&Sh(s,null),Om(),nE(s),n!==null&&iu(n,s,u,!0),null}function zh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function ep(n,s,o,u,f){return ua(s),o=km(n,s,o,u,void 0,f),u=Lm(),n!==null&&!jt?(Um(n,s,f),ai(n,s,f)):(Ge&&u&&vm(s),s.flags|=1,Xt(n,s,o,f),s.child)}function yE(n,s,o,u,f,p){return ua(s),s.updateQueue=null,o=gv(s,u,o,f),pv(n),u=Lm(),n!==null&&!jt?(Um(n,s,p),ai(n,s,p)):(Ge&&u&&vm(s),s.flags|=1,Xt(n,s,o,p),s.child)}function _E(n,s,o,u,f){if(ua(s),s.stateNode===null){var p=po,E=o.contextType;typeof E=="object"&&E!==null&&(p=nn(E)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Jm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},xm(s),E=o.contextType,p.context=typeof E=="object"&&E!==null?nn(E):po,p.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Wm(s,o,E,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Jm.enqueueReplaceState(p,p.state,null),hu(s,u,p,f),cu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){p=s.stateNode;var A=s.memoizedProps,I=fa(o,A);p.props=I;var H=p.context,J=o.contextType;E=po,typeof J=="object"&&J!==null&&(E=nn(J));var ee=o.getDerivedStateFromProps;J=typeof ee=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||H!==E)&&iE(s,p,u,E),zi=!1;var G=s.memoizedState;p.state=G,hu(s,u,p,f),cu(),H=s.memoizedState,A||G!==H||zi?(typeof ee=="function"&&(Wm(s,o,ee,u),H=s.memoizedState),(I=zi||rE(s,o,I,u,G,H,E))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),p.props=u,p.state=H,p.context=E,u=I):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Dm(n,s),E=s.memoizedProps,J=fa(o,E),p.props=J,ee=s.pendingProps,G=p.context,H=o.contextType,I=po,typeof H=="object"&&H!==null&&(I=nn(H)),A=o.getDerivedStateFromProps,(H=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==ee||G!==I)&&iE(s,p,u,I),zi=!1,G=s.memoizedState,p.state=G,hu(s,u,p,f),cu();var K=s.memoizedState;E!==ee||G!==K||zi||n!==null&&n.dependencies!==null&&Th(n.dependencies)?(typeof A=="function"&&(Wm(s,o,A,u),K=s.memoizedState),(J=zi||rE(s,o,J,u,G,K,I)||n!==null&&n.dependencies!==null&&Th(n.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,K,I),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,K,I)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=K),p.props=u,p.state=K,p.context=I,u=J):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),u=!1)}return p=u,zh(n,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&u?(s.child=bo(s,n.child,null,f),s.child=bo(s,null,o,f)):Xt(n,s,o,f),s.memoizedState=p.state,n=s.child):n=ai(n,s,f),n}function vE(n,s,o,u){return nu(),s.flags|=256,Xt(n,s,o,u),s.child}var tp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function np(n){return{baseLanes:n,cachePool:av()}}function rp(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Yn),n}function EE(n,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(Pt.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ge){if(f?Fi(s):Gi(),Ge){var A=pt,I;if(I=A){e:{for(I=A,A=br;I.nodeType!==8;){if(!A){A=null;break e}if(I=ar(I.nextSibling),I===null){A=null;break e}}A=I}A!==null?(s.memoizedState={dehydrated:A,treeContext:ia!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},I=Rn(18,null,null,0),I.stateNode=A,I.return=s,s.child=I,mn=s,pt=null,I=!0):I=!1}I||oa(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return zp(A)?s.lanes=32:s.lanes=536870912,null;si(s)}return A=u.children,u=u.fallback,f?(Gi(),f=s.mode,A=jh({mode:"hidden",children:A},f),u=ra(u,f,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,f=s.child,f.memoizedState=np(o),f.childLanes=rp(n,E,o),s.memoizedState=tp,u):(Fi(s),ip(s,A))}if(I=n.memoizedState,I!==null&&(A=I.dehydrated,A!==null)){if(p)s.flags&256?(Fi(s),s.flags&=-257,s=sp(n,s,o)):s.memoizedState!==null?(Gi(),s.child=n.child,s.flags|=128,s=null):(Gi(),f=u.fallback,A=s.mode,u=jh({mode:"visible",children:u.children},A),f=ra(f,A,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,bo(s,n.child,null,o),u=s.child,u.memoizedState=np(o),u.childLanes=rp(n,E,o),s.memoizedState=tp,s=f);else if(Fi(s),zp(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var H=E.dgst;E=H,u=Error(r(419)),u.stack="",u.digest=E,ru({value:u,source:null,stack:null}),s=sp(n,s,o)}else if(jt||iu(n,s,o,!1),E=(o&n.childLanes)!==0,jt||E){if(E=st,E!==null&&(u=o&-o,u=(u&42)!==0?1:Vi(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==I.retryLane))throw I.retryLane=u,mo(n,u),Vn(E,n,u),hE;A.data==="$?"||Sp(),s=sp(n,s,o)}else A.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=I.treeContext,pt=ar(A.nextSibling),mn=s,Ge=!0,aa=null,br=!1,n!==null&&(Kn[Qn++]=ei,Kn[Qn++]=ti,Kn[Qn++]=ia,ei=n.id,ti=n.overflow,ia=s),s=ip(s,u.children),s.flags|=4096);return s}return f?(Gi(),f=u.fallback,A=s.mode,I=n.child,H=I.sibling,u=Zr(I,{mode:"hidden",children:u.children}),u.subtreeFlags=I.subtreeFlags&65011712,H!==null?f=Zr(H,f):(f=ra(f,A,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,A=n.child.memoizedState,A===null?A=np(o):(I=A.cachePool,I!==null?(H=Mt._currentValue,I=I.parent!==H?{parent:H,pool:H}:I):I=av(),A={baseLanes:A.baseLanes|o,cachePool:I}),f.memoizedState=A,f.childLanes=rp(n,E,o),s.memoizedState=tp,u):(Fi(s),o=n.child,n=o.sibling,o=Zr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=o,s.memoizedState=null,o)}function ip(n,s){return s=jh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function jh(n,s){return n=Rn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function sp(n,s,o){return bo(s,n.child,null,o),n=ip(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function TE(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Sm(n.return,s,o)}function ap(n,s,o,u,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function AE(n,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(Xt(n,s,u.children,o),u=Pt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&TE(n,o,s);else if(n.tag===19)TE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(se(Pt,u),f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&Lh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),ap(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Lh(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}ap(s,!0,o,null,p);break;case"together":ap(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ai(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Xi|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(iu(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=Zr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Zr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function op(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Th(n)))}function xI(n,s,o){switch(s.tag){case 3:it(s,s.stateNode.containerInfo),Bi(s,Mt,n.memoizedState.cache),nu();break;case 27:case 5:Ni(s);break;case 4:it(s,s.stateNode.containerInfo);break;case 10:Bi(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Fi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?EE(n,s,o):(Fi(s),n=ai(n,s,o),n!==null?n.sibling:null);Fi(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(iu(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return AE(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),se(Pt,Pt.current),u)break;return null;case 22:case 23:return s.lanes=0,pE(n,s,o);case 24:Bi(s,Mt,n.memoizedState.cache)}return ai(n,s,o)}function SE(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)jt=!0;else{if(!op(n,o)&&(s.flags&128)===0)return jt=!1,xI(n,s,o);jt=(n.flags&131072)!==0}else jt=!1,Ge&&(s.flags&1048576)!==0&&Z_(s,Eh,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")gm(u)?(n=fa(u,n),s.tag=1,s=_E(null,s,u,n,o)):(s.tag=0,s=ep(null,s,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===pe){s.tag=11,s=fE(null,s,u,n,o);break e}else if(f===x){s.tag=14,s=dE(null,s,u,n,o);break e}}throw s=Qt(u)||u,Error(r(306,s,""))}}return s;case 0:return ep(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=fa(u,s.pendingProps),_E(n,s,u,f,o);case 3:e:{if(it(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Dm(n,s),hu(s,u,null,o);var E=s.memoizedState;if(u=E.cache,Bi(s,Mt,u),u!==p.cache&&wm(s,[Mt],o,!0),cu(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=vE(n,s,u,o);break e}else if(u!==f){f=Fn(Error(r(424)),s),ru(f),s=vE(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(pt=ar(n.firstChild),mn=s,Ge=!0,aa=null,br=!0,o=tE(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(nu(),u===f){s=ai(n,s,o);break e}Xt(n,s,u,o)}s=s.child}return s;case 26:return zh(n,s),n===null?(o=RT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ge||(o=s.type,n=s.pendingProps,u=tf(Ie.current).createElement(o),u[Nt]=s,u[bt]=n,Jt(u,o,n),_t(u),s.stateNode=u):s.memoizedState=RT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ni(s),n===null&&Ge&&(u=s.stateNode=wT(s.type,s.pendingProps,Ie.current),mn=s,br=!0,f=pt,es(s.type)?(jp=f,pt=ar(u.firstChild)):pt=f),Xt(n,s,s.pendingProps.children,o),zh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ge&&((f=u=pt)&&(u=rR(u,s.type,s.pendingProps,br),u!==null?(s.stateNode=u,mn=s,pt=ar(u.firstChild),br=!1,f=!0):f=!1),f||oa(s)),Ni(s),f=s.type,p=s.pendingProps,E=n!==null?n.memoizedProps:null,u=p.children,Lp(f,p)?u=null:E!==null&&Lp(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=km(n,s,TI,null,null,o),Ou._currentValue=f),zh(n,s),Xt(n,s,u,o),s.child;case 6:return n===null&&Ge&&((n=o=pt)&&(o=iR(o,s.pendingProps,br),o!==null?(s.stateNode=o,mn=s,pt=null,n=!0):n=!1),n||oa(s)),null;case 13:return EE(n,s,o);case 4:return it(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=bo(s,null,u,o):Xt(n,s,u,o),s.child;case 11:return fE(n,s,s.type,s.pendingProps,o);case 7:return Xt(n,s,s.pendingProps,o),s.child;case 8:return Xt(n,s,s.pendingProps.children,o),s.child;case 12:return Xt(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Bi(s,s.type,u.value),Xt(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ua(s),f=nn(f),u=u(f),s.flags|=1,Xt(n,s,u,o),s.child;case 14:return dE(n,s,s.type,s.pendingProps,o);case 15:return mE(n,s,s.type,s.pendingProps,o);case 19:return AE(n,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},n===null?(o=jh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Zr(n.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return pE(n,s,o);case 24:return ua(s),u=nn(Mt),n===null?(f=Rm(),f===null&&(f=st,p=bm(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},xm(s),Bi(s,Mt,f)):((n.lanes&o)!==0&&(Dm(n,s),hu(s,null,null,o),cu()),f=n.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Bi(s,Mt,u)):(u=p.cache,Bi(s,Mt,u),u!==f.cache&&wm(s,[Mt],o,!0))),Xt(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function oi(n){n.flags|=4}function wE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!VT(s)){if(s=$n.current,s!==null&&((ze&4194048)===ze?Ir!==null:(ze&62914560)!==ze&&(ze&536870912)===0||s!==Ir))throw lu=Cm,ov;n.flags|=8192}}function qh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Pl():536870912,n.lanes|=s,xo|=s)}function _u(n,s){if(!Ge)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ht(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function DI(n,s,o){var u=s.pendingProps;switch(Em(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return ht(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ri(Mt),dr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(tu(s)?oi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,nv())),ht(s),null;case 26:return o=s.memoizedState,n===null?(oi(s),o!==null?(ht(s),wE(s,o)):(ht(s),s.flags&=-16777217)):o?o!==n.memoizedState?(oi(s),ht(s),wE(s,o)):(ht(s),s.flags&=-16777217):(n.memoizedProps!==u&&oi(s),ht(s),s.flags&=-16777217),null;case 27:zr(s),o=Ie.current;var f=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==u&&oi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ht(s),null}n=Te.current,tu(s)?ev(s):(n=wT(f,u,o),s.stateNode=n,oi(s))}return ht(s),null;case 5:if(zr(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&oi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ht(s),null}if(n=Te.current,tu(s))ev(s);else{switch(f=tf(Ie.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Nt]=s,n[bt]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=n;e:switch(Jt(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&oi(s)}}return ht(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&oi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ie.current,tu(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=mn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Nt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||yT(n.nodeValue,o)),n||oa(s)}else n=tf(n).createTextNode(u),n[Nt]=s,s.stateNode=n}return ht(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=tu(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Nt]=s}else nu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),f=!1}else f=nv(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(si(s),s):(si(s),null)}if(si(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),qh(s,s.updateQueue),ht(s),null;case 4:return dr(),n===null&&Vp(s.stateNode.containerInfo),ht(s),null;case 10:return ri(s.type),ht(s),null;case 19:if(fe(Pt),f=s.memoizedState,f===null)return ht(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)_u(f,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=Lh(n),p!==null){for(s.flags|=128,_u(f,!1),n=p.updateQueue,s.updateQueue=n,qh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)J_(o,n),o=o.sibling;return se(Pt,Pt.current&1|2),s.child}n=n.sibling}f.tail!==null&&Un()>Gh&&(s.flags|=128,u=!0,_u(f,!1),s.lanes=4194304)}else{if(!u)if(n=Lh(p),n!==null){if(s.flags|=128,u=!0,n=n.updateQueue,s.updateQueue=n,qh(s,n),_u(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Ge)return ht(s),null}else 2*Un()-f.renderingStartTime>Gh&&o!==536870912&&(s.flags|=128,u=!0,_u(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(n=f.last,n!==null?n.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Un(),s.sibling=null,n=Pt.current,se(Pt,u?n&1|2:n&1),s):(ht(s),null);case 22:case 23:return si(s),Mm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),o=s.updateQueue,o!==null&&qh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&fe(ca),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ri(Mt),ht(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function NI(n,s){switch(Em(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ri(Mt),dr(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return zr(s),null;case 13:if(si(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));nu()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return fe(Pt),null;case 4:return dr(),null;case 10:return ri(s.type),null;case 22:case 23:return si(s),Mm(),n!==null&&fe(ca),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ri(Mt),null;case 25:return null;default:return null}}function bE(n,s){switch(Em(s),s.tag){case 3:ri(Mt),dr();break;case 26:case 27:case 5:zr(s);break;case 4:dr();break;case 13:si(s);break;case 19:fe(Pt);break;case 10:ri(s.type);break;case 22:case 23:si(s),Mm(),n!==null&&fe(ca);break;case 24:ri(Mt)}}function vu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var p=o.create,E=o.inst;u=p(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){rt(s,s.return,A)}}function Ki(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=s;var I=o,H=A;try{H()}catch(J){rt(f,I,J)}}}u=u.next}while(u!==p)}}catch(J){rt(s,s.return,J)}}function IE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{dv(s,o)}catch(u){rt(n,n.return,u)}}}function RE(n,s,o){o.props=fa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){rt(n,s,u)}}function Eu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){rt(n,s,f)}}function Rr(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){rt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){rt(n,s,f)}else o.current=null}function CE(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){rt(n,n.return,f)}}function lp(n,s,o){try{var u=n.stateNode;JI(u,n.type,o,s),u[bt]=s}catch(f){rt(n,n.return,f)}}function xE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&es(n.type)||n.tag===4}function up(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&es(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function cp(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ef));else if(u!==4&&(u===27&&es(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(cp(n,s,o),n=n.sibling;n!==null;)cp(n,s,o),n=n.sibling}function Hh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&es(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Hh(n,s,o),n=n.sibling;n!==null;)Hh(n,s,o),n=n.sibling}function DE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Jt(s,u,o),s[Nt]=n,s[bt]=o}catch(p){rt(n,n.return,p)}}var li=!1,Et=!1,hp=!1,NE=typeof WeakSet=="function"?WeakSet:Set,qt=null;function VI(n,s){if(n=n.containerInfo,Pp=lf,n=q_(n),um(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,A=-1,I=-1,H=0,J=0,ee=n,G=null;t:for(;;){for(var K;ee!==o||f!==0&&ee.nodeType!==3||(A=E+f),ee!==p||u!==0&&ee.nodeType!==3||(I=E+u),ee.nodeType===3&&(E+=ee.nodeValue.length),(K=ee.firstChild)!==null;)G=ee,ee=K;for(;;){if(ee===n)break t;if(G===o&&++H===f&&(A=E),G===p&&++J===u&&(I=E),(K=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=K}o=A===-1||I===-1?null:{start:A,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(kp={focusedElem:n,selectionRange:o},lf=!1,qt=s;qt!==null;)if(s=qt,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,qt=n;else for(;qt!==null;){switch(s=qt,p=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var we=fa(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(we,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){rt(o,o.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Bp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Bp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,qt=n;break}qt=s.return}}function VE(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Qi(n,o),u&4&&vu(5,o);break;case 1:if(Qi(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(E){rt(o,o.return,E)}else{var f=fa(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){rt(o,o.return,E)}}u&64&&IE(o),u&512&&Eu(o,o.return);break;case 3:if(Qi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{dv(n,s)}catch(E){rt(o,o.return,E)}}break;case 27:s===null&&u&4&&DE(o);case 26:case 5:Qi(n,o),s===null&&u&4&&CE(o),u&512&&Eu(o,o.return);break;case 12:Qi(n,o);break;case 13:Qi(n,o),u&4&&PE(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=jI.bind(null,o),sR(n,o))));break;case 22:if(u=o.memoizedState!==null||li,!u){s=s!==null&&s.memoizedState!==null||Et,f=li;var p=Et;li=u,(Et=s)&&!p?$i(n,o,(o.subtreeFlags&8772)!==0):Qi(n,o),li=f,Et=p}break;case 30:break;default:Qi(n,o)}}function OE(n){var s=n.alternate;s!==null&&(n.alternate=null,OE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Pi(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var lt=null,vn=!1;function ui(n,s,o){for(o=o.child;o!==null;)ME(n,s,o),o=o.sibling}function ME(n,s,o){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(mt,o)}catch{}switch(o.tag){case 26:Et||Rr(o,s),ui(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Et||Rr(o,s);var u=lt,f=vn;es(o.type)&&(lt=o.stateNode,vn=!1),ui(n,s,o),xu(o.stateNode),lt=u,vn=f;break;case 5:Et||Rr(o,s);case 6:if(u=lt,f=vn,lt=null,ui(n,s,o),lt=u,vn=f,lt!==null)if(vn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(o.stateNode)}catch(p){rt(o,s,p)}else try{lt.removeChild(o.stateNode)}catch(p){rt(o,s,p)}break;case 18:lt!==null&&(vn?(n=lt,AT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Lu(n)):AT(lt,o.stateNode));break;case 4:u=lt,f=vn,lt=o.stateNode.containerInfo,vn=!0,ui(n,s,o),lt=u,vn=f;break;case 0:case 11:case 14:case 15:Et||Ki(2,o,s),Et||Ki(4,o,s),ui(n,s,o);break;case 1:Et||(Rr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&RE(o,s,u)),ui(n,s,o);break;case 21:ui(n,s,o);break;case 22:Et=(u=Et)||o.memoizedState!==null,ui(n,s,o),Et=u;break;default:ui(n,s,o)}}function PE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Lu(n)}catch(o){rt(s,s.return,o)}}function OI(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new NE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new NE),s;default:throw Error(r(435,n.tag))}}function fp(n,s){var o=OI(n);s.forEach(function(u){var f=qI.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function Cn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=n,E=s,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(es(A.type)){lt=A.stateNode,vn=!1;break e}break;case 5:lt=A.stateNode,vn=!1;break e;case 3:case 4:lt=A.stateNode.containerInfo,vn=!0;break e}A=A.return}if(lt===null)throw Error(r(160));ME(p,E,f),lt=null,vn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)kE(s,n),s=s.sibling}var sr=null;function kE(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Cn(s,n),xn(n),u&4&&(Ki(3,n,n.return),vu(3,n),Ki(5,n,n.return));break;case 1:Cn(s,n),xn(n),u&512&&(Et||o===null||Rr(o,o.return)),u&64&&li&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=sr;if(Cn(s,n),xn(n),u&512&&(Et||o===null||Rr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[js]||p[Nt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),Jt(p,u,o),p[Nt]=n,_t(p),u=p;break e;case"link":var E=DT("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(p=E[A],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}p=f.createElement(u),Jt(p,u,o),f.head.appendChild(p);break;case"meta":if(E=DT("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(p=E[A],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}p=f.createElement(u),Jt(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[Nt]=n,_t(p),u=p}n.stateNode=u}else NT(f,n.type,n.stateNode);else n.stateNode=xT(f,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?NT(f,n.type,n.stateNode):xT(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&lp(n,n.memoizedProps,o.memoizedProps)}break;case 27:Cn(s,n),xn(n),u&512&&(Et||o===null||Rr(o,o.return)),o!==null&&u&4&&lp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Cn(s,n),xn(n),u&512&&(Et||o===null||Rr(o,o.return)),n.flags&32){f=n.stateNode;try{zn(f,"")}catch(K){rt(n,n.return,K)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,lp(n,f,o!==null?o.memoizedProps:f)),u&1024&&(hp=!0);break;case 6:if(Cn(s,n),xn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(K){rt(n,n.return,K)}}break;case 3:if(sf=null,f=sr,sr=nf(s.containerInfo),Cn(s,n),sr=f,xn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Lu(s.containerInfo)}catch(K){rt(n,n.return,K)}hp&&(hp=!1,LE(n));break;case 4:u=sr,sr=nf(n.stateNode.containerInfo),Cn(s,n),xn(n),sr=u;break;case 12:Cn(s,n),xn(n);break;case 13:Cn(s,n),xn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(_p=Un()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,fp(n,u)));break;case 22:f=n.memoizedState!==null;var I=o!==null&&o.memoizedState!==null,H=li,J=Et;if(li=H||f,Et=J||I,Cn(s,n),Et=J,li=H,xn(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||I||li||Et||da(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){I=o=s;try{if(p=I.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=I.stateNode;var ee=I.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){rt(I,I.return,K)}}}else if(s.tag===6){if(o===null){I=s;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(K){rt(I,I.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,fp(n,o))));break;case 19:Cn(s,n),xn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,fp(n,u)));break;case 30:break;case 21:break;default:Cn(s,n),xn(n)}}function xn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(xE(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=up(n);Hh(n,p,f);break;case 5:var E=o.stateNode;o.flags&32&&(zn(E,""),o.flags&=-33);var A=up(n);Hh(n,A,E);break;case 3:case 4:var I=o.stateNode.containerInfo,H=up(n);cp(n,H,I);break;default:throw Error(r(161))}}catch(J){rt(n,n.return,J)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function LE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;LE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Qi(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)VE(n,s.alternate,s),s=s.sibling}function da(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ki(4,s,s.return),da(s);break;case 1:Rr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&RE(s,s.return,o),da(s);break;case 27:xu(s.stateNode);case 26:case 5:Rr(s,s.return),da(s);break;case 22:s.memoizedState===null&&da(s);break;case 30:da(s);break;default:da(s)}n=n.sibling}}function $i(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,p=s,E=p.flags;switch(p.tag){case 0:case 11:case 15:$i(f,p,o),vu(4,p);break;case 1:if($i(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){rt(u,u.return,H)}if(u=p,f=u.updateQueue,f!==null){var A=u.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)fv(I[f],A)}catch(H){rt(u,u.return,H)}}o&&E&64&&IE(p),Eu(p,p.return);break;case 27:DE(p);case 26:case 5:$i(f,p,o),o&&u===null&&E&4&&CE(p),Eu(p,p.return);break;case 12:$i(f,p,o);break;case 13:$i(f,p,o),o&&E&4&&PE(f,p);break;case 22:p.memoizedState===null&&$i(f,p,o),Eu(p,p.return);break;case 30:break;default:$i(f,p,o)}s=s.sibling}}function dp(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&su(o))}function mp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&su(n))}function Cr(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)UE(n,s,o,u),s=s.sibling}function UE(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Cr(n,s,o,u),f&2048&&vu(9,s);break;case 1:Cr(n,s,o,u);break;case 3:Cr(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&su(n)));break;case 12:if(f&2048){Cr(n,s,o,u),n=s.stateNode;try{var p=s.memoizedProps,E=p.id,A=p.onPostCommit;typeof A=="function"&&A(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){rt(s,s.return,I)}}else Cr(n,s,o,u);break;case 13:Cr(n,s,o,u);break;case 23:break;case 22:p=s.stateNode,E=s.alternate,s.memoizedState!==null?p._visibility&2?Cr(n,s,o,u):Tu(n,s):p._visibility&2?Cr(n,s,o,u):(p._visibility|=2,Io(n,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&dp(E,s);break;case 24:Cr(n,s,o,u),f&2048&&mp(s.alternate,s);break;default:Cr(n,s,o,u)}}function Io(n,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=n,E=s,A=o,I=u,H=E.flags;switch(E.tag){case 0:case 11:case 15:Io(p,E,A,I,f),vu(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?Io(p,E,A,I,f):Tu(p,E):(J._visibility|=2,Io(p,E,A,I,f)),f&&H&2048&&dp(E.alternate,E);break;case 24:Io(p,E,A,I,f),f&&H&2048&&mp(E.alternate,E);break;default:Io(p,E,A,I,f)}s=s.sibling}}function Tu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:Tu(o,u),f&2048&&dp(u.alternate,u);break;case 24:Tu(o,u),f&2048&&mp(u.alternate,u);break;default:Tu(o,u)}s=s.sibling}}var Au=8192;function Ro(n){if(n.subtreeFlags&Au)for(n=n.child;n!==null;)BE(n),n=n.sibling}function BE(n){switch(n.tag){case 26:Ro(n),n.flags&Au&&n.memoizedState!==null&&_R(sr,n.memoizedState,n.memoizedProps);break;case 5:Ro(n);break;case 3:case 4:var s=sr;sr=nf(n.stateNode.containerInfo),Ro(n),sr=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Au,Au=16777216,Ro(n),Au=s):Ro(n));break;default:Ro(n)}}function zE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Su(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];qt=u,qE(u,n)}zE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jE(n),n=n.sibling}function jE(n){switch(n.tag){case 0:case 11:case 15:Su(n),n.flags&2048&&Ki(9,n,n.return);break;case 3:Su(n);break;case 12:Su(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Fh(n)):Su(n);break;default:Su(n)}}function Fh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];qt=u,qE(u,n)}zE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ki(8,s,s.return),Fh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Fh(s));break;default:Fh(s)}n=n.sibling}}function qE(n,s){for(;qt!==null;){var o=qt;switch(o.tag){case 0:case 11:case 15:Ki(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:su(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,qt=u;else e:for(o=n;qt!==null;){u=qt;var f=u.sibling,p=u.return;if(OE(u),u===o){qt=null;break e}if(f!==null){f.return=p,qt=f;break e}qt=p}}}var MI={getCacheForType:function(n){var s=nn(Mt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},PI=typeof WeakMap=="function"?WeakMap:Map,Ye=0,st=null,Me=null,ze=0,Xe=0,Dn=null,Yi=!1,Co=!1,pp=!1,ci=0,gt=0,Xi=0,ma=0,gp=0,Yn=0,xo=0,wu=null,En=null,yp=!1,_p=0,Gh=1/0,Kh=null,Wi=null,Wt=0,Ji=null,Do=null,No=0,vp=0,Ep=null,HE=null,bu=0,Tp=null;function Nn(){if((Ye&2)!==0&&ze!==0)return ze&-ze;if(W.T!==null){var n=_o;return n!==0?n:Cp()}return Oi()}function FE(){Yn===0&&(Yn=(ze&536870912)===0||Ge?Ml():536870912);var n=$n.current;return n!==null&&(n.flags|=32),Yn}function Vn(n,s,o){(n===st&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)&&(Vo(n,0),Zi(n,ze,Yn,!1)),qr(n,o),((Ye&2)===0||n!==st)&&(n===st&&((Ye&2)===0&&(ma|=o),gt===4&&Zi(n,ze,Yn,!1)),xr(n))}function GE(n,s,o){if((Ye&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&n.expiredLanes)===0||zs(n,s),f=u?UI(n,s):wp(n,s,!0),p=u;do{if(f===0){Co&&!u&&Zi(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!kI(o)){f=wp(n,s,!1),p=!1;continue}if(f===2){if(p=s,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var A=n;f=wu;var I=A.current.memoizedState.isDehydrated;if(I&&(Vo(A,E).flags|=256),E=wp(A,E,!1),E!==2){if(pp&&!I){A.errorRecoveryDisabledLanes|=p,ma|=p,f=4;break e}p=En,En=f,p!==null&&(En===null?En=p:En.push.apply(En,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){Vo(n,0),Zi(n,s,0,!0);break}e:{switch(u=n,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Zi(u,s,Yn,!Yi);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=_p+300-Un(),10<f)){if(Zi(u,s,Yn,!Yi),$a(u,0,!0)!==0)break e;u.timeoutHandle=ET(KE.bind(null,u,o,En,Kh,yp,s,Yn,ma,xo,Yi,p,2,-0,0),f);break e}KE(u,o,En,Kh,yp,s,Yn,ma,xo,Yi,p,0,-0,0)}}break}while(!0);xr(n)}function KE(n,s,o,u,f,p,E,A,I,H,J,ee,G,K){if(n.timeoutHandle=-1,ee=s.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Vu={stylesheets:null,count:0,unsuspend:yR},BE(s),ee=vR(),ee!==null)){n.cancelPendingCommit=ee(ZE.bind(null,n,s,p,o,u,f,E,A,I,J,1,G,K)),Zi(n,p,E,!H);return}ZE(n,s,p,o,u,f,E,A,I)}function kI(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!In(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Zi(n,s,o,u){s&=~gp,s&=~ma,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var p=31-tn(f),E=1<<p;u[p]=-1,f&=~E}o!==0&&mr(n,o,s)}function Qh(){return(Ye&6)===0?(Iu(0),!1):!0}function Ap(){if(Me!==null){if(Xe===0)var n=Me.return;else n=Me,ni=la=null,Bm(n),wo=null,gu=0,n=Me;for(;n!==null;)bE(n.alternate,n),n=n.return;Me=null}}function Vo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,eR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ap(),st=n,Me=o=Zr(n.current,null),ze=s,Xe=0,Dn=null,Yi=!1,Co=zs(n,s),pp=!1,xo=Yn=gp=ma=Xi=gt=0,En=wu=null,yp=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-tn(u),p=1<<f;s|=n[f],u&=~p}return ci=s,ph(),o}function QE(n,s){xe=null,W.H=Mh,s===ou||s===wh?(s=cv(),Xe=3):s===ov?(s=cv(),Xe=4):Xe=s===hE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Dn=s,Me===null&&(gt=1,Bh(n,Fn(s,n.current)))}function $E(){var n=W.H;return W.H=Mh,n===null?Mh:n}function YE(){var n=W.A;return W.A=MI,n}function Sp(){gt=4,Yi||(ze&4194048)!==ze&&$n.current!==null||(Co=!0),(Xi&134217727)===0&&(ma&134217727)===0||st===null||Zi(st,ze,Yn,!1)}function wp(n,s,o){var u=Ye;Ye|=2;var f=$E(),p=YE();(st!==n||ze!==s)&&(Kh=null,Vo(n,s)),s=!1;var E=gt;e:do try{if(Xe!==0&&Me!==null){var A=Me,I=Dn;switch(Xe){case 8:Ap(),E=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(s=!0);var H=Xe;if(Xe=0,Dn=null,Oo(n,A,I,H),o&&Co){E=0;break e}break;default:H=Xe,Xe=0,Dn=null,Oo(n,A,I,H)}}LI(),E=gt;break}catch(J){QE(n,J)}while(!0);return s&&n.shellSuspendCounter++,ni=la=null,Ye=u,W.H=f,W.A=p,Me===null&&(st=null,ze=0,ph()),E}function LI(){for(;Me!==null;)XE(Me)}function UI(n,s){var o=Ye;Ye|=2;var u=$E(),f=YE();st!==n||ze!==s?(Kh=null,Gh=Un()+500,Vo(n,s)):Co=zs(n,s);e:do try{if(Xe!==0&&Me!==null){s=Me;var p=Dn;t:switch(Xe){case 1:Xe=0,Dn=null,Oo(n,s,p,1);break;case 2:case 9:if(lv(p)){Xe=0,Dn=null,WE(s);break}s=function(){Xe!==2&&Xe!==9||st!==n||(Xe=7),xr(n)},p.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:lv(p)?(Xe=0,Dn=null,WE(s)):(Xe=0,Dn=null,Oo(n,s,p,7));break;case 5:var E=null;switch(Me.tag){case 26:E=Me.memoizedState;case 5:case 27:var A=Me;if(!E||VT(E)){Xe=0,Dn=null;var I=A.sibling;if(I!==null)Me=I;else{var H=A.return;H!==null?(Me=H,$h(H)):Me=null}break t}}Xe=0,Dn=null,Oo(n,s,p,5);break;case 6:Xe=0,Dn=null,Oo(n,s,p,6);break;case 8:Ap(),gt=6;break e;default:throw Error(r(462))}}BI();break}catch(J){QE(n,J)}while(!0);return ni=la=null,W.H=u,W.A=f,Ye=o,Me!==null?0:(st=null,ze=0,ph(),gt)}function BI(){for(;Me!==null&&!Dl();)XE(Me)}function XE(n){var s=SE(n.alternate,n,ci);n.memoizedProps=n.pendingProps,s===null?$h(n):Me=s}function WE(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=yE(o,s,s.pendingProps,s.type,void 0,ze);break;case 11:s=yE(o,s,s.pendingProps,s.type.render,s.ref,ze);break;case 5:Bm(s);default:bE(o,s),s=Me=J_(s,ci),s=SE(o,s,ci)}n.memoizedProps=n.pendingProps,s===null?$h(n):Me=s}function Oo(n,s,o,u){ni=la=null,Bm(s),wo=null,gu=0;var f=s.return;try{if(CI(n,f,s,o,ze)){gt=1,Bh(n,Fn(o,n.current)),Me=null;return}}catch(p){if(f!==null)throw Me=f,p;gt=1,Bh(n,Fn(o,n.current)),Me=null;return}s.flags&32768?(Ge||u===1?n=!0:Co||(ze&536870912)!==0?n=!1:(Yi=n=!0,(u===2||u===9||u===3||u===6)&&(u=$n.current,u!==null&&u.tag===13&&(u.flags|=16384))),JE(s,n)):$h(s)}function $h(n){var s=n;do{if((s.flags&32768)!==0){JE(s,Yi);return}n=s.return;var o=DI(s.alternate,s,ci);if(o!==null){Me=o;return}if(s=s.sibling,s!==null){Me=s;return}Me=s=n}while(s!==null);gt===0&&(gt=5)}function JE(n,s){do{var o=NI(n.alternate,n);if(o!==null){o.flags&=32767,Me=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Me=n;return}Me=n=o}while(n!==null);gt=6,Me=null}function ZE(n,s,o,u,f,p,E,A,I){n.cancelPendingCommit=null;do Yh();while(Wt!==0);if((Ye&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=mm,kl(n,o,p,E,A,I),n===st&&(Me=st=null,ze=0),Do=s,Ji=n,No=o,vp=p,Ep=f,HE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,HI(ks,function(){return iT(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,f=he.p,he.p=2,E=Ye,Ye|=4;try{VI(n,s,o)}finally{Ye=E,he.p=f,W.T=u}}Wt=1,eT(),tT(),nT()}}function eT(){if(Wt===1){Wt=0;var n=Ji,s=Do,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var u=he.p;he.p=2;var f=Ye;Ye|=4;try{kE(s,n);var p=kp,E=q_(n.containerInfo),A=p.focusedElem,I=p.selectionRange;if(E!==A&&A&&A.ownerDocument&&j_(A.ownerDocument.documentElement,A)){if(I!==null&&um(A)){var H=I.start,J=I.end;if(J===void 0&&(J=H),"selectionStart"in A)A.selectionStart=H,A.selectionEnd=Math.min(J,A.value.length);else{var ee=A.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var K=G.getSelection(),we=A.textContent.length,Ae=Math.min(I.start,we),nt=I.end===void 0?Ae:Math.min(I.end,we);!K.extend&&Ae>nt&&(E=nt,nt=Ae,Ae=E);var L=z_(A,Ae),V=z_(A,nt);if(L&&V&&(K.rangeCount!==1||K.anchorNode!==L.node||K.anchorOffset!==L.offset||K.focusNode!==V.node||K.focusOffset!==V.offset)){var q=ee.createRange();q.setStart(L.node,L.offset),K.removeAllRanges(),Ae>nt?(K.addRange(q),K.extend(V.node,V.offset)):(q.setEnd(V.node,V.offset),K.addRange(q))}}}}for(ee=[],K=A;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ee.length;A++){var Z=ee[A];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}lf=!!Pp,kp=Pp=null}finally{Ye=f,he.p=u,W.T=o}}n.current=s,Wt=2}}function tT(){if(Wt===2){Wt=0;var n=Ji,s=Do,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var u=he.p;he.p=2;var f=Ye;Ye|=4;try{VE(n,s.alternate,s)}finally{Ye=f,he.p=u,W.T=o}}Wt=3}}function nT(){if(Wt===4||Wt===3){Wt=0,Fc();var n=Ji,s=Do,o=No,u=HE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Wt=5:(Wt=0,Do=Ji=null,rT(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Wi=null),Ya(o),s=s.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(mt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=W.T,f=he.p,he.p=2,W.T=null;try{for(var p=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];p(A.value,{componentStack:A.stack})}}finally{W.T=s,he.p=f}}(No&3)!==0&&Yh(),xr(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Tp?bu++:(bu=0,Tp=n):bu=0,Iu(0)}}function rT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,su(s)))}function Yh(n){return eT(),tT(),nT(),iT()}function iT(){if(Wt!==5)return!1;var n=Ji,s=vp;vp=0;var o=Ya(No),u=W.T,f=he.p;try{he.p=32>o?32:o,W.T=null,o=Ep,Ep=null;var p=Ji,E=No;if(Wt=0,Do=Ji=null,No=0,(Ye&6)!==0)throw Error(r(331));var A=Ye;if(Ye|=4,jE(p.current),UE(p,p.current,E,o),Ye=A,Iu(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(mt,p)}catch{}return!0}finally{he.p=f,W.T=u,rT(n,s)}}function sT(n,s,o){s=Fn(o,s),s=Zm(n.stateNode,s,2),n=qi(n,s,2),n!==null&&(qr(n,2),xr(n))}function rt(n,s,o){if(n.tag===3)sT(n,n,o);else for(;s!==null;){if(s.tag===3){sT(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Wi===null||!Wi.has(u))){n=Fn(o,n),o=uE(2),u=qi(s,o,2),u!==null&&(cE(o,u,s,n),qr(u,2),xr(u));break}}s=s.return}}function bp(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new PI;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(pp=!0,f.add(o),n=zI.bind(null,n,s,o),s.then(n,n))}function zI(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,st===n&&(ze&o)===o&&(gt===4||gt===3&&(ze&62914560)===ze&&300>Un()-_p?(Ye&2)===0&&Vo(n,0):gp|=o,xo===ze&&(xo=0)),xr(n)}function aT(n,s){s===0&&(s=Pl()),n=mo(n,s),n!==null&&(qr(n,s),xr(n))}function jI(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),aT(n,o)}function qI(n,s){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),aT(n,o)}function HI(n,s){return Ms(n,s)}var Xh=null,Mo=null,Ip=!1,Wh=!1,Rp=!1,pa=0;function xr(n){n!==Mo&&n.next===null&&(Mo===null?Xh=Mo=n:Mo=Mo.next=n),Wh=!0,Ip||(Ip=!0,GI())}function Iu(n,s){if(!Rp&&Wh){Rp=!0;do for(var o=!1,u=Xh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var E=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-tn(42|n)+1)-1,p&=f&~(E&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,cT(u,p))}else p=ze,p=$a(u,u===st?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||zs(u,p)||(o=!0,cT(u,p));u=u.next}while(o);Rp=!1}}function FI(){oT()}function oT(){Wh=Ip=!1;var n=0;pa!==0&&(ZI()&&(n=pa),pa=0);for(var s=Un(),o=null,u=Xh;u!==null;){var f=u.next,p=lT(u,s);p===0?(u.next=null,o===null?Xh=f:o.next=f,f===null&&(Mo=o)):(o=u,(n!==0||(p&3)!==0)&&(Wh=!0)),u=f}Iu(n)}function lT(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-tn(p),A=1<<E,I=f[E];I===-1?((A&o)===0||(A&u)!==0)&&(f[E]=Ol(A,s)):I<=s&&(n.expiredLanes|=A),p&=~A}if(s=st,o=ze,o=$a(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ps(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||zs(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Ps(u),Ya(o)){case 2:case 8:o=Ka;break;case 32:o=ks;break;case 268435456:o=Qa;break;default:o=ks}return u=uT.bind(null,n),o=Ms(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Ps(u),n.callbackPriority=2,n.callbackNode=null,2}function uT(n,s){if(Wt!==0&&Wt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Yh()&&n.callbackNode!==o)return null;var u=ze;return u=$a(n,n===st?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(GE(n,u,s),lT(n,Un()),n.callbackNode!=null&&n.callbackNode===o?uT.bind(null,n):null)}function cT(n,s){if(Yh())return null;GE(n,s,!0)}function GI(){tR(function(){(Ye&6)!==0?Ms(Nl,FI):oT()})}function Cp(){return pa===0&&(pa=Ml()),pa}function hT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:to(""+n)}function fT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function KI(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=hT((f[bt]||null).action),E=u.submitter;E&&(s=(s=E[bt]||null)?hT(s.formAction):E.getAttribute("formAction"),s!==null&&(p=s,E=null));var A=new no("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(pa!==0){var I=E?fT(f,E):new FormData(f);$m(o,{pending:!0,data:I,method:f.method,action:p},null,I)}}else typeof p=="function"&&(A.preventDefault(),I=E?fT(f,E):new FormData(f),$m(o,{pending:!0,data:I,method:f.method,action:p},p,I))},currentTarget:f}]})}}for(var xp=0;xp<dm.length;xp++){var Dp=dm[xp],QI=Dp.toLowerCase(),$I=Dp[0].toUpperCase()+Dp.slice(1);ir(QI,"on"+$I)}ir(G_,"onAnimationEnd"),ir(K_,"onAnimationIteration"),ir(Q_,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(hI,"onTransitionRun"),ir(fI,"onTransitionStart"),ir(dI,"onTransitionCancel"),ir($_,"onTransitionEnd"),Fr("onMouseEnter",["mouseout","mouseover"]),Fr("onMouseLeave",["mouseout","mouseover"]),Fr("onPointerEnter",["pointerout","pointerover"]),Fr("onPointerLeave",["pointerout","pointerover"]),nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function dT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var E=u.length-1;0<=E;E--){var A=u[E],I=A.instance,H=A.currentTarget;if(A=A.listener,I!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=H;try{p(f)}catch(J){Uh(J)}f.currentTarget=null,p=I}else for(E=0;E<u.length;E++){if(A=u[E],I=A.instance,H=A.currentTarget,A=A.listener,I!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=H;try{p(f)}catch(J){Uh(J)}f.currentTarget=null,p=I}}}}function Pe(n,s){var o=s[Ul];o===void 0&&(o=s[Ul]=new Set);var u=n+"__bubble";o.has(u)||(mT(s,n,2,!1),o.add(u))}function Np(n,s,o){var u=0;s&&(u|=4),mT(o,n,u,s)}var Jh="_reactListening"+Math.random().toString(36).slice(2);function Vp(n){if(!n[Jh]){n[Jh]=!0,Bl.forEach(function(o){o!=="selectionchange"&&(YI.has(o)||Np(o,!1,n),Np(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Jh]||(s[Jh]=!0,Np("selectionchange",!1,s))}}function mT(n,s,o,u){switch(UT(s)){case 2:var f=AR;break;case 8:f=SR;break;default:f=Kp}o=f.bind(null,s,o,n),f=void 0,!qn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function Op(n,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var I=E.tag;if((I===3||I===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=Hr(A),E===null)return;if(I=E.tag,I===5||I===6||I===26||I===27){u=p=E;continue e}A=A.parentNode}}u=u.return}eh(function(){var H=p,J=jn(o),ee=[];e:{var G=Y_.get(n);if(G!==void 0){var K=no,we=n;switch(n){case"keypress":if(Er(o)===0)break e;case"keydown":case"keyup":K=lo;break;case"focusin":we="focus",K=so;break;case"focusout":we="blur",K=so;break;case"beforeblur":case"afterblur":K=so;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=sm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=lh;break;case G_:case K_:case Q_:K=ao;break;case $_:K=ch;break;case"scroll":case"scrollend":K=th;break;case"wheel":K=uo;break;case"copy":case"cut":case"paste":K=oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Wl;break;case"toggle":case"beforetoggle":K=fh}var Ae=(s&4)!==0,nt=!Ae&&(n==="scroll"||n==="scrollend"),L=Ae?G!==null?G+"Capture":null:G;Ae=[];for(var V=H,q;V!==null;){var Z=V;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||L===null||(Z=$s(V,L),Z!=null&&Ae.push(Cu(V,Z,q))),nt)break;V=V.return}0<Ae.length&&(G=new K(G,we,null,o,J),ee.push({event:G,listeners:Ae}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",G&&o!==Qr&&(we=o.relatedTarget||o.fromElement)&&(Hr(we)||we[Bn]))break e;if((K||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,K?(we=o.relatedTarget||o.toElement,K=H,we=we?Hr(we):null,we!==null&&(nt=l(we),Ae=we.tag,we!==nt||Ae!==5&&Ae!==27&&Ae!==6)&&(we=null)):(K=null,we=H),K!==we)){if(Ae=Hn,Z="onMouseLeave",L="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=Wl,Z="onPointerLeave",L="onPointerEnter",V="pointer"),nt=K==null?G:gr(K),q=we==null?G:gr(we),G=new Ae(Z,V+"leave",K,o,J),G.target=nt,G.relatedTarget=q,Z=null,Hr(J)===H&&(Ae=new Ae(L,V+"enter",we,o,J),Ae.target=q,Ae.relatedTarget=nt,Z=Ae),nt=Z,K&&we)t:{for(Ae=K,L=we,V=0,q=Ae;q;q=Po(q))V++;for(q=0,Z=L;Z;Z=Po(Z))q++;for(;0<V-q;)Ae=Po(Ae),V--;for(;0<q-V;)L=Po(L),q--;for(;V--;){if(Ae===L||L!==null&&Ae===L.alternate)break t;Ae=Po(Ae),L=Po(L)}Ae=null}else Ae=null;K!==null&&pT(ee,G,K,Ae,!1),we!==null&&nt!==null&&pT(ee,nt,we,Ae,!0)}}e:{if(G=H?gr(H):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var me=M_;else if(Ot(G))if(P_)me=lI;else{me=aI;var Oe=sI}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Fl(H.elementType)&&(me=M_):me=oI;if(me&&(me=me(n,H))){Jr(ee,me,o,J);break e}Oe&&Oe(n,G,H),n==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Li(G,"number",G.value)}switch(Oe=H?gr(H):window,n){case"focusin":(Ot(Oe)||Oe.contentEditable==="true")&&(co=Oe,cm=H,eu=null);break;case"focusout":eu=cm=co=null;break;case"mousedown":hm=!0;break;case"contextmenu":case"mouseup":case"dragend":hm=!1,H_(ee,o,J);break;case"selectionchange":if(cI)break;case"keydown":case"keyup":H_(ee,o,J)}var _e;if(Sr)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Ue?$(n,o)&&(Se="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Se="onCompositionStart");Se&&(v&&o.locale!=="ko"&&(Ue||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Ue&&(_e=Kl()):(vr=J,Ui="value"in vr?vr.value:vr.textContent,Ue=!0)),Oe=Zh(H,Se),0<Oe.length&&(Se=new Yl(Se,n,null,o,J),ee.push({event:Se,listeners:Oe}),_e?Se.data=_e:(_e=oe(o),_e!==null&&(Se.data=_e)))),(_e=y?Vt(n,o):Be(n,o))&&(Se=Zh(H,"onBeforeInput"),0<Se.length&&(Oe=new Yl("onBeforeInput","beforeinput",null,o,J),ee.push({event:Oe,listeners:Se}),Oe.data=_e)),KI(ee,n,H,o,J)}dT(ee,s)})}function Cu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Zh(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=$s(n,o),f!=null&&u.unshift(Cu(n,f,p)),f=$s(n,s),f!=null&&u.push(Cu(n,f,p))),n.tag===3)return u;n=n.return}return[]}function Po(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function pT(n,s,o,u,f){for(var p=s._reactName,E=[];o!==null&&o!==u;){var A=o,I=A.alternate,H=A.stateNode;if(A=A.tag,I!==null&&I===u)break;A!==5&&A!==26&&A!==27||H===null||(I=H,f?(H=$s(o,p),H!=null&&E.unshift(Cu(o,H,I))):f||(H=$s(o,p),H!=null&&E.push(Cu(o,H,I)))),o=o.return}E.length!==0&&n.push({event:s,listeners:E})}var XI=/\r\n?/g,WI=/\u0000|\uFFFD/g;function gT(n){return(typeof n=="string"?n:""+n).replace(XI,`
`).replace(WI,"")}function yT(n,s){return s=gT(s),gT(n)===s}function ef(){}function tt(n,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||zn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&zn(n,""+u);break;case"className":yr(n,"class",u);break;case"tabIndex":yr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(n,o,u);break;case"style":Hl(n,u,p);break;case"data":if(s!=="object"){yr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=to(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&tt(n,s,"name",f.name,f,null),tt(n,s,"formEncType",f.formEncType,f,null),tt(n,s,"formMethod",f.formMethod,f,null),tt(n,s,"formTarget",f.formTarget,f,null)):(tt(n,s,"encType",f.encType,f,null),tt(n,s,"method",f.method,f,null),tt(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=to(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ef);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=to(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Pe("beforetoggle",n),Pe("toggle",n),ki(n,"popover",u);break;case"xlinkActuate":$t(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":$t(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":$t(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":$t(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":$t(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":$t(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":$t(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":$t(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":$t(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ki(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=rm.get(o)||o,ki(n,o,u))}}function Mp(n,s,o,u,f,p){switch(o){case"style":Hl(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?zn(n,u):(typeof u=="number"||typeof u=="bigint")&&zn(n,""+u);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ef);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xa.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=n[bt]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):ki(n,o,u)}}}function Jt(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",n),Pe("load",n);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:tt(n,s,p,E,o,null)}}f&&tt(n,s,"srcSet",o.srcSet,o,null),u&&tt(n,s,"src",o.src,o,null);return;case"input":Pe("invalid",n);var A=p=E=f=null,I=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":f=J;break;case"type":E=J;break;case"checked":I=J;break;case"defaultChecked":H=J;break;case"value":p=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:tt(n,s,u,J,o,null)}}Gs(n,p,A,I,H,E,f,!1),eo(n);return;case"select":Pe("invalid",n),u=E=p=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:tt(n,s,f,A,o,null)}s=p,o=E,n.multiple=!!u,s!=null?Kr(n,!!u,s,!1):o!=null&&Kr(n,!!u,o,!0);return;case"textarea":Pe("invalid",n),p=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:tt(n,s,E,A,o,null)}Ks(n,u,f,p),eo(n);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(u=o[I],u!=null))switch(I){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(n,s,I,u,o,null)}return;case"dialog":Pe("beforetoggle",n),Pe("toggle",n),Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":Pe("load",n);break;case"video":case"audio":for(u=0;u<Ru.length;u++)Pe(Ru[u],n);break;case"image":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"embed":case"source":case"link":Pe("error",n),Pe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:tt(n,s,H,u,o,null)}return;default:if(Fl(s)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&Mp(n,s,J,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&tt(n,s,A,u,o,null))}function JI(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,A=null,I=null,H=null,J=null;for(K in o){var ee=o[K];if(o.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=ee;default:u.hasOwnProperty(K)||tt(n,s,K,null,u,ee)}}for(var G in u){var K=u[G];if(ee=o[G],u.hasOwnProperty(G)&&(K!=null||ee!=null))switch(G){case"type":p=K;break;case"name":f=K;break;case"checked":H=K;break;case"defaultChecked":J=K;break;case"value":E=K;break;case"defaultValue":A=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:K!==ee&&tt(n,s,G,K,u,ee)}}bn(n,E,A,I,H,J,p,f);return;case"select":K=E=A=G=null;for(p in o)if(I=o[p],o.hasOwnProperty(p)&&I!=null)switch(p){case"value":break;case"multiple":K=I;default:u.hasOwnProperty(p)||tt(n,s,p,null,u,I)}for(f in u)if(p=u[f],I=o[f],u.hasOwnProperty(f)&&(p!=null||I!=null))switch(f){case"value":G=p;break;case"defaultValue":A=p;break;case"multiple":E=p;default:p!==I&&tt(n,s,f,p,u,I)}s=A,o=E,u=K,G!=null?Kr(n,!!o,G,!1):!!u!=!!o&&(s!=null?Kr(n,!!o,s,!0):Kr(n,!!o,o?[]:"",!1));return;case"textarea":K=G=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:tt(n,s,A,null,u,f)}for(E in u)if(f=u[E],p=o[E],u.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":G=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&tt(n,s,E,f,u,p)}Ze(n,G,K);return;case"option":for(var we in o)if(G=o[we],o.hasOwnProperty(we)&&G!=null&&!u.hasOwnProperty(we))switch(we){case"selected":n.selected=!1;break;default:tt(n,s,we,null,u,G)}for(I in u)if(G=u[I],K=o[I],u.hasOwnProperty(I)&&G!==K&&(G!=null||K!=null))switch(I){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:tt(n,s,I,G,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)G=o[Ae],o.hasOwnProperty(Ae)&&G!=null&&!u.hasOwnProperty(Ae)&&tt(n,s,Ae,null,u,G);for(H in u)if(G=u[H],K=o[H],u.hasOwnProperty(H)&&G!==K&&(G!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:tt(n,s,H,G,u,K)}return;default:if(Fl(s)){for(var nt in o)G=o[nt],o.hasOwnProperty(nt)&&G!==void 0&&!u.hasOwnProperty(nt)&&Mp(n,s,nt,void 0,u,G);for(J in u)G=u[J],K=o[J],!u.hasOwnProperty(J)||G===K||G===void 0&&K===void 0||Mp(n,s,J,G,u,K);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!u.hasOwnProperty(L)&&tt(n,s,L,null,u,G);for(ee in u)G=u[ee],K=o[ee],!u.hasOwnProperty(ee)||G===K||G==null&&K==null||tt(n,s,ee,G,u,K)}var Pp=null,kp=null;function tf(n){return n.nodeType===9?n:n.ownerDocument}function _T(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Lp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Up=null;function ZI(){var n=window.event;return n&&n.type==="popstate"?n===Up?!1:(Up=n,!0):(Up=null,!1)}var ET=typeof setTimeout=="function"?setTimeout:void 0,eR=typeof clearTimeout=="function"?clearTimeout:void 0,TT=typeof Promise=="function"?Promise:void 0,tR=typeof queueMicrotask=="function"?queueMicrotask:typeof TT<"u"?function(n){return TT.resolve(null).then(n).catch(nR)}:ET;function nR(n){setTimeout(function(){throw n})}function es(n){return n==="head"}function AT(n,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&xu(E.documentElement),o&2&&xu(E.body),o&4)for(o=E.head,xu(o),E=o.firstChild;E;){var A=E.nextSibling,I=E.nodeName;E[js]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(p),Lu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);Lu(s)}function Bp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Bp(o),Pi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function rR(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[js])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=ar(n.nextSibling),n===null)break}return null}function iR(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ar(n.nextSibling),n===null))return null;return n}function zp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function sR(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ar(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var jp=null;function ST(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function wT(n,s,o){switch(s=tf(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function xu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Pi(n)}var Xn=new Map,bT=new Set;function nf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var hi=he.d;he.d={f:aR,r:oR,D:lR,C:uR,L:cR,m:hR,X:dR,S:fR,M:mR};function aR(){var n=hi.f(),s=Qh();return n||s}function oR(n){var s=pr(n);s!==null&&s.tag===5&&s.type==="form"?Gv(s):hi.r(n)}var ko=typeof document>"u"?null:document;function IT(n,s,o){var u=ko;if(u&&typeof s=="string"&&s){var f=It(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),bT.has(f)||(bT.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Jt(s,"link",n),_t(s),u.head.appendChild(s)))}}function lR(n){hi.D(n),IT("dns-prefetch",n,null)}function uR(n,s){hi.C(n,s),IT("preconnect",n,s)}function cR(n,s,o){hi.L(n,s,o);var u=ko;if(u&&n&&s){var f='link[rel="preload"][as="'+It(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+It(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+It(o.imageSizes)+'"]')):f+='[href="'+It(n)+'"]';var p=f;switch(s){case"style":p=Lo(n);break;case"script":p=Uo(n)}Xn.has(p)||(n=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Xn.set(p,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Du(p))||s==="script"&&u.querySelector(Nu(p))||(s=u.createElement("link"),Jt(s,"link",n),_t(s),u.head.appendChild(s)))}}function hR(n,s){hi.m(n,s);var o=ko;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+It(u)+'"][href="'+It(n)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Uo(n)}if(!Xn.has(p)&&(n=_({rel:"modulepreload",href:n},s),Xn.set(p,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Nu(p)))return}u=o.createElement("link"),Jt(u,"link",n),_t(u),o.head.appendChild(u)}}}function fR(n,s,o){hi.S(n,s,o);var u=ko;if(u&&n){var f=hn(u).hoistableStyles,p=Lo(n);s=s||"default";var E=f.get(p);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(Du(p)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Xn.get(p))&&qp(n,o);var I=E=u.createElement("link");_t(I),Jt(I,"link",n),I._p=new Promise(function(H,J){I.onload=H,I.onerror=J}),I.addEventListener("load",function(){A.loading|=1}),I.addEventListener("error",function(){A.loading|=2}),A.loading|=4,rf(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(p,E)}}}function dR(n,s){hi.X(n,s);var o=ko;if(o&&n){var u=hn(o).hoistableScripts,f=Uo(n),p=u.get(f);p||(p=o.querySelector(Nu(f)),p||(n=_({src:n,async:!0},s),(s=Xn.get(f))&&Hp(n,s),p=o.createElement("script"),_t(p),Jt(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function mR(n,s){hi.M(n,s);var o=ko;if(o&&n){var u=hn(o).hoistableScripts,f=Uo(n),p=u.get(f);p||(p=o.querySelector(Nu(f)),p||(n=_({src:n,async:!0,type:"module"},s),(s=Xn.get(f))&&Hp(n,s),p=o.createElement("script"),_t(p),Jt(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function RT(n,s,o,u){var f=(f=Ie.current)?nf(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Lo(o.href),o=hn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Lo(o.href);var p=hn(f).hoistableStyles,E=p.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=f.querySelector(Du(n)))&&!p._p&&(E.instance=p,E.state.loading=5),Xn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Xn.set(n,o),p||pR(f,n,o,E.state))),s&&u===null)throw Error(r(528,""));return E}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Uo(o),o=hn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Lo(n){return'href="'+It(n)+'"'}function Du(n){return'link[rel="stylesheet"]['+n+"]"}function CT(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function pR(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Jt(s,"link",o),_t(s),n.head.appendChild(s))}function Uo(n){return'[src="'+It(n)+'"]'}function Nu(n){return"script[async]"+n}function xT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+It(o.href)+'"]');if(u)return s.instance=u,_t(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),_t(u),Jt(u,"style",f),rf(u,o.precedence,n),s.instance=u;case"stylesheet":f=Lo(o.href);var p=n.querySelector(Du(f));if(p)return s.state.loading|=4,s.instance=p,_t(p),p;u=CT(o),(f=Xn.get(f))&&qp(u,f),p=(n.ownerDocument||n).createElement("link"),_t(p);var E=p;return E._p=new Promise(function(A,I){E.onload=A,E.onerror=I}),Jt(p,"link",u),s.state.loading|=4,rf(p,o.precedence,n),s.instance=p;case"script":return p=Uo(o.src),(f=n.querySelector(Nu(p)))?(s.instance=f,_t(f),f):(u=o,(f=Xn.get(p))&&(u=_({},o),Hp(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),_t(f),Jt(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,rf(u,o.precedence,n));return s.instance}function rf(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===s)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function qp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Hp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var sf=null;function DT(n,s,o){if(sf===null){var u=new Map,f=sf=new Map;f.set(o,u)}else f=sf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var p=o[f];if(!(p[js]||p[Nt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(s)||"";E=n+E;var A=u.get(E);A?A.push(p):u.set(E,[p])}}return u}function NT(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function gR(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function VT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Vu=null;function yR(){}function _R(n,s,o){if(Vu===null)throw Error(r(475));var u=Vu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Lo(o.href),p=n.querySelector(Du(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=af.bind(u),n.then(u,u)),s.state.loading|=4,s.instance=p,_t(p);return}p=n.ownerDocument||n,o=CT(o),(f=Xn.get(f))&&qp(o,f),p=p.createElement("link"),_t(p);var E=p;E._p=new Promise(function(A,I){E.onload=A,E.onerror=I}),Jt(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=af.bind(u),n.addEventListener("load",s),n.addEventListener("error",s))}}function vR(){if(Vu===null)throw Error(r(475));var n=Vu;return n.stylesheets&&n.count===0&&Fp(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&Fp(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function af(){if(this.count--,this.count===0){if(this.stylesheets)Fp(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var of=null;function Fp(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,of=new Map,s.forEach(ER,n),of=null,af.call(n))}function ER(n,s){if(!(s.state.loading&4)){var o=of.get(n);if(o)var u=o.get(null);else{o=new Map,of.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),p=o.get(E)||u,p===u&&o.set(null,f),o.set(E,f),this.count++,u=af.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Ou={$$typeof:te,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function TR(n,s,o,u,f,p,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.hiddenUpdates=jr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function OT(n,s,o,u,f,p,E,A,I,H,J,ee){return n=new TR(n,s,o,E,A,I,H,ee),s=1,p===!0&&(s|=24),p=Rn(3,null,null,s),n.current=p,p.stateNode=n,s=bm(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},xm(p),n}function MT(n){return n?(n=po,n):po}function PT(n,s,o,u,f,p){f=MT(f),u.context===null?u.context=f:u.pendingContext=f,u=ji(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=qi(n,u,s),o!==null&&(Vn(o,n,s),uu(o,n,s))}function kT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Gp(n,s){kT(n,s),(n=n.alternate)&&kT(n,s)}function LT(n){if(n.tag===13){var s=mo(n,67108864);s!==null&&Vn(s,n,67108864),Gp(n,67108864)}}var lf=!0;function AR(n,s,o,u){var f=W.T;W.T=null;var p=he.p;try{he.p=2,Kp(n,s,o,u)}finally{he.p=p,W.T=f}}function SR(n,s,o,u){var f=W.T;W.T=null;var p=he.p;try{he.p=8,Kp(n,s,o,u)}finally{he.p=p,W.T=f}}function Kp(n,s,o,u){if(lf){var f=Qp(u);if(f===null)Op(n,s,u,uf,o),BT(n,u);else if(bR(f,n,s,o,u))u.stopPropagation();else if(BT(n,u),s&4&&-1<wR.indexOf(n)){for(;f!==null;){var p=pr(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=tr(p.pendingLanes);if(E!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var I=1<<31-tn(E);A.entanglements[1]|=I,E&=~I}xr(p),(Ye&6)===0&&(Gh=Un()+500,Iu(0))}}break;case 13:A=mo(p,2),A!==null&&Vn(A,p,2),Qh(),Gp(p,2)}if(p=Qp(u),p===null&&Op(n,s,u,uf,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Op(n,s,u,null,o)}}function Qp(n){return n=jn(n),$p(n)}var uf=null;function $p(n){if(uf=null,n=Hr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return uf=n,null}function UT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wd()){case Nl:return 2;case Ka:return 8;case ks:case Jd:return 32;case Qa:return 268435456;default:return 32}default:return 32}}var Yp=!1,ts=null,ns=null,rs=null,Mu=new Map,Pu=new Map,is=[],wR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BT(n,s){switch(n){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Mu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(s.pointerId)}}function ku(n,s,o,u,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=pr(s),s!==null&&LT(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function bR(n,s,o,u,f){switch(s){case"focusin":return ts=ku(ts,n,s,o,u,f),!0;case"dragenter":return ns=ku(ns,n,s,o,u,f),!0;case"mouseover":return rs=ku(rs,n,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return Mu.set(p,ku(Mu.get(p)||null,n,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Pu.set(p,ku(Pu.get(p)||null,n,s,o,u,f)),!0}return!1}function zT(n){var s=Hr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Qc(n.priority,function(){if(o.tag===13){var u=Nn();u=Vi(u);var f=mo(o,u);f!==null&&Vn(f,o,u),Gp(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cf(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Qp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Qr=u,o.target.dispatchEvent(u),Qr=null}else return s=pr(o),s!==null&&LT(s),n.blockedOn=o,!1;s.shift()}return!0}function jT(n,s,o){cf(n)&&o.delete(s)}function IR(){Yp=!1,ts!==null&&cf(ts)&&(ts=null),ns!==null&&cf(ns)&&(ns=null),rs!==null&&cf(rs)&&(rs=null),Mu.forEach(jT),Pu.forEach(jT)}function hf(n,s){n.blockedOn===s&&(n.blockedOn=null,Yp||(Yp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,IR)))}var ff=null;function qT(n){ff!==n&&(ff=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ff===n&&(ff=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if($p(u||o)===null)continue;break}var p=pr(o);p!==null&&(n.splice(s,3),s-=3,$m(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Lu(n){function s(I){return hf(I,n)}ts!==null&&hf(ts,n),ns!==null&&hf(ns,n),rs!==null&&hf(rs,n),Mu.forEach(s),Pu.forEach(s);for(var o=0;o<is.length;o++){var u=is[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<is.length&&(o=is[0],o.blockedOn===null);)zT(o),o.blockedOn===null&&is.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],E=f[bt]||null;if(typeof p=="function")E||qT(o);else if(E){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[bt]||null)A=E.formAction;else if($p(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),qT(o)}}}function Xp(n){this._internalRoot=n}df.prototype.render=Xp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Nn();PT(o,u,n,s,null,null)},df.prototype.unmount=Xp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;PT(n.current,2,null,n,null,null),Qh(),s[Bn]=null}};function df(n){this._internalRoot=n}df.prototype.unstable_scheduleHydration=function(n){if(n){var s=Oi();n={blockedOn:null,target:n,priority:s};for(var o=0;o<is.length&&s!==0&&s<is[o].priority;o++);is.splice(o,0,n),o===0&&zT(n)}};var HT=e.version;if(HT!=="19.1.0")throw Error(r(527,HT,"19.1.0"));he.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=m(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var RR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mf.isDisabled&&mf.supportsFiber)try{mt=mf.inject(RR),$e=mf}catch{}}return Bu.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,u="",f=sE,p=aE,E=oE,A=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=OT(n,1,!1,null,null,o,u,f,p,E,A,null),n[Bn]=s.current,Vp(n),new Xp(s)},Bu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var u=!1,f="",p=sE,E=aE,A=oE,I=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(I=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),s=OT(n,1,!0,s,o??null,u,f,p,E,A,I,H),s.context=MT(null),o=s.current,u=Nn(),u=Vi(u),f=ji(u),f.callback=null,qi(o,f,u),o=u,s.current.lanes=o,qr(s,o),xr(s),n[Bn]=s.current,Vp(n),new df(s)},Bu.version="19.1.0",Bu}var ZT;function LR(){if(ZT)return Zp.exports;ZT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Zp.exports=kR(),Zp.exports}var UR=LR();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var e0="popstate";function BR(i={}){function e(a,l){let{pathname:c="/",search:d="",hash:m=""}=Ha(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Tg("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:lc(l))}function r(a,l){Zn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return jR(e,t,r,i)}function ct(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Zn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zR(){return Math.random().toString(36).substring(2,10)}function t0(i,e){return{usr:i.state,key:i.key,idx:e}}function Tg(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ha(e):e,state:t,key:e&&e.key||r||zR()}}function lc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Ha(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function jR(i,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let U=_(),Y=U==null?null:U-g;g=U,m&&m({action:d,location:F.location,delta:Y})}function S(U,Y){d="PUSH";let ie=Tg(F.location,U,Y);t&&t(ie,U),g=_()+1;let te=t0(ie,g),pe=F.createHref(ie);try{c.pushState(te,"",pe)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;a.location.assign(pe)}l&&m&&m({action:d,location:F.location,delta:1})}function D(U,Y){d="REPLACE";let ie=Tg(F.location,U,Y);t&&t(ie,U),g=_();let te=t0(ie,g),pe=F.createHref(ie);c.replaceState(te,"",pe),l&&m&&m({action:d,location:F.location,delta:0})}function P(U){return qR(U)}let F={get action(){return d},get location(){return i(a,c)},listen(U){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(e0,T),m=U,()=>{a.removeEventListener(e0,T),m=null}},createHref(U){return e(a,U)},createURL:P,encodeLocation(U){let Y=P(U);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:S,replace:D,go(U){return c.go(U)}};return F}function qR(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ct(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:lc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function mS(i,e,t="/"){return HR(i,e,t,!1)}function HR(i,e,t,r){let a=typeof e=="string"?Ha(e):e,l=Ei(a.pathname||"/",t);if(l==null)return null;let c=pS(i);FR(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=tC(l);d=ZR(c[m],g,r)}return d}function pS(i,e=[],t=[],r=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(ct(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let g=yi([r,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(ct(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),pS(l.children,e,_,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:WR(g,l.index),routesMeta:_})};return i.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let d of gS(l.path))a(l,c,d)}),e}function gS(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=gS(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>i.startsWith("/")&&m===""?"/":m)}function FR(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:JR(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var GR=/^:[\w-]+$/,KR=3,QR=2,$R=1,YR=10,XR=-2,n0=i=>i==="*";function WR(i,e){let t=i.split("/"),r=t.length;return t.some(n0)&&(r+=XR),e&&(r+=QR),t.filter(a=>!n0(a)).reduce((a,l)=>a+(GR.test(l)?KR:l===""?$R:YR),r)}function JR(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function ZR(i,e,t=!1){let{routesMeta:r}=i,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],g=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=Hf({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),S=m.route;if(!T&&g&&t&&!r[r.length-1].route.index&&(T=Hf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:yi([l,T.pathname]),pathnameBase:sC(yi([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=yi([l,T.pathnameBase]))}return c}function Hf(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=eC(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:_,isOptional:T},S)=>{if(_==="*"){let P=d[S]||"";c=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const D=d[S];return T&&!D?g[_]=void 0:g[_]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:i}}function eC(i,e=!1,t=!0){Zn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function tC(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ei(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function nC(i,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?Ha(i):i;return{pathname:t?t.startsWith("/")?t:rC(t,e):e,search:aC(r),hash:oC(a)}}function rC(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function rg(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iC(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ly(i){let e=iC(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function uy(i,e,t,r=!1){let a;typeof i=="string"?a=Ha(i):(a={...i},ct(!a.pathname||!a.pathname.includes("?"),rg("?","pathname","search",a)),ct(!a.pathname||!a.pathname.includes("#"),rg("#","pathname","hash",a)),ct(!a.search||!a.search.includes("#"),rg("#","search","hash",a)));let l=i===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!r&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),T-=1;a.pathname=S.join("/")}d=T>=0?e[T]:"/"}let m=nC(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var yi=i=>i.join("/").replace(/\/\/+/g,"/"),sC=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),aC=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,oC=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function lC(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var yS=["POST","PUT","PATCH","DELETE"];new Set(yS);var uC=["GET",...yS];new Set(uC);var vl=Q.createContext(null);vl.displayName="DataRouter";var _d=Q.createContext(null);_d.displayName="DataRouterState";Q.createContext(!1);var _S=Q.createContext({isTransitioning:!1});_S.displayName="ViewTransition";var cC=Q.createContext(new Map);cC.displayName="Fetchers";var hC=Q.createContext(null);hC.displayName="Await";var hr=Q.createContext(null);hr.displayName="Navigation";var Rc=Q.createContext(null);Rc.displayName="Location";var fr=Q.createContext({outlet:null,matches:[],isDataRoute:!1});fr.displayName="Route";var cy=Q.createContext(null);cy.displayName="RouteError";function fC(i,{relative:e}={}){ct(El(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Q.useContext(hr),{hash:a,pathname:l,search:c}=xc(i,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:yi([t,l])),r.createHref({pathname:d,search:c,hash:a})}function El(){return Q.useContext(Rc)!=null}function Cs(){return ct(El(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(Rc).location}var vS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ES(i){Q.useContext(hr).static||Q.useLayoutEffect(i)}function Cc(){let{isDataRoute:i}=Q.useContext(fr);return i?IC():dC()}function dC(){ct(El(),"useNavigate() may be used only in the context of a <Router> component.");let i=Q.useContext(vl),{basename:e,navigator:t}=Q.useContext(hr),{matches:r}=Q.useContext(fr),{pathname:a}=Cs(),l=JSON.stringify(ly(r)),c=Q.useRef(!1);return ES(()=>{c.current=!0}),Q.useCallback((m,g={})=>{if(Zn(c.current,vS),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=uy(m,JSON.parse(l),a,g.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:yi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,i])}Q.createContext(null);function mC(){let{matches:i}=Q.useContext(fr),e=i[i.length-1];return e?e.params:{}}function xc(i,{relative:e}={}){let{matches:t}=Q.useContext(fr),{pathname:r}=Cs(),a=JSON.stringify(ly(t));return Q.useMemo(()=>uy(i,JSON.parse(a),r,e==="path"),[i,a,r,e])}function pC(i,e){return TS(i,e)}function TS(i,e,t,r){ct(El(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=Q.useContext(hr),{matches:l}=Q.useContext(fr),c=l[l.length-1],d=c?c.params:{},m=c?c.pathname:"/",g=c?c.pathnameBase:"/",_=c&&c.route;{let Y=_&&_.path||"";AS(m,!_||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let T=Cs(),S;if(e){let Y=typeof e=="string"?Ha(e):e;ct(g==="/"||Y.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),S=Y}else S=T;let D=S.pathname||"/",P=D;if(g!=="/"){let Y=g.replace(/^\//,"").split("/");P="/"+D.replace(/^\//,"").split("/").slice(Y.length).join("/")}let F=mS(i,{pathname:P});Zn(_||F!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Zn(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=EC(F&&F.map(Y=>Object.assign({},Y,{params:Object.assign({},d,Y.params),pathname:yi([g,a.encodeLocation?a.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?g:yi([g,a.encodeLocation?a.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),l,t,r);return e&&U?Q.createElement(Rc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},U):U}function gC(){let i=bC(),e=lC(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=Q.createElement(Q.Fragment,null,Q.createElement("p",null," Hey developer "),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:l},"ErrorBoundary")," or"," ",Q.createElement("code",{style:l},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:a},t):null,c)}var yC=Q.createElement(gC,null),_C=class extends Q.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?Q.createElement(fr.Provider,{value:this.props.routeContext},Q.createElement(cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vC({routeContext:i,match:e,children:t}){let r=Q.useContext(vl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(fr.Provider,{value:i},t)}function EC(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,l=t?.errors;if(l!=null){let m=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);ct(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=m),g.route.id){let{loaderData:_,errors:T}=t,S=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!T||T[g.route.id]===void 0);if(g.route.lazy||S){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let T,S=!1,D=null,P=null;t&&(T=l&&g.route.id?l[g.route.id]:void 0,D=g.route.errorElement||yC,c&&(d<0&&_===0?(AS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,P=null):d===_&&(S=!0,P=g.route.hydrateFallbackElement||null)));let F=e.concat(a.slice(0,_+1)),U=()=>{let Y;return T?Y=D:S?Y=P:g.route.Component?Y=Q.createElement(g.route.Component,null):g.route.element?Y=g.route.element:Y=m,Q.createElement(vC,{match:g,routeContext:{outlet:m,matches:F,isDataRoute:t!=null},children:Y})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?Q.createElement(_C,{location:t.location,revalidation:t.revalidation,component:D,error:T,children:U(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):U()},null)}function hy(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TC(i){let e=Q.useContext(vl);return ct(e,hy(i)),e}function AC(i){let e=Q.useContext(_d);return ct(e,hy(i)),e}function SC(i){let e=Q.useContext(fr);return ct(e,hy(i)),e}function fy(i){let e=SC(i),t=e.matches[e.matches.length-1];return ct(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function wC(){return fy("useRouteId")}function bC(){let i=Q.useContext(cy),e=AC("useRouteError"),t=fy("useRouteError");return i!==void 0?i:e.errors?.[t]}function IC(){let{router:i}=TC("useNavigate"),e=fy("useNavigate"),t=Q.useRef(!1);return ES(()=>{t.current=!0}),Q.useCallback(async(a,l={})=>{Zn(t.current,vS),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...l}))},[i,e])}var r0={};function AS(i,e,t){!e&&!r0[i]&&(r0[i]=!0,Zn(!1,t))}Q.memo(RC);function RC({routes:i,future:e,state:t}){return TS(i,void 0,t,e)}function CC({to:i,replace:e,state:t,relative:r}){ct(El(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=Q.useContext(hr);Zn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=Q.useContext(fr),{pathname:c}=Cs(),d=Cc(),m=uy(i,ly(l),c,r==="path"),g=JSON.stringify(m);return Q.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:r})},[d,g,r,e,t]),null}function wf(i){ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xC({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){ct(!El(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),d=Q.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Ha(t));let{pathname:m="/",search:g="",hash:_="",state:T=null,key:S="default"}=t,D=Q.useMemo(()=>{let P=Ei(m,c);return P==null?null:{location:{pathname:P,search:g,hash:_,state:T,key:S},navigationType:r}},[c,m,g,_,T,S,r]);return Zn(D!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:Q.createElement(hr.Provider,{value:d},Q.createElement(Rc.Provider,{children:e,value:D}))}function DC({children:i,location:e}){return pC(Ag(i),e)}function Ag(i,e=[]){let t=[];return Q.Children.forEach(i,(r,a)=>{if(!Q.isValidElement(r))return;let l=[...e,a];if(r.type===Q.Fragment){t.push.apply(t,Ag(r.props.children,l));return}ct(r.type===wf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ct(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Ag(r.props.children,l)),t.push(c)}),t}var bf="get",If="application/x-www-form-urlencoded";function vd(i){return i!=null&&typeof i.tagName=="string"}function NC(i){return vd(i)&&i.tagName.toLowerCase()==="button"}function VC(i){return vd(i)&&i.tagName.toLowerCase()==="form"}function OC(i){return vd(i)&&i.tagName.toLowerCase()==="input"}function MC(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function PC(i,e){return i.button===0&&(!e||e==="_self")&&!MC(i)}var pf=null;function kC(){if(pf===null)try{new FormData(document.createElement("form"),0),pf=!1}catch{pf=!0}return pf}var LC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ig(i){return i!=null&&!LC.has(i)?(Zn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${If}"`),null):i}function UC(i,e){let t,r,a,l,c;if(VC(i)){let d=i.getAttribute("action");r=d?Ei(d,e):null,t=i.getAttribute("method")||bf,a=ig(i.getAttribute("enctype"))||If,l=new FormData(i)}else if(NC(i)||OC(i)&&(i.type==="submit"||i.type==="image")){let d=i.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||d.getAttribute("action");if(r=m?Ei(m,e):null,t=i.getAttribute("formmethod")||d.getAttribute("method")||bf,a=ig(i.getAttribute("formenctype"))||ig(d.getAttribute("enctype"))||If,l=new FormData(d,i),!kC()){let{name:g,type:_,value:T}=i;if(_==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,T)}}else{if(vd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bf,r=null,a=If,c=i}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dy(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function BC(i,e,t){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ei(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function zC(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jC(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function qC(i,e,t){let r=await Promise.all(i.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await zC(l,t);return c.links?c.links():[]}return[]}));return KC(r.flat(1).filter(jC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function i0(i,e,t,r,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function HC(i,e,{includeHydrateFallback:t}={}){return FC(i.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function FC(i){return[...new Set(i)]}function GC(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function KC(i,e){let t=new Set;return new Set(e),i.reduce((r,a)=>{let l=JSON.stringify(GC(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function SS(){let i=Q.useContext(vl);return dy(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function QC(){let i=Q.useContext(_d);return dy(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var my=Q.createContext(void 0);my.displayName="FrameworkContext";function wS(){let i=Q.useContext(my);return dy(i,"You must render this element inside a <HydratedRouter> element"),i}function $C(i,e){let t=Q.useContext(my),[r,a]=Q.useState(!1),[l,c]=Q.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,S=Q.useRef(null);Q.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let F=Y=>{Y.forEach(ie=>{c(ie.isIntersecting)})},U=new IntersectionObserver(F,{threshold:.5});return S.current&&U.observe(S.current),()=>{U.disconnect()}}},[i]),Q.useEffect(()=>{if(r){let F=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(F)}}},[r]);let D=()=>{a(!0)},P=()=>{a(!1),c(!1)};return t?i!=="intent"?[l,S,{}]:[l,S,{onFocus:zu(d,D),onBlur:zu(m,P),onMouseEnter:zu(g,D),onMouseLeave:zu(_,P),onTouchStart:zu(T,D)}]:[!1,S,{}]}function zu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function YC({page:i,...e}){let{router:t}=SS(),r=Q.useMemo(()=>mS(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?Q.createElement(WC,{page:i,matches:r,...e}):null}function XC(i){let{manifest:e,routeModules:t}=wS(),[r,a]=Q.useState([]);return Q.useEffect(()=>{let l=!1;return qC(i,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[i,e,t]),r}function WC({page:i,matches:e,...t}){let r=Cs(),{manifest:a,routeModules:l}=wS(),{basename:c}=SS(),{loaderData:d,matches:m}=QC(),g=Q.useMemo(()=>i0(i,e,m,a,r,"data"),[i,e,m,a,r]),_=Q.useMemo(()=>i0(i,e,m,a,r,"assets"),[i,e,m,a,r]),T=Q.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let P=new Set,F=!1;if(e.forEach(Y=>{let ie=a.routes[Y.route.id];!ie||!ie.hasLoader||(!g.some(te=>te.route.id===Y.route.id)&&Y.route.id in d&&l[Y.route.id]?.shouldRevalidate||ie.hasClientLoader?F=!0:P.add(Y.route.id))}),P.size===0)return[];let U=BC(i,c,"data");return F&&P.size>0&&U.searchParams.set("_routes",e.filter(Y=>P.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[U.pathname+U.search]},[c,d,r,a,g,e,i,l]),S=Q.useMemo(()=>HC(_,a),[_,a]),D=XC(_);return Q.createElement(Q.Fragment,null,T.map(P=>Q.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),S.map(P=>Q.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),D.map(({key:P,link:F})=>Q.createElement("link",{key:P,...F})))}function JC(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var bS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bS&&(window.__reactRouterVersion="7.7.1")}catch{}function ZC({basename:i,children:e,window:t}){let r=Q.useRef();r.current==null&&(r.current=BR({window:t,v5Compat:!0}));let a=r.current,[l,c]=Q.useState({action:a.action,location:a.location}),d=Q.useCallback(m=>{Q.startTransition(()=>c(m))},[c]);return Q.useLayoutEffect(()=>a.listen(d),[a,d]),Q.createElement(xC,{basename:i,children:e,location:l.location,navigationType:l.action,navigator:a})}var IS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RS=Q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:_,viewTransition:T,...S},D){let{basename:P}=Q.useContext(hr),F=typeof g=="string"&&IS.test(g),U,Y=!1;if(typeof g=="string"&&F&&(U=g,bS))try{let R=new URL(window.location.href),M=g.startsWith("//")?new URL(R.protocol+g):new URL(g),k=Ei(M.pathname,P);M.origin===R.origin&&k!=null?g=k+M.search+M.hash:Y=!0}catch{Zn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=fC(g,{relative:a}),[te,pe,ue]=$C(r,S),le=r2(g,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function x(R){e&&e(R),R.defaultPrevented||le(R)}let b=Q.createElement("a",{...S,...ue,href:U||ie,onClick:Y||l?e:x,ref:JC(D,pe),target:m,"data-discover":!F&&t==="render"?"true":void 0});return te&&!F?Q.createElement(Q.Fragment,null,b,Q.createElement(YC,{page:ie})):b});RS.displayName="Link";var e2=Q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},_){let T=xc(c,{relative:g.relative}),S=Cs(),D=Q.useContext(_d),{navigator:P,basename:F}=Q.useContext(hr),U=D!=null&&l2(T)&&d===!0,Y=P.encodeLocation?P.encodeLocation(T).pathname:T.pathname,ie=S.pathname,te=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(ie=ie.toLowerCase(),te=te?te.toLowerCase():null,Y=Y.toLowerCase()),te&&F&&(te=Ei(te,F)||te);const pe=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let ue=ie===Y||!a&&ie.startsWith(Y)&&ie.charAt(pe)==="/",le=te!=null&&(te===Y||!a&&te.startsWith(Y)&&te.charAt(Y.length)==="/"),x={isActive:ue,isPending:le,isTransitioning:U},b=ue?e:void 0,R;typeof r=="function"?R=r(x):R=[r,ue?"active":null,le?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(x):l;return Q.createElement(RS,{...g,"aria-current":b,className:R,ref:_,style:M,to:c,viewTransition:d},typeof m=="function"?m(x):m)});e2.displayName="NavLink";var t2=Q.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=bf,action:d,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:T,...S},D)=>{let P=a2(),F=o2(d,{relative:g}),U=c.toLowerCase()==="get"?"get":"post",Y=typeof d=="string"&&IS.test(d),ie=te=>{if(m&&m(te),te.defaultPrevented)return;te.preventDefault();let pe=te.nativeEvent.submitter,ue=pe?.getAttribute("formmethod")||c;P(pe||te.currentTarget,{fetcherKey:e,method:ue,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:T})};return Q.createElement("form",{ref:D,method:U,action:F,onSubmit:r?m:ie,...S,"data-discover":!Y&&i==="render"?"true":void 0})});t2.displayName="Form";function n2(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CS(i){let e=Q.useContext(vl);return ct(e,n2(i)),e}function r2(i,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=Cc(),m=Cs(),g=xc(i,{relative:l});return Q.useCallback(_=>{if(PC(_,e)){_.preventDefault();let T=t!==void 0?t:lc(m)===lc(g);d(i,{replace:T,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,g,t,r,e,i,a,l,c])}var i2=0,s2=()=>`__${String(++i2)}__`;function a2(){let{router:i}=CS("useSubmit"),{basename:e}=Q.useContext(hr),t=wC();return Q.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:g}=UC(r,e);if(a.navigate===!1){let _=a.fetcherKey||s2();await i.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await i.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function o2(i,{relative:e}={}){let{basename:t}=Q.useContext(hr),r=Q.useContext(fr);ct(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...xc(i||".",{relative:e})},c=Cs();if(i==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!i||i===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:yi([t,l.pathname])),lc(l)}function l2(i,{relative:e}={}){let t=Q.useContext(_S);ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=CS("useViewTransitionState"),a=xc(i,{relative:e});if(!t.isTransitioning)return!1;let l=Ei(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Ei(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Hf(a.pathname,c)!=null||Hf(a.pathname,l)!=null}var xS=dS();const u2="_root_e2y3u_1",c2="_toolbar_e2y3u_9",h2="_pageTitle_e2y3u_19",f2="_backButton_e2y3u_24",d2="_finishButton_e2y3u_35",m2="_stats_e2y3u_47",p2="_stat_e2y3u_47",g2="_statName_e2y3u_61",y2="_statValue_e2y3u_65",_2="_accent_e2y3u_68",v2="_exercises_e2y3u_72",E2="_addExerciseButton_e2y3u_79",Ft={root:u2,toolbar:c2,pageTitle:h2,backButton:f2,finishButton:d2,stats:m2,stat:p2,statName:g2,statValue:y2,accent:_2,exercises:v2,addExerciseButton:E2};var DS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s0=Ia.createContext&&Ia.createContext(DS),T2=["attr","size","title"];function A2(i,e){if(i==null)return{};var t=S2(i,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(t[r]=i[r])}return t}function S2(i,e){if(i==null)return{};var t={};for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){if(e.indexOf(r)>=0)continue;t[r]=i[r]}return t}function Ff(){return Ff=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Ff.apply(this,arguments)}function a0(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),t.push.apply(t,r)}return t}function Gf(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?a0(Object(t),!0).forEach(function(r){w2(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):a0(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function w2(i,e,t){return e=b2(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function b2(i){var e=I2(i,"string");return typeof e=="symbol"?e:e+""}function I2(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function NS(i){return i&&i.map((e,t)=>Ia.createElement(e.tag,Gf({key:t},e.attr),NS(e.child)))}function Ln(i){return e=>Ia.createElement(R2,Ff({attr:Gf({},i.attr)},e),NS(i.child))}function R2(i){var e=t=>{var{attr:r,size:a,title:l}=i,c=A2(i,T2),d=a||t.size||"1em",m;return t.className&&(m=t.className),i.className&&(m=(m?m+" ":"")+i.className),Ia.createElement("svg",Ff({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:m,style:Gf(Gf({color:i.color||t.color},t.style),i.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&Ia.createElement("title",null,l),i.children)};return s0!==void 0?Ia.createElement(s0.Consumer,null,t=>e(t)):e(DS)}function C2(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8A5.87 5.87 0 0 1 6 12c0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"},child:[]}]})(i)}function py(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(i)}function x2(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(i)}function D2(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z"},child:[]}]})(i)}function o0(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M8 5v14l11-7z"},child:[]}]})(i)}function Ed(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(i)}function N2(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 9h4v11H4zM16 13h4v7h-4zM10 4h4v16h-4z"},child:[]}]})(i)}function V2(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(i)}function gy(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(i)}function yy(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(i)}function O2(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(i)}function M2(i){return Ln({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(i)}function VS(i){var e,t,r="";if(typeof i=="string"||typeof i=="number")r+=i;else if(typeof i=="object")if(Array.isArray(i)){var a=i.length;for(e=0;e<a;e++)i[e]&&(t=VS(i[e]))&&(r&&(r+=" "),r+=t)}else for(t in i)i[t]&&(r&&(r+=" "),r+=t);return r}function _i(){for(var i,e,t=0,r="",a=arguments.length;t<a;t++)(i=arguments[t])&&(e=VS(i))&&(r&&(r+=" "),r+=e);return r}const P2=()=>{};var l0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},k2=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],d=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},MS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,d=c?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,D=g&63;m||(D=64,c||(S=64)),r.push(t[_],t[T],t[S],t[D])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(OS(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):k2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],d=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const T=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new L2;const S=l<<2|d>>4;if(r.push(S),g!==64){const D=d<<4&240|g>>2;if(r.push(D),T!==64){const P=g<<6&192|T;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class L2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U2=function(i){const e=OS(i);return MS.encodeByteArray(e,!0)},PS=function(i){return U2(i).replace(/\./g,"")},kS=function(i){try{return MS.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=()=>LS().__FIREBASE_DEFAULTS__,z2=()=>{if(typeof process>"u"||typeof l0>"u")return;const i=l0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},j2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&kS(i[1]);return e&&JSON.parse(e)},Td=()=>{try{return P2()||B2()||z2()||j2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},q2=i=>Td()?.emulatorHosts?.[i],US=()=>Td()?.config,BS=i=>Td()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zS(i){return(await fetch(i,{credentials:"include"})).ok}const Wu={};function F2(){const i={prod:[],emulator:[]};for(const e of Object.keys(Wu))Wu[e]?i.emulator.push(e):i.prod.push(e);return i}function G2(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let u0=!1;function K2(i,e){if(typeof window>"u"||typeof document>"u"||!Tl(window.location.host)||Wu[i]===e||Wu[i]||u0)return;Wu[i]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",l=F2().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,D){S.setAttribute("width","24"),S.setAttribute("id",D),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{u0=!0,c()},S}function _(S,D){S.setAttribute("id",D),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=G2(r),D=t("text"),P=document.getElementById(D)||document.createElement("span"),F=t("learnmore"),U=document.getElementById(F)||document.createElement("a"),Y=t("preprendIcon"),ie=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const te=S.element;d(te),_(U,F);const pe=g();m(ie,Y),te.append(ie,P,U,pe),document.body.appendChild(te)}l?(P.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function jS(){const i=Td()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y2(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function X2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W2(){const i=kt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function qS(){return!jS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HS(){return!jS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function FS(){try{return typeof indexedDB=="object"}catch{return!1}}function J2(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="FirebaseError";class bi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Z2,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?ex(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new bi(a,d,r)}}function ex(i,e){return i.replace(tx,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const tx=/\{\$([^}]+)}/g;function nx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Va(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],c=e[a];if(c0(l)&&c0(c)){if(!Va(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function c0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rx(i,e){const t=new ix(i,e);return t.subscribe.bind(t)}class ix{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");sx(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=sg),a.error===void 0&&(a.error=sg),a.complete===void 0&&(a.complete=sg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sx(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function sg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(i){return i&&i._delegate?i._delegate:i}class Oa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new H2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lx(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ox(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ox(i){return i===ya?void 0:i}function lx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ax(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ke||(ke={}));const cx={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},hx=ke.INFO,fx={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},dx=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=fx[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _y{constructor(e){this.name=e,this._logLevel=hx,this._logHandler=dx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const mx=(i,e)=>e.some(t=>i instanceof t);let h0,f0;function px(){return h0||(h0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gx(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GS=new WeakMap,Sg=new WeakMap,KS=new WeakMap,ag=new WeakMap,vy=new WeakMap;function yx(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(gs(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&GS.set(t,i)}).catch(()=>{}),vy.set(e,i),e}function _x(i){if(Sg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});Sg.set(i,e)}let wg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Sg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||KS.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gs(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function vx(i){wg=i(wg)}function Ex(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(og(this),e,...t);return KS.set(r,e.sort?e.sort():[e]),gs(r)}:gx().includes(i)?function(...e){return i.apply(og(this),e),gs(GS.get(this))}:function(...e){return gs(i.apply(og(this),e))}}function Tx(i){return typeof i=="function"?Ex(i):(i instanceof IDBTransaction&&_x(i),mx(i,px())?new Proxy(i,wg):i)}function gs(i){if(i instanceof IDBRequest)return yx(i);if(ag.has(i))return ag.get(i);const e=Tx(i);return e!==i&&(ag.set(i,e),vy.set(e,i)),e}const og=i=>vy.get(i);function Ax(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),d=gs(c);return r&&c.addEventListener("upgradeneeded",m=>{r(gs(c.result),m.oldVersion,m.newVersion,gs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const Sx=["get","getKey","getAll","getAllKeys","count"],wx=["put","add","delete","clear"],lg=new Map;function d0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=wx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Sx.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return lg.set(e,l),l}vx(i=>({...i,get:(e,t,r)=>d0(e,t)||i.get(e,t,r),has:(e,t)=>!!d0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ix(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Ix(i){return i.getComponent()?.type==="VERSION"}const bg="@firebase/app",m0="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new _y("@firebase/app"),Rx="@firebase/app-compat",Cx="@firebase/analytics-compat",xx="@firebase/analytics",Dx="@firebase/app-check-compat",Nx="@firebase/app-check",Vx="@firebase/auth",Ox="@firebase/auth-compat",Mx="@firebase/database",Px="@firebase/data-connect",kx="@firebase/database-compat",Lx="@firebase/functions",Ux="@firebase/functions-compat",Bx="@firebase/installations",zx="@firebase/installations-compat",jx="@firebase/messaging",qx="@firebase/messaging-compat",Hx="@firebase/performance",Fx="@firebase/performance-compat",Gx="@firebase/remote-config",Kx="@firebase/remote-config-compat",Qx="@firebase/storage",$x="@firebase/storage-compat",Yx="@firebase/firestore",Xx="@firebase/ai",Wx="@firebase/firestore-compat",Jx="firebase",Zx="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="[DEFAULT]",eD={[bg]:"fire-core",[Rx]:"fire-core-compat",[xx]:"fire-analytics",[Cx]:"fire-analytics-compat",[Nx]:"fire-app-check",[Dx]:"fire-app-check-compat",[Vx]:"fire-auth",[Ox]:"fire-auth-compat",[Mx]:"fire-rtdb",[Px]:"fire-data-connect",[kx]:"fire-rtdb-compat",[Lx]:"fire-fn",[Ux]:"fire-fn-compat",[Bx]:"fire-iid",[zx]:"fire-iid-compat",[jx]:"fire-fcm",[qx]:"fire-fcm-compat",[Hx]:"fire-perf",[Fx]:"fire-perf-compat",[Gx]:"fire-rc",[Kx]:"fire-rc-compat",[Qx]:"fire-gcs",[$x]:"fire-gcs-compat",[Yx]:"fire-fst",[Wx]:"fire-fst-compat",[Xx]:"fire-vertex","fire-js":"fire-js",[Jx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=new Map,tD=new Map,Rg=new Map;function p0(i,e){try{i.container.addComponent(e)}catch(t){Ti.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function tl(i){const e=i.name;if(Rg.has(e))return Ti.debug(`There were multiple attempts to register component ${e}.`),!1;Rg.set(e,i);for(const t of Kf.values())p0(t,i);for(const t of tD.values())p0(t,i);return!0}function Ey(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Wn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Dc("app","Firebase",nD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=Zx;function QS(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Ig,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ys.create("bad-app-name",{appName:String(a)});if(t||(t=US()),!t)throw ys.create("no-options");const l=Kf.get(a);if(l){if(Va(t,l.options)&&Va(r,l.config))return l;throw ys.create("duplicate-app",{appName:a})}const c=new ux(a);for(const m of Rg.values())c.addComponent(m);const d=new rD(t,r,c);return Kf.set(a,d),d}function iD(i=Ig){const e=Kf.get(i);if(!e&&i===Ig&&US())return QS();if(!e)throw ys.create("no-app",{appName:i});return e}function _s(i,e,t){let r=eD[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ti.warn(c.join(" "));return}tl(new Oa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="firebase-heartbeat-database",aD=1,uc="firebase-heartbeat-store";let ug=null;function $S(){return ug||(ug=Ax(sD,aD,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(uc)}catch(t){console.warn(t)}}}}).catch(i=>{throw ys.create("idb-open",{originalErrorMessage:i.message})})),ug}async function oD(i){try{const t=(await $S()).transaction(uc),r=await t.objectStore(uc).get(YS(i));return await t.done,r}catch(e){if(e instanceof bi)Ti.warn(e.message);else{const t=ys.create("idb-get",{originalErrorMessage:e?.message});Ti.warn(t.message)}}}async function g0(i,e){try{const r=(await $S()).transaction(uc,"readwrite");await r.objectStore(uc).put(e,YS(i)),await r.done}catch(t){if(t instanceof bi)Ti.warn(t.message);else{const r=ys.create("idb-set",{originalErrorMessage:t?.message});Ti.warn(r.message)}}}function YS(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=1024,uD=30;class cD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=y0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>uD){const a=dD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ti.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=y0(),{heartbeatsToSend:t,unsentEntries:r}=hD(this._heartbeatsCache.heartbeats),a=PS(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ti.warn(e),""}}}function y0(){return new Date().toISOString().substring(0,10)}function hD(i,e=lD){const t=[];let r=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),_0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),_0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class fD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FS()?J2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _0(i){return PS(JSON.stringify({version:2,heartbeats:i})).length}function dD(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(i){tl(new Oa("platform-logger",e=>new bx(e),"PRIVATE")),tl(new Oa("heartbeat",e=>new cD(e),"PRIVATE")),_s(bg,m0,i),_s(bg,m0,"esm2020"),_s("fire-js","")}mD("");var v0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,XS;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,b){function R(){}R.prototype=b.prototype,x.D=b.prototype,x.prototype=new R,x.prototype.constructor=x,x.C=function(M,k,B){for(var C=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)C[Qt-2]=arguments[Qt];return b.prototype[k].apply(M,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,b,R){R||(R=0);var M=Array(16);if(typeof b=="string")for(var k=0;16>k;++k)M[k]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(k=0;16>k;++k)M[k]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=x.g[0],R=x.g[1],k=x.g[2];var B=x.g[3],C=b+(B^R&(k^B))+M[0]+3614090360&4294967295;b=R+(C<<7&4294967295|C>>>25),C=B+(k^b&(R^k))+M[1]+3905402710&4294967295,B=b+(C<<12&4294967295|C>>>20),C=k+(R^B&(b^R))+M[2]+606105819&4294967295,k=B+(C<<17&4294967295|C>>>15),C=R+(b^k&(B^b))+M[3]+3250441966&4294967295,R=k+(C<<22&4294967295|C>>>10),C=b+(B^R&(k^B))+M[4]+4118548399&4294967295,b=R+(C<<7&4294967295|C>>>25),C=B+(k^b&(R^k))+M[5]+1200080426&4294967295,B=b+(C<<12&4294967295|C>>>20),C=k+(R^B&(b^R))+M[6]+2821735955&4294967295,k=B+(C<<17&4294967295|C>>>15),C=R+(b^k&(B^b))+M[7]+4249261313&4294967295,R=k+(C<<22&4294967295|C>>>10),C=b+(B^R&(k^B))+M[8]+1770035416&4294967295,b=R+(C<<7&4294967295|C>>>25),C=B+(k^b&(R^k))+M[9]+2336552879&4294967295,B=b+(C<<12&4294967295|C>>>20),C=k+(R^B&(b^R))+M[10]+4294925233&4294967295,k=B+(C<<17&4294967295|C>>>15),C=R+(b^k&(B^b))+M[11]+2304563134&4294967295,R=k+(C<<22&4294967295|C>>>10),C=b+(B^R&(k^B))+M[12]+1804603682&4294967295,b=R+(C<<7&4294967295|C>>>25),C=B+(k^b&(R^k))+M[13]+4254626195&4294967295,B=b+(C<<12&4294967295|C>>>20),C=k+(R^B&(b^R))+M[14]+2792965006&4294967295,k=B+(C<<17&4294967295|C>>>15),C=R+(b^k&(B^b))+M[15]+1236535329&4294967295,R=k+(C<<22&4294967295|C>>>10),C=b+(k^B&(R^k))+M[1]+4129170786&4294967295,b=R+(C<<5&4294967295|C>>>27),C=B+(R^k&(b^R))+M[6]+3225465664&4294967295,B=b+(C<<9&4294967295|C>>>23),C=k+(b^R&(B^b))+M[11]+643717713&4294967295,k=B+(C<<14&4294967295|C>>>18),C=R+(B^b&(k^B))+M[0]+3921069994&4294967295,R=k+(C<<20&4294967295|C>>>12),C=b+(k^B&(R^k))+M[5]+3593408605&4294967295,b=R+(C<<5&4294967295|C>>>27),C=B+(R^k&(b^R))+M[10]+38016083&4294967295,B=b+(C<<9&4294967295|C>>>23),C=k+(b^R&(B^b))+M[15]+3634488961&4294967295,k=B+(C<<14&4294967295|C>>>18),C=R+(B^b&(k^B))+M[4]+3889429448&4294967295,R=k+(C<<20&4294967295|C>>>12),C=b+(k^B&(R^k))+M[9]+568446438&4294967295,b=R+(C<<5&4294967295|C>>>27),C=B+(R^k&(b^R))+M[14]+3275163606&4294967295,B=b+(C<<9&4294967295|C>>>23),C=k+(b^R&(B^b))+M[3]+4107603335&4294967295,k=B+(C<<14&4294967295|C>>>18),C=R+(B^b&(k^B))+M[8]+1163531501&4294967295,R=k+(C<<20&4294967295|C>>>12),C=b+(k^B&(R^k))+M[13]+2850285829&4294967295,b=R+(C<<5&4294967295|C>>>27),C=B+(R^k&(b^R))+M[2]+4243563512&4294967295,B=b+(C<<9&4294967295|C>>>23),C=k+(b^R&(B^b))+M[7]+1735328473&4294967295,k=B+(C<<14&4294967295|C>>>18),C=R+(B^b&(k^B))+M[12]+2368359562&4294967295,R=k+(C<<20&4294967295|C>>>12),C=b+(R^k^B)+M[5]+4294588738&4294967295,b=R+(C<<4&4294967295|C>>>28),C=B+(b^R^k)+M[8]+2272392833&4294967295,B=b+(C<<11&4294967295|C>>>21),C=k+(B^b^R)+M[11]+1839030562&4294967295,k=B+(C<<16&4294967295|C>>>16),C=R+(k^B^b)+M[14]+4259657740&4294967295,R=k+(C<<23&4294967295|C>>>9),C=b+(R^k^B)+M[1]+2763975236&4294967295,b=R+(C<<4&4294967295|C>>>28),C=B+(b^R^k)+M[4]+1272893353&4294967295,B=b+(C<<11&4294967295|C>>>21),C=k+(B^b^R)+M[7]+4139469664&4294967295,k=B+(C<<16&4294967295|C>>>16),C=R+(k^B^b)+M[10]+3200236656&4294967295,R=k+(C<<23&4294967295|C>>>9),C=b+(R^k^B)+M[13]+681279174&4294967295,b=R+(C<<4&4294967295|C>>>28),C=B+(b^R^k)+M[0]+3936430074&4294967295,B=b+(C<<11&4294967295|C>>>21),C=k+(B^b^R)+M[3]+3572445317&4294967295,k=B+(C<<16&4294967295|C>>>16),C=R+(k^B^b)+M[6]+76029189&4294967295,R=k+(C<<23&4294967295|C>>>9),C=b+(R^k^B)+M[9]+3654602809&4294967295,b=R+(C<<4&4294967295|C>>>28),C=B+(b^R^k)+M[12]+3873151461&4294967295,B=b+(C<<11&4294967295|C>>>21),C=k+(B^b^R)+M[15]+530742520&4294967295,k=B+(C<<16&4294967295|C>>>16),C=R+(k^B^b)+M[2]+3299628645&4294967295,R=k+(C<<23&4294967295|C>>>9),C=b+(k^(R|~B))+M[0]+4096336452&4294967295,b=R+(C<<6&4294967295|C>>>26),C=B+(R^(b|~k))+M[7]+1126891415&4294967295,B=b+(C<<10&4294967295|C>>>22),C=k+(b^(B|~R))+M[14]+2878612391&4294967295,k=B+(C<<15&4294967295|C>>>17),C=R+(B^(k|~b))+M[5]+4237533241&4294967295,R=k+(C<<21&4294967295|C>>>11),C=b+(k^(R|~B))+M[12]+1700485571&4294967295,b=R+(C<<6&4294967295|C>>>26),C=B+(R^(b|~k))+M[3]+2399980690&4294967295,B=b+(C<<10&4294967295|C>>>22),C=k+(b^(B|~R))+M[10]+4293915773&4294967295,k=B+(C<<15&4294967295|C>>>17),C=R+(B^(k|~b))+M[1]+2240044497&4294967295,R=k+(C<<21&4294967295|C>>>11),C=b+(k^(R|~B))+M[8]+1873313359&4294967295,b=R+(C<<6&4294967295|C>>>26),C=B+(R^(b|~k))+M[15]+4264355552&4294967295,B=b+(C<<10&4294967295|C>>>22),C=k+(b^(B|~R))+M[6]+2734768916&4294967295,k=B+(C<<15&4294967295|C>>>17),C=R+(B^(k|~b))+M[13]+1309151649&4294967295,R=k+(C<<21&4294967295|C>>>11),C=b+(k^(R|~B))+M[4]+4149444226&4294967295,b=R+(C<<6&4294967295|C>>>26),C=B+(R^(b|~k))+M[11]+3174756917&4294967295,B=b+(C<<10&4294967295|C>>>22),C=k+(b^(B|~R))+M[2]+718787259&4294967295,k=B+(C<<15&4294967295|C>>>17),C=R+(B^(k|~b))+M[9]+3951481745&4294967295,x.g[0]=x.g[0]+b&4294967295,x.g[1]=x.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+B&4294967295}r.prototype.u=function(x,b){b===void 0&&(b=x.length);for(var R=b-this.blockSize,M=this.B,k=this.h,B=0;B<b;){if(k==0)for(;B<=R;)a(this,x,B),B+=this.blockSize;if(typeof x=="string"){for(;B<b;)if(M[k++]=x.charCodeAt(B++),k==this.blockSize){a(this,M),k=0;break}}else for(;B<b;)if(M[k++]=x[B++],k==this.blockSize){a(this,M),k=0;break}}this.h=k,this.o+=b},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var b=1;b<x.length-8;++b)x[b]=0;var R=8*this.o;for(b=x.length-8;b<x.length;++b)x[b]=R&255,R/=256;for(this.u(x),x=Array(16),b=R=0;4>b;++b)for(var M=0;32>M;M+=8)x[R++]=this.g[b]>>>M&255;return x};function l(x,b){var R=d;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=b(x)}function c(x,b){this.h=b;for(var R=[],M=!0,k=x.length-1;0<=k;k--){var B=x[k]|0;M&&B==b||(R[k]=B,M=!1)}this.g=R}var d={};function m(x){return-128<=x&&128>x?l(x,function(b){return new c([b|0],0>b?-1:0)}):new c([x|0],0>x?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return T;if(0>x)return U(g(-x));for(var b=[],R=1,M=0;x>=R;M++)b[M]=x/R|0,R*=4294967296;return new c(b,0)}function _(x,b){if(x.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(x.charAt(0)=="-")return U(_(x.substring(1),b));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(b,8)),M=T,k=0;k<x.length;k+=8){var B=Math.min(8,x.length-k),C=parseInt(x.substring(k,k+B),b);8>B?(B=g(Math.pow(b,B)),M=M.j(B).add(g(C))):(M=M.j(R),M=M.add(g(C)))}return M}var T=m(0),S=m(1),D=m(16777216);i=c.prototype,i.m=function(){if(F(this))return-U(this).m();for(var x=0,b=1,R=0;R<this.g.length;R++){var M=this.i(R);x+=(0<=M?M:4294967296+M)*b,b*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(P(this))return"0";if(F(this))return"-"+U(this).toString(x);for(var b=g(Math.pow(x,6)),R=this,M="";;){var k=pe(R,b).g;R=Y(R,k.j(b));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(x);if(R=k,P(R))return B+M;for(;6>B.length;)B="0"+B;M=B+M}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function P(x){if(x.h!=0)return!1;for(var b=0;b<x.g.length;b++)if(x.g[b]!=0)return!1;return!0}function F(x){return x.h==-1}i.l=function(x){return x=Y(this,x),F(x)?-1:P(x)?0:1};function U(x){for(var b=x.g.length,R=[],M=0;M<b;M++)R[M]=~x.g[M];return new c(R,~x.h).add(S)}i.abs=function(){return F(this)?U(this):this},i.add=function(x){for(var b=Math.max(this.g.length,x.g.length),R=[],M=0,k=0;k<=b;k++){var B=M+(this.i(k)&65535)+(x.i(k)&65535),C=(B>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);M=C>>>16,B&=65535,C&=65535,R[k]=C<<16|B}return new c(R,R[R.length-1]&-2147483648?-1:0)};function Y(x,b){return x.add(U(b))}i.j=function(x){if(P(this)||P(x))return T;if(F(this))return F(x)?U(this).j(U(x)):U(U(this).j(x));if(F(x))return U(this.j(U(x)));if(0>this.l(D)&&0>x.l(D))return g(this.m()*x.m());for(var b=this.g.length+x.g.length,R=[],M=0;M<2*b;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var k=0;k<x.g.length;k++){var B=this.i(M)>>>16,C=this.i(M)&65535,Qt=x.i(k)>>>16,dt=x.i(k)&65535;R[2*M+2*k]+=C*dt,ie(R,2*M+2*k),R[2*M+2*k+1]+=B*dt,ie(R,2*M+2*k+1),R[2*M+2*k+1]+=C*Qt,ie(R,2*M+2*k+1),R[2*M+2*k+2]+=B*Qt,ie(R,2*M+2*k+2)}for(M=0;M<b;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=b;M<2*b;M++)R[M]=0;return new c(R,0)};function ie(x,b){for(;(x[b]&65535)!=x[b];)x[b+1]+=x[b]>>>16,x[b]&=65535,b++}function te(x,b){this.g=x,this.h=b}function pe(x,b){if(P(b))throw Error("division by zero");if(P(x))return new te(T,T);if(F(x))return b=pe(U(x),b),new te(U(b.g),U(b.h));if(F(b))return b=pe(x,U(b)),new te(U(b.g),b.h);if(30<x.g.length){if(F(x)||F(b))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=b;0>=M.l(x);)R=ue(R),M=ue(M);var k=le(R,1),B=le(M,1);for(M=le(M,2),R=le(R,2);!P(M);){var C=B.add(M);0>=C.l(x)&&(k=k.add(R),B=C),M=le(M,1),R=le(R,1)}return b=Y(x,k.j(b)),new te(k,b)}for(k=T;0<=x.l(b);){for(R=Math.max(1,Math.floor(x.m()/b.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),B=g(R),C=B.j(b);F(C)||0<C.l(x);)R-=M,B=g(R),C=B.j(b);P(B)&&(B=S),k=k.add(B),x=Y(x,C)}return new te(k,x)}i.A=function(x){return pe(this,x).h},i.and=function(x){for(var b=Math.max(this.g.length,x.g.length),R=[],M=0;M<b;M++)R[M]=this.i(M)&x.i(M);return new c(R,this.h&x.h)},i.or=function(x){for(var b=Math.max(this.g.length,x.g.length),R=[],M=0;M<b;M++)R[M]=this.i(M)|x.i(M);return new c(R,this.h|x.h)},i.xor=function(x){for(var b=Math.max(this.g.length,x.g.length),R=[],M=0;M<b;M++)R[M]=this.i(M)^x.i(M);return new c(R,this.h^x.h)};function ue(x){for(var b=x.g.length+1,R=[],M=0;M<b;M++)R[M]=x.i(M)<<1|x.i(M-1)>>>31;return new c(R,x.h)}function le(x,b){var R=b>>5;b%=32;for(var M=x.g.length-R,k=[],B=0;B<M;B++)k[B]=0<b?x.i(B+R)>>>b|x.i(B+R+1)<<32-b:x.i(B+R);return new c(k,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,vs=c}).apply(typeof v0<"u"?v0:typeof self<"u"?self:typeof window<"u"?window:{});var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WS,Ku,JS,Rf,Cg,ZS,ew,tw;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof gf=="object"&&gf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var v=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var z=h[w];if(!(z in v))break e;v=v[z]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,w=!1,z={next:function(){if(!w&&v<h.length){var $=v++;return{value:y($,h[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,w),h.apply(y,z)}}return function(){return h.apply(y,arguments)}}function S(h,y,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,S.apply(null,arguments)}function D(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function P(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(w,z,$){for(var oe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)oe[Ue-2]=arguments[Ue];return y.prototype[z].apply(w,oe)}}function F(h){const y=h.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function U(h,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(m(w)){const z=h.length||0,$=w.length||0;h.length=z+$;for(let oe=0;oe<$;oe++)h[z+oe]=w[oe]}else h.push(w)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ie(h){return/^[\s\xa0]*$/.test(h)}function te(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function pe(h){return pe[" "](h),h}pe[" "]=function(){};var ue=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function le(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function x(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function b(h){const y={};for(const v in h)y[v]=h[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,y){let v,w;for(let z=1;z<arguments.length;z++){w=arguments[z];for(v in w)h[v]=w[v];for(let $=0;$<R.length;$++)v=R[$],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function k(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function B(h){d.setTimeout(()=>{throw h},0)}function C(){var h=Fe;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Qt{constructor(){this.h=this.g=null}add(y,v){const w=dt.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var dt=new Y(()=>new W,h=>h.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ve=!1,Fe=new Qt,N=()=>{const h=d.Promise.resolve(void 0);he=()=>{h.then(ne)}};var ne=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(v){B(v)}var y=dt;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ve=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function Ve(h,y){if(se.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ue){e:{try{pe(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ie[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ve.aa.h.call(this)}}P(Ve,se);var Ie={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ut="closure_listenable_"+(1e6*Math.random()|0),it=0;function dr(h,y,v,w,z){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=z,this.key=++it,this.da=this.fa=!1}function Ni(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function zr(h){this.src=h,this.g={},this.h=0}zr.prototype.add=function(h,y,v,w,z){var $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);var oe=Ms(h,y,w,z);return-1<oe?(y=h[oe],v||(y.fa=!1)):(y=new dr(y,this.src,$,!!w,z),y.fa=v,h.push(y)),y};function Os(h,y){var v=y.type;if(v in h.g){var w=h.g[v],z=Array.prototype.indexOf.call(w,y,void 0),$;($=0<=z)&&Array.prototype.splice.call(w,z,1),$&&(Ni(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ms(h,y,v,w){for(var z=0;z<h.length;++z){var $=h[z];if(!$.da&&$.listener==y&&$.capture==!!v&&$.ha==w)return z}return-1}var Ps="closure_lm_"+(1e6*Math.random()|0),Dl={};function Fc(h,y,v,w,z){if(Array.isArray(y)){for(var $=0;$<y.length;$++)Fc(h,y[$],v,w,z);return null}return v=Gc(v),h&&h[Ut]?h.K(y,v,g(w)?!!w.capture:!1,z):Un(h,y,v,!1,w,z)}function Un(h,y,v,w,z,$){if(!y)throw Error("Invalid event type");var oe=g(z)?!!z.capture:!!z,Ue=Qa(h);if(Ue||(h[Ps]=Ue=new zr(h)),v=Ue.add(y,v,w,oe,$),v.proxy)return v;if(w=Wd(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)Te||(z=oe),z===void 0&&(z=!1),h.addEventListener(y.toString(),w,z);else if(h.attachEvent)h.attachEvent(ks(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Wd(){function h(v){return y.call(h.src,h.listener,v)}const y=Jd;return h}function Nl(h,y,v,w,z){if(Array.isArray(y))for(var $=0;$<y.length;$++)Nl(h,y[$],v,w,z);else w=g(w)?!!w.capture:!!w,v=Gc(v),h&&h[Ut]?(h=h.i,y=String(y).toString(),y in h.g&&($=h.g[y],v=Ms($,v,w,z),-1<v&&(Ni($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete h.g[y],h.h--)))):h&&(h=Qa(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ms(y,v,w,z)),(v=-1<h?y[h]:null)&&Ka(v))}function Ka(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ut])Os(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(ks(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=Qa(y))?(Os(v,h),v.h==0&&(v.src=null,y[Ps]=null)):Ni(h)}}}function ks(h){return h in Dl?Dl[h]:Dl[h]="on"+h}function Jd(h,y){if(h.da)h=!0;else{y=new Ve(y,this);var v=h.listener,w=h.ha||h.src;h.fa&&Ka(h),h=v.call(w,y)}return h}function Qa(h){return h=h[Ps],h instanceof zr?h:null}var Vl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gc(h){return typeof h=="function"?h:(h[Vl]||(h[Vl]=function(y){return h.handleEvent(y)}),h[Vl])}function mt(){fe.call(this),this.i=new zr(this),this.M=this,this.F=null}P(mt,fe),mt.prototype[Ut]=!0,mt.prototype.removeEventListener=function(h,y,v,w){Nl(this,h,y,v,w)};function $e(h,y){var v,w=h.F;if(w)for(v=[];w;w=w.F)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new se(y,h);else if(y instanceof se)y.target=y.target||h;else{var z=y;y=new se(w,h),M(y,z)}if(z=!0,v)for(var $=v.length-1;0<=$;$--){var oe=y.g=v[$];z=wn(oe,w,!0,y)&&z}if(oe=y.g=h,z=wn(oe,w,!0,y)&&z,z=wn(oe,w,!1,y)&&z,v)for($=0;$<v.length;$++)oe=y.g=v[$],z=wn(oe,w,!1,y)&&z}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],w=0;w<v.length;w++)Ni(v[w]);delete h.g[y],h.h--}}this.F=null},mt.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},mt.prototype.L=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function wn(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,$=0;$<y.length;++$){var oe=y[$];if(oe&&!oe.da&&oe.capture==v){var Ue=oe.listener,Vt=oe.ha||oe.src;oe.fa&&Os(h.i,oe),z=Ue.call(Vt,w)!==!1&&z}}return z&&!w.defaultPrevented}function tn(h,y,v){if(typeof h=="function")v&&(h=S(h,v));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Kc(h){h.g=tn(()=>{h.g=null,h.i&&(h.i=!1,Kc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zd extends fe{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Kc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(h){fe.call(this),this.h=h,this.g={}}P(Ls,fe);var Us=[];function Bs(h){le(h.g,function(y,v){this.g.hasOwnProperty(v)&&Ka(y)},h),h.g={}}Ls.prototype.N=function(){Ls.aa.N.call(this),Bs(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tr=d.JSON.stringify,$a=d.JSON.parse,zs=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ol(){}Ol.prototype.h=null;function Ml(h){return h.h||(h.h=h.i())}function Pl(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qr(){se.call(this,"d")}P(qr,se);function kl(){se.call(this,"c")}P(kl,se);var mr={},Ll=null;function Vi(){return Ll=Ll||new mt}mr.La="serverreachability";function Ya(h){se.call(this,mr.La,h)}P(Ya,se);function Oi(h){const y=Vi();$e(y,new Ya(y))}mr.STAT_EVENT="statevent";function Qc(h,y){se.call(this,mr.STAT_EVENT,h),this.stat=y}P(Qc,se);function ot(h){const y=Vi();$e(y,new Qc(y,h))}mr.Ma="timingevent";function Nt(h,y){se.call(this,mr.Ma,h),this.size=y}P(Nt,se);function bt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function Ul(h,y,v,w,z,$){h.info(function(){if(h.g)if($)for(var oe="",Ue=$.split("&"),Vt=0;Vt<Ue.length;Vt++){var Be=Ue[Vt].split("=");if(1<Be.length){var zt=Be[0];Be=Be[1];var Ot=zt.split("_");oe=2<=Ot.length&&Ot[1]=="type"?oe+(zt+"="+Be+"&"):oe+(zt+"=redacted&")}}else oe=null;else oe=$;return"XMLHTTP REQ ("+w+") [attempt "+z+"]: "+y+`
`+v+`
`+oe})}function em(h,y,v,w,z,$,oe){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+z+"]: "+y+`
`+v+`
`+$+" "+oe})}function Mi(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+js(h,v)+(w?" "+w:"")})}function $c(h,y){h.info(function(){return"TIMEOUT: "+y})}Bn.prototype.info=function(){};function js(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var w=v[h];if(!(2>w.length)){var z=w[1];if(Array.isArray(z)&&!(1>z.length)){var $=z[0];if($!="noop"&&$!="stop"&&$!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return tr(v)}catch{return y}}var Pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pr;function gr(){}P(gr,Ol),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},pr=new gr;function hn(h,y,v,w){this.j=h,this.i=y,this.l=v,this.R=w||1,this.U=new Ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}var Bl={},Xa={};function nr(h,y,v){h.L=1,h.v=Ks(bn(y)),h.m=v,h.P=!0,Fr(h,null)}function Fr(h,y){h.F=Date.now(),qs(h),h.A=bn(h.v);var v=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Gl(v.i,"t",w),h.C=0,v=h.j.J,h.h=new _t,h.g=ch(h.j,v?y:null,!h.m),0<h.O&&(h.M=new Zd(S(h.Y,h,h.g),h.O)),y=h.U,v=h.g,w=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(Us[0]=z.toString()),z=Us);for(var $=0;$<z.length;$++){var oe=Fc(v,z[$],w||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Oi(),Ul(h.i,h.u,h.A,h.l,h.R,h.m)}hn.prototype.ca=function(h){h=h.target;const y=this.M;y&&Hn(h)==3?y.j():this.Y(h)},hn.prototype.Y=function(h){try{if(h==this.g)e:{const Ot=Hn(this.g);var y=this.g.Ba();const Jr=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||nh(this.g)))){this.J||Ot!=4||y==7||(y==8||0>=Jr?Oi(3):Oi(2)),ki(this);var v=this.g.Z();this.X=v;t:if(Yc(this)){var w=nh(this.g);h="";var z=w.length,$=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$t(this),yr(this);var oe="";break t}this.h.i=new d.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,h+=this.h.i.decode(w[y],{stream:!($&&y==z-1)});w.length=0,this.h.g+=h,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,em(this.i,this.u,this.A,this.l,this.R,Ot,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Vt=this.g;if((Ue=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Ue)){var Be=Ue;break t}}Be=null}if(v=Be)Mi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hs(this,v);else{this.o=!1,this.s=3,ot(12),$t(this),yr(this);break e}}if(this.P){v=!0;let Yt;for(;!this.J&&this.C<oe.length;)if(Yt=Xc(this,oe),Yt==Xa){Ot==4&&(this.s=4,ot(14),v=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Bl){this.s=4,ot(15),Mi(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else Mi(this.i,this.l,Yt,null),Hs(this,Yt);if(Yc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||oe.length!=0||this.h.h||(this.s=1,ot(16),v=!1),this.o=this.o&&v,!v)Mi(this.i,this.l,oe,"[Invalid Chunked Response]"),$t(this),yr(this);else if(0<oe.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ea(zt),zt.M=!0,ot(11))}}else Mi(this.i,this.l,oe,null),Hs(this,oe);Ot==4&&$t(this),this.o&&!this.J&&(Ot==4?oh(this.j,this):(this.o=!1,qs(this)))}else sm(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),$t(this),yr(this)}}}catch{}finally{}};function Yc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Xc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Xa:(v=Number(y.substring(v,w)),isNaN(v)?Bl:(w+=1,w+v>y.length?Xa:(y=y.slice(w,w+v),h.C=w+v,y)))}hn.prototype.cancel=function(){this.J=!0,$t(this)};function qs(h){h.S=Date.now()+h.I,Wc(h,h.I)}function Wc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=bt(S(h.ba,h),y)}function ki(h){h.B&&(d.clearTimeout(h.B),h.B=null)}hn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?($c(this.i,this.A),this.L!=2&&(Oi(),ot(17)),$t(this),this.s=2,yr(this)):Wc(this,this.S-h)};function yr(h){h.j.G==0||h.J||oh(h.j,h)}function $t(h){ki(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Bs(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Hs(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||zl(v.h,h))){if(!h.K&&zl(v.h,h)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var z=w;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)lo(v),ao(v);else break e;Xl(v),ot(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=bt(S(v.Za,v),6e3));if(1>=Ja(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Wr(v,11)}else if((h.K||v.g==h)&&lo(v),!ie(y))for(z=v.Da.g.parse(y),y=0;y<z.length;y++){let Be=z[y];if(v.T=Be[0],Be=Be[1],v.G==2)if(Be[0]=="c"){v.K=Be[1],v.ia=Be[2];const zt=Be[3];zt!=null&&(v.la=zt,v.j.info("VER="+v.la));const Ot=Be[4];Ot!=null&&(v.Aa=Ot,v.j.info("SVER="+v.Aa));const Jr=Be[5];Jr!=null&&typeof Jr=="number"&&0<Jr&&(w=1.5*Jr,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Yt=h.g;if(Yt){const wr=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wr){var $=w.h;$.g||wr.indexOf("spdy")==-1&&wr.indexOf("quic")==-1&&wr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Za($,$.h),$.h=null))}if(w.D){const Jl=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Jl&&(w.ya=Jl,Ze(w.I,w.D,Jl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var oe=h;if(w.qa=uh(w,w.J?w.ia:null,w.W),oe.K){fn(w.h,oe);var Ue=oe,Vt=w.L;Vt&&(Ue.I=Vt),Ue.B&&(ki(Ue),qs(Ue)),w.g=oe}else sh(w);0<v.i.length&&oo(v)}else Be[0]!="stop"&&Be[0]!="close"||Wr(v,7);else v.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Wr(v,7):$l(v):Be[0]!="noop"&&v.l&&v.l.ta(Be),v.v=0)}}Oi(4)}catch{}}var Jc=class{constructor(h,y){this.g=h,this.map=y}};function Gr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ja(h){return h.h?1:h.g?h.g.size:0}function zl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Za(h,y){h.g?h.g.add(y):h.h=y}function fn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Gr.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function jl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return F(h.i)}function tm(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,w=0;w<v;w++)y.push(h[w]);return y}y=[],v=0;for(w in h)y[v++]=h[w];return y}function eo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const w in h)y[v++]=w;return y}}}function ql(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=eo(h),w=tm(h),z=w.length,$=0;$<z;$++)y.call(void 0,w[$],v&&v[$],h)}var Fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nm(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var w=h[v].indexOf("="),z=null;if(0<=w){var $=h[v].substring(0,w);z=h[v].substring(w+1)}else $=h[v];y($,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function It(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof It){this.h=h.h,Gs(this,h.j),this.o=h.o,this.g=h.g,Li(this,h.s),this.l=h.l;var y=h.i,v=new Qr;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Kr(this,v),this.m=h.m}else h&&(y=String(h).match(Fs))?(this.h=!1,Gs(this,y[1]||"",!0),this.o=zn(y[2]||""),this.g=zn(y[3]||"",!0),Li(this,y[4]),this.l=zn(y[5]||"",!0),Kr(this,y[6]||"",!0),this.m=zn(y[7]||"")):(this.h=!1,this.i=new Qr(null,this.h))}It.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Qs(y,Hl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Qs(y,Hl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Qs(v,v.charAt(0)=="/"?rm:Fl,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Qs(v,to)),h.join("")};function bn(h){return new It(h)}function Gs(h,y,v){h.j=v?zn(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Li(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Kr(h,y,v){y instanceof Qr?(h.i=y,eh(h.i,h.h)):(v||(y=Qs(y,im)),h.i=new Qr(y,h.h))}function Ze(h,y,v){h.i.set(y,v)}function Ks(h){return Ze(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function zn(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qs(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Zc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Hl=/[#\/\?@]/g,Fl=/[#\?:]/g,rm=/[#\?]/g,im=/[#\?@]/g,to=/#/g;function Qr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function jn(h){h.g||(h.g=new Map,h.h=0,h.i&&nm(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=Qr.prototype,i.add=function(h,y){jn(this),this.i=null,h=_r(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function $r(h,y){jn(h),y=_r(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Yr(h,y){return jn(h),y=_r(h,y),h.g.has(y)}i.forEach=function(h,y){jn(this),this.g.forEach(function(v,w){v.forEach(function(z){h.call(y,z,w,this)},this)},this)},i.na=function(){jn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const z=h[w];for(let $=0;$<z.length;$++)v.push(y[w])}return v},i.V=function(h){jn(this);let y=[];if(typeof h=="string")Yr(this,h)&&(y=y.concat(this.g.get(_r(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},i.set=function(h,y){return jn(this),this.i=null,h=_r(this,h),Yr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Gl(h,y,v){$r(h,y),0<v.length&&(h.i=null,h.g.set(_r(h,y),F(v)),h.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const $=encodeURIComponent(String(w)),oe=this.V(w);for(w=0;w<oe.length;w++){var z=$;oe[w]!==""&&(z+="="+encodeURIComponent(String(oe[w]))),h.push(z)}}return this.i=h.join("&")};function _r(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function eh(h,y){y&&!h.j&&(jn(h),h.i=null,h.g.forEach(function(v,w){var z=w.toLowerCase();w!=z&&($r(this,w),Gl(this,z,v))},h)),h.j=y}function $s(h,y){const v=new Bn;if(d.Image){const w=new Image;w.onload=D(qn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=D(qn,v,"TestLoadImage: error",!1,y,w),w.onabort=D(qn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=D(qn,v,"TestLoadImage: timeout",!1,y,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function rr(h,y){const v=new Bn,w=new AbortController,z=setTimeout(()=>{w.abort(),qn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then($=>{clearTimeout(z),$.ok?qn(v,"TestPingServer: ok",!0,y):qn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),qn(v,"TestPingServer: error",!1,y)})}function qn(h,y,v,w,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),w(v)}catch{}}function Ys(){this.g=new zs}function vr(h,y,v){const w=v||"";try{ql(h,function(z,$){let oe=z;g(z)&&(oe=tr(z)),y.push(w+$+"="+encodeURIComponent(oe))})}catch(z){throw y.push(w+"type="+encodeURIComponent("_badmap")),z}}function Ui(h){this.l=h.Ub||null,this.j=h.eb||!1}P(Ui,Ol),Ui.prototype.g=function(){return new Xr(this.l,this.j)},Ui.prototype.i=function(h){return function(){return h}}({});function Xr(h,y){mt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Xr,mt),i=Xr.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Tr(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Er(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Er(this):Tr(this),this.readyState==3&&Kl(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,Er(this))},i.Qa=function(h){this.g&&(this.response=h,Er(this))},i.ga=function(){this.g&&Er(this)};function Er(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Tr(h)}i.setRequestHeader=function(h,y){this.u.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ql(h){let y="";return le(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function Bt(h,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Ql(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):Ze(h,y,v))}function Qe(h){mt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Qe,mt);var no=/^https?$/i,Xs=["POST","PUT"];i=Qe.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pr.g(),this.v=this.o?Ml(this.o):Ml(pr),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch($){th(this,$);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var z in w)v.set(z,w[z]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())v.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),z=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Xs,y,void 0))||w||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of v)this.g.setRequestHeader($,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ws(this),this.u=!0,this.g.send(h),this.u=!1}catch($){th(this,$)}};function th(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,ro(h),Ar(h)}function ro(h){h.A||(h.A=!0,$e(h,"complete"),$e(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,$e(this,"complete"),$e(this,"abort"),Ar(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ar(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?io(this):this.bb())},i.bb=function(){io(this)};function io(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Hn(h)!=4||h.Z()!=2)){if(h.u&&Hn(h)==4)tn(h.Ea,0,h);else if($e(h,"readystatechange"),Hn(h)==4){h.h=!1;try{const oe=h.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=oe===0){var z=String(h.D).match(Fs)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),w=!no.test(z?z.toLowerCase():"")}v=w}if(v)$e(h,"complete"),$e(h,"success");else{h.m=6;try{var $=2<Hn(h)?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.Z()+"]",ro(h)}}finally{Ar(h)}}}}function Ar(h,y){if(h.g){Ws(h);const v=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||$e(h,"ready");try{v.onreadystatechange=w}catch{}}}function Ws(h){h.I&&(d.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function Hn(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),$a(y)}};function nh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function sm(h){const y={};h=(h.g&&2<=Hn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(ie(h[w]))continue;var v=k(h[w]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=y[z]||[];y[z]=$,$.push(v)}x(y,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function so(h){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,h),this.cb=Js("retryDelaySeedMs",1e4,h),this.Wa=Js("forwardChannelMaxRetries",2,h),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Gr(h&&h.concurrentRequestLimit),this.Da=new Ys,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=so.prototype,i.la=8,i.G=1,i.connect=function(h,y,v,w){ot(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=uh(this,null,this.W),oo(this)};function $l(h){if(rh(h),h.G==3){var y=h.U++,v=bn(h.I);if(Ze(v,"SID",h.K),Ze(v,"RID",y),Ze(v,"TYPE","terminate"),Zs(h,v),y=new hn(h,h.j,y),y.L=2,y.v=Ks(bn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=ch(y.j,null),y.g.ea(y.v)),y.F=Date.now(),qs(y)}lh(h)}function ao(h){h.g&&(ea(h),h.g.cancel(),h.g=null)}function rh(h){ao(h),h.u&&(d.clearTimeout(h.u),h.u=null),lo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function oo(h){if(!Wa(h.h)&&!h.s){h.s=!0;var y=h.Ga;he||N(),ve||(he(),ve=!0),Fe.add(y,h),h.B=0}}function am(h,y){return Ja(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=bt(S(h.Ga,h,y),Wl(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new hn(this,this.j,h);let $=this.o;if(this.S&&($?($=b($),M($,this.S)):$=this.S),this.m!==null||this.O||(z.H=$,$=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=ih(this,z,y),v=bn(this.I),Ze(v,"RID",h),Ze(v,"CVER",22),this.D&&Ze(v,"X-HTTP-Session-Id",this.D),Zs(this,v),$&&(this.O?y="headers="+encodeURIComponent(String(Ql($)))+"&"+y:this.m&&Bt(v,this.m,$)),Za(this.h,z),this.Ua&&Ze(v,"TYPE","init"),this.P?(Ze(v,"$req",y),Ze(v,"SID","null"),z.T=!0,nr(z,v,null)):nr(z,v,y),this.G=2}}else this.G==3&&(h?Yl(this,h):this.i.length==0||Wa(this.h)||Yl(this))};function Yl(h,y){var v;y?v=y.l:v=h.U++;const w=bn(h.I);Ze(w,"SID",h.K),Ze(w,"RID",v),Ze(w,"AID",h.T),Zs(h,w),h.m&&h.o&&Bt(w,h.m,h.o),v=new hn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=ih(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Za(h.h,v),nr(v,w,y)}function Zs(h,y){h.H&&le(h.H,function(v,w){Ze(y,w,v)}),h.l&&ql({},function(v,w){Ze(y,w,v)})}function ih(h,y,v){v=Math.min(h.i.length,v);var w=h.l?S(h.l.Na,h.l,h):null;e:{var z=h.i;let $=-1;for(;;){const oe=["count="+v];$==-1?0<v?($=z[0].g,oe.push("ofs="+$)):$=0:oe.push("ofs="+$);let Ue=!0;for(let Vt=0;Vt<v;Vt++){let Be=z[Vt].g;const zt=z[Vt].map;if(Be-=$,0>Be)$=Math.max(0,z[Vt].g-100),Ue=!1;else try{vr(zt,oe,"req"+Be+"_")}catch{w&&w(zt)}}if(Ue){w=oe.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,w}function sh(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;he||N(),ve||(he(),ve=!0),Fe.add(y,h),h.v=0}}function Xl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=bt(S(h.Fa,h),Wl(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,ah(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=bt(S(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),ao(this),ah(this))};function ea(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function ah(h){h.g=new hn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=bn(h.qa);Ze(y,"RID","rpc"),Ze(y,"SID",h.K),Ze(y,"AID",h.T),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ze(y,"TO",h.ja),Ze(y,"TYPE","xmlhttp"),Zs(h,y),h.m&&h.o&&Bt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Ks(bn(y)),v.m=null,v.P=!0,Fr(v,h)}i.Za=function(){this.C!=null&&(this.C=null,ao(this),Xl(this),ot(19))};function lo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function oh(h,y){var v=null;if(h.g==y){lo(h),ea(h),h.g=null;var w=2}else if(zl(h.h,y))v=y.D,fn(h.h,y),w=1;else return;if(h.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var z=h.B;w=Vi(),$e(w,new Nt(w,v)),oo(h)}else sh(h);else if(z=y.s,z==3||z==0&&0<y.X||!(w==1&&am(h,y)||w==2&&Xl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),z){case 1:Wr(h,5);break;case 4:Wr(h,10);break;case 3:Wr(h,6);break;default:Wr(h,2)}}}function Wl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Wr(h,y){if(h.j.info("Error code "+y),y==2){var v=S(h.fb,h),w=h.Xa;const z=!w;w=new It(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Gs(w,"https"),Ks(w),z?$s(w.toString(),v):rr(w.toString(),v)}else ot(2);h.G=0,h.l&&h.l.sa(y),lh(h),rh(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function lh(h){if(h.G=0,h.ka=[],h.l){const y=jl(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ka,y),U(h.ka,h.i),h.h.i.length=0,F(h.i),h.i.length=0),h.l.ra()}}function uh(h,y,v){var w=v instanceof It?bn(v):new It(v);if(w.g!="")y&&(w.g=y+"."+w.g),Li(w,w.s);else{var z=d.location;w=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var $=new It(null);w&&Gs($,w),y&&($.g=y),z&&Li($,z),v&&($.l=v),w=$}return v=h.D,y=h.ya,v&&y&&Ze(w,v,y),Ze(w,"VER",h.la),Zs(h,w),w}function ch(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Qe(new Ui({eb:v})):new Qe(h.pa),y.Ha(h.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function hh(){}i=hh.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function uo(){}uo.prototype.g=function(h,y){return new dn(h,y)};function dn(h,y){mt.call(this),this.g=new so(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!ie(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ie(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Sr(this)}P(dn,mt),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){$l(this.g)},dn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=tr(h),h=v);y.i.push(new Jc(y.Ya++,h)),y.G==3&&oo(y)},dn.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,dn.aa.N.call(this)};function fh(h){qr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}P(fh,qr);function dh(){kl.call(this),this.status=1}P(dh,kl);function Sr(h){this.g=h}P(Sr,hh),Sr.prototype.ua=function(){$e(this.g,"a")},Sr.prototype.ta=function(h){$e(this.g,new fh(h))},Sr.prototype.sa=function(h){$e(this.g,new dh)},Sr.prototype.ra=function(){$e(this.g,"b")},uo.prototype.createWebChannel=uo.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,tw=function(){return new uo},ew=function(){return Vi()},ZS=mr,Cg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,Rf=Pi,Hr.COMPLETE="complete",JS=Hr,Pl.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Ku=Pl,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,WS=Qe}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});const E0="@firebase/firestore",T0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new _y("@firebase/firestore");function Ko(){return Ma.logLevel}function re(i,...e){if(Ma.logLevel<=ke.DEBUG){const t=e.map(Ty);Ma.debug(`Firestore (${Sl}): ${i}`,...t)}}function Tt(i,...e){if(Ma.logLevel<=ke.ERROR){const t=e.map(Ty);Ma.error(`Firestore (${Sl}): ${i}`,...t)}}function cc(i,...e){if(Ma.logLevel<=ke.WARN){const t=e.map(Ty);Ma.warn(`Firestore (${Sl}): ${i}`,...t)}}function Ty(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,nw(i,r,t)}function nw(i,e,t){let r=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Tt(r),new Error(r)}function ye(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||nw(e,a,r)}function ge(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends bi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(on.UNAUTHENTICATED))}shutdown(){}}class yD{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vi,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vi)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new pD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class _D{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _D(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ED{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);const r=l=>{l.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new A0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new A0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=TD(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Re(i,e){return i<e?-1:i>e?1:0}function xg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return cg(a)===cg(l)?Re(a,l):cg(a)?1:-1}return Re(i.length,e.length)}const AD=55296,SD=57343;function cg(i){const e=i.charCodeAt(0);return e>=AD&&e<=SD}function nl(i,e,t){return i.length===e.length&&i.every((r,a)=>t(r,e[a]))}function rw(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="__name__";class Dr{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&de(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Dr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Re(e.length,t.length)}static compareSegments(e,t){const r=Dr.isNumericId(e),a=Dr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Dr.extractNumericId(e).compare(Dr.extractNumericId(t)):xg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class Ke extends Dr{construct(e,t,r){return new Ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Ke(t)}static emptyPath(){return new Ke([])}}const wD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends Dr{construct(e,t,r){return new ft(e,t,r)}static isValidIdentifier(e){return wD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===S0}static keyField(){return new ft([S0])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ae(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ae(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ae(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ae(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(t)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Ke.fromString(e))}static fromName(e){return new ce(Ke.fromString(e).popFirst(5))}static empty(){return new ce(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(i,e,t){if(!t)throw new ae(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function bD(i,e,t,r){if(e===!0&&r===!0)throw new ae(X.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function w0(i){if(!ce.isDocumentKey(i))throw new ae(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function b0(i){if(ce.isDocumentKey(i))throw new ae(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function sw(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ad(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":de(12329,{type:typeof i})}function Mr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ae(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ad(i);throw new ae(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Vc(i,e){if(!sw(i))throw new ae(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ae(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=-62135596800,R0=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*R0);return new qe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<I0)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/R0}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-I0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:Dt("string",qe._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new qe(0,0))}static max(){return new Ee(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=-1;class Qf{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Dg(i){return i.fields.find(e=>e.kind===2)}function _a(i){return i.fields.filter(e=>e.kind!==2)}Qf.UNKNOWN_ID=-1;class Cf{constructor(e,t){this.fieldPath=e,this.kind=t}}class hc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hc(0,kn.min())}}function aw(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new kn(a,ce.empty(),e)}function ow(i){return new kn(i.readTime,i.key,rl)}class kn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new kn(Ee.min(),ce.empty(),rl)}static max(){return new kn(Ee.max(),ce.empty(),rl)}}function Sy(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(i.documentKey,e.documentKey),t!==0?t:Re(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==lw)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):j.reject(t)}static resolve(e){return new j((t,r)=>{t(e)})}static reject(e){return new j((t,r)=>{r(e)})}static waitFor(e){return new j((t,r)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>r(m))}),c=!0,l===a&&t()})}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next(a=>a?j.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new j((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next(_=>{c[g]=_,++d,d===l&&r(c)},_=>a(_))}})}static doWhile(e,t){return new j((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class Sd{static open(e,t,r,a){try{return new Sd(t,e.transaction(a,r))}catch(l){throw new Ju(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new vi,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ju(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=wy(r.target.error);this.S.reject(new Ju(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new RD(t)}}class Es{static delete(e){return re(On,"Removing database:",e),Ea(LS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!FS())return!1;if(Es.F())return!0;const e=kt(),t=Es.M(e),r=0<t&&t<10,a=cw(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Es.M(kt())===12.2&&Tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(re(On,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new Ju(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ae(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ae(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Ju(e,c))},a.onupgradeneeded=l=>{re(On,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next(()=>{re(On,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=Sd.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next(g=>(d.C(),g)).catch(g=>(d.abort(g),j.reject(g))).toPromise();return m.catch(()=>{}),await d.D,m}catch(d){const m=d,g=m.name!=="FirebaseError"&&c<3;if(re(On,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function cw(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class ID{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ea(this.U.delete())}}class Ju extends ae{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ds(i){return i.name==="IndexedDbTransactionError"}class RD{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(re(On,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(re(On,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ea(r)}add(e){return re(On,"ADD",this.store.name,e,e),Ea(this.store.add(e))}get(e){return Ea(this.store.get(e)).next(t=>(t===void 0&&(t=null),re(On,"GET",this.store.name,e,t),t))}delete(e){return re(On,"DELETE",this.store.name,e),Ea(this.store.delete(e))}count(){return re(On,"COUNT",this.store.name),Ea(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new j((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(r),c=[];return this.H(l,(d,m)=>{c.push(m)}).next(()=>c)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}Z(e,t){re(On,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,(l,c,d)=>d.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}te(e){const t=this.cursor({});return new j((r,a)=>{t.onerror=l=>{const c=wy(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}H(e,t){const r=[];return new j((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new ID(d),g=t(d.primaryKey,d.value,m);if(g instanceof j){const _=g.catch(T=>(m.done(),j.reject(T)));r.push(_)}m.isDone?a():m.G===null?d.continue():d.continue(m.G)}}).next(()=>j.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ea(i){return new j((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=wy(r.target.error);t(a)}})}let C0=!1;function wy(i){const e=Es.M(kt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return C0||(C0=!0,setTimeout(()=>{throw r},0)),r}}return i}const Zu="IndexBackfiller";class CD{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){re(Zu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();re(Zu,`Documents written: ${t}`)}catch(t){Ds(t)?re(Zu,"Ignoring IndexedDB error during index backfill: ",t):await xs(t)}await this.re(6e4)})}}class xD{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let a=t,l=!0;return j.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return re(Zu,`Processing collection: ${c}`),this.oe(e,c,a).next(d=>{a-=d,r.add(c)});l=!1})).next(()=>t-a)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this._e(a,l)).next(d=>(re(Zu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}_e(e,t){let r=e;return t.changes.forEach((a,l)=>{const c=ow(l);Sy(c,r)>0&&(r=c)}),new kn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}An.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=-1;function wd(i){return i==null}function fc(i){return i===0&&1/i==-1/0}function hw(i){return typeof i=="number"&&Number.isInteger(i)&&!fc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="";function cn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=x0(e)),e=DD(i.get(t),e);return x0(e)}function DD(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case $f:t+="";break;default:t+=l}}return t}function x0(i){return i+$f+""}function Vr(i){const e=i.length;if(ye(e>=2,64408,{path:i}),e===2)return ye(i.charAt(0)===$f&&i.charAt(1)==="",56145,{path:i}),Ke.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=i.indexOf($f,l);switch((c<0||c>t)&&de(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=i.substring(l,c),a+="\0";break;case"":a+=i.substring(l,c+1);break;default:de(61167,{path:i})}l=c+2}return new Ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="remoteDocuments",Oc="owner",Bo="owner",dc="mutationQueues",ND="userId",lr="mutations",D0="batchId",wa="userMutationsIndex",N0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(i,e){return[i,cn(e)]}function fw(i,e,t){return[i,cn(e),t]}const VD={},il="documentMutations",Yf="remoteDocumentsV14",OD=["prefixPath","collectionGroup","readTime","documentId"],Df="documentKeyIndex",MD=["prefixPath","collectionGroup","documentId"],dw="collectionGroupIndex",PD=["collectionGroup","readTime","prefixPath","documentId"],mc="remoteDocumentGlobal",Ng="remoteDocumentGlobalKey",sl="targets",mw="queryTargetsIndex",kD=["canonicalId","targetId"],al="targetDocuments",LD=["targetId","path"],by="documentTargetsIndex",UD=["path","targetId"],Xf="targetGlobalKey",Ca="targetGlobal",pc="collectionParents",BD=["collectionId","parent"],ol="clientMetadata",zD="clientId",bd="bundles",jD="bundleId",Id="namedQueries",qD="name",Iy="indexConfiguration",HD="indexId",Vg="collectionGroupIndex",FD="collectionGroup",ec="indexState",GD=["indexId","uid"],pw="sequenceNumberIndex",KD=["uid","sequenceNumber"],tc="indexEntries",QD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gw="documentKeyIndex",$D=["indexId","uid","orderedDocumentKey"],Rd="documentOverlays",YD=["userId","collectionPath","documentId"],Og="collectionPathOverlayIndex",XD=["userId","collectionPath","largestBatchId"],yw="collectionGroupOverlayIndex",WD=["userId","collectionGroup","largestBatchId"],Ry="globals",JD="name",_w=[dc,lr,il,va,sl,Oc,Ca,al,ol,mc,pc,bd,Id],ZD=[..._w,Rd],vw=[dc,lr,il,Yf,sl,Oc,Ca,al,ol,mc,pc,bd,Id,Rd],Ew=vw,Cy=[...Ew,Iy,ec,tc],eN=Cy,Tw=[...Cy,Ry],tN=Tw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends uw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Lt(i,e){const t=ge(i);return Es.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ns(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Aw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yf(this.root,e,this.comparator,!0)}}class yf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Zt.RED,this.left=a??Zt.EMPTY,this.right=l??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Zt(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Zt.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O0(this.data.getIterator())}getIteratorFrom(e){return new O0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Je(this.comparator);return t.data=e,t}}class O0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zo(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Sn([])}unionWith(e){let t=new Je(ft.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Sn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Sw("Invalid base64 string: "+l):l}}(e);return new St(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new St(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const nN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(i){if(ye(!!i,39018),typeof i=="string"){let e=0;const t=nN.exec(i);if(ye(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(i.seconds),nanos:ut(i.nanos)}}function ut(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Si(i){return typeof i=="string"?St.fromBase64String(i):St.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="server_timestamp",bw="__type__",Iw="__previous_value__",Rw="__local_write_time__";function xy(i){return(i?.mapValue?.fields||{})[bw]?.stringValue===ww}function Cd(i){const e=i.mapValue.fields[Iw];return xy(e)?Cd(e):e}function gc(i){const e=Ai(i.mapValue.fields[Rw].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,t,r,a,l,c,d,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const Wf="(default)";class Pa{constructor(e,t){this.projectId=e,this.database=t||Wf}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===Wf}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="__type__",Cw="__max__",ms={mapValue:{fields:{__type__:{stringValue:Cw}}}},Ny="__vector__",ll="value",Nf={nullValue:"NULL_VALUE"};function Ss(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?xy(i)?4:xw(i)?9007199254740991:xd(i)?10:11:de(28295,{value:i})}function Ur(i,e){if(i===e)return!0;const t=Ss(i);if(t!==Ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return gc(i).isEqual(gc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ai(a.timestampValue),d=Ai(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,l){return Si(a.bytesValue).isEqual(Si(l.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,l){return ut(a.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(a.geoPointValue.longitude)===ut(l.geoPointValue.longitude)}(i,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return ut(a.integerValue)===ut(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ut(a.doubleValue),d=ut(l.doubleValue);return c===d?fc(c)===fc(d):isNaN(c)&&isNaN(d)}return!1}(i,e);case 9:return nl(i.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(V0(c)!==V0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ur(c[m],d[m])))return!1;return!0}(i,e);default:return de(52216,{left:i})}}function yc(i,e){return(i.values||[]).find(t=>Ur(t,e))!==void 0}function ws(i,e){if(i===e)return 0;const t=Ss(i),r=Ss(e);if(t!==r)return Re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(i.booleanValue,e.booleanValue);case 2:return function(l,c){const d=ut(l.integerValue||l.doubleValue),m=ut(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(i,e);case 3:return M0(i.timestampValue,e.timestampValue);case 4:return M0(gc(i),gc(e));case 5:return xg(i.stringValue,e.stringValue);case 6:return function(l,c){const d=Si(l),m=Si(c);return d.compareTo(m)}(i.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=Re(d[g],m[g]);if(_!==0)return _}return Re(d.length,m.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Re(ut(l.latitude),ut(c.latitude));return d!==0?d:Re(ut(l.longitude),ut(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return P0(i.arrayValue,e.arrayValue);case 10:return function(l,c){const d=l.fields||{},m=c.fields||{},g=d[ll]?.arrayValue,_=m[ll]?.arrayValue,T=Re(g?.values?.length||0,_?.values?.length||0);return T!==0?T:P0(g,_)}(i.mapValue,e.mapValue);case 11:return function(l,c){if(l===ms.mapValue&&c===ms.mapValue)return 0;if(l===ms.mapValue)return 1;if(c===ms.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const S=xg(m[T],_[T]);if(S!==0)return S;const D=ws(d[m[T]],g[_[T]]);if(D!==0)return D}return Re(m.length,_.length)}(i.mapValue,e.mapValue);default:throw de(23264,{he:t})}}function M0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Re(i,e);const t=Ai(i),r=Ai(e),a=Re(t.seconds,r.seconds);return a!==0?a:Re(t.nanos,r.nanos)}function P0(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ws(t[a],r[a]);if(l)return l}return Re(t.length,r.length)}function ul(i){return Pg(i)}function Pg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=Ai(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Si(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ce.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Pg(l);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Pg(t.fields[c])}`;return a+"}"}(i.mapValue):de(61005,{value:i})}function Vf(i){switch(Ss(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cd(i);return e?16+Vf(e):16;case 5:return 2*i.stringValue.length;case 6:return Si(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+Vf(l),0)}(i.arrayValue);case 10:case 11:return function(r){let a=0;return Ns(r.fields,(l,c)=>{a+=l.length+Vf(c)}),a}(i.mapValue);default:throw de(13486,{value:i})}}function _c(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function kg(i){return!!i&&"integerValue"in i}function vc(i){return!!i&&"arrayValue"in i}function k0(i){return!!i&&"nullValue"in i}function L0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Of(i){return!!i&&"mapValue"in i}function xd(i){return(i?.mapValue?.fields||{})[Dy]?.stringValue===Ny}function nc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ns(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=nc(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nc(i.arrayValue.values[t]);return e}return{...i}}function xw(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Cw}const Dw={mapValue:{fields:{[Dy]:{stringValue:Ny},[ll]:{arrayValue:{}}}}};function iN(i){return"nullValue"in i?Nf:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?_c(Pa.empty(),ce.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?xd(i)?Dw:{mapValue:{}}:de(35942,{value:i})}function sN(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?_c(Pa.empty(),ce.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?Dw:"mapValue"in i?xd(i)?{mapValue:{}}:ms:de(61959,{value:i})}function U0(i,e){const t=ws(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function B0(i,e){const t=ws(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(t)}setAll(e){let t=ft.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=nc(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Of(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ns(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new un(nc(this.value))}}function Nw(i){const e=[];return Ns(i.fields,(t,r)=>{const a=new ft([t]);if(Of(r)){const l=Nw(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new yt(e,0,Ee.min(),Ee.min(),Ee.min(),un.empty(),0)}static newFoundDocument(e,t,r,a){return new yt(e,1,t,Ee.min(),r,a,0)}static newNoDocument(e,t){return new yt(e,2,t,Ee.min(),Ee.min(),un.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,Ee.min(),Ee.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t){this.position=e,this.inclusive=t}}function z0(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?r=ce.comparator(ce.fromName(c.referenceValue),t.key):r=ws(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function j0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ur(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t="asc"){this.field=e,this.dir=t}}function aN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{}class Le extends Vw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new oN(e,t,r):t==="array-contains"?new cN(e,r):t==="in"?new Uw(e,r):t==="not-in"?new hN(e,r):t==="array-contains-any"?new fN(e,r):new Le(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lN(e,r):new uN(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ws(t,this.value)):t!==null&&Ss(this.value)===Ss(t)&&this.matchesComparison(ws(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class We extends Vw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new We(e,t)}matches(e){return hl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hl(i){return i.op==="and"}function Lg(i){return i.op==="or"}function Vy(i){return Ow(i)&&hl(i)}function Ow(i){for(const e of i.filters)if(e instanceof We)return!1;return!0}function Ug(i){if(i instanceof Le)return i.field.canonicalString()+i.op.toString()+ul(i.value);if(Vy(i))return i.filters.map(e=>Ug(e)).join(",");{const e=i.filters.map(t=>Ug(t)).join(",");return`${i.op}(${e})`}}function Mw(i,e){return i instanceof Le?function(r,a){return a instanceof Le&&r.op===a.op&&r.field.isEqual(a.field)&&Ur(r.value,a.value)}(i,e):i instanceof We?function(r,a){return a instanceof We&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&Mw(c,a.filters[d]),!0):!1}(i,e):void de(19439)}function Pw(i,e){const t=i.filters.concat(e);return We.create(t,i.op)}function kw(i){return i instanceof Le?function(t){return`${t.field.canonicalString()} ${t.op} ${ul(t.value)}`}(i):i instanceof We?function(t){return t.op.toString()+" {"+t.getFilters().map(kw).join(" ,")+"}"}(i):"Filter"}class oN extends Le{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class lN extends Le{constructor(e,t){super(e,"in",t),this.keys=Lw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class uN extends Le{constructor(e,t){super(e,"not-in",t),this.keys=Lw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Lw(i,e){return(e.arrayValue?.values||[]).map(t=>ce.fromName(t.referenceValue))}class cN extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vc(t)&&yc(t.arrayValue,this.value)}}class Uw extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yc(this.value.arrayValue,t)}}class hN extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yc(this.value.arrayValue,t)}}class fN extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Bg(i,e=null,t=[],r=[],a=null,l=null,c=null){return new dN(i,e,t,r,a,l,c)}function ka(i){const e=ge(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ug(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),wd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ul(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ul(r)).join(",")),e.Te=t}return e.Te}function Mc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!aN(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Mw(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!j0(i.startAt,e.startAt)&&j0(i.endAt,e.endAt)}function Jf(i){return ce.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Zf(i,e){return i.filters.filter(t=>t instanceof Le&&t.field.isEqual(e))}function q0(i,e,t){let r=Nf,a=!0;for(const l of Zf(i,e)){let c=Nf,d=!0;switch(l.op){case"<":case"<=":c=iN(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Nf}U0({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];U0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function H0(i,e,t){let r=ms,a=!0;for(const l of Zf(i,e)){let c=ms,d=!0;switch(l.op){case">=":case">":c=sN(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ms}B0({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];B0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Bw(i,e,t,r,a,l,c,d){return new wl(i,e,t,r,a,l,c,d)}function Dd(i){return new wl(i)}function F0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function zw(i){return i.collectionGroup!==null}function rc(i){const e=ge(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Je(ft.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ec(l,r))}),t.has(ft.keyField().canonicalString())||e.Ie.push(new Ec(ft.keyField(),r))}return e.Ie}function Pn(i){const e=ge(i);return e.Ee||(e.Ee=mN(e,rc(i))),e.Ee}function mN(i,e){if(i.limitType==="F")return Bg(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Ec(a.field,l)});const t=i.endAt?new cl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new cl(i.startAt.position,i.startAt.inclusive):null;return Bg(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function zg(i,e){const t=i.filters.concat([e]);return new wl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function ed(i,e,t){return new wl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Nd(i,e){return Mc(Pn(i),Pn(e))&&i.limitType===e.limitType}function jw(i){return`${ka(Pn(i))}|lt:${i.limitType}`}function Qo(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>kw(a)).join(", ")}]`),wd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>ul(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>ul(a)).join(",")),`Target(${r})`}(Pn(i))}; limitType=${i.limitType})`}function Pc(i,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ce.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(i,e)&&function(r,a){for(const l of rc(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(i,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(i,e)&&function(r,a){return!(r.startAt&&!function(c,d,m){const g=z0(c,d,m);return c.inclusive?g<=0:g<0}(r.startAt,rc(r),a)||r.endAt&&!function(c,d,m){const g=z0(c,d,m);return c.inclusive?g>=0:g>0}(r.endAt,rc(r),a))}(i,e)}function qw(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Hw(i){return(e,t)=>{let r=!1;for(const a of rc(i)){const l=pN(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function pN(i,e,t){const r=i.field.isKeyField()?ce.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?ws(m,g):de(42886)}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return Aw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=new at(ce.comparator);function Mn(){return gN}const Fw=new at(ce.comparator);function Qu(...i){let e=Fw;for(const t of i)e=e.insert(t.key,t);return e}function Gw(i){let e=Fw;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Or(){return ic()}function Kw(){return ic()}function ic(){return new Ii(i=>i.toString(),(i,e)=>i.isEqual(e))}const yN=new at(ce.comparator),_N=new Je(ce.comparator);function Ne(...i){let e=_N;for(const t of i)e=e.add(t);return e}const vN=new Je(Re);function Oy(){return vN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function Qw(i){return{integerValue:""+i}}function EN(i,e){return hw(e)?Qw(e):My(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(){this._=void 0}}function TN(i,e,t){return i instanceof Tc?function(a,l){const c={fields:{[bw]:{stringValue:ww},[Rw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&xy(l)&&(l=Cd(l)),l&&(c.fields[Iw]=l),{mapValue:c}}(t,e):i instanceof fl?Yw(i,e):i instanceof dl?Xw(i,e):function(a,l){const c=$w(a,l),d=G0(c)+G0(a.Ae);return kg(c)&&kg(a.Ae)?Qw(d):My(a.serializer,d)}(i,e)}function AN(i,e,t){return i instanceof fl?Yw(i,e):i instanceof dl?Xw(i,e):t}function $w(i,e){return i instanceof Ac?function(r){return kg(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Tc extends Vd{}class fl extends Vd{constructor(e){super(),this.elements=e}}function Yw(i,e){const t=Ww(e);for(const r of i.elements)t.some(a=>Ur(a,r))||t.push(r);return{arrayValue:{values:t}}}class dl extends Vd{constructor(e){super(),this.elements=e}}function Xw(i,e){let t=Ww(e);for(const r of i.elements)t=t.filter(a=>!Ur(a,r));return{arrayValue:{values:t}}}class Ac extends Vd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function G0(i){return ut(i.integerValue||i.doubleValue)}function Ww(i){return vc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,t){this.field=e,this.transform=t}}function wN(i,e){return i.field.isEqual(e.field)&&function(r,a){return r instanceof fl&&a instanceof fl||r instanceof dl&&a instanceof dl?nl(r.elements,a.elements,Ur):r instanceof Ac&&a instanceof Ac?Ur(r.Ae,a.Ae):r instanceof Tc&&a instanceof Tc}(i.transform,e.transform)}class bN{constructor(e,t){this.version=e,this.transformResults=t}}class gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Od{}function Jw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Md(i.key,gn.none()):new bl(i.key,i.data,gn.none());{const t=i.data,r=un.empty();let a=new Je(ft.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Ri(i.key,r,new Sn(a.toArray()),gn.none())}}function IN(i,e,t){i instanceof bl?function(a,l,c){const d=a.value.clone(),m=Q0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(i,e,t):i instanceof Ri?function(a,l,c){if(!Mf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Q0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Zw(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(i,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function sc(i,e,t,r){return i instanceof bl?function(l,c,d,m){if(!Mf(l.precondition,c))return d;const g=l.value.clone(),_=$0(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(i,e,t,r):i instanceof Ri?function(l,c,d,m){if(!Mf(l.precondition,c))return d;const g=$0(l.fieldTransforms,m,c),_=c.data;return _.setAll(Zw(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(i,e,t,r):function(l,c,d){return Mf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(i,e,t)}function RN(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=$w(r.transform,a||null);l!=null&&(t===null&&(t=un.empty()),t.set(r.field,l))}return t||null}function K0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&nl(r,a,(l,c)=>wN(l,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class bl extends Od{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ri extends Od{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Zw(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function Q0(i,e,t){const r=new Map;ye(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,AN(c,d,t[a]))}return r}function $0(i,e,t){const r=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);r.set(a.field,TN(l,c,e))}return r}class Md extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eb extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&IN(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=sc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=sc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Kw();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=Jw(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,(t,r)=>K0(t,r))&&nl(this.baseMutations,e.baseMutations,(t,r)=>K0(t,r))}}class ky{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=function(){return yN}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new ky(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,je;function xN(i){switch(i){case X.OK:return de(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return de(15467,{code:i})}}function tb(i){if(i===void 0)return Tt("GRPC error has no .code"),X.UNKNOWN;switch(i){case xt.OK:return X.OK;case xt.CANCELLED:return X.CANCELLED;case xt.UNKNOWN:return X.UNKNOWN;case xt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case xt.INTERNAL:return X.INTERNAL;case xt.UNAVAILABLE:return X.UNAVAILABLE;case xt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case xt.NOT_FOUND:return X.NOT_FOUND;case xt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case xt.ABORTED:return X.ABORTED;case xt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case xt.DATA_LOSS:return X.DATA_LOSS;default:return de(39323,{code:i})}}(je=xt||(xt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new vs([4294967295,4294967295],0);function Y0(i){const e=DN().encode(i),t=new XS;return t.update(e),new Uint8Array(t.digest())}function X0(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new vs([t,r],0),new vs([a,l],0)]}class Uy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $u(`Invalid padding: ${t}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $u(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vs.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(vs.fromNumber(r)));return a.compare(NN)===1&&(a=new vs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Y0(e),[r,a]=X0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Uy(l,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.ge===0)return;const t=Y0(e),[r,a]=X0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kc(Ee.min(),a,new at(Re),Mn(),Ne())}}class Lc{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Lc(r,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class nb{constructor(e,t){this.targetId=e,this.Ce=t}}class rb{constructor(e,t,r=St.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class W0{constructor(){this.ve=0,this.Fe=J0(),this.Me=St.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),r=Ne();return this.Fe.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:de(38017,{changeType:l})}}),new Lc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=J0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mn(),this.Je=_f(),this.He=_f(),this.Ye=new at(Re)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,a)=>{this.rt(a)&&t(a)})}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Jf(l))if(r===0){const c=new ce(l.path);this.et(t,c,yt.newNoDocument(c,Ee.min()))}else ye(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Si(r).toUint8Array()}catch(m){if(m instanceof Sw)return cc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Uy(c,a,l)}catch(m){return cc(m instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)}),a}Tt(e){const t=new Map;this.ze.forEach((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Jf(d.target)){const m=new ce(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,yt.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}});let r=Ne();this.He.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.je.forEach((l,c)=>c.setReadTime(e));const a=new kc(e,t,this.Ye,this.je,r);return this.je=Mn(),this.Je=_f(),this.He=_f(),this.Ye=new at(Re),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new W0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Je(Re),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Je(Re),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new W0),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function _f(){return new at(ce.comparator)}function J0(){return new at(ce.comparator)}const ON={asc:"ASCENDING",desc:"DESCENDING"},MN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PN={and:"AND",or:"OR"};class kN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jg(i,e){return i.useProto3Json||wd(e)?e:{value:e}}function ml(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ib(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function LN(i,e){return ml(i,e.toTimestamp())}function yn(i){return ye(!!i,49232),Ee.fromTimestamp(function(t){const r=Ai(t);return new qe(r.seconds,r.nanos)}(i))}function By(i,e){return qg(i,e).canonicalString()}function qg(i,e){const t=function(a){return new Ke(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?t:t.child(e)}function sb(i){const e=Ke.fromString(i);return ye(mb(e),10190,{key:e.toString()}),e}function td(i,e){return By(i.databaseId,e.path)}function xa(i,e){const t=sb(e);if(t.get(1)!==i.databaseId.projectId)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ce(lb(t))}function ab(i,e){return By(i.databaseId,e)}function ob(i){const e=sb(i);return e.length===4?Ke.emptyPath():lb(e)}function Hg(i){return new Ke(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function lb(i){return ye(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Z0(i,e,t){return{name:td(i,e),fields:t.value.mapValue.fields}}function UN(i,e,t){const r=xa(i,e.name),a=yn(e.updateTime),l=e.createTime?yn(e.createTime):Ee.min(),c=new un({mapValue:{fields:e.fields}}),d=yt.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function BN(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:de(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,_){return g.useProto3Json?(ye(_===void 0||typeof _=="string",58123),St.fromBase64String(_||"")):(ye(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),St.fromUint8Array(_||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(g){const _=g.code===void 0?X.UNKNOWN:tb(g.code);return new ae(_,g.message||"")}(c);t=new rb(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=xa(i,r.document.name),l=yn(r.document.updateTime),c=r.document.createTime?yn(r.document.createTime):Ee.min(),d=new un({mapValue:{fields:r.document.fields}}),m=yt.newFoundDocument(a,l,c,d),g=r.targetIds||[],_=r.removedTargetIds||[];t=new Pf(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=xa(i,r.document),l=r.readTime?yn(r.readTime):Ee.min(),c=yt.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Pf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=xa(i,r.document),l=r.removedTargetIds||[];t=new Pf([],l,a,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new CN(a,l),d=r.targetId;t=new nb(d,c)}}return t}function nd(i,e){let t;if(e instanceof bl)t={update:Z0(i,e.key,e.value)};else if(e instanceof Md)t={delete:td(i,e.key)};else if(e instanceof Ri)t={update:Z0(i,e.key,e.data),updateMask:GN(e.fieldMask)};else{if(!(e instanceof eb))return de(16599,{Vt:e.type});t={verify:td(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Tc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof fl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof dl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ac)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw de(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:LN(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:de(27497)}(i,e.precondition)),t}function Fg(i,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?gn.updateTime(yn(l.updateTime)):l.exists!==void 0?gn.exists(l.exists):gn.none()}(e.currentDocument):gn.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)ye(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),m=new Tc;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new fl(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new dl(_)}else"increment"in d?m=new Ac(c,d.increment):de(16584,{proto:d});const g=ft.fromServerFormat(d.fieldPath);return new SN(g,m)}(i,a)):[];if(e.update){e.update.name;const a=xa(i,e.update.name),l=new un({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const g=m.fieldPaths||[];return new Sn(g.map(_=>ft.fromServerFormat(_)))}(e.updateMask);return new Ri(a,l,c,t,r)}return new bl(a,l,t,r)}if(e.delete){const a=xa(i,e.delete);return new Md(a,t)}if(e.verify){const a=xa(i,e.verify);return new eb(a,t)}return de(1463,{proto:e})}function zN(i,e){return i&&i.length>0?(ye(e!==void 0,14353),i.map(t=>function(a,l){let c=a.updateTime?yn(a.updateTime):yn(l);return c.isEqual(Ee.min())&&(c=yn(l)),new bN(c,a.transformResults||[])}(t,e))):[]}function ub(i,e){return{documents:[ab(i,e.path)]}}function cb(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ab(i,a);const l=function(g){if(g.length!==0)return db(We.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(_=>function(S){return{field:$o(S.field),direction:qN(S.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=jg(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:t,parent:a}}function hb(i){let e=ob(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){ye(r===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const S=fb(T);return S instanceof We&&Vy(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(S=>function(P){return new Ec(Yo(P.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(S))}(t.orderBy));let d=null;t.limit&&(d=function(T){let S;return S=typeof T=="object"?T.value:T,wd(S)?null:S}(t.limit));let m=null;t.startAt&&(m=function(T){const S=!!T.before,D=T.values||[];return new cl(D,S)}(t.startAt));let g=null;return t.endAt&&(g=function(T){const S=!T.before,D=T.values||[];return new cl(D,S)}(t.endAt)),Bw(e,a,c,l,d,"F",m,g)}function jN(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fb(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yo(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Yo(t.unaryFilter.field);return Le.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Yo(t.unaryFilter.field);return Le.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yo(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(i):i.fieldFilter!==void 0?function(t){return Le.create(Yo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return We.create(t.compositeFilter.filters.map(r=>fb(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(t.compositeFilter.op))}(i):de(30097,{filter:i})}function qN(i){return ON[i]}function HN(i){return MN[i]}function FN(i){return PN[i]}function $o(i){return{fieldPath:i.canonicalString()}}function Yo(i){return ft.fromServerFormat(i.fieldPath)}function db(i){return i instanceof Le?function(t){if(t.op==="=="){if(L0(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NAN"}};if(k0(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(L0(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NAN"}};if(k0(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(t.field),op:HN(t.op),value:t.value}}}(i):i instanceof We?function(t){const r=t.getFilters().map(a=>db(a));return r.length===1?r[0]:{compositeFilter:{op:FN(t.op),filters:r}}}(i):de(54877,{filter:i})}function GN(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mb(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t,r,a,l=Ee.min(),c=Ee.min(),d=St.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.yt=e}}function KN(i,e){let t;if(e.document)t=UN(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),a=Ua(e.noDocument.readTime);t=yt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return de(56709);{const r=ce.fromSegments(e.unknownDocument.path),a=Ua(e.unknownDocument.version);t=yt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new qe(a[0],a[1]);return Ee.fromTimestamp(l)}(e.readTime)),t}function eA(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,c){return{name:td(l,c.key),fields:c.data.value.mapValue.fields,updateTime:ml(l,c.version.toTimestamp()),createTime:ml(l,c.createTime.toTimestamp())}}(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:La(e.version)};else{if(!e.isUnknownDocument())return de(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:La(e.version)}}return r}function rd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function La(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ua(i){const e=new qe(i.seconds,i.nanoseconds);return Ee.fromTimestamp(e)}function Ta(i,e){const t=(e.baseMutations||[]).map(l=>Fg(i.yt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>Fg(i.yt,l)),a=qe.fromMillis(e.localWriteTimeMs);return new Py(e.batchId,a,t,r)}function Yu(i){const e=Ua(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Ua(i.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=function(l){return l.documents!==void 0}(i.query)?function(l){const c=l.documents.length;return ye(c===1,1966,{count:c}),Pn(Dd(ob(l.documents[0])))}(i.query):function(l){return Pn(hb(l))}(i.query),new mi(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,St.fromBase64String(i.resumeToken))}function gb(i,e){const t=La(e.snapshotVersion),r=La(e.lastLimboFreeSnapshotVersion);let a;a=Jf(e.target)?ub(i.yt,e.target):cb(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ka(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function yb(i){const e=hb({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ed(e,e.limit,"L"):e}function hg(i,e){return new Ly(e.largestBatchId,Fg(i.yt,e.overlayMutation))}function tA(i,e){const t=e.path.lastSegment();return[i,cn(e.path.popLast()),t]}function nA(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:La(r.readTime),documentKey:cn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{getBundleMetadata(e,t){return rA(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Ua(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return rA(e).put(function(a){return{bundleId:a.id,createTime:La(yn(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return iA(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:yb(l.bundledQuery),readTime:Ua(l.readTime)}}(r)})}saveNamedQuery(e,t){return iA(e).put(function(a){return{name:a.name,readTime:La(yn(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function rA(i){return Lt(i,bd)}function iA(i){return Lt(i,Id)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Pd(e,r)}getOverlay(e,t){return ju(e).get(tA(this.userId,t)).next(r=>r?hg(this.serializer,r):null)}getOverlays(e,t){const r=Or();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,c)=>{const d=new Ly(t,c);a.push(this.St(e,d))}),j.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(cn(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(ju(e).Z(Og,d))}),j.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Or(),l=cn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return ju(e).J(Og,c).next(d=>{for(const m of d){const g=hg(this.serializer,m);a.set(g.getKey(),g)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=Or();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ju(e).ee({index:yw,range:d},(m,g,_)=>{const T=hg(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()}).next(()=>l)}St(e,t){return ju(e).put(function(a,l,c){const[d,m,g]=tA(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:nd(a.yt,c.mutation)}}(this.serializer,this.userId,t))}}function ju(i){return Lt(i,Rd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{bt(e){return Lt(e,Ry)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t?.value;return r?St.fromUint8Array(r):St.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ut(e.integerValue));else if("doubleValue"in e){const r=ut(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),fc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ai(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Si(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?xw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):xd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):de(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=ll,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ut(l)),this.Ot(a,t),this.Ct(r[a],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ce.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Aa.Kt=new Aa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=255;function YN(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function sA(i){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const c=YN(255&r[l]);if(a+=c,c!==8)break}return a}(i);return Math.ceil(e/8)}class XN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),r=sA(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=sA(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(jo),this.sn(255)}_n(){this.an(jo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===jo?(this.sn(jo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===jo?(this.an(jo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class WN{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class JN{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class qu{constructor(){this.cn=new XN,this.ln=new WN(this.cn),this.hn=new JN(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t,r,a){this.Tn=e,this.In=t,this.En=r,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Sa(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:kf(this.En),directionalValue:kf(this.dn),orderedDocumentKey:kf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function as(i,e){let t=i.Tn-e.Tn;return t!==0?t:(t=aA(i.En,e.En),t!==0?t:(t=aA(i.dn,e.dn),t!==0?t:ce.comparator(i.In,e.In)))}function aA(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function kf(i){return HS()?function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r}(i):i}function oA(i){return typeof i!="string"?i:function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(i)}class lA{constructor(e){this.mn=new Je((t,r)=>ft.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ye(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Dg(e);if(t!==void 0&&!this.wn(t))return!1;const r=_a(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.wn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.Sn(d,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new Je(ft.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Cf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Cf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Cf(r.field,r.dir==="asc"?0:1)));return new Qf(Qf.UNKNOWN_ID,this.collectionId,t,hc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(i){if(ye(i instanceof Le||i instanceof We,20012),i instanceof Le){if(i instanceof Uw){const t=i.value.arrayValue?.values?.map(r=>Le.create(i.field,"==",r))||[];return We.create(t,"or")}return i}const e=i.filters.map(t=>_b(t));return We.create(e,i.op)}function ZN(i){if(i.getFilters().length===0)return[];const e=Qg(_b(i));return ye(vb(e),7391),Gg(e)||Kg(e)?[e]:e.getFilters()}function Gg(i){return i instanceof Le}function Kg(i){return i instanceof We&&Vy(i)}function vb(i){return Gg(i)||Kg(i)||function(t){if(t instanceof We&&Lg(t)){for(const r of t.getFilters())if(!Gg(r)&&!Kg(r))return!1;return!0}return!1}(i)}function Qg(i){if(ye(i instanceof Le||i instanceof We,34018),i instanceof Le)return i;if(i.filters.length===1)return Qg(i.filters[0]);const e=i.filters.map(r=>Qg(r));let t=We.create(e,i.op);return t=id(t),vb(t)?t:(ye(t instanceof We,64498),ye(hl(t),40251),ye(t.filters.length>1,57927),t.filters.reduce((r,a)=>zy(r,a)))}function zy(i,e){let t;return ye(i instanceof Le||i instanceof We,38388),ye(e instanceof Le||e instanceof We,25473),t=i instanceof Le?e instanceof Le?function(a,l){return We.create([a,l],"and")}(i,e):uA(i,e):e instanceof Le?uA(e,i):function(a,l){if(ye(a.filters.length>0&&l.filters.length>0,48005),hl(a)&&hl(l))return Pw(a,l.getFilters());const c=Lg(a)?a:l,d=Lg(a)?l:a,m=c.filters.map(g=>zy(g,d));return We.create(m,"or")}(i,e),id(t)}function uA(i,e){if(hl(e))return Pw(e,i.getFilters());{const t=e.filters.map(r=>zy(i,r));return We.create(t,"or")}}function id(i){if(ye(i instanceof Le||i instanceof We,11850),i instanceof Le)return i;const e=i.getFilters();if(e.length===1)return id(e[0]);if(Ow(i))return i;const t=e.map(a=>id(a)),r=[];return t.forEach(a=>{a instanceof Le?r.push(a):a instanceof We&&(a.op===i.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:We.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.Cn=new jy}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(kn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(kn.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class jy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Je(Ke.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Je(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="IndexedDbIndexManager",vf=new Uint8Array(0);class tV{constructor(e,t){this.databaseId=t,this.vn=new jy,this.Fn=new Ii(r=>ka(r),(r,a)=>Mc(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const l={collectionId:r,parent:cn(a)};return hA(e).put(l)}return j.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[rw(t),""],!1,!0);return hA(e).J(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Vr(c.parent))}return r})}addFieldIndex(e,t){const r=Hu(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Ho(e);return l.next(d=>{c.put(nA(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Hu(e),a=Ho(e),l=qo(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Hu(e),r=qo(e),a=Ho(e);return t.Z().next(()=>r.Z()).next(()=>a.Z())}createTargetIndexes(e,t){return j.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new lA(r).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=qo(e);let a=!0;const l=new Map;return j.forEach(this.Mn(t),c=>this.xn(e,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=Ne();const d=[];return j.forEach(l,(m,g)=>{re(cA,`Using index ${function(te){return`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map(pe=>`${pe.fieldPath}:${pe.kind}`).join(",")}`}(m)} to execute ${ka(t)}`);const _=function(te,pe){const ue=Dg(pe);if(ue===void 0)return null;for(const le of Zf(te,ue.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null}(g,m),T=function(te,pe){const ue=new Map;for(const le of _a(pe))for(const x of Zf(te,le.fieldPath))switch(x.op){case"==":case"in":ue.set(le.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ue.set(le.fieldPath.canonicalString(),x.value),Array.from(ue.values())}return null}(g,m),S=function(te,pe){const ue=[];let le=!0;for(const x of _a(pe)){const b=x.kind===0?q0(te,x.fieldPath,te.startAt):H0(te,x.fieldPath,te.startAt);ue.push(b.value),le&&(le=b.inclusive)}return new cl(ue,le)}(g,m),D=function(te,pe){const ue=[];let le=!0;for(const x of _a(pe)){const b=x.kind===0?H0(te,x.fieldPath,te.endAt):q0(te,x.fieldPath,te.endAt);ue.push(b.value),le&&(le=b.inclusive)}return new cl(ue,le)}(g,m),P=this.On(m,g,S),F=this.On(m,g,D),U=this.Nn(m,g,T),Y=this.Bn(m.indexId,_,P,S.inclusive,F,D.inclusive,U);return j.forEach(Y,ie=>r.Y(ie,t.limit).next(te=>{te.forEach(pe=>{const ue=ce.fromSegments(pe.documentKey);c.has(ue)||(c=c.add(ue),d.push(ue))})}))}).next(()=>d)}return j.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=ZN(We.create(e.filters,"and")).map(r=>Bg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const S=t?this.Ln(t[T/g]):vf,D=this.kn(e,S,r[T%g],a),P=this.qn(e,S,l[T%g],c),F=d.map(U=>this.kn(e,S,U,!0));_.push(...this.createRange(D,P,F))}return _}kn(e,t,r,a){const l=new Sa(e,ce.empty(),t,r);return a?l:l.An()}qn(e,t,r,a){const l=new Sa(e,ce.empty(),t,r);return a?l.An():l}xn(e,t){const r=new lA(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const d of l)r.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.Mn(t);return j.forEach(a,l=>this.xn(e,l).next(c=>{c?r!==0&&c.fields.length<function(m){let g=new Je(ft.comparator),_=!1;for(const T of m.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?_=!0:g=g.add(S.field));for(const T of m.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(_?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}Qn(e,t){const r=new qu;for(const a of _a(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.Pn(a.kind);Aa.Kt.Dt(l,c)}return r.un()}Ln(e){const t=new qu;return Aa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new qu;return Aa.Kt.Dt(_c(this.databaseId,t),r.Pn(function(l){const c=_a(l);return c.length===0?0:c[c.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let a=[];a.push(new qu);let l=0;for(const c of _a(e)){const d=r[l++];for(const m of a)if(this.Un(t,c.fieldPath)&&vc(d))a=this.Kn(a,c,d);else{const g=m.Pn(c.kind);Aa.Kt.Dt(d,g)}}return this.Wn(a)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new qu;m.seed(d.un()),Aa.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find(r=>r instanceof Le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Hu(e),a=Ho(e);return(t?r.J(Vg,IDBKeyRange.bound(t,t)):r.J()).next(l=>{const c=[];return j.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(_,T){const S=T?new hc(T.sequenceNumber,new kn(Ua(T.readTime),new ce(Vr(T.documentKey)),T.largestBatchId)):hc.empty(),D=_.fields.map(([P,F])=>new Cf(ft.fromServerFormat(P),F));return new Qf(_.indexId,_.collectionGroup,D,S)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Re(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Hu(e),l=Ho(e);return this.Gn(e).next(c=>a.J(Vg,IDBKeyRange.bound(t,t)).next(d=>j.forEach(d,m=>l.put(nA(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,(a,l)=>{const c=r.get(a.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),j.forEach(d,m=>this.zn(e,a,m).next(g=>{const _=this.jn(l,m);return g.isEqual(_)?j.resolve():this.Jn(e,l,m,g,_)}))))})}Hn(e,t,r,a){return qo(e).put(a.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,a){return qo(e).delete(a.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const a=qo(e);let l=new Je(as);return a.ee({index:gw,range:IDBKeyRange.only([r.indexId,this.uid,kf(this.$n(r,t))])},(c,d)=>{l=l.add(new Sa(r.indexId,t,oA(d.arrayValue),oA(d.directionalValue)))}).next(()=>l)}jn(e,t){let r=new Je(as);const a=this.Qn(t,e);if(a==null)return r;const l=Dg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(vc(c))for(const d of c.arrayValue.values||[])r=r.add(new Sa(t.indexId,e.key,this.Ln(d),a))}else r=r.add(new Sa(t.indexId,e.key,vf,a));return r}Jn(e,t,r,a,l){re(cA,"Updating index entries for document '%s'",t.key);const c=[];return function(m,g,_,T,S){const D=m.getIterator(),P=g.getIterator();let F=zo(D),U=zo(P);for(;F||U;){let Y=!1,ie=!1;if(F&&U){const te=_(F,U);te<0?ie=!0:te>0&&(Y=!0)}else F!=null?ie=!0:Y=!0;Y?(T(U),U=zo(P)):ie?(S(F),F=zo(D)):(F=zo(D),U=zo(P))}}(a,l,as,d=>{c.push(this.Hn(e,t,r,d))},d=>{c.push(this.Yn(e,t,r,d))}),j.waitFor(c)}Gn(e){let t=1;return Ho(e).ee({index:pw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>as(c,d)).filter((c,d,m)=>!d||as(c,m[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=as(c,e),m=as(c,t);if(d===0)a[0]=e.An();else if(d>0&&m<0)a.push(c),a.push(c.An());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,vf,ce.empty()),m=a[c+1].Vn(this.uid,vf,ce.empty());l.push(IDBKeyRange.bound(d,m))}return l}Zn(e,t){return as(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fA)}getMinOffset(e,t){return j.mapArray(this.Mn(t),r=>this.xn(e,r).next(a=>a||de(44426))).next(fA)}}function hA(i){return Lt(i,pc)}function qo(i){return Lt(i,tc)}function Hu(i){return Lt(i,Iy)}function Ho(i){return Lt(i,ec)}function fA(i){ye(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;Sy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new kn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Eb=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(i,e,t){const r=i.store(lr),a=i.store(il),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.ee({range:c},(_,T,S)=>(d++,S.delete()));l.push(m.next(()=>{ye(d===1,47070,{batchId:t.batchId})}));const g=[];for(const _ of t.mutations){const T=fw(e,_.key.path,t.batchId);l.push(a.delete(T)),g.push(_.key)}return j.waitFor(l).next(()=>g)}function sd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw de(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(Eb,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class kd{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Xn={}}static wt(e,t,r,a){ye(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new kd(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return os(e).ee({index:wa,range:r},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=Xo(e),c=os(e);return c.add({}).next(d=>{ye(typeof d=="number",49019);const m=new Py(d,t,r,a),g=function(D,P,F){const U=F.baseMutations.map(ie=>nd(D.yt,ie)),Y=F.mutations.map(ie=>nd(D.yt,ie));return{userId:P,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:U,mutations:Y}}(this.serializer,this.userId,m),_=[];let T=new Je((S,D)=>Re(S.canonicalString(),D.canonicalString()));for(const S of a){const D=fw(this.userId,S.key.path,d);T=T.add(S.key.path.popLast()),_.push(c.put(g)),_.push(l.put(D,VD))}return T.forEach(S=>{_.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.Xn[d]=m.keys()}),j.waitFor(_).next(()=>m)})}lookupMutationBatch(e,t){return os(e).get(t).next(r=>r?(ye(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Ta(this.serializer,r)):null)}er(e,t){return this.Xn[t]?j.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Xn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return os(e).ee({index:wa,range:a},(c,d,m)=>{d.userId===this.userId&&(ye(d.batchId>=r,47524,{tr:r}),l=Ta(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ra;return os(e).ee({index:wa,range:t,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ra],[this.userId,Number.POSITIVE_INFINITY]);return os(e).J(wa,t).next(r=>r.map(a=>Ta(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Xo(e).ee({range:a},(c,d,m)=>{const[g,_,T]=c,S=Vr(_);if(g===this.userId&&t.path.isEqual(S))return os(e).get(T).next(D=>{if(!D)throw de(61480,{nr:c,batchId:T});ye(D.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:D.userId,batchId:T}),l.push(Ta(this.serializer,D))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Re);const a=[];return t.forEach(l=>{const c=xf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Xo(e).ee({range:d},(g,_,T)=>{const[S,D,P]=g,F=Vr(D);S===this.userId&&l.path.isEqual(F)?r=r.add(P):T.done()});a.push(m)}),j.waitFor(a).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=xf(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new Je(Re);return Xo(e).ee({range:c},(m,g,_)=>{const[T,S,D]=m,P=Vr(S);T===this.userId&&r.isPrefixOf(P)?P.length===a&&(d=d.add(D)):_.done()}).next(()=>this.rr(e,d))}rr(e,t){const r=[],a=[];return t.forEach(l=>{a.push(os(e).get(l).next(c=>{if(c===null)throw de(35274,{batchId:l});ye(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(Ta(this.serializer,c))}))}),j.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return Tb(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),j.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return Xo(e).ee({range:r},(l,c,d)=>{if(l[0]===this.userId){const m=Vr(l[1]);a.push(m)}else d.done()}).next(()=>{ye(a.length===0,56720,{sr:a.map(l=>l.canonicalString())})})})}containsKey(e,t){return Ab(e,this.userId,t)}_r(e){return Sb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ra,lastStreamToken:""})}}function Ab(i,e,t){const r=xf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Xo(i).ee({range:l,X:!0},(d,m,g)=>{const[_,T,S]=d;_===e&&T===a&&(c=!0),g.done()}).next(()=>c)}function os(i){return Lt(i,lr)}function Xo(i){return Lt(i,il)}function Sb(i){return Lt(i,dc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ba(0)}static cr(){return new Ba(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new Ba(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>Ee.fromTimestamp(new qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fo(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(ye(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Fo(e).ee((c,d)=>{const m=Yu(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>j.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Fo(e).ee((r,a)=>{const l=Yu(a);t(l)})}lr(e){return mA(e).get(Xf).next(t=>(ye(t!==null,2888),t))}hr(e,t){return mA(e).put(Xf,t)}Pr(e,t){return Fo(e).put(gb(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ka(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Fo(e).ee({range:a,index:mw},(c,d,m)=>{const g=Yu(d);Mc(t,g.target)&&(l=g,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=cs(e);return t.forEach(c=>{const d=cn(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),j.waitFor(a)}removeMatchingKeys(e,t,r){const a=cs(e);return j.forEach(t,l=>{const c=cn(l.path);return j.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=cs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=cs(e);let l=Ne();return a.ee({range:r,X:!0},(c,d,m)=>{const g=Vr(c[1]),_=new ce(g);l=l.add(_)}).next(()=>l)}containsKey(e,t){const r=cn(t.path),a=IDBKeyRange.bound([r],[rw(r)],!1,!0);let l=0;return cs(e).ee({index:by,X:!0,range:a},([c,d],m,g)=>{c!==0&&(l++,g.done())}).next(()=>l>0)}At(e,t){return Fo(e).get(t).next(r=>r?Yu(r):null)}}function Fo(i){return Lt(i,sl)}function mA(i){return Lt(i,Ca)}function cs(i){return Lt(i,al)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="LruGarbageCollector",wb=1048576;function gA([i,e],[t,r]){const a=Re(i,t);return a===0?Re(e,r):a}class rV{constructor(e){this.Ir=e,this.buffer=new Je(gA),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(pA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ds(t)?re(pA,"Ignoring IndexedDB error during garbage collection: ",t):await xs(t)}await this.Vr(3e5)})}}class iV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(An.ce);const r=new rV(t);return this.mr.forEachTarget(e,a=>r.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>r.Ar(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(dA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dA):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(g=Date.now(),Ko()<=ke.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function Ib(i,e){return new iV(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t){this.db=e,this.garbageCollector=Ib(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,a)=>t(a))}addReference(e,t,r){return Ef(e,r)}removeReference(e,t,r){return Ef(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ef(e,t)}br(e,t){return function(a,l){let c=!1;return Sb(a).te(d=>Ab(a,d,l).next(m=>(m&&(c=!0),j.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,(c,d)=>{if(d<=t){const m=this.br(e,c).next(g=>{if(!g)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ee.min()),cs(e).delete(function(T){return[0,cn(T.path)]}(c))))});a.push(m)}}).next(()=>j.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ef(e,t)}Sr(e,t){const r=cs(e);let a,l=An.ce;return r.ee({index:by},([c,d],{path:m,sequenceNumber:g})=>{c===0?(l!==An.ce&&t(new ce(Vr(a)),l),l=g,a=m):l=An.ce}).next(()=>{l!==An.ce&&t(new ce(Vr(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ef(i,e){return cs(i).put(function(r,a){return{targetId:0,path:cn(r.path),sequenceNumber:a}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.changes=new Ii(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ga(e).put(r)}removeEntry(e,t,r){return ga(e).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],rd(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=yt.newInvalidDocument(t);return ga(e).ee({index:Df,range:IDBKeyRange.only(Fu(t))},(a,l)=>{r=this.Cr(t,l)}).next(()=>r)}vr(e,t){let r={size:0,document:yt.newInvalidDocument(t)};return ga(e).ee({index:Df,range:IDBKeyRange.only(Fu(t))},(a,l)=>{r={document:this.Cr(t,l),size:sd(l)}}).next(()=>r)}getEntries(e,t){let r=Mn();return this.Fr(e,t,(a,l)=>{const c=this.Cr(a,l);r=r.insert(a,c)}).next(()=>r)}Mr(e,t){let r=Mn(),a=new at(ce.comparator);return this.Fr(e,t,(l,c)=>{const d=this.Cr(l,c);r=r.insert(l,d),a=a.insert(l,sd(c))}).next(()=>({documents:r,Or:a}))}Fr(e,t,r){if(t.isEmpty())return j.resolve();let a=new Je(vA);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Fu(a.first()),Fu(a.last())),c=a.getIterator();let d=c.getNext();return ga(e).ee({index:Df,range:l},(m,g,_)=>{const T=ce.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&vA(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,g),d=c.hasNext()?c.getNext():null),d?_.j(Fu(d)):_.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),rd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ga(e).J(IDBKeyRange.bound(d,m,!0)).next(g=>{l?.incrementDocumentReadCount(g.length);let _=Mn();for(const T of g){const S=this.Cr(ce.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(Pc(t,S)||a.has(S.key))&&(_=_.insert(S.key,S))}return _})}getAllFromCollectionGroup(e,t,r,a){let l=Mn();const c=_A(t,r),d=_A(t,kn.max());return ga(e).ee({index:dw,range:IDBKeyRange.bound(c,d,!0)},(m,g,_)=>{const T=this.Cr(ce.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(e){return new oV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return yA(e).get(Ng).next(t=>(ye(!!t,20021),t))}Dr(e,t){return yA(e).put(Ng,t)}Cr(e,t){if(t){const r=KN(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return yt.newInvalidDocument(e)}}function Cb(i){return new aV(i)}class oV extends Rb{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ii(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new Je((l,c)=>Re(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=eA(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=sd(m);r+=g-d.size,t.push(this.Nr.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=eA(this.Nr.serializer,c.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Nr.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:a})=>(a.forEach((l,c)=>{this.Br.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function yA(i){return Lt(i,mc)}function ga(i){return Lt(i,Yf)}function Fu(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _A(i,e){const t=e.documentKey.path.toArray();return[i,rd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vA(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Re(t[l],r[l]),a)return a;return a=Re(t.length,r.length),a||(a=Re(t[t.length-2],r[r.length-2]),a||Re(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&sc(r.mutation,a,Sn.empty(),qe.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ne()){const a=Or();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let c=Qu();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Or();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ne()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let l=Mn();const c=ic(),d=function(){return ic()}();return t.forEach((m,g)=>{const _=r.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Ri)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),sc(_.mutation,g,_.mutation.getFieldMask(),qe.now())):c.set(g.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((g,_)=>c.set(g,_)),t.forEach((g,_)=>d.set(g,new lV(_,c.get(g)??null))),d))}recalculateAndSaveOverlays(e,t){const r=ic();let a=new at((c,d)=>c-d),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||Sn.empty();_=d.applyToLocalView(g,_),r.set(m,_);const T=(a.get(d.batchId)||Ne()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,T=Kw();_.forEach(S=>{if(!l.has(S)){const D=Jw(t.get(S),r.get(S));D!==null&&T.set(S,D),l=l.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return j.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):j.resolve(Or());let d=rl,m=l;return c.next(g=>j.forEach(g,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?j.resolve():this.remoteDocumentCache.getEntry(e,_).next(S=>{m=m.insert(_,S)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,m,g,Ne())).next(_=>({batchId:d,changes:Gw(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(r=>{let a=Qu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Qu();return this.indexManager.getCollectionParents(e,l).next(d=>j.forEach(d,m=>{const g=function(T,S){return new wl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next(_=>{_.forEach((T,S)=>{c=c.insert(T,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(c=>{l.forEach((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,yt.newInvalidDocument(_)))});let d=Qu();return c.forEach((m,g)=>{const _=l.get(m);_!==void 0&&sc(_.mutation,g,Sn.empty(),qe.now()),Pc(t,g)&&(d=d.insert(m,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:yn(a.createTime)}}(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(a){return{name:a.name,query:yb(a.bundledQuery),readTime:yn(a.readTime)}}(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.overlays=new at(ce.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Or();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.St(e,t,l)}),j.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const a=Or(),l=t.length+1,c=new ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return j.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new at((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=Or(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Or(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=a)););return j.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Ly(t,r));let l=this.qr.get(t);l===void 0&&(l=Ne(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.Qr=new Je(Gt.$r),this.Ur=new Je(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Gt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Gt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new ce(new Ke([])),r=new Gt(t,e),a=new Gt(t,e+1),l=[];return this.Ur.forEachInRange([r,a],c=>{this.Gr(c),l.push(c.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ce(new Ke([])),r=new Gt(t,e),a=new Gt(t,e+1);let l=Ne();return this.Ur.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Gt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ce.comparator(e.key,t.key)||Re(e.Yr,t.Yr)}static Kr(e,t){return Re(e.Yr,t.Yr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Je(Gt.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Py(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Gt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return j.resolve(c)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Ra:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gt(t,0),a=new Gt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],c=>{const d=this.Xr(c.Yr);l.push(d)}),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Re);return t.forEach(a=>{const l=new Gt(a,0),c=new Gt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],d=>{r=r.add(d.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ce.isDocumentKey(l)||(l=l.child(""));const c=new Gt(new ce(l),0);let d=new Je(Re);return this.Zr.forEachWhile(m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Yr)),!0)},c),j.resolve(this.ti(d))}ti(e){const t=[];return e.forEach(r=>{const a=this.Xr(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){ye(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(t.mutations,a=>{const l=new Gt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new Gt(t,0),a=this.Zr.firstAfterOrEqual(r);return j.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.ri=e,this.docs=function(){return new at(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let r=Mn();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():yt.newInvalidDocument(a))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Mn();const c=t.path,d=new ce(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Sy(ow(_),r)<=0||(a.has(_.key)||Pc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,r,a){de(9500)}ii(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mV(this)}getSize(e){return j.resolve(this.size)}}class mV extends Rb{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.persistence=e,this.si=new Ii(t=>ka(t),Mc),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new qy,this.targetCount=0,this.ai=Ba.ur()}forEachTarget(e,t){return this.si.forEach((r,a)=>t(a)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ba(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),j.waitFor(l).next(()=>a)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t){this.ui={},this.overlays={},this.ci=new An(0),this.li=!1,this.li=!0,this.hi=new hV,this.referenceDelegate=e(this),this.Pi=new pV(this),this.indexManager=new eV,this.remoteDocumentCache=function(a){return new dV(a)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new pb(t),this.Ii=new uV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new fV(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);const a=new gV(this.ci.next());return this.referenceDelegate.Ei(),r(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ai(e,t){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class gV extends uw{constructor(e){super(),this.currentSequenceNumber=e}}class Ld{constructor(e){this.persistence=e,this.Ri=new qy,this.Vi=null}static mi(e){return new Ld(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(a=>this.fi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.fi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{const a=ce.fromPath(r);return this.gi(e,a).next(l=>{l||t.removeEntry(a,Ee.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ad{constructor(e,t){this.persistence=e,this.pi=new Ii(r=>cn(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=Ib(this,t)}static mi(e,t){return new ad(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return j.forEach(this.pi,(r,a)=>this.br(e,r,a).next(l=>l?j.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,c=>this.br(e,c,t).next(d=>{d||(r++,l.removeEntry(c,Ee.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vf(e.data.value)),t}br(e,t,r){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return j.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Sd("createOrUpgrade",t);r<1&&a>=1&&(function(m){m.createObjectStore(Oc)}(e),function(m){m.createObjectStore(dc,{keyPath:ND}),m.createObjectStore(lr,{keyPath:D0,autoIncrement:!0}).createIndex(wa,N0,{unique:!0}),m.createObjectStore(il)}(e),EA(e),function(m){m.createObjectStore(va)}(e));let c=j.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(al),m.deleteObjectStore(sl),m.deleteObjectStore(Ca)}(e),EA(e)),c=c.next(()=>function(m){const g=m.store(Ca),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return g.put(Xf,_)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(m,g){return g.store(lr).J().next(T=>{m.deleteObjectStore(lr),m.createObjectStore(lr,{keyPath:D0,autoIncrement:!0}).createIndex(wa,N0,{unique:!0});const S=g.store(lr),D=T.map(P=>S.put(P));return j.waitFor(D)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore(ol,{keyPath:zD})})(e)})),r<5&&a>=5&&(c=c.next(()=>this.yi(l))),r<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(mc)}(e),this.wi(l)))),r<7&&a>=7&&(c=c.next(()=>this.Si(l))),r<8&&a>=8&&(c=c.next(()=>this.bi(e,l))),r<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.Di(l))),r<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(bd,{keyPath:jD})})(e),function(m){m.createObjectStore(Id,{keyPath:qD})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(m){const g=m.createObjectStore(Rd,{keyPath:YD});g.createIndex(Og,XD,{unique:!1}),g.createIndex(yw,WD,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(m){const g=m.createObjectStore(Yf,{keyPath:OD});g.createIndex(Df,MD),g.createIndex(dw,PD)}(e)).next(()=>this.Ci(e,l)).next(()=>e.deleteObjectStore(va))),r<14&&a>=14&&(c=c.next(()=>this.Fi(e,l))),r<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(Iy,{keyPath:HD,autoIncrement:!0}).createIndex(Vg,FD,{unique:!1}),m.createObjectStore(ec,{keyPath:GD}).createIndex(pw,KD,{unique:!1}),m.createObjectStore(tc,{keyPath:QD}).createIndex(gw,$D,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(ec).clear()}).next(()=>{t.objectStore(tc).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(Ry,{keyPath:JD})})(e)})),r<18&&a>=18&&HS()&&(c=c.next(()=>{t.objectStore(ec).clear()}).next(()=>{t.objectStore(tc).clear()})),c}wi(e){let t=0;return e.store(va).ee((r,a)=>{t+=sd(a)}).next(()=>{const r={byteSize:t};return e.store(mc).put(Ng,r)})}yi(e){const t=e.store(dc),r=e.store(lr);return t.J().next(a=>j.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,Ra],[l.userId,l.lastAcknowledgedBatchId]);return r.J(wa,c).next(d=>j.forEach(d,m=>{ye(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=Ta(this.serializer,m);return Tb(e,l.userId,g).next(()=>{})}))}))}Si(e){const t=e.store(al),r=e.store(va);return e.store(Ca).get(Xf).next(a=>{const l=[];return r.ee((c,d)=>{const m=new Ke(c),g=function(T){return[0,cn(T)]}(m);l.push(t.get(g).next(_=>_?j.resolve():(T=>t.put({targetId:0,path:cn(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>j.waitFor(l))})}bi(e,t){e.createObjectStore(pc,{keyPath:BD});const r=t.store(pc),a=new jy,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:cn(m)})}};return t.store(va).ee({X:!0},(c,d)=>{const m=new Ke(c);return l(m.popLast())}).next(()=>t.store(il).ee({X:!0},([c,d,m],g)=>{const _=Vr(d);return l(_.popLast())}))}Di(e){const t=e.store(sl);return t.ee((r,a)=>{const l=Yu(a),c=gb(this.serializer,l);return t.put(c)})}Ci(e,t){const r=t.store(va),a=[];return r.ee((l,c)=>{const d=t.store(Yf),m=function(T){return T.document?new ce(Ke.fromString(T.document.name).popFirst(5)):T.noDocument?ce.fromSegments(T.noDocument.path):T.unknownDocument?ce.fromSegments(T.unknownDocument.path):de(36783)}(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))}).next(()=>j.waitFor(a))}Fi(e,t){const r=t.store(lr),a=Cb(this.serializer),l=new Hy(Ld.mi,this.serializer.yt);return r.J().next(c=>{const d=new Map;return c.forEach(m=>{let g=d.get(m.userId)??Ne();Ta(this.serializer,m).keys().forEach(_=>g=g.add(_)),d.set(m.userId,g)}),j.forEach(d,(m,g)=>{const _=new on(g),T=Pd.wt(this.serializer,_),S=l.getIndexManager(_),D=kd.wt(_,this.serializer,S,l.referenceDelegate);return new xb(a,D,T,S).recalculateAndSaveOverlaysForDocumentKeys(new Mg(t,An.ce),m).next()})})}}function EA(i){i.createObjectStore(al,{keyPath:LD}).createIndex(by,UD,{unique:!0}),i.createObjectStore(sl,{keyPath:"targetId"}).createIndex(mw,kD,{unique:!0}),i.createObjectStore(Ca)}const ls="IndexedDbPersistence",fg=18e5,dg=5e3,mg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_V="main";class Fy{constructor(e,t,r,a,l,c,d,m,g,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=l,this.window=c,this.document=d,this.xi=g,this.Oi=_,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!Fy.v())throw new ae(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sV(this,a),this.$i=t+_V,this.serializer=new pb(m),this.Ui=new Es(this.$i,this.Ni,new yV(this.serializer)),this.hi=new $N,this.Pi=new nV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Cb(this.serializer),this.Ii=new QN,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&Tt(ls,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(X.FAILED_PRECONDITION,mg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new An(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ds(e))return re(ls,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(ls,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Gu(e).get(Bo).next(t=>j.resolve(this.es(t)))}ts(e){return Tf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,fg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Lt(t,ol);return r.J().next(a=>{const l=this.ss(a,fg),c=a.filter(d=>l.indexOf(d)===-1);return j.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):Gu(e).get(Bo).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,dg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ae(X.FAILED_PRECONDITION,mg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tf(e).J().next(r=>this.ss(r,dg).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&re(ls,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Oc,ol],e=>{const t=new Mg(e,An.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Tf(e).J().next(t=>this.ss(t,fg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return kd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Pd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){re(ls,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===18?tN:m===17?Tw:m===16?eN:m===15?Cy:m===14?Ew:m===13?vw:m===12?ZD:m===11?_w:void de(60245)}(this.Ni);let c;return this.Ui.runTransaction(e,a,l,d=>(c=new Mg(d,this.ci?this.ci.next():An.ce),t==="readwrite-primary"?this.Hi(c).next(m=>!!m||this.Yi(c)).next(m=>{if(!m)throw Tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ae(X.FAILED_PRECONDITION,lw);return r(c)}).next(m=>this.Xi(c).next(()=>m)):this.Is(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Is(e){return Gu(e).get(Bo).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,dg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(X.FAILED_PRECONDITION,mg)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gu(e).put(Bo,t)}static v(){return Es.v()}Zi(e){const t=Gu(e);return t.get(Bo).next(r=>this.es(r)?(re(ls,"Releasing primary lease."),t.delete(Bo)):j.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;qS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return re(ls,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Tt(ls,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Tt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gu(i){return Lt(i,Oc)}function Tf(i){return Lt(i,ol)}function Db(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Ne(),a=Ne();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Gy(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qS()?8:cw(kt())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ws(e,t,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new vV;return this.Ss(e,t,c).next(d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)})}).next(()=>l.result)}bs(e,t,r,a){return r.documentReadCount<this.fs?(Ko()<=ke.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Ko()<=ke.DEBUG&&re("QueryEngine","Query:",Qo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Ko()<=ke.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(t))):j.resolve())}ys(e,t){if(F0(t))return j.resolve(null);let r=Pn(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=ed(t,null,"F"),r=Pn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=Ne(...l);return this.ps.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const g=this.Ds(t,d);return this.Cs(t,g,c,m.readTime)?this.ys(e,ed(t,null,"F")):this.vs(e,g,t,m)}))})))}ws(e,t,r,a){return F0(t)||a.isEqual(Ee.min())?j.resolve(null):this.ps.getDocuments(e,r).next(l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?j.resolve(null):(Ko()<=ke.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Qo(t)),this.vs(e,c,t,aw(a,rl)).next(d=>d))})}Ds(e,t){let r=new Je(Hw(e));return t.forEach((a,l)=>{Pc(e,l)&&(r=r.add(l))}),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return Ko()<=ke.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.ps.getDocumentsMatchingQuery(e,t,kn.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="LocalStore",EV=3e8;class TV{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new at(Re),this.xs=new Ii(l=>ka(l),Mc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Vb(i,e,t,r){return new TV(i,e,t,r)}async function Ob(i,e){const t=ge(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=Ne();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next(g=>({Ls:g,removedBatchIds:c,addedBatchIds:d}))})})}function AV(i,e){const t=ge(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return function(d,m,g,_){const T=g.batch,S=T.keys();let D=j.resolve();return S.forEach(P=>{D=D.next(()=>_.getEntry(m,P)).next(F=>{const U=g.docVersions.get(P);ye(U!==null,48541),F.version.compareTo(U)<0&&(T.applyToRemoteDocument(F,g),F.isValidDocument()&&(F.setReadTime(g.commitVersion),_.addEntry(F)))})}),D.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Ne();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function Mb(i){const e=ge(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function SV(i,e){const t=ge(i),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach((_,T)=>{const S=a.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T)));let D=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?D=D.withResumeToken(St.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,r)),a=a.insert(T,D),function(F,U,Y){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=EV?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(S,D,_)&&d.push(t.Pi.updateTargetData(l,D))});let m=Mn(),g=Ne();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(wV(l,c,e.documentUpdates).next(_=>{m=_.ks,g=_.qs})),!r.isEqual(Ee.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next(T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(_)}return j.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(t.Ms=a,l))}function wV(i,e,t){let r=Ne(),a=Ne();return t.forEach(l=>r=r.add(l)),e.getEntries(i,r).next(l=>{let c=Mn();return t.forEach((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ee.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):re(Ky,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)}),{ks:c,qs:a}})}function bV(i,e){const t=ge(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ra),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function od(i,e){const t=ge(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Pi.getTargetData(r,e).next(l=>l?(a=l,j.resolve(a)):t.Pi.allocateTargetId(r).next(c=>(a=new mi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function pl(i,e,t){const r=ge(i),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Ds(c))throw c;re(Ky,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function $g(i,e,t){const r=ge(i);let a=Ee.min(),l=Ne();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,_){const T=ge(m),S=T.xs.get(_);return S!==void 0?j.resolve(T.Ms.get(S)):T.Pi.getTargetData(g,_)}(r,c,Pn(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:Ne())).next(d=>(Lb(r,qw(e),d),{documents:d,Qs:l})))}function Pb(i,e){const t=ge(i),r=ge(t.Pi),a=t.Ms.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.At(l,e).next(c=>c?c.target:null))}function kb(i,e){const t=ge(i),r=t.Os.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Ns.getAllFromCollectionGroup(a,e,aw(r,rl),Number.MAX_SAFE_INTEGER)).then(a=>(Lb(t,e,a),a))}function Lb(i,e,t){let r=i.Os.get(e)||Ee.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),i.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firestore_clients";function TA(i,e){return`${Ub}_${i}_${e}`}const Bb="firestore_mutations";function AA(i,e,t){let r=`${Bb}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const zb="firestore_targets";function pg(i,e){return`${zb}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="SharedClientState";class ld{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ws(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ae(a.error.code,a.error.message))),c?new ld(e,t,a.state,l):(Tt(Nr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ac{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ae(r.error.code,r.error.message))),l?new ac(e,r.state,a):(Tt(Nr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ud{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=Oy();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=hw(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new ud(e,l):(Tt(Nr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Qy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Qy(t.clientId,t.onlineState):(Tt(Nr,`Failed to parse online state: ${e}`),null)}}class Yg{constructor(){this.activeTargetIds=Oy()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gg{constructor(e,t,r,a,l){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new at(Re),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.eo=TA(this.persistenceKey,this.Js),this.no=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Yg),this.ro=new RegExp(`^${Ub}_${c}_([^_]*)$`),this.io=new RegExp(`^${Bb}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${zb}_${c}_(\\d+)$`),this.oo=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this._o=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const a=this.getItem(TA(this.persistenceKey,r));if(a){const l=ud.Ws(r,a);l&&(this.Zs=this.Zs.insert(l.clientId,l))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(pg(this.persistenceKey,e));if(a){const l=ac.Ws(e,a);l&&(r=l.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Po(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return re(Nr,"READ",e,t),t}setItem(e,t){re(Nr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){re(Nr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(re(Nr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=function(l){let c=An.ce;if(l!=null)try{const d=JSON.parse(l);ye(typeof d=="number",30636,{So:l}),c=d}catch(d){Tt(Nr,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==An.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map(a=>this.syncEngine.Do(a)))}}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const a=new ld(this.currentUser,e,t,r),l=AA(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Gs())}Po(e){const t=AA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const a=pg(this.persistenceKey,e),l=new ac(e,t,r);this.setItem(a,l.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return ud.Ws(r,t)}fo(e,t){const r=this.io.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return ld.Ws(new on(l),a,t)}yo(e,t){const r=this.so.exec(e),a=Number(r[1]);return ac.Ws(a,t)}uo(e){return Qy.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);re(Nr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),a=this.lo(this.Zs),l=this.lo(r),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.Fo(c,d).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Oy();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class jb{constructor(){this.Mo=new Yg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="ConnectivityMonitor";class wA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(SA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(SA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af=null;function Xg(){return Af===null?Af=function(){return 268435456+Math.round(2147483648*Math.random())}():Af++,"0x"+Af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="RestConnection",RV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Wf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=Xg(),d=this.zo(e,t.toUriEncodedString());re(yg,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(d),_=Tl(g);return this.Jo(e,d,m,r,_).then(T=>(re(yg,`Received RPC '${e}' ${c}: `,T),T),T=>{throw cc(yg,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",r),T})}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}zo(e,t){const r=RV[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class DV extends CV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=Xg();return new Promise((d,m)=>{const g=new WS;g.setWithCredentials(!0),g.listenOnce(JS.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Rf.NO_ERROR:const T=g.getResponseJson();re(sn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Rf.TIMEOUT:re(sn,`RPC '${e}' ${c} timed out`),m(new ae(X.DEADLINE_EXCEEDED,"Request time out"));break;case Rf.HTTP_ERROR:const S=g.getStatus();if(re(sn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const P=D?.error;if(P&&P.status&&P.message){const F=function(Y){const ie=Y.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ie)>=0?ie:X.UNKNOWN}(P.status);m(new ae(F,P.message))}else m(new ae(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ae(X.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{re(sn,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(a);re(sn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,r,15)})}T_(e,t,r){const a=Xg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=tw(),d=ew(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");re(sn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);this.I_(T);let S=!1,D=!1;const P=new xV({Yo:U=>{D?re(sn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(S||(re(sn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),S=!0),re(sn,`RPC '${e}' stream ${a} sending:`,U),T.send(U))},Zo:()=>T.close()}),F=(U,Y,ie)=>{U.listen(Y,te=>{try{ie(te)}catch(pe){setTimeout(()=>{throw pe},0)}})};return F(T,Ku.EventType.OPEN,()=>{D||(re(sn,`RPC '${e}' stream ${a} transport opened.`),P.o_())}),F(T,Ku.EventType.CLOSE,()=>{D||(D=!0,re(sn,`RPC '${e}' stream ${a} transport closed`),P.a_(),this.E_(T))}),F(T,Ku.EventType.ERROR,U=>{D||(D=!0,cc(sn,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),P.a_(new ae(X.UNAVAILABLE,"The operation could not be completed")))}),F(T,Ku.EventType.MESSAGE,U=>{if(!D){const Y=U.data[0];ye(!!Y,16349);const ie=Y,te=ie?.error||ie[0]?.error;if(te){re(sn,`RPC '${e}' stream ${a} received error:`,te);const pe=te.status;let ue=function(b){const R=xt[b];if(R!==void 0)return tb(R)}(pe),le=te.message;ue===void 0&&(ue=X.INTERNAL,le="Unknown error status: "+pe+" with message "+te.message),D=!0,P.a_(new ae(ue,le)),T.close()}else re(sn,`RPC '${e}' stream ${a} received:`,Y),P.u_(Y)}}),F(d,ZS.STAT_EVENT,U=>{U.stat===Cg.PROXY?re(sn,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===Cg.NOPROXY&&re(sn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(){return typeof window<"u"?window:null}function Lf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(i){return new kN(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="PersistentStream";class Fb{constructor(e,t,r,a,l,c,d,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Tt(t.toString()),Tt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.D_===t&&this.G_(r,a)},r=>{e(()=>{const a=new ae(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{r(()=>this.z_(a))}),this.stream.onMessage(a=>{r(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(bA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(re(bA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NV extends Fb{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=BN(this.serializer,e),r=function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?yn(c.readTime):Ee.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Hg(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=Jf(m)?{documents:ub(l,m)}:{query:cb(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=ib(l,c.resumeToken);const g=jg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ee.min())>0){d.readTime=ml(l,c.snapshotVersion.toTimestamp());const g=jg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const r=jN(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Hg(this.serializer),t.removeTarget=e,this.q_(t)}}class VV extends Fb{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=zN(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Hg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>nd(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{}class MV extends OV{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Go(e,qg(t,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(X.UNKNOWN,l.toString())})}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Ho(e,qg(t,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(X.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class PV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Tt(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="RemoteStore";class kV{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(c=>{r.enqueueAndForget(async()=>{Fa(this)&&(re(za,"Restarting streams for network reachability change."),await async function(m){const g=ge(m);g.Ea.add(4),await Uc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Bd(g)}(this))})}),this.Ra=new PV(r,a)}}async function Bd(i){if(Fa(i))for(const e of i.da)await e(!0)}async function Uc(i){for(const e of i.da)await e(!1)}function zd(i,e){const t=ge(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xy(t)?Yy(t):Rl(t).O_()&&$y(t,e))}function gl(i,e){const t=ge(i),r=Rl(t);t.Ia.delete(e),r.O_()&&Gb(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fa(t)&&t.Ra.set("Unknown"))}function $y(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rl(i).Y_(e)}function Gb(i,e){i.Va.Ue(e),Rl(i).Z_(e)}function Yy(i){i.Va=new VN({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Rl(i).start(),i.Ra.ua()}function Xy(i){return Fa(i)&&!Rl(i).x_()&&i.Ia.size>0}function Fa(i){return ge(i).Ea.size===0}function Kb(i){i.Va=void 0}async function LV(i){i.Ra.set("Online")}async function UV(i){i.Ia.forEach((e,t)=>{$y(i,e)})}async function BV(i,e){Kb(i),Xy(i)?(i.Ra.ha(e),Yy(i)):i.Ra.set("Unknown")}async function zV(i,e,t){if(i.Ra.set("Online"),e instanceof rb&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))}(i,e)}catch(r){re(za,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cd(i,r)}else if(e instanceof Pf?i.Va.Ze(e):e instanceof nb?i.Va.st(e):i.Va.tt(e),!t.isEqual(Ee.min()))try{const r=await Mb(i.localStore);t.compareTo(r)>=0&&await function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(St.EMPTY_BYTE_STRING,_.snapshotVersion)),Gb(l,m);const T=new mi(_.target,m,g,_.sequenceNumber);$y(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(r){re(za,"Failed to raise snapshot:",r),await cd(i,r)}}async function cd(i,e,t){if(!Ds(e))throw e;i.Ea.add(1),await Uc(i),i.Ra.set("Offline"),t||(t=()=>Mb(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{re(za,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Bd(i)})}function Qb(i,e){return e().catch(t=>cd(i,t,e))}async function Il(i){const e=ge(i),t=bs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ra;for(;jV(e);)try{const a=await bV(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,qV(e,a)}catch(a){await cd(e,a)}$b(e)&&Yb(e)}function jV(i){return Fa(i)&&i.Ta.length<10}function qV(i,e){i.Ta.push(e);const t=bs(i);t.O_()&&t.X_&&t.ea(e.mutations)}function $b(i){return Fa(i)&&!bs(i).x_()&&i.Ta.length>0}function Yb(i){bs(i).start()}async function HV(i){bs(i).ra()}async function FV(i){const e=bs(i);for(const t of i.Ta)e.ea(t.mutations)}async function GV(i,e,t){const r=i.Ta.shift(),a=ky.from(r,e,t);await Qb(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await Il(i)}async function KV(i,e){e&&bs(i).X_&&await async function(r,a){if(function(c){return xN(c)&&c!==X.ABORTED}(a.code)){const l=r.Ta.shift();bs(r).B_(),await Qb(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Il(r)}}(i,e),$b(i)&&Yb(i)}async function IA(i,e){const t=ge(i);t.asyncQueue.verifyOperationInProgress(),re(za,"RemoteStore received new credentials");const r=Fa(t);t.Ea.add(3),await Uc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Bd(t)}async function Wg(i,e){const t=ge(i);e?(t.Ea.delete(2),await Bd(t)):e||(t.Ea.add(2),await Uc(t),t.Ra.set("Unknown"))}function Rl(i){return i.ma||(i.ma=function(t,r,a){const l=ge(t);return l.sa(),new NV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{Xo:LV.bind(null,i),t_:UV.bind(null,i),r_:BV.bind(null,i),H_:zV.bind(null,i)}),i.da.push(async e=>{e?(i.ma.B_(),Xy(i)?Yy(i):i.Ra.set("Unknown")):(await i.ma.stop(),Kb(i))})),i.ma}function bs(i){return i.fa||(i.fa=function(t,r,a){const l=ge(t);return l.sa(),new VV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:HV.bind(null,i),r_:KV.bind(null,i),ta:FV.bind(null,i),na:GV.bind(null,i)}),i.da.push(async e=>{e?(i.fa.B_(),await Il(i)):(await i.fa.stop(),i.Ta.length>0&&(re(za,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))})),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new Wy(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(i,e){if(Tt("AsyncQueue",`${e}: ${i}`),Ds(i))return new ae(X.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=Qu(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.ga=new at(ce.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class yl{constructor(e,t,r,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new yl(e,t,Wo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $V{constructor(){this.queries=CA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=ge(t),l=a.queries;a.queries=CA(),l.forEach((c,d)=>{for(const m of d.Sa)m.onError(r)})})(this,new ae(X.ABORTED,"Firestore shutting down"))}}function CA(){return new Ii(i=>jw(i),Nd)}async function Xb(i,e){const t=ge(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new QV,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Jy(c,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Zy(t)}async function Wb(i,e){const t=ge(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function YV(i,e){const t=ge(i);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(r=!0);c.wa=a}}r&&Zy(t)}function XV(i,e,t){const r=ge(i),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function Zy(i){i.Ca.forEach(e=>{e.next()})}var Jg,xA;(xA=Jg||(Jg={})).Ma="default",xA.Cache="cache";class Jb{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new yl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this.key=e}}class e1{constructor(e){this.key=e}}class WV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=Hw(e),this.tu=new Wo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new RA,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const S=a.get(_),D=Pc(this.query,T)?T:null,P=!!S&&this.mutatedKeys.has(S.key),F=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;S&&D?S.data.isEqual(D.data)?P!==F&&(r.track({type:3,doc:D}),U=!0):this.su(S,D)||(r.track({type:2,doc:D}),U=!0,(m&&this.eu(D,m)>0||g&&this.eu(D,g)<0)&&(d=!0)):!S&&D?(r.track({type:0,doc:D}),U=!0):S&&!D&&(r.track({type:1,doc:S}),U=!0,(m||g)&&(d=!0)),U&&(D?(c=c.add(D),l=F?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:c,iu:r,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort((_,T)=>function(D,P){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:U})}};return F(D)-F(P)}(_.type,T.type)||this.eu(_.doc,T.doc)),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new yl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new RA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new e1(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Zb(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cl="SyncEngine";class JV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ZV{constructor(e){this.key=e,this.hu=!1}}class eO{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ii(d=>jw(d),Nd),this.Iu=new Map,this.Eu=new Set,this.du=new at(ce.comparator),this.Au=new Map,this.Ru=new qy,this.Vu={},this.mu=new Map,this.fu=Ba.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tO(i,e,t=!0){const r=jd(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await t1(r,e,t,!0),a}async function nO(i,e){const t=jd(i);await t1(t,e,!0,!1)}async function t1(i,e,t,r){const a=await od(i.localStore,Pn(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await e_(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&zd(i.remoteStore,a),d}async function e_(i,e,t,r,a){i.pu=(T,S,D)=>async function(F,U,Y,ie){let te=U.view.ru(Y);te.Cs&&(te=await $g(F.localStore,U.query,!1).then(({documents:x})=>U.view.ru(x,te)));const pe=ie&&ie.targetChanges.get(U.targetId),ue=ie&&ie.targetMismatches.get(U.targetId)!=null,le=U.view.applyChanges(te,F.isPrimaryClient,pe,ue);return Zg(F,U.targetId,le.au),le.snapshot}(i,T,S,D);const l=await $g(i.localStore,e,!0),c=new WV(e,l.Qs),d=c.ru(l.documents),m=Lc.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),g=c.applyChanges(d,i.isPrimaryClient,m);Zg(i,t,g.au);const _=new JV(e,t,c);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function rO(i,e,t){const r=ge(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter(c=>!Nd(c,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await pl(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&gl(r.remoteStore,a.targetId),_l(r,a.targetId)}).catch(xs)):(_l(r,a.targetId),await pl(r.localStore,a.targetId,!0))}async function iO(i,e){const t=ge(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gl(t.remoteStore,r.targetId))}async function sO(i,e,t){const r=i_(i);try{const a=await function(c,d){const m=ge(c),g=qe.now(),_=d.reduce((D,P)=>D.add(P.key),Ne());let T,S;return m.persistence.runTransaction("Locally write mutations","readwrite",D=>{let P=Mn(),F=Ne();return m.Ns.getEntries(D,_).next(U=>{P=U,P.forEach((Y,ie)=>{ie.isValidDocument()||(F=F.add(Y))})}).next(()=>m.localDocuments.getOverlayedDocuments(D,P)).next(U=>{T=U;const Y=[];for(const ie of d){const te=RN(ie,T.get(ie.key).overlayedDocument);te!=null&&Y.push(new Ri(ie.key,te,Nw(te.value.mapValue),gn.exists(!0)))}return m.mutationQueue.addMutationBatch(D,g,Y,d)}).next(U=>{S=U;const Y=U.applyToLocalDocumentSet(T,F);return m.documentOverlayCache.saveOverlays(D,U.batchId,Y)})}).then(()=>({batchId:S.batchId,changes:Gw(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new at(Re)),g=g.insert(d,m),c.Vu[c.currentUser.toKey()]=g}(r,a.batchId,t),await Vs(r,a.changes),await Il(r.remoteStore)}catch(a){const l=Jy(a,"Failed to persist write");t.reject(l)}}async function n1(i,e){const t=ge(i);try{const r=await SV(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Au.get(l);c&&(ye(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ye(c.hu,14607):a.removedDocuments.size>0&&(ye(c.hu,42227),c.hu=!1))}),await Vs(t,r,e)}catch(r){await xs(r)}}function DA(i,e,t){const r=ge(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=ge(c);m.onlineState=d;let g=!1;m.queries.forEach((_,T)=>{for(const S of T.Sa)S.va(d)&&(g=!0)}),g&&Zy(m)}(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aO(i,e,t){const r=ge(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new at(ce.comparator);c=c.insert(l,yt.newNoDocument(l,Ee.min()));const d=Ne().add(l),m=new kc(Ee.min(),new Map,new at(Re),c,d);await n1(r,m),r.du=r.du.remove(l),r.Au.delete(e),r_(r)}else await pl(r.localStore,e,!1).then(()=>_l(r,e,t)).catch(xs)}async function oO(i,e){const t=ge(i),r=e.batch.batchId;try{const a=await AV(t.localStore,e);n_(t,r,null),t_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Vs(t,a)}catch(a){await xs(a)}}async function lO(i,e,t){const r=ge(i);try{const a=await function(c,d){const m=ge(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next(T=>(ye(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(g,T))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>m.localDocuments.getDocuments(g,_))})}(r.localStore,e);n_(r,e,t),t_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Vs(r,a)}catch(a){await xs(a)}}function t_(i,e){(i.mu.get(e)||[]).forEach(t=>{t.resolve()}),i.mu.delete(e)}function n_(i,e,t){const r=ge(i);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function _l(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach(r=>{i.Ru.containsKey(r)||r1(i,r)})}function r1(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(gl(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),r_(i))}function Zg(i,e,t){for(const r of t)r instanceof Zb?(i.Ru.addReference(r.key,e),uO(i,r)):r instanceof e1?(re(Cl,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||r1(i,r.key)):de(19791,{wu:r})}function uO(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(re(Cl,"New document in limbo: "+t),i.Eu.add(r),r_(i))}function r_(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new ce(Ke.fromString(e)),r=i.fu.next();i.Au.set(r,new ZV(t)),i.du=i.du.insert(t,r),zd(i.remoteStore,new mi(Pn(Dd(t.path)),r,"TargetPurposeLimboResolution",An.ce))}}async function Vs(i,e,t){const r=ge(i),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach((d,m)=>{c.push(r.pu(m,e,t).then(g=>{if((g||t)&&r.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){a.push(g);const _=Gy.As(m.targetId,g);l.push(_)}}))}),await Promise.all(c),r.Pu.H_(a),await async function(m,g){const _=ge(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>j.forEach(g,S=>j.forEach(S.Es,D=>_.persistence.referenceDelegate.addReference(T,S.targetId,D)).next(()=>j.forEach(S.ds,D=>_.persistence.referenceDelegate.removeReference(T,S.targetId,D)))))}catch(T){if(!Ds(T))throw T;re(Ky,"Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const D=_.Ms.get(S),P=D.snapshotVersion,F=D.withLastLimboFreeSnapshotVersion(P);_.Ms=_.Ms.insert(S,F)}}}(r.localStore,l))}async function cO(i,e){const t=ge(i);if(!t.currentUser.isEqual(e)){re(Cl,"User change. New user:",e.toKey());const r=await Ob(t.localStore,e);t.currentUser=e,function(l,c){l.mu.forEach(d=>{d.forEach(m=>{m.reject(new ae(X.CANCELLED,c))})}),l.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vs(t,r.Ls)}}function hO(i,e){const t=ge(i),r=t.Au.get(e);if(r&&r.hu)return Ne().add(r.key);{let a=Ne();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function fO(i,e){const t=ge(i),r=await $g(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&Zg(t,e.targetId,a.au),a}async function dO(i,e){const t=ge(i);return kb(t.localStore,e).then(r=>Vs(t,r))}async function mO(i,e,t,r){const a=ge(i),l=await function(d,m){const g=ge(d),_=ge(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.er(T,m).next(S=>S?g.localDocuments.getDocuments(T,S):j.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await Il(a.remoteStore):t==="acknowledged"||t==="rejected"?(n_(a,e,r||null),t_(a,e),function(d,m){ge(ge(d).mutationQueue).ir(m)}(a.localStore,e)):de(6720,"Unknown batchState",{Su:t}),await Vs(a,l)):re(Cl,"Cannot apply mutation batch with id: "+e)}async function pO(i,e){const t=ge(i);if(jd(t),i_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await NA(t,r.toArray());t.gu=!0,await Wg(t.remoteStore,!0);for(const l of a)zd(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(_l(t,c),pl(t.localStore,c,!0))),gl(t.remoteStore,c)}),await a,await NA(t,r),function(c){const d=ge(c);d.Au.forEach((m,g)=>{gl(d.remoteStore,g)}),d.Ru.Jr(),d.Au=new Map,d.du=new at(ce.comparator)}(t),t.gu=!1,await Wg(t.remoteStore,!1)}}async function NA(i,e,t){const r=ge(i),a=[],l=[];for(const c of e){let d;const m=r.Iu.get(c);if(m&&m.length!==0){d=await od(r.localStore,Pn(m[0]));for(const g of m){const _=r.Tu.get(g),T=await fO(r,_);T.snapshot&&l.push(T.snapshot)}}else{const g=await Pb(r.localStore,c);d=await od(r.localStore,g),await e_(r,i1(g),c,!1,d.resumeToken)}a.push(d)}return r.Pu.H_(l),a}function i1(i){return Bw(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gO(i){return function(t){return ge(ge(t).persistence).Ts()}(ge(i).localStore)}async function yO(i,e,t,r){const a=ge(i);if(a.gu)return void re(Cl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await kb(a.localStore,qw(l[0])),d=kc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",St.EMPTY_BYTE_STRING);await Vs(a,c,d);break}case"rejected":await pl(a.localStore,e,!0),_l(a,e,r);break;default:de(64155,t)}}async function _O(i,e,t){const r=jd(i);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){re(Cl,"Adding an already active target "+a);continue}const l=await Pb(r.localStore,a),c=await od(r.localStore,l);await e_(r,i1(l),c.targetId,!1,c.resumeToken),zd(r.remoteStore,c)}for(const a of t)r.Iu.has(a)&&await pl(r.localStore,a,!1).then(()=>{gl(r.remoteStore,a),_l(r,a)}).catch(xs)}}function jd(i){const e=ge(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=n1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aO.bind(null,e),e.Pu.H_=YV.bind(null,e.eventManager),e.Pu.yu=XV.bind(null,e.eventManager),e}function i_(i){const e=ge(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lO.bind(null,e),e}class Sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ud(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Vb(this.persistence,new Nb,e.initialUser,this.serializer)}Cu(e){return new Hy(Ld.mi,this.serializer)}Du(e){return new jb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sc.provider={build:()=>new Sc};class vO extends Sc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ye(this.persistence.referenceDelegate instanceof ad,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bb(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Hy(r=>ad.mi(r,t),this.serializer)}}class s1 extends Sc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await i_(this.xu.syncEngine),await Il(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Vb(this.persistence,new Nb,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new bb(r,e.asyncQueue,t)}Mu(e,t){const r=new xD(t,this.persistence);return new CD(e.asyncQueue,r)}Cu(e){const t=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Fy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,qb(),Lf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new jb}}class EO extends s1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof gg&&(this.sharedClientState.syncEngine={Co:mO.bind(null,t),vo:yO.bind(null,t),Fo:_O.bind(null,t),Ts:gO.bind(null,t),Do:dO.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await pO(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const t=qb();if(!gg.v(t))throw new ae(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cO.bind(null,this.syncEngine),await Wg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $V}()}createDatastore(e){const t=Ud(e.databaseInfo.databaseId),r=function(l){return new DV(l)}(e.databaseInfo);return function(l,c,d,m){return new MV(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,c,d){return new kV(r,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>DA(this.syncEngine,t,0),function(){return wA.v()?new wA:new IV}())}createSyncEngine(e,t){return function(a,l,c,d,m,g,_){const T=new eO(a,l,c,d,m,g);return _&&(T.gu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const r=ge(t);re(za,"RemoteStore shutting down."),r.Ea.add(5),await Uc(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}wc.provider={build:()=>new wc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Tt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class TO{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=on.UNAUTHENTICATED,this.clientId=Ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{re(Is,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(re(Is,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Jy(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _g(i,e){i.asyncQueue.verifyOperationInProgress(),re(Is,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async a=>{r.isEqual(a)||(await Ob(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function VA(i,e){i.asyncQueue.verifyOperationInProgress();const t=await AO(i);re(Is,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>IA(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,a)=>IA(e.remoteStore,a)),i._onlineComponents=e}async function AO(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re(Is,"Using user provided OfflineComponentProvider");try{await _g(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;cc("Error using user provided cache. Falling back to memory cache: "+t),await _g(i,new Sc)}}else re(Is,"Using default OfflineComponentProvider"),await _g(i,new vO(void 0));return i._offlineComponents}async function o1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re(Is,"Using user provided OnlineComponentProvider"),await VA(i,i._uninitializedComponentsProvider._online)):(re(Is,"Using default OnlineComponentProvider"),await VA(i,new wc))),i._onlineComponents}function SO(i){return o1(i).then(e=>e.syncEngine)}async function ey(i){const e=await o1(i),t=e.eventManager;return t.onListen=tO.bind(null,e.syncEngine),t.onUnlisten=rO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iO.bind(null,e.syncEngine),t}function wO(i,e,t={}){const r=new vi;return i.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const _=new a1({next:S=>{_.Nu(),c.enqueueAndForget(()=>Wb(l,T)),S.fromCache&&m.source==="server"?g.reject(new ae(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new Jb(d,_,{includeMetadataChanges:!0,qa:!0});return Xb(l,T)}(await ey(i),i.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="firestore.googleapis.com",MA=!0;class PA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bO,this.ssl=MA}else this.host=e.host,this.ssl=e.ssl??MA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Eb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wb)throw new ae(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class s_{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gD;switch(r.type){case"firstParty":return new vD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=OA.get(t);r&&(re("ComponentProvider","Removing Datastore"),OA.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class At{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Vc(t,At._jsonSchema))return new At(e,r||null,new ce(Ke.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Dt("string",At._jsonSchemaVersion),referencePath:Dt("string")};class Ts extends Ci{constructor(e,t,r){super(e,t,Dd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new ce(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function xi(i,e,...t){if(i=Kt(i),iw("collection","path",e),i instanceof s_){const r=Ke.fromString(e,...t);return b0(r),new Ts(i,null,r)}{if(!(i instanceof At||i instanceof Ts))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ke.fromString(e,...t));return b0(r),new Ts(i.firestore,null,r)}}function er(i,e,...t){if(i=Kt(i),arguments.length===1&&(e=Ay.newId()),iw("doc","path",e),i instanceof s_){const r=Ke.fromString(e,...t);return w0(r),new At(i,null,new ce(r))}{if(!(i instanceof At||i instanceof Ts))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ke.fromString(e,...t));return w0(r),new At(i.firestore,i instanceof Ts?i.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="AsyncQueue";class LA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hb(this,"async_queue_retry"),this._c=()=>{const r=Lf();r&&re(kA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Lf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new vi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ds(e))throw e;re(kA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Tt("INTERNAL UNHANDLED ERROR: ",UA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Wy.createAndSchedule(this,e,t,r,l=>this.hc(l));return this.tc.push(a),a}uc(){this.nc&&de(47125,{Pc:UA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function UA(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(i){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(i,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=-1;class ja extends s_{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new LA,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LA(e),this._firestoreClient=void 0,await e}}}function RO(i,e,t){t||(t=Wf);const r=Ey(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Va(l,e))return a;throw new ae(X.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ae(X.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wb)throw new ae(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Tl(e.host)&&zS(e.host),r.initialize({options:e,instanceIdentifier:t})}function a_(i){if(i._terminated)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||CO(i),i._firestoreClient}function CO(i){const e=i._freezeSettings(),t=function(a,l,c,d){return new rN(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,l1(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new TO(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(St.fromBase64String(e))}catch(t){throw new ae(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Dt("string",Jn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pr._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,Pr._jsonSchema))return new Pr(e.latitude,e.longitude)}}Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:Dt("string",Pr._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new kr(e.vectorValues);throw new ae(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:Dt("string",kr._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=/^__.*__$/;class DO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,t,this.fieldTransforms):new bl(e,this.data,t,this.fieldTransforms)}}class u1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ri(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function c1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:i})}}class l_{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new l_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(c1(this.Ac)&&xO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ud(e)}Cc(e,t,r,a=!1){return new l_({Ac:e,methodName:t,Dc:r,path:ft.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u_(i){const e=i._freezeSettings(),t=Ud(i._databaseId);return new NO(i._databaseId,!!e.ignoreUndefinedProperties,t)}function VO(i,e,t,r,a,l={}){const c=i.Cc(l.merge||l.mergeFields?2:0,e,t,a);c_("Data must be an object, but it was:",c,r);const d=h1(r,c);let m,g;if(l.merge)m=new Sn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const S=ty(e,T,t);if(!c.contains(S))throw new ae(X.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);d1(_,S)||_.push(S)}m=new Sn(_),g=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,g=c.fieldTransforms;return new DO(new un(d),m,g)}class Hd extends o_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hd}}function OO(i,e,t,r){const a=i.Cc(1,e,t);c_("Data must be an object, but it was:",a,r);const l=[],c=un.empty();Ns(r,(m,g)=>{const _=h_(e,m,t);g=Kt(g);const T=a.yc(_);if(g instanceof Hd)l.push(_);else{const S=Bc(g,T);S!=null&&(l.push(_),c.set(_,S))}});const d=new Sn(l);return new u1(c,d,a.fieldTransforms)}function MO(i,e,t,r,a,l){const c=i.Cc(1,e,t),d=[ty(e,r,t)],m=[a];if(l.length%2!=0)throw new ae(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(ty(e,l[S])),m.push(l[S+1]);const g=[],_=un.empty();for(let S=d.length-1;S>=0;--S)if(!d1(g,d[S])){const D=d[S];let P=m[S];P=Kt(P);const F=c.yc(D);if(P instanceof Hd)g.push(D);else{const U=Bc(P,F);U!=null&&(g.push(D),_.set(D,U))}}const T=new Sn(g);return new u1(_,T,c.fieldTransforms)}function PO(i,e,t,r=!1){return Bc(t,i.Cc(r?4:3,e))}function Bc(i,e){if(f1(i=Kt(i)))return c_("Unsupported field value:",e,i),h1(i,e);if(i instanceof o_)return function(r,a){if(!c1(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=Bc(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(i,e)}return function(r,a){if((r=Kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EN(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=qe.fromDate(r);return{timestampValue:ml(a.serializer,l)}}if(r instanceof qe){const l=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ml(a.serializer,l)}}if(r instanceof Pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jn)return{bytesValue:ib(a.serializer,r._byteString)};if(r instanceof At){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:By(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof kr)return function(c,d){return{mapValue:{fields:{[Dy]:{stringValue:Ny},[ll]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return My(d.serializer,g)})}}}}}}(r,a);throw a.Sc(`Unsupported field value: ${Ad(r)}`)}(i,e)}function h1(i,e){const t={};return Aw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(i,(r,a)=>{const l=Bc(a,e.mc(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function f1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof qe||i instanceof Pr||i instanceof Jn||i instanceof At||i instanceof o_||i instanceof kr)}function c_(i,e,t){if(!f1(t)||!sw(t)){const r=Ad(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function ty(i,e,t){if((e=Kt(e))instanceof qd)return e._internalPath;if(typeof e=="string")return h_(i,e);throw hd("Field path arguments must be of type string or ",i,!1,void 0,t)}const kO=new RegExp("[~\\*/\\[\\]]");function h_(i,e,t){if(e.search(kO)>=0)throw hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch{throw hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function hd(i,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ae(X.INVALID_ARGUMENT,d+i+m)}function d1(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LO extends m1{data(){return super.data()}}function Fd(i,e){return typeof e=="string"?h_(i,e):e instanceof qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ae(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f_{}class d_ extends f_{}function Di(i,e,...t){let r=[];e instanceof f_&&r.push(e),r=r.concat(t),function(l){const c=l.filter(m=>m instanceof m_).length,d=l.filter(m=>m instanceof Gd).length;if(c>1||c>0&&d>0)throw new ae(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)i=a._apply(i);return i}class Gd extends d_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Gd(e,t,r)}_apply(e){const t=this._parse(e);return y1(e._query,t),new Ci(e.firestore,e.converter,zg(e._query,t))}_parse(e){const t=u_(e.firestore);return function(l,c,d,m,g,_,T){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ae(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){jA(T,_);const P=[];for(const F of T)P.push(zA(m,l,F));S={arrayValue:{values:P}}}else S=zA(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||jA(T,_),S=PO(d,c,T,_==="in"||_==="not-in");return Le.create(g,_,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function en(i,e,t){const r=e,a=Fd("where",i);return Gd._create(a,r,t)}class m_ extends f_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new m_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:We.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)y1(c,m),c=zg(c,m)}(e._query,t),new Ci(e.firestore,e.converter,zg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class p_ extends d_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new p_(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new ae(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ae(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ec(l,c)}(e._query,this._field,this._direction);return new Ci(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new wl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function g1(i,e="asc"){const t=e,r=Fd("orderBy",i);return p_._create(r,t)}class g_ extends d_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new g_(e,t,r)}_apply(e){return new Ci(e.firestore,e.converter,ed(e._query,this._limit,this._limitType))}}function UO(i){return g_._create("limit",i,"F")}function zA(i,e,t){if(typeof(t=Kt(t))=="string"){if(t==="")throw new ae(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zw(e)&&t.indexOf("/")!==-1)throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ke.fromString(t));if(!ce.isDocumentKey(r))throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _c(i,new ce(r))}if(t instanceof At)return _c(i,t._key);throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ad(t)}.`)}function jA(i,e){if(!Array.isArray(i)||i.length===0)throw new ae(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function y1(i,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BO{convertValue(e,t="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ns(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){const t=e.fields?.[ll].arrayValue?.values?.map(r=>ut(r.doubleValue));return new kr(t)}convertGeoPoint(e){return new Pr(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Cd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){const t=Ai(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ke.fromString(e);ye(mb(r),9688,{name:e});const a=new Pa(r.get(1),r.get(3)),l=new ce(r.popFirst(5));return a.isEqual(t)||Tt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(i,e,t){let r;return r=i?i.toFirestore(e):e,r}class Xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Da extends m1{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Fd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Da._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Da._jsonSchemaVersion="firestore/documentSnapshot/1.0",Da._jsonSchema={type:Dt("string",Da._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Uf extends Da{data(e={}){return super.data(e)}}class Na{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Xu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uf(this._firestore,this._userDataWriter,r.key,r,new Xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new Uf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Xu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new Uf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Xu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:jO(d.type),doc:m,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Na._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jO(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:i})}}Na._jsonSchemaVersion="firestore/querySnapshot/1.0",Na._jsonSchema={type:Dt("string",Na._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class y_ extends BO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function qO(i){i=Mr(i,Ci);const e=Mr(i.firestore,ja),t=a_(e),r=new y_(e);return p1(i._query),wO(t,i._query).then(a=>new Na(e,r,i,a))}function Kd(i,e,t){i=Mr(i,At);const r=Mr(i.firestore,ja),a=zO(i.converter,e);return E_(r,[VO(u_(r),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,gn.none())])}function __(i,e,t,...r){i=Mr(i,At);const a=Mr(i.firestore,ja),l=u_(a);let c;return c=typeof(e=Kt(e))=="string"||e instanceof qd?MO(l,"updateDoc",i._key,e,t,r):OO(l,"updateDoc",i._key,e),E_(a,[c.toMutation(i._key,gn.exists(!0))])}function v_(i){return E_(Mr(i.firestore,ja),[new Md(i._key,gn.none())])}function _1(i,...e){i=Kt(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||BA(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(BA(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,c,d;if(i instanceof At)c=Mr(i.firestore,ja),d=Dd(i._key.path),l={next:m=>{e[r]&&e[r](HO(c,i,m))},error:e[r+1],complete:e[r+2]};else{const m=Mr(i,Ci);c=Mr(m.firestore,ja),d=m._query;const g=new y_(c);l={next:_=>{e[r]&&e[r](new Na(c,g,m,_))},error:e[r+1],complete:e[r+2]},p1(i._query)}return function(g,_,T,S){const D=new a1(S),P=new Jb(_,D,T);return g.asyncQueue.enqueueAndForget(async()=>Xb(await ey(g),P)),()=>{D.Nu(),g.asyncQueue.enqueueAndForget(async()=>Wb(await ey(g),P))}}(a_(c),d,a,l)}function E_(i,e){return function(r,a){const l=new vi;return r.asyncQueue.enqueueAndForget(async()=>sO(await SO(r),a,l)),l.promise}(a_(i),e)}function HO(i,e,t){const r=t.docs.get(e._key),a=new y_(i);return new Da(i,a,e._key,r,new Xu(t.hasPendingWrites,t.fromCache),e.converter)}class FO{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=$O(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function GO(i){return new FO(i)}class KO{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=wc.provider,this._offlineComponentProvider={build:t=>new s1(t,e?.cacheSizeBytes,this.forceOwnership)}}}class QO{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=wc.provider,this._offlineComponentProvider={build:t=>new EO(t,e?.cacheSizeBytes)}}}function $O(i){return new KO(i?.forceOwnership)}function YO(){return new QO}(function(e,t=!0){(function(a){Sl=a})(Al),tl(new Oa("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new ja(new yD(r.getProvider("auth-internal")),new ED(c,r.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ae(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(g.options.projectId,_)}(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),_s(E0,T0,e),_s(E0,T0,"esm2020")})();var XO="firebase",WO="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(XO,WO,"app");const JO={apiKey:"AIzaSyDh-1aOWA8DU2uacjCxJsMCI3p2v-1kJFg",authDomain:"gym-tracker-e77e5.firebaseapp.com",projectId:"gym-tracker-e77e5",storageBucket:"gym-tracker-e77e5.firebasestorage.app",messagingSenderId:"778763865283",appId:"1:778763865283:web:165931321e0b1e6e846676"},v1=QS(JO),wt=RO(v1,{localCache:GO({cacheSizeBytes:IO,tabManager:YO()})});async function E1(i){return(await qO(i)).docs.map(t=>({id:t.id,...t.data()}))}function Ga({query:i,enabled:e,deps:t}){const[r,a]=Q.useState([]);return Q.useEffect(()=>{if(e===!1){a([]);return}const l=i(),c=_1(l,d=>{const m=d.docs.map(g=>({...g.data(),id:g.id}));a(m)});return()=>c()},t),r}function T1({query:i,enabled:e,deps:t}){const[r,a]=Q.useState(void 0);return Q.useEffect(()=>{if(e===!1){a(void 0);return}const l=i(),c=_1(l,d=>{const m=d.data();a({...m,id:d.id})});return()=>c()},t),r}const qA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function ps(){const i=new Uint8Array(20);return crypto.getRandomValues(i),Array.from(i,e=>qA[e%qA.length]).join("")}function ZO(i){return T1({query:()=>er(wt,"workouts",i),deps:[i]})}function eM(i){return Ga({query:()=>Di(xi(wt,"workouts"),en("user","==",i),en("completedAt","!=",null),g1("completedAt","desc")),deps:[i]})}function tM(i){return Ga({query:()=>Di(xi(wt,"workouts"),en("user","==",i),en("completedAt","==",null)),deps:[i]})}async function HA(i){const{id:e,...t}=i;await Kd(er(wt,"workouts",e),t)}async function nM(i){const{id:e,...t}=i;await __(er(wt,"workouts",e),t)}async function rM(i){await v_(er(wt,"workouts",i.id))}function iM(){return mC()}function A1(i,e){const[t,r]=Q.useState(()=>ny(i,e??qe.now()));return Q.useEffect(()=>{const a=setInterval(()=>{r(ny(i,e??qe.now()))});return()=>{clearInterval(a)}},[i,e]),t}function ny(i,e){if(!i||!e)return"";const t=Math.floor(Math.max(e.seconds-i.seconds,0)),r=t%60,a=Math.floor(t/60)%60,l=Math.floor(t/3600),c=[];return l&&c.push(`${l}h`),(l||a)&&c.push(`${a}min`),(l||a||r)&&c.push(`${r}s`),c.slice(0,2).join(" ")}function FA(i,e){return E1(Di(xi(wt,"performances"),en("user","==",i),en("workout","==",e)))}function sM(i,e){return[...Ga({query:()=>Di(xi(wt,"performances"),en("user","==",i),en("workout","==",e)),deps:[i,e]})].sort((r,a)=>r.order-a.order)}function aM(i,e,t){return Ga({query:()=>Di(xi(wt,"performances"),en("user","==",i),en("exercise","==",e),en("startedAt","<",t),g1("startedAt","desc"),UO(1)),deps:[e,t]})[0]}async function S1(i){const{id:e,...t}=i;await Kd(er(wt,"performances",e),t)}async function oM(i){const{id:e,...t}=i;await __(er(wt,"performances",e),t)}async function T_(i){await v_(er(wt,"performances",i.id))}const lM="_exercise_1ckjy_1",uM="_exerciseName_1ckjy_7",cM="_sets_1ckjy_13",hM="_setNumHeader_1ckjy_20",fM="_prevVolumeHeader_1ckjy_25",dM="_currentWeightHeader_1ckjy_26",mM="_currentRepsHeader_1ckjy_27",pM="_setCompletedHeader_1ckjy_28",gM="_addSetButton_1ckjy_40",yM="_sheetHeader_1ckjy_56",_M="_sheetActions_1ckjy_62",vM="_sheetAction_1ckjy_62",pn={exercise:lM,exerciseName:uM,sets:cM,setNumHeader:hM,prevVolumeHeader:fM,currentWeightHeader:dM,currentRepsHeader:mM,setCompletedHeader:pM,addSetButton:gM,sheetHeader:yM,sheetActions:_M,sheetAction:vM};function GA({enabled:i,user:e,performance:t}){return[...Ga({query:()=>Di(xi(wt,"sets"),en("user","==",e),en("performance","==",t)),enabled:i,deps:[e,t]})].sort((a,l)=>a.order-l.order)}function KA(i,e){return E1(Di(xi(wt,"sets"),en("user","==",i),en("workout","==",e)))}function EM(i,e){return Ga({query:()=>Di(xi(wt,"sets"),en("user","==",i),en("workout","==",e)),deps:[i,e]})}async function A_(i){const{id:e,...t}=i;await Kd(er(wt,"sets",e),t)}async function TM(i){const{id:e,...t}=i;await __(er(wt,"sets",e),t)}async function Qd(i){await v_(er(wt,"sets",i.id))}function AM(i){return T1({query:()=>er(wt,"exercises",i),deps:[i]})}function SM(){return[...Ga({query:()=>Di(xi(wt,"exercises")),deps:[]})].sort((e,t)=>e.name.localeCompare(t.name))}async function wM(i){const{id:e,...t}=i;await Kd(er(wt,"exercises",e),t)}const bM="_completed_jwdfa_1",IM="_setNumValue_jwdfa_5",RM="_prevVolumeValue_jwdfa_10",CM="_currentWeightValue_jwdfa_11",xM="_currentRepsValue_jwdfa_12",DM="_setCompletedValue_jwdfa_13",NM="_sheetHeader_jwdfa_17",VM="_sheetActions_jwdfa_23",OM="_sheetAction_jwdfa_23",MM="_input_jwdfa_49",PM="_setCompletedButton_jwdfa_60",Tn={completed:bM,setNumValue:IM,prevVolumeValue:RM,currentWeightValue:CM,currentRepsValue:xM,setCompletedValue:DM,sheetHeader:NM,sheetActions:VM,sheetAction:OM,input:MM,setCompletedButton:PM},kM="_backdrop_jh7xm_1",LM="_modal_jh7xm_12",QA={backdrop:kM,modal:LM};function S_({isOpen:i,children:e,onClose:t}){return i?xS.createPortal(O.jsx("div",{className:QA.backdrop,onClick:t,children:O.jsx("div",{className:QA.modal,onClick:r=>r.stopPropagation(),children:e})}),document.body):null}function UM({number:i,set:e,prevSet:t,recSet:r}){const[a,l]=Q.useState(!1),[c,d]=Q.useState(null),[m,g]=Q.useState(null),_=Q.useRef(e);Q.useEffect(()=>{_.current=e},[e]);const T=t?`${t.weight} x ${t.reps}`:"-",S=e.weight?e.weight.toString():"",D=r?.weight?.toString()??"-",P=e.reps?e.reps.toString():"",F=r?.reps?.toString()??"-",U=async le=>{_.current=le(_.current),await TM(_.current)},Y=async le=>{await U(x=>({...x,type:le})),l(!1)},ie=async()=>{await Qd(e),l(!1)},te=async()=>{if(c===null)return;const le=Number.parseFloat(c||"0");!Number.isNaN(le)&&le>=0&&await U(x=>({...x,weight:le})),d(null)},pe=async()=>{if(m===null)return;const le=Number.parseFloat(m||"0");!Number.isNaN(le)&&le>=0&&await U(x=>({...x,reps:le})),g(null)},ue=async()=>{e.completed?await U(le=>({...le,completed:!1})):await U(le=>{const x=le.weight||r?.weight,b=le.reps||r?.reps;return x&&b?{...le,weight:x,reps:b,completed:!0}:le})};return O.jsxs(O.Fragment,{children:[O.jsxs("tr",{className:_i(e.completed&&Tn.completed),children:[O.jsx("td",{className:Tn.setNumValue,onClick:()=>l(!0),children:i}),O.jsx("td",{className:Tn.prevVolumeValue,children:T}),O.jsx("td",{className:Tn.currentWeightValue,children:O.jsx("input",{className:Tn.input,value:c??S,placeholder:D,disabled:e.completed,type:"text",inputMode:"numeric",onContextMenu:le=>le.preventDefault(),onChange:le=>d(le.target.value),onFocus:le=>le.target.select(),onBlur:te})}),O.jsx("td",{className:Tn.currentRepsValue,children:O.jsx("input",{className:Tn.input,value:m??P,placeholder:F,disabled:e.completed,type:"text",inputMode:"numeric",onContextMenu:le=>le.preventDefault(),onChange:le=>g(le.target.value),onFocus:le=>le.target.select(),onBlur:pe})}),O.jsx("td",{className:Tn.setCompletedValue,children:O.jsx("button",{className:Tn.setCompletedButton,onClick:ue,children:O.jsx(yy,{})})})]}),O.jsxs(S_,{isOpen:a,onClose:()=>l(!1),children:[O.jsx("div",{className:Tn.sheetHeader,children:"  "}),O.jsxs("div",{className:Tn.sheetActions,children:[O.jsxs("button",{className:Tn.sheetAction,onClick:()=>Y("warm-up"),children:[O.jsx("span",{children:"W"}),O.jsx("span",{children:" "})]}),O.jsxs("button",{className:Tn.sheetAction,onClick:()=>Y("working"),children:[O.jsx("span",{children:"1"}),O.jsx("span",{children:" "})]}),O.jsxs("button",{className:Tn.sheetAction,onClick:ie,children:[O.jsx(py,{}),O.jsx("span",{children:" "})]})]})]})]})}const BM="_root_321vk_1",zM="_toolbar_321vk_9",jM="_pageTitle_321vk_20",qM="_toolbarButton_321vk_25",HM="_search_321vk_36",FM="_exercises_321vk_45",GM="_exercise_321vk_45",KM="_exerciseName_321vk_59",QM="_muscles_321vk_63",$M="_muscle_321vk_63",or={root:BM,toolbar:zM,pageTitle:jM,toolbarButton:qM,search:HM,exercises:FM,exercise:GM,exerciseName:KM,muscles:QM,muscle:$M},ry={abs:"",abductors:" ",adductors:" ",biceps:"",calves:"",chest:"",forearms:"",glutes:"",hamstrings:" ",lats:"",lower_back:" ",neck:"",quadriceps:"",shoulders:"",traps:"",triceps:"",upper_back:" "},YM="_modal_1447v_1",XM={modal:YM};function w_({isOpen:i,children:e}){return i?xS.createPortal(O.jsx("div",{className:XM.modal,children:e}),document.body):null}const WM="_root_9pzt9_1",JM="_toolbar_9pzt9_9",ZM="_pageTitle_9pzt9_20",eP="_toolbarButton_9pzt9_25",tP="_body_9pzt9_40",nP="_label_9pzt9_46",rP="_input_9pzt9_50",iP="_muscles_9pzt9_58",sP="_muscle_9pzt9_58",aP="_selected_9pzt9_74",an={root:WM,toolbar:JM,pageTitle:ZM,toolbarButton:eP,body:tP,label:nP,input:rP,muscles:iP,muscle:sP,selected:aP};function oP({onCancel:i,onSubmit:e}){const[t,r]=Q.useState(""),a=t.trim(),[l,c]=Q.useState(null),[d,m]=Q.useState([]),g=Object.entries(ry).map(([P,F])=>({key:P,label:F})),_=!a||!l||d.includes(l),T=P=>{c(l===P?null:P)},S=P=>{d.includes(P)?m(d.filter(F=>F!==P)):m([...d,P])},D=async()=>{if(!a||!l)return;const P={id:ps(),name:a,muscles:[l,...d]};e(P),await wM(P)};return O.jsxs("div",{className:an.root,children:[O.jsxs("div",{className:an.toolbar,children:[O.jsx("button",{className:an.toolbarButton,onClick:i,children:O.jsx(gy,{})}),O.jsx("div",{className:an.pageTitle,children:" "}),O.jsx("button",{className:an.toolbarButton,disabled:_,onClick:D,children:O.jsx(yy,{})})]}),O.jsxs("div",{className:an.body,children:[O.jsx("label",{className:an.label,children:" "}),O.jsx("input",{className:an.input,value:t,onChange:P=>r(P.target.value)}),O.jsx("label",{className:an.label,children:"  "}),O.jsx("div",{className:an.muscles,children:g.map(P=>O.jsx("button",{className:_i(an.muscle,l===P.key&&an.selected),onClick:()=>T(P.key),children:P.label},P.key))}),O.jsx("label",{className:an.label,children:" "}),O.jsx("div",{className:an.muscles,children:g.map(P=>O.jsx("button",{className:_i(an.muscle,d.includes(P.key)&&an.selected),onClick:()=>S(P.key),children:P.label},P.key))})]})]})}function w1({onCancel:i,onSubmit:e}){const t=SM(),[r,a]=Q.useState(!1),[l,c]=Q.useState(""),d=l.toLowerCase(),m=t.filter(g=>g.name.toLowerCase().includes(d)||g.muscles.some(_=>ry[_]?.toLowerCase()?.includes(d)));return O.jsxs("div",{className:or.root,children:[O.jsxs("div",{className:or.toolbar,children:[O.jsx("button",{className:or.toolbarButton,onClick:i,children:O.jsx(gy,{})}),O.jsx("div",{className:or.pageTitle,children:" "}),O.jsx("button",{className:or.toolbarButton,onClick:()=>a(!0),children:O.jsx(Ed,{})})]}),O.jsx("input",{className:or.search,value:l,placeholder:"...",onChange:g=>c(g.target.value)}),O.jsx("div",{className:or.exercises,children:m.map(g=>O.jsxs("div",{className:or.exercise,onClick:()=>e(g),children:[O.jsxs("div",{className:or.exerciseName,children:[" ",g.name]}),O.jsx("div",{className:or.muscles,children:g.muscles.map(_=>O.jsx("div",{className:or.muscle,children:ry[_]??_},_))})]},g.id))}),O.jsx(w_,{isOpen:r,children:O.jsx(oP,{onCancel:()=>a(!1),onSubmit:e})})]})}function lP({performance:i}){const e=AM(i.exercise),t=GA({user:i.user,performance:i.id}),r=aM(i.user,i.exercise,i.startedAt),a=GA({enabled:r?.id!==void 0,user:r?.user,performance:r?.id}),[l,c]=Q.useState(!1),[d,m]=Q.useState(!1),g=async()=>{await A_({id:ps(),user:i.user,workout:i.workout,performance:i.id,order:Math.max(-1,...t.map(F=>F.order))+1,type:"working",weight:0,reps:0,completed:!1})},_=()=>{alert("TBD")},T=()=>{alert("TBD")},S=()=>{c(!1),m(!0)},D=async F=>{m(!1),await oM({...i,exercise:F.id})},P=async()=>{c(!1),await Promise.all([...t.map(F=>Qd(F)),T_(i)])};return O.jsxs("div",{className:pn.exercise,children:[O.jsx("div",{className:pn.exerciseName,onClick:()=>c(!0),children:e?.name??"-"}),O.jsxs("table",{className:pn.sets,children:[O.jsx("thead",{children:O.jsxs("tr",{children:[O.jsx("th",{className:pn.setNumHeader,children:"."}),O.jsx("th",{className:pn.prevVolumeHeader,children:"."}),O.jsx("th",{className:pn.currentWeightHeader,children:""}),O.jsx("th",{className:pn.currentRepsHeader,children:"."}),O.jsx("th",{className:pn.setCompletedHeader,children:O.jsx(yy,{})})]})}),O.jsx("tbody",{children:uP(t,a)})]}),O.jsxs("button",{className:pn.addSetButton,onClick:g,children:[O.jsx(Ed,{})," "]}),O.jsxs(S_,{isOpen:l,onClose:()=>c(!1),children:[O.jsx("div",{className:pn.sheetHeader,children:""}),O.jsxs("div",{className:pn.sheetActions,children:[O.jsxs("button",{className:pn.sheetAction,onClick:_,children:[O.jsx(N2,{}),O.jsx("span",{children:" "})]}),O.jsxs("button",{className:pn.sheetAction,onClick:T,children:[O.jsx(D2,{}),O.jsx("span",{children:" "})]}),O.jsxs("button",{className:pn.sheetAction,onClick:S,children:[O.jsx(C2,{}),O.jsx("span",{children:"  "})]}),O.jsxs("button",{className:pn.sheetAction,onClick:P,children:[O.jsx(py,{}),O.jsx("span",{children:"  "})]})]})]}),O.jsx(w_,{isOpen:d,children:O.jsx(w1,{onCancel:()=>m(!1),onSubmit:D})})]})}function uP(i,e){const t=e.filter(_=>_.type==="warm-up"&&_.weight&&_.reps),r=e.filter(_=>_.type==="working"&&_.weight&&_.reps),a=cP(r),l=a.filter(_=>_.type==="warm-up"),c=a.filter(_=>_.type==="working"),d=[];let m=0,g=0;return i.forEach(_=>{let T="-",S,D;_.type==="warm-up"?(T="W",S=t[m],D=l[m],m+=1):_.type==="working"&&(T=(g+1).toString(),S=r[g],D=c[g],g+=1),d.push(O.jsx(UM,{number:T,set:_,prevSet:S,recSet:D},_.id))}),d}function cP(i){if(i.length===0)return[];let e=1/0,t=1/0;for(const c of i)c.weight<e?(e=c.weight,t=c.reps):c.weight===e&&(t=Math.min(t,c.reps));t>=12?(e=Math.ceil(e*1.1),t=8):t=Math.min(t+2,12);const r=e*(1+t/30),a=[{id:"",user:"",workout:"",performance:"",type:"warm-up",order:0,weight:Math.floor(r*.4),reps:30,completed:!0},{id:"",user:"",workout:"",performance:"",type:"warm-up",order:1,weight:Math.floor(r*.6),reps:12,completed:!0}],l=i.map((c,d)=>({...c,order:d+2,weight:e,reps:t}));return[...a,...l]}const hP="_backdrop_1mgvq_1",fP="_modal_1mgvq_15",dP="_title_1mgvq_25",mP="_body_1mgvq_30",pP="_actions_1mgvq_35",gP="_action_1mgvq_35",yP="_cancel_1mgvq_53",_P="_submit_1mgvq_58",fi={backdrop:hP,modal:fP,title:dP,body:mP,actions:pP,action:gP,cancel:yP,submit:_P};function b1({title:i,width:e,cancelText:t,cancelDisabled:r,submitText:a,submitDisabled:l,isOpen:c,children:d,onClose:m,onSubmit:g}){return c?O.jsx("div",{className:fi.backdrop,onClick:m,children:O.jsxs("div",{className:fi.modal,style:{width:e},onClick:_=>_.stopPropagation(),children:[O.jsx("div",{className:fi.title,children:i}),O.jsx("div",{className:fi.body,children:d}),O.jsxs("div",{className:fi.actions,children:[t&&O.jsx("button",{className:_i(fi.action,fi.cancel),disabled:r,onClick:m,children:t}),a&&O.jsx("button",{className:_i(fi.action,fi.submit),disabled:l,onClick:g,children:a})]})]})}):null}const vP="_label_1psv4_1",EP="_input_1psv4_5",$A={label:vP,input:EP};function TP({workout:i,isOpen:e,onClose:t,onSubmit:r}){const[a,l]=Q.useState("");Q.useEffect(()=>{l(i.name)},[i,e]);const d=!a.trim();return O.jsxs(b1,{title:"",width:"300px",cancelText:"",submitText:"",submitDisabled:d,isOpen:e,onClose:t,onSubmit:()=>r({name:a}),children:[O.jsx("label",{className:$A.label,children:" "}),O.jsx("input",{className:$A.input,value:a,onChange:m=>l(m.target.value)})]})}function I1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AP=I1,R1=new Dc("auth","Firebase",I1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new _y("@firebase/auth");function SP(i,...e){fd.logLevel<=ke.WARN&&fd.warn(`Auth (${Al}): ${i}`,...e)}function Bf(i,...e){fd.logLevel<=ke.ERROR&&fd.error(`Auth (${Al}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(i,...e){throw I_(i,...e)}function cr(i,...e){return I_(i,...e)}function b_(i,e,t){const r={...AP(),[e]:t};return new Dc("auth","Firebase",r).create(e,{appName:i.name})}function As(i){return b_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wP(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Br(i,"argument-error"),b_(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function I_(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return R1.create(i,...e)}function be(i,e,...t){if(!i)throw I_(e,...t)}function pi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Bf(e),new Error(e)}function wi(i,e){i||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(){return typeof self<"u"&&self.location?.href||""}function bP(){return YA()==="http:"||YA()==="https:"}function YA(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bP()||Y2()||"connection"in navigator)?navigator.onLine:!0}function RP(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t){this.shortDelay=e,this.longDelay=t,wi(t>e,"Short delay should be less than long delay!"),this.isMobile=Q2()||X2()}get(){return IP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(i,e){wi(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DP=new zc(3e4,6e4);function $d(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function xl(i,e,t,r,a={}){return x1(i,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=Nc({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...l};return $2()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Tl(i.emulatorConfig.host)&&(g.credentials="include"),C1.fetch()(await N1(i,i.config.apiHost,t,d),g)})}async function x1(i,e,t){i._canInitEmulator=!1;const r={...CP,...e};try{const a=new NP(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Sf(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sf(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Sf(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw Sf(i,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw b_(i,_,g);Br(i,_)}}catch(a){if(a instanceof bi)throw a;Br(i,"network-request-failed",{message:String(a)})}}async function D1(i,e,t,r,a={}){const l=await xl(i,e,t,r,a);return"mfaPendingCredential"in l&&Br(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function N1(i,e,t,r){const a=`${e}${t}?${r}`,l=i,c=l.config.emulator?R_(i.config,a):`${i.config.apiScheme}://${a}`;return xP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class NP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(cr(this.auth,"network-request-failed")),DP.get())})}}function Sf(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=cr(i,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(i,e){return xl(i,"POST","/v1/accounts:delete",e)}async function dd(i,e){return xl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OP(i,e=!1){const t=Kt(i),r=await t.getIdToken(e),a=C_(r);be(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:oc(vg(a.auth_time)),issuedAtTime:oc(vg(a.iat)),expirationTime:oc(vg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function vg(i){return Number(i)*1e3}function C_(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Bf("JWT malformed, contained fewer than 3 sections"),null;try{const a=kS(t);return a?JSON.parse(a):(Bf("Failed to decode base64 JWT payload"),null)}catch(a){return Bf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function XA(i){const e=C_(i);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof bi&&MP(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function MP({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(i){const e=i.auth,t=await i.getIdToken(),r=await bc(i,dd(e,{idToken:t}));be(r?.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=a.providerUserInfo?.length?V1(a.providerUserInfo):[],c=LP(i.providerData,l),d=i.isAnonymous,m=!(i.email&&a.passwordHash)&&!c?.length,g=d?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new sy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function kP(i){const e=Kt(i);await md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LP(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function V1(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(i,e){const t=await x1(i,{},async()=>{const r=Nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await N1(i,a,"/v1/token",`key=${l}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return i.emulatorConfig&&Tl(i.emulatorConfig.host)&&(m.credentials="include"),C1.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BP(i,e){return xl(i,"POST","/v2/accounts:revokeToken",$d(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=XA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await UP(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new Jo;return r&&(be(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(be(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(be(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(i,e){be(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ur{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new PP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new sy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await bc(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OP(this,e)}reload(){return kP(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await md(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await bc(this,VP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:D,providerData:P,stsTokenManager:F}=t;be(T&&F,e,"internal-error");const U=Jo.fromJSON(this.name,F);be(typeof T=="string",e,"internal-error"),us(r,e.name),us(a,e.name),be(typeof S=="boolean",e,"internal-error"),be(typeof D=="boolean",e,"internal-error"),us(l,e.name),us(c,e.name),us(d,e.name),us(m,e.name),us(g,e.name),us(_,e.name);const Y=new ur({uid:T,auth:e,email:a,emailVerified:S,displayName:r,isAnonymous:D,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:U,createdAt:g,lastLoginAt:_});return P&&Array.isArray(P)&&(Y.providerData=P.map(ie=>({...ie}))),m&&(Y._redirectEventId=m),Y}static async _fromIdTokenResponse(e,t,r=!1){const a=new Jo;a.updateFromServerResponse(t);const l=new ur({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await md(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];be(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?V1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Jo;d.updateFromIdToken(r);const m=new ur({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new sy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new Map;function gi(i){wi(i instanceof Function,"Expected a class definition");let e=WA.get(i);return e?(wi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,WA.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}O1.type="NONE";const JA=O1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(i,e,t){return`firebase:${i}:${e}:${t}`}class Zo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=zf(this.userKey,a.apiKey,l),this.fullPersistenceKey=zf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await dd(this.auth,{idToken:e}).catch(()=>{});return t?ur._fromGetAccountInfoResponse(this.auth,t,e):null}return ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Zo(gi(JA),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||gi(JA);const c=zf(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const S=await dd(e,{idToken:_}).catch(()=>{});if(!S)break;T=await ur._fromGetAccountInfoResponse(e,S,_)}else T=ur._fromJSON(e,_);g!==l&&(d=T),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Zo(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Zo(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(B1(e))return"Blackberry";if(z1(e))return"Webos";if(P1(e))return"Safari";if((e.includes("chrome/")||k1(e))&&!e.includes("edge/"))return"Chrome";if(U1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function M1(i=kt()){return/firefox\//i.test(i)}function P1(i=kt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function k1(i=kt()){return/crios\//i.test(i)}function L1(i=kt()){return/iemobile/i.test(i)}function U1(i=kt()){return/android/i.test(i)}function B1(i=kt()){return/blackberry/i.test(i)}function z1(i=kt()){return/webos/i.test(i)}function x_(i=kt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function zP(i=kt()){return x_(i)&&!!window.navigator?.standalone}function jP(){return W2()&&document.documentMode===10}function j1(i=kt()){return x_(i)||U1(i)||z1(i)||B1(i)||/windows phone/i.test(i)||L1(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(i,e=[]){let t;switch(i){case"Browser":t=ZA(kt());break;case"Worker":t=`${ZA(kt())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(i,e={}){return xl(i,"GET","/v2/passwordPolicy",$d(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=6;class GP{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??FP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eS(this),this.idTokenSubscription=new eS(this),this.beforeStateQueue=new qP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await dd(this,{idToken:e}),r=await ur._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await md(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(As(this));const t=e?Kt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HP(this),t=new GP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await BP(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gi(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[gi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&SP(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jc(i){return Kt(i)}class eS{constructor(e){this.auth=e,this.observer=null,this.addObserver=rx(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QP(i){D_=i}function $P(i){return D_.loadJS(i)}function YP(){return D_.gapiScript}function XP(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(i,e){const t=Ey(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Va(l,e??{}))return a;Br(a,"already-initialized")}return t.initialize({options:e})}function JP(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(gi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function ZP(i,e,t){const r=jc(i);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=H1(e),{host:c,port:d}=e4(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(Va(g,r.config.emulator)&&Va(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Tl(c)?(zS(`${l}//${c}${m}`),K2("Auth",!0)):t4()}function H1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function e4(i){const e=H1(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:tS(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:tS(c)}}}function tS(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function t4(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,t){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(i,e){return D1(i,"POST","/v1/accounts:signInWithIdp",$d(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="http://localhost";class qa extends F1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new qa(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return el(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,el(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,el(e,t)}buildRequest(){const e={requestUri:n4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends N_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends qc{constructor(){super("facebook.com")}static credential(e){return qa._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qa._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return di.credential(t,r)}catch{return null}}}di.GOOGLE_SIGN_IN_METHOD="google.com";di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends qc{constructor(){super("github.com")}static credential(e){return qa._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends qc{constructor(){super("twitter.com")}static credential(e,t){return qa._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ds.credential(t,r)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(i,e){return D1(i,"POST","/v1/accounts:signUp",$d(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await ur._fromIdTokenResponse(e,r,a),c=nS(r);return new Rs({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=nS(r);return new Rs({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function nS(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(i){if(Wn(i.app))return Promise.reject(As(i));const e=jc(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Rs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await r4(e,{returnSecureToken:!0}),r=await Rs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends bi{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,pd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new pd(e,t,r,a)}}function G1(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?pd._fromErrorAndOperation(i,l,e,r):l})}async function s4(i,e,t=!1){const r=await bc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Rs._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4(i,e,t=!1){const{auth:r}=i;if(Wn(r.app))return Promise.reject(As(r));const a="reauthenticate";try{const l=await bc(i,G1(r,a,e,i),t);be(l.idToken,r,"internal-error");const c=C_(l.idToken);be(c,r,"internal-error");const{sub:d}=c;return be(i.uid===d,r,"user-mismatch"),Rs._forOperation(i,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Br(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(i,e,t=!1){if(Wn(i.app))return Promise.reject(As(i));const r="signIn",a=await G1(i,r,e),l=await Rs._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}function l4(i,e,t,r){return Kt(i).onIdTokenChanged(e,t,r)}function u4(i,e,t){return Kt(i).beforeAuthStateChanged(e,t)}function c4(i,e,t,r){return Kt(i).onAuthStateChanged(e,t,r)}function h4(i){return Kt(i).signOut()}const gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=1e3,d4=10;class Q1 extends K1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=j1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);jP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,d4):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},f4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Q1.type="LOCAL";const m4=Q1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1 extends K1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$1.type="SESSION";const Y1=$1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Yd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await p4(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=V_("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(T){const S=T;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function y4(i){Lr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function _4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function v4(){return navigator?.serviceWorker?.controller||null}function E4(){return X1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="firebaseLocalStorageDb",T4=1,yd="firebaseLocalStorage",J1="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xd(i,e){return i.transaction([yd],e?"readwrite":"readonly").objectStore(yd)}function A4(){const i=indexedDB.deleteDatabase(W1);return new Hc(i).toPromise()}function ay(){const i=indexedDB.open(W1,T4);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(yd,{keyPath:J1})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(yd)?e(r):(r.close(),await A4(),e(await ay()))})})}async function rS(i,e,t){const r=Xd(i,!0).put({[J1]:e,value:t});return new Hc(r).toPromise()}async function S4(i,e){const t=Xd(i,!1).get(e),r=await new Hc(t).toPromise();return r===void 0?null:r.value}function iS(i,e){const t=Xd(i,!0).delete(e);return new Hc(t).toPromise()}const w4=800,b4=3;class Z1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ay(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>b4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yd._getInstance(E4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _4(),!this.activeServiceWorker)return;this.sender=new g4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||v4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ay();return await rS(e,gd,"1"),await iS(e,gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>rS(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>S4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Xd(a,!1).getAll();return new Hc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z1.type="LOCAL";const I4=Z1;new zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(i,e){return e?gi(e):(be(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends F1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,t){return el(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function R4(i){return o4(i.auth,new O_(i),i.bypassAuthState)}function C4(i){const{auth:e,user:t}=i;return be(t,e,"internal-error"),a4(t,new O_(i),i.bypassAuthState)}async function x4(i){const{auth:e,user:t}=i;return be(t,e,"internal-error"),s4(t,new O_(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R4;case"linkViaPopup":case"linkViaRedirect":return x4;case"reauthViaPopup":case"reauthViaRedirect":return C4;default:Br(this.auth,"internal-error")}}resolve(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new zc(2e3,1e4);async function N4(i,e,t){if(Wn(i.app))return Promise.reject(cr(i,"operation-not-supported-in-this-environment"));const r=jc(i);wP(i,e,N_);const a=eI(r,t);return new ba(r,"signInViaPopup",e,a).executeNotNull()}class ba extends tI{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,ba.currentPopupAction&&ba.currentPopupAction.cancel(),ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){wi(this.filter.length===1,"Popup operations only handle one event");const e=V_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,D4.get())};e()}}ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4="pendingRedirect",jf=new Map;class O4 extends tI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=jf.get(this.auth._key());if(!e){try{const r=await M4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jf.set(this.auth._key(),e)}return this.bypassAuthState||jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function M4(i,e){const t=L4(e),r=k4(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function P4(i,e){jf.set(i._key(),e)}function k4(i){return gi(i._redirectPersistence)}function L4(i){return zf(V4,i.config.apiKey,i.name)}async function U4(i,e,t=!1){if(Wn(i.app))return Promise.reject(As(i));const r=jc(i),a=eI(r,e),c=await new O4(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=600*1e3;class z4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!nI(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(cr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B4&&this.cachedEventUids.clear(),this.cachedEventUids.has(sS(e))}saveEventToCache(e){this.cachedEventUids.add(sS(e)),this.lastProcessedEventTime=Date.now()}}function sS(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function nI({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function j4(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nI(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q4(i,e={}){return xl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F4=/^https?/;async function G4(i){if(i.config.emulator)return;const{authorizedDomains:e}=await q4(i);for(const t of e)try{if(K4(t))return}catch{}Br(i,"unauthorized-domain")}function K4(i){const e=iy(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!F4.test(t))return!1;if(H4.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new zc(3e4,6e4);function aS(){const i=Lr().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function $4(i){return new Promise((e,t)=>{function r(){aS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aS(),t(cr(i,"network-request-failed"))},timeout:Q4.get()})}if(Lr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Lr().gapi?.load)r();else{const a=XP("iframefcb");return Lr()[a]=()=>{gapi.load?r():t(cr(i,"network-request-failed"))},$P(`${YP()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw qf=null,e})}let qf=null;function Y4(i){return qf=qf||$4(i),qf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=new zc(5e3,15e3),W4="__/auth/iframe",J4="emulator/auth/iframe",Z4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ek=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tk(i){const e=i.config;be(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?R_(e,J4):`https://${i.config.authDomain}/${W4}`,r={apiKey:e.apiKey,appName:i.name,v:Al},a=ek.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Nc(r).slice(1)}`}async function nk(i){const e=await Y4(i),t=Lr().gapi;return be(t,i,"internal-error"),e.open({where:document.body,url:tk(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z4,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=cr(i,"network-request-failed"),d=Lr().setTimeout(()=>{l(c)},X4.get());function m(){Lr().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ik=500,sk=600,ak="_blank",ok="http://localhost";class oS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lk(i,e,t,r=ik,a=sk){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...rk,width:r.toString(),height:a.toString(),top:l,left:c},g=kt().toLowerCase();t&&(d=k1(g)?ak:t),M1(g)&&(e=e||ok,m.scrollbars="yes");const _=Object.entries(m).reduce((S,[D,P])=>`${S}${D}=${P},`,"");if(zP(g)&&d!=="_self")return uk(e||"",d),new oS(null);const T=window.open(e||"",d,_);be(T,i,"popup-blocked");try{T.focus()}catch{}return new oS(T)}function uk(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="__/auth/handler",hk="emulator/auth/handler",fk=encodeURIComponent("fac");async function lS(i,e,t,r,a,l){be(i.config.authDomain,i,"auth-domain-config-required"),be(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Al,eventId:a};if(e instanceof N_){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",nx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof qc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await i._getAppCheckToken(),g=m?`#${fk}=${encodeURIComponent(m)}`:"";return`${dk(i)}?${Nc(d).slice(1)}${g}`}function dk({config:i}){return i.emulator?R_(i,hk):`https://${i.authDomain}/${ck}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="webStorageSupport";class mk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y1,this._completeRedirectFn=U4,this._overrideRedirectResult=P4}async _openPopup(e,t,r,a){wi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await lS(e,t,r,iy(),a);return lk(e,l,V_())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await lS(e,t,r,iy(),a);return y4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(wi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await nk(e),r=new z4(e);return t.register("authEvent",a=>(be(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},a=>{const l=a?.[0]?.[Eg];l!==void 0&&t(!!l),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=G4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return j1()||P1()||x_()}}const pk=mk;var uS="@firebase/auth",cS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _k(i){tl(new Oa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q1(i)},g=new KP(r,a,l,m);return JP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),tl(new Oa("auth-internal",e=>{const t=jc(e.getProvider("auth").getImmediate());return(r=>new gk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(uS,cS,yk(i)),_s(uS,cS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=300,Ek=BS("authIdTokenMaxAge")||vk;let hS=null;const Tk=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ek)return;const a=t?.token;hS!==a&&(hS=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Ak(i=iD()){const e=Ey(i,"auth");if(e.isInitialized())return e.getImmediate();const t=WP(i,{popupRedirectResolver:pk,persistence:[I4,m4,Y1]}),r=BS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=Tk(l.toString());u4(t,c,()=>c(t.currentUser)),l4(t,d=>c(d))}}const a=q2("auth");return a&&ZP(t,`http://${a}`),t}function Sk(){return document.getElementsByTagName("head")?.[0]??document}QP({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=cr("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",Sk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_k("Browser");const Ic=Ak(v1);async function wk(){const i=new di;return(await N4(Ic,i)).user}async function bk(){return(await i4(Ic)).user}async function Ik(){await h4(Ic)}function rI(){const[i,e]=Q.useState(()=>Ic.currentUser),[t,r]=Q.useState(!0);return Q.useEffect(()=>{const a=c4(Ic,l=>{e(l),r(!1)});return()=>a()},[]),{user:i,loading:t}}function iI(){const{user:i}=rI();if(!i)throw new Error("User is not authenticated");return i}function Rk(){const{workoutId:i}=iM(),e=iI(),t=Cc(),r=ZO(i),a=A1(r?.startedAt,r?.completedAt??void 0),l=sM(e.uid,i),c=EM(e.uid,i),d=c.filter(U=>U.completed),m=d.reduce((U,Y)=>U+Y.weight*Y.reps,0),[g,_]=Q.useState(!1),[T,S]=Q.useState(null),D=async U=>{if(!r)return;_(!1);const Y=ps(),ie=S1({id:Y,user:r.user,workout:r.id,exercise:U.id,order:Math.max(-1,...l.map(pe=>pe.order))+1,startedAt:r.startedAt}),te=A_({id:ps(),user:r.user,workout:r.id,performance:Y,order:0,type:"working",weight:0,reps:0,completed:!1});await Promise.all([ie,te])},P=()=>{const U=c.every(Y=>Y.completed);S(U?"form":"warning")},F=async U=>{if(!r)return;S(null);const Y=[];Y.push(nM({...r,completedAt:qe.now(),name:U.name,volume:m,sets:d.length}));for(const ie of l){const te=c.filter(ue=>ue.performance===ie.id);let pe=!0;for(const ue of te)ue.completed?pe=!1:Y.push(Qd(ue));pe&&Y.push(T_(ie))}t("/",{replace:!0}),await Promise.all(Y)};return O.jsxs("div",{className:Ft.root,children:[O.jsxs("div",{className:Ft.toolbar,children:[O.jsx("button",{className:Ft.backButton,onClick:()=>t("/",{replace:!0}),children:O.jsx(gy,{})}),O.jsx("div",{className:Ft.pageTitle,children:""}),O.jsx("button",{className:Ft.finishButton,onClick:P,children:""})]}),O.jsxs("div",{className:Ft.stats,children:[O.jsxs("div",{className:Ft.stat,children:[O.jsx("div",{className:Ft.statName,children:""}),O.jsx("div",{className:_i(Ft.statValue,Ft.accent),children:a})]}),O.jsxs("div",{className:Ft.stat,children:[O.jsx("div",{className:Ft.statName,children:""}),O.jsxs("div",{className:Ft.statValue,children:[m.toLocaleString()," "]})]}),O.jsxs("div",{className:Ft.stat,children:[O.jsx("div",{className:Ft.statName,children:""}),O.jsxs("div",{className:Ft.statValue,children:[d.length," / ",c.length]})]})]}),O.jsxs("div",{className:Ft.exercises,children:[l.map(U=>O.jsx(lP,{performance:U},U.id)),O.jsxs("button",{className:Ft.addExerciseButton,onClick:()=>_(!0),children:[O.jsx(Ed,{})," "]})]}),O.jsx(w_,{isOpen:g,children:O.jsx(w1,{onCancel:()=>_(!1),onSubmit:D})}),O.jsx(b1,{title:"",width:"300px",cancelText:"",submitText:"",isOpen:T==="warning",onClose:()=>S(null),onSubmit:()=>S("form"),children:"   .     ?"}),r&&O.jsx(TP,{workout:r,isOpen:T==="form",onClose:()=>S(null),onSubmit:F})]})}const Ck="_body_17trr_1",xk="_user_17trr_9",Dk="_userImage_17trr_16",Nk="_userInfo_17trr_28",Vk="_userName_17trr_36",Ok="_signOut_17trr_40",Mk="_workoutButtons_17trr_57",Pk="_workoutButton_17trr_57",kk="_startWorkout_17trr_78",Lk="_workouts_17trr_83",Uk="_workout_17trr_57",Bk="_workoutName_17trr_97",zk="_workoutTimer_17trr_101",jk="_workoutDate_17trr_105",qk="_workoutStats_17trr_111",Hk="_workoutStat_17trr_111",Fk="_statName_17trr_123",Gk="_statValue_17trr_128",Kk="_sheetHeader_17trr_132",Qk="_sheetActions_17trr_138",$k="_sheetAction_17trr_138",De={body:Ck,user:xk,userImage:Dk,userInfo:Nk,userName:Vk,signOut:Ok,workoutButtons:Mk,workoutButton:Pk,startWorkout:kk,workouts:Lk,workout:Uk,workoutName:Bk,workoutTimer:zk,workoutDate:jk,workoutStats:qk,workoutStat:Hk,statName:Fk,statValue:Gk,sheetHeader:Kk,sheetActions:Qk,sheetAction:$k},Yk=new Intl.DateTimeFormat("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",weekday:"long"});function Xk(){const i=iI(),e=Cc(),t=eM(i.uid),[r]=tM(i.uid),[a,l]=Q.useState(null),c=A1(r?.startedAt,void 0),d=S=>{S&&e(`/workouts/${S.id}`)},m=async()=>{const S=[],D={id:ps(),user:i.uid,name:" ",startedAt:qe.now(),completedAt:null,volume:0,sets:0};S.push(HA(D)),d(D),await Promise.all(S)},g=async S=>{const D=[],P=await FA(S.user,S.id),F=await KA(S.user,S.id);D.push(rM(S)),D.push(...P.map(U=>T_(U))),D.push(...F.map(U=>Qd(U))),await Promise.all(D)},_=async()=>{if(!a)return;const S=[],D=await FA(a.user,a.id),P=await KA(a.user,a.id),F={id:ps(),user:a.user,name:a.name,startedAt:qe.now(),completedAt:null,volume:0,sets:0};S.push(HA(F));for(const U of D){const Y={id:ps(),user:F.user,workout:F.id,exercise:U.exercise,order:U.order,startedAt:F.startedAt};S.push(S1(Y));const ie=P.filter(te=>te.performance===U.id);for(const te of ie){const pe={id:ps(),user:F.user,workout:F.id,performance:Y.id,order:te.order,type:te.type,weight:0,reps:0,completed:!1};S.push(A_(pe))}}d(F),await Promise.all(S)},T=()=>{alert("TBD")};return O.jsxs("div",{className:De.body,children:[O.jsxs("div",{className:De.user,children:[i.photoURL?O.jsx("img",{className:De.userImage,src:i.photoURL,alt:"User Photo"}):O.jsx("div",{className:De.userImage,children:O.jsx(M2,{})}),O.jsxs("div",{className:De.userInfo,children:[O.jsx("div",{className:De.userName,children:i.displayName??" "}),O.jsxs("button",{className:De.signOut,onClick:Ik,children:[O.jsx(x2,{}),O.jsx("span",{children:""})]})]})]}),O.jsxs("div",{className:De.workouts,children:[r?O.jsxs("div",{className:De.workout,children:[O.jsx("div",{className:De.workoutName,children:" "}),O.jsx("div",{className:De.workoutTimer,children:c}),O.jsxs("div",{className:De.workoutButtons,children:[O.jsxs("button",{className:_i(De.workoutButton,De.startWorkout),onClick:()=>d(r),children:[O.jsx(o0,{}),""]}),O.jsxs("button",{className:_i(De.workoutButton,De.cancelWorkout),onClick:()=>g(r),children:[O.jsx(O2,{}),""]})]})]}):O.jsxs("div",{className:De.workout,children:[O.jsx("div",{className:De.workoutName,children:" "}),O.jsx("div",{className:De.workoutButtons,children:O.jsxs("button",{className:_i(De.workoutButton,De.startWorkout),onClick:()=>m(),children:[O.jsx(Ed,{})," "]})})]}),t.map(S=>O.jsxs("div",{className:De.workout,onClick:()=>l(S),children:[O.jsx("div",{className:De.workoutName,children:S.name}),O.jsx("div",{className:De.workoutDate,children:Yk.format(S.startedAt?.toDate())}),O.jsxs("div",{className:De.workoutStats,children:[O.jsxs("div",{className:De.workoutStat,children:[O.jsx("div",{className:De.statName,children:""}),O.jsx("div",{className:De.statValue,children:ny(S.startedAt,S.completedAt??void 0)})]}),O.jsxs("div",{className:De.workoutStat,children:[O.jsx("div",{className:De.statName,children:""}),O.jsxs("div",{className:De.statValue,children:[S.volume?.toLocaleString()??"-"," "]})]}),O.jsxs("div",{className:De.workoutStat,children:[O.jsx("div",{className:De.statName,children:""}),O.jsx("div",{className:De.statValue,children:S.sets})]})]})]},S.id))]}),O.jsxs(S_,{isOpen:a!==null,onClose:()=>l(null),children:[O.jsx("div",{className:De.sheetHeader,children:""}),O.jsxs("div",{className:De.sheetActions,children:[O.jsxs("button",{className:De.sheetAction,onClick:()=>d(a),children:[O.jsx(V2,{}),O.jsx("span",{children:" "})]}),O.jsxs("button",{className:De.sheetAction,disabled:!!r,onClick:_,children:[O.jsx(o0,{}),O.jsx("span",{children:" "})]}),O.jsxs("button",{className:De.sheetAction,onClick:T,children:[O.jsx(py,{}),O.jsx("span",{children:" "})]})]})]})]})}function fS({children:i}){const{user:e,loading:t}=rI();return t?null:e?O.jsx(O.Fragment,{children:i}):O.jsx(CC,{to:"/auth/sign-in",replace:!0})}function Wk(i){return Ln({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(i)}const Jk="_root_wop2o_1",Zk="_icon_wop2o_7",e6="_title_wop2o_12",t6="_providers_wop2o_18",n6="_providerButton_wop2o_25",Go={root:Jk,icon:Zk,title:e6,providers:t6,providerButton:n6},r6="/gym-tracker/assets/app-icon-WyA6dgiH.png";function i6(){const i=Cc(),e=async()=>{await wk(),i("/",{replace:!0})},t=async()=>{await bk(),i("/",{replace:!0})};return O.jsxs("div",{className:Go.root,children:[O.jsx("img",{className:Go.icon,src:r6,alt:"App Icon"}),O.jsx("div",{className:Go.title,children:"Gym Tracker"}),O.jsxs("div",{className:Go.providers,children:[O.jsxs("button",{className:Go.providerButton,onClick:e,children:[O.jsx(Wk,{}),"  Google"]}),O.jsx("button",{className:Go.providerButton,onClick:t,children:" "})]})]})}function s6(){return O.jsx(ZC,{children:O.jsxs(DC,{children:[O.jsx(wf,{path:"/",element:O.jsx(fS,{children:O.jsx(Xk,{})})}),O.jsx(wf,{path:"/workouts/:workoutId",element:O.jsx(fS,{children:O.jsx(Rk,{})})}),O.jsx(wf,{path:"/auth/sign-in",element:O.jsx(i6,{})})]})})}UR.createRoot(document.getElementById("root")).render(O.jsx(Q.StrictMode,{children:O.jsx(s6,{})}));
