(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function BR(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ng={exports:{}},Uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function zR(){if(YT)return Uu;YT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Uu.Fragment=e,Uu.jsx=t,Uu.jsxs=t,Uu}var XT;function jR(){return XT||(XT=1,ng.exports=zR()),ng.exports}var V=jR(),rg={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT;function qR(){if(WT)return Ce;WT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,F={};function B(D,ne,he){this.props=D,this.context=ne,this.refs=F,this.updater=he||N}B.prototype.isReactComponent={},B.prototype.setState=function(D,ne){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ne,"setState")},B.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Q(){}Q.prototype=B.prototype;function ie(D,ne,he){this.props=D,this.context=ne,this.refs=F,this.updater=he||N}var te=ie.prototype=new Q;te.constructor=ie,k(te,B.prototype),te.isPureReactComponent=!0;var fe=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},Ee=Object.prototype.hasOwnProperty;function O(D,ne,he,se,Te,Ve){return he=Ve.ref,{$$typeof:i,type:D,key:ne,ref:he!==void 0?he:null,props:Ve}}function b(D,ne){return O(D.type,ne,void 0,void 0,void 0,D.props)}function R(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function P(D){var ne={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(he){return ne[he]})}var L=/\/+/g;function x(D,ne){return typeof D=="object"&&D!==null&&D.key!=null?P(""+D.key):ne.toString(36)}function I(){}function Ze(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(I,I):(D.status="pending",D.then(function(ne){D.status==="pending"&&(D.status="fulfilled",D.value=ne)},function(ne){D.status==="pending"&&(D.status="rejected",D.reason=ne)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function it(D,ne,he,se,Te){var Ve=typeof D;(Ve==="undefined"||Ve==="boolean")&&(D=null);var Ie=!1;if(D===null)Ie=!0;else switch(Ve){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(D.$$typeof){case i:case e:Ie=!0;break;case _:return Ie=D._init,it(Ie(D._payload),ne,he,se,Te)}}if(Ie)return Te=Te(D),Ie=se===""?"."+x(D,0):se,fe(Te)?(he="",Ie!=null&&(he=Ie.replace(L,"$&/")+"/"),it(Te,ne,he,"",function(pr){return pr})):Te!=null&&(R(Te)&&(Te=b(Te,he+(Te.key==null||D&&D.key===Te.key?"":(""+Te.key).replace(L,"$&/")+"/")+Ie)),ne.push(Te)),1;Ie=0;var jt=se===""?".":se+":";if(fe(D))for(var ot=0;ot<D.length;ot++)se=D[ot],Ve=jt+x(se,ot),Ie+=it(se,ne,he,Ve,Te);else if(ot=w(D),typeof ot=="function")for(D=ot.call(D),ot=0;!(se=D.next()).done;)se=se.value,Ve=jt+x(se,ot++),Ie+=it(se,ne,he,Ve,Te);else if(Ve==="object"){if(typeof D.then=="function")return it(Ze(D),ne,he,se,Te);throw ne=String(D),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function W(D,ne,he){if(D==null)return D;var se=[],Te=0;return it(D,se,"","",function(Ve){return ne.call(he,Ve,Te++)}),se}function oe(D){if(D._status===-1){var ne=D._result;ne=ne(),ne.then(function(he){(D._status===0||D._status===-1)&&(D._status=1,D._result=he)},function(he){(D._status===0||D._status===-1)&&(D._status=2,D._result=he)}),D._status===-1&&(D._status=0,D._result=ne)}if(D._status===1)return D._result.default;throw D._result}var _e=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Be(){}return Ce.Children={map:W,forEach:function(D,ne,he){W(D,function(){ne.apply(this,arguments)},he)},count:function(D){var ne=0;return W(D,function(){ne++}),ne},toArray:function(D){return W(D,function(ne){return ne})||[]},only:function(D){if(!R(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ce.Component=B,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=ie,Ce.StrictMode=r,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ue.H.useMemoCache(D)}},Ce.cache=function(D){return function(){return D.apply(null,arguments)}},Ce.cloneElement=function(D,ne,he){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var se=k({},D.props),Te=D.key,Ve=void 0;if(ne!=null)for(Ie in ne.ref!==void 0&&(Ve=void 0),ne.key!==void 0&&(Te=""+ne.key),ne)!Ee.call(ne,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ne.ref===void 0||(se[Ie]=ne[Ie]);var Ie=arguments.length-2;if(Ie===1)se.children=he;else if(1<Ie){for(var jt=Array(Ie),ot=0;ot<Ie;ot++)jt[ot]=arguments[ot+2];se.children=jt}return O(D.type,Te,void 0,void 0,Ve,se)},Ce.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Ce.createElement=function(D,ne,he){var se,Te={},Ve=null;if(ne!=null)for(se in ne.key!==void 0&&(Ve=""+ne.key),ne)Ee.call(ne,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Te[se]=ne[se]);var Ie=arguments.length-2;if(Ie===1)Te.children=he;else if(1<Ie){for(var jt=Array(Ie),ot=0;ot<Ie;ot++)jt[ot]=arguments[ot+2];Te.children=jt}if(D&&D.defaultProps)for(se in Ie=D.defaultProps,Ie)Te[se]===void 0&&(Te[se]=Ie[se]);return O(D,Ve,void 0,void 0,null,Te)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(D){return{$$typeof:d,render:D}},Ce.isValidElement=R,Ce.lazy=function(D){return{$$typeof:_,_payload:{_status:-1,_result:D},_init:oe}},Ce.memo=function(D,ne){return{$$typeof:g,type:D,compare:ne===void 0?null:ne}},Ce.startTransition=function(D){var ne=ue.T,he={};ue.T=he;try{var se=D(),Te=ue.S;Te!==null&&Te(he,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Be,_e)}catch(Ve){_e(Ve)}finally{ue.T=ne}},Ce.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Ce.use=function(D){return ue.H.use(D)},Ce.useActionState=function(D,ne,he){return ue.H.useActionState(D,ne,he)},Ce.useCallback=function(D,ne){return ue.H.useCallback(D,ne)},Ce.useContext=function(D){return ue.H.useContext(D)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(D,ne){return ue.H.useDeferredValue(D,ne)},Ce.useEffect=function(D,ne,he){var se=ue.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(D,ne)},Ce.useId=function(){return ue.H.useId()},Ce.useImperativeHandle=function(D,ne,he){return ue.H.useImperativeHandle(D,ne,he)},Ce.useInsertionEffect=function(D,ne){return ue.H.useInsertionEffect(D,ne)},Ce.useLayoutEffect=function(D,ne){return ue.H.useLayoutEffect(D,ne)},Ce.useMemo=function(D,ne){return ue.H.useMemo(D,ne)},Ce.useOptimistic=function(D,ne){return ue.H.useOptimistic(D,ne)},Ce.useReducer=function(D,ne,he){return ue.H.useReducer(D,ne,he)},Ce.useRef=function(D){return ue.H.useRef(D)},Ce.useState=function(D){return ue.H.useState(D)},Ce.useSyncExternalStore=function(D,ne,he){return ue.H.useSyncExternalStore(D,ne,he)},Ce.useTransition=function(){return ue.H.useTransition()},Ce.version="19.1.0",Ce}var JT;function dy(){return JT||(JT=1,rg.exports=qR()),rg.exports}var $=dy();const Ra=BR($);var ig={exports:{}},Bu={},sg={exports:{}},ag={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function HR(){return ZT||(ZT=1,function(i){function e(W,oe){var _e=W.length;W.push(oe);e:for(;0<_e;){var Be=_e-1>>>1,D=W[Be];if(0<a(D,oe))W[Be]=oe,W[_e]=D,_e=Be;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var oe=W[0],_e=W.pop();if(_e!==oe){W[0]=_e;e:for(var Be=0,D=W.length,ne=D>>>1;Be<ne;){var he=2*(Be+1)-1,se=W[he],Te=he+1,Ve=W[Te];if(0>a(se,_e))Te<D&&0>a(Ve,se)?(W[Be]=Ve,W[Te]=_e,Be=Te):(W[Be]=se,W[he]=_e,Be=he);else if(Te<D&&0>a(Ve,_e))W[Be]=Ve,W[Te]=_e,Be=Te;else break e}}return oe}function a(W,oe){var _e=W.sortIndex-oe.sortIndex;return _e!==0?_e:W.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,T=null,w=3,N=!1,k=!1,F=!1,B=!1,Q=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function fe(W){for(var oe=t(g);oe!==null;){if(oe.callback===null)r(g);else if(oe.startTime<=W)r(g),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(g)}}function ue(W){if(F=!1,fe(W),!k)if(t(m)!==null)k=!0,Ee||(Ee=!0,x());else{var oe=t(g);oe!==null&&it(ue,oe.startTime-W)}}var Ee=!1,O=-1,b=5,R=-1;function P(){return B?!0:!(i.unstable_now()-R<b)}function L(){if(B=!1,Ee){var W=i.unstable_now();R=W;var oe=!0;try{e:{k=!1,F&&(F=!1,ie(O),O=-1),N=!0;var _e=w;try{t:{for(fe(W),T=t(m);T!==null&&!(T.expirationTime>W&&P());){var Be=T.callback;if(typeof Be=="function"){T.callback=null,w=T.priorityLevel;var D=Be(T.expirationTime<=W);if(W=i.unstable_now(),typeof D=="function"){T.callback=D,fe(W),oe=!0;break t}T===t(m)&&r(m),fe(W)}else r(m);T=t(m)}if(T!==null)oe=!0;else{var ne=t(g);ne!==null&&it(ue,ne.startTime-W),oe=!1}}break e}finally{T=null,w=_e,N=!1}oe=void 0}}finally{oe?x():Ee=!1}}}var x;if(typeof te=="function")x=function(){te(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ze=I.port2;I.port1.onmessage=L,x=function(){Ze.postMessage(null)}}else x=function(){Q(L,0)};function it(W,oe){O=Q(function(){W(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(W){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var _e=w;w=oe;try{return W()}finally{w=_e}},i.unstable_requestPaint=function(){B=!0},i.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var _e=w;w=W;try{return oe()}finally{w=_e}},i.unstable_scheduleCallback=function(W,oe,_e){var Be=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Be+_e:Be):_e=Be,W){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=_e+D,W={id:_++,callback:oe,priorityLevel:W,startTime:_e,expirationTime:D,sortIndex:-1},_e>Be?(W.sortIndex=_e,e(g,W),t(m)===null&&W===t(g)&&(F?(ie(O),O=-1):F=!0,it(ue,_e-Be))):(W.sortIndex=D,e(m,W),k||N||(k=!0,Ee||(Ee=!0,x()))),W},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(W){var oe=w;return function(){var _e=w;w=oe;try{return W.apply(this,arguments)}finally{w=_e}}}}(ag)),ag}var e0;function FR(){return e0||(e0=1,sg.exports=HR()),sg.exports}var og={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function GR(){if(t0)return sn;t0=1;var i=dy();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:g,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},sn.flushSync=function(m){var g=c.T,_=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=_,r.d.f()}},sn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},sn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},sn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:N}):_==="script"&&r.d.X(m,{crossOrigin:T,integrity:w,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},sn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);r.d.L(m,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},sn.requestFormReset=function(m){r.d.r(m)},sn.unstable_batchedUpdates=function(m,g){return m(g)},sn.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},sn.useFormStatus=function(){return c.H.useHostTransitionStatus()},sn.version="19.1.0",sn}var n0;function Tw(){if(n0)return og.exports;n0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),og.exports=GR(),og.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function KR(){if(r0)return Bu;r0=1;var i=FR(),e=dy(),t=Tw();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function m(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),n;if(p===u)return d(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var E=!1,A=f.child;A;){if(A===o){E=!0,o=f,u=p;break}if(A===u){E=!0,u=f,o=p;break}A=A.sibling}if(!E){for(A=p.child;A;){if(A===o){E=!0,o=p,u=f;break}if(A===u){E=!0,u=p,o=f;break}A=A.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),te=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function x(n){return n===null||typeof n!="object"?null:(n=L&&n[L]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function Ze(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case B:return"Profiler";case F:return"StrictMode";case ue:return"Suspense";case Ee:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case te:return(n.displayName||"Context")+".Provider";case ie:return(n._context.displayName||"Context")+".Consumer";case fe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case O:return s=n.displayName||null,s!==null?s:Ze(n.type)||"Memo";case b:s=n._payload,n=n._init;try{return Ze(n(s))}catch{}}return null}var it=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Be=[],D=-1;function ne(n){return{current:n}}function he(n){0>D||(n.current=Be[D],Be[D]=null,D--)}function se(n,s){D++,Be[D]=n.current,n.current=s}var Te=ne(null),Ve=ne(null),Ie=ne(null),jt=ne(null);function ot(n,s){switch(se(Ie,s),se(Ve,n),se(Te,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?wT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=wT(s),n=ST(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}he(Te),se(Te,n)}function pr(){he(Te),he(Ve),he(Ie)}function Vi(n){n.memoizedState!==null&&se(jt,n);var s=Te.current,o=ST(s,n.type);s!==o&&(se(Ve,n),se(Te,o))}function qr(n){Ve.current===n&&(he(Te),he(Ve)),jt.current===n&&(he(jt),Ou._currentValue=_e)}var Ms=Object.prototype.hasOwnProperty,Ps=i.unstable_scheduleCallback,ks=i.unstable_cancelCallback,Nl=i.unstable_shouldYield,Qc=i.unstable_requestPaint,jn=i.unstable_now,nm=i.unstable_getCurrentPriorityLevel,Dl=i.unstable_ImmediatePriority,Ka=i.unstable_UserBlockingPriority,Ls=i.unstable_NormalPriority,rm=i.unstable_LowPriority,Qa=i.unstable_IdlePriority,Vl=i.log,$c=i.unstable_setDisableYieldValue,yt=null,$e=null;function In(n){if(typeof Vl=="function"&&$c(n),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(yt,n)}catch{}}var nn=Math.clz32?Math.clz32:Us,Yc=Math.log,im=Math.LN2;function Us(n){return n>>>=0,n===0?32:31-(Yc(n)/im|0)|0}var Bs=256,zs=4194304;function rr(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function $a(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?f=rr(u):(E&=A,E!==0?f=rr(E):o||(o=A&~n,o!==0&&(f=rr(o))))):(A=u&~p,A!==0?f=rr(A):E!==0?f=rr(E):o||(o=u&~n,o!==0&&(f=rr(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function js(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Ol(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ml(){var n=Bs;return Bs<<=1,(Bs&4194048)===0&&(Bs=256),n}function Pl(){var n=zs;return zs<<=1,(zs&62914560)===0&&(zs=4194304),n}function Hr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Fr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function kl(n,s,o,u,f,p){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var A=n.entanglements,C=n.expirationTimes,H=n.hiddenUpdates;for(o=E&~o;0<o;){var J=31-nn(o),ee=1<<J;A[J]=0,C[J]=-1;var G=H[J];if(G!==null)for(H[J]=null,J=0;J<G.length;J++){var K=G[J];K!==null&&(K.lane&=-536870913)}o&=~ee}u!==0&&gr(n,u,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~s))}function gr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-nn(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Ll(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-nn(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Oi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ya(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Mi(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:HT(n.type))}function Xc(n,s){var o=oe.p;try{return oe.p=n,s()}finally{oe.p=o}}var ht=Math.random().toString(36).slice(2),Mt="__reactFiber$"+ht,Ct="__reactProps$"+ht,qn="__reactContainer$"+ht,Ul="__reactEvents$"+ht,sm="__reactListeners$"+ht,Pi="__reactHandles$"+ht,Wc="__reactResources$"+ht,qs="__reactMarker$"+ht;function ki(n){delete n[Mt],delete n[Ct],delete n[Ul],delete n[sm],delete n[Pi]}function Gr(n){var s=n[Mt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[qn]||o[Mt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=CT(n);n!==null;){if(o=n[Mt])return o;n=CT(n)}return s}n=o,o=n.parentNode}return null}function yr(n){if(n=n[Mt]||n[qn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function _r(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function fn(n){var s=n[Wc];return s||(s=n[Wc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Tt(n){n[qs]=!0}var Bl=new Set,Xa={};function ir(n,s){Kr(n,s),Kr(n+"Capture",s)}function Kr(n,s){for(Xa[n]=s,n=0;n<s.length;n++)Bl.add(s[n])}var Jc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zc={},Hs={};function eh(n){return Ms.call(Hs,n)?!0:Ms.call(Zc,n)?!1:Jc.test(n)?Hs[n]=!0:(Zc[n]=!0,!1)}function Li(n,s,o){if(eh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function vr(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Xt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}var Fs,th;function Qr(n){if(Fs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Fs=s&&s[1]||"",th=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fs+n+th}var Wa=!1;function Ja(n,s){if(!n||Wa)return"";Wa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var G=K}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(K){G=K}n.call(ee.prototype)}}else{try{throw Error()}catch(K){G=K}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],A=p[1];if(E&&A){var C=E.split(`
`),H=A.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===H.length)for(u=C.length-1,f=H.length-1;1<=u&&0<=f&&C[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==H[f]){var J=`
`+C[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=f);break}}}finally{Wa=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Qr(o):""}function zl(n){switch(n.tag){case 26:case 27:case 5:return Qr(n.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 15:return Ja(n.type,!1);case 11:return Ja(n.type.render,!1);case 1:return Ja(n.type,!0);case 31:return Qr("Activity");default:return""}}function Za(n){try{var s="";do s+=zl(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jl(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function am(n){var s=jl(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function eo(n){n._valueTracker||(n._valueTracker=am(n))}function ql(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=jl(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Gs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var om=/[\n"\\]/g;function xt(n){return n.replace(om,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Rn(n,s,o,u,f,p,E,A){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+dn(s)):n.value!==""+dn(s)&&(n.value=""+dn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Ui(n,E,dn(s)):o!=null?Ui(n,E,dn(o)):u!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+dn(A):n.removeAttribute("name")}function Ks(n,s,o,u,f,p,E,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+dn(o):"",s=s!=null?""+dn(s):o,A||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Ui(n,s,o){s==="number"&&Gs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function $r(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+dn(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function et(n,s,o){if(s!=null&&(s=""+dn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+dn(o):""}function Qs(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(it(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=dn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Hn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var $s=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nh(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||$s.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Hl(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&nh(n,f,u)}else for(var p in s)s.hasOwnProperty(p)&&nh(n,p,s[p])}function Fl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),um=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(n){return um.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Yr=null;function Fn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xr=null,Wr=null;function Gl(n){var s=yr(n);if(s&&(n=s.stateNode)){var o=n[Ct]||null;e:switch(n=s.stateNode,s.type){case"input":if(Rn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+xt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Ct]||null;if(!f)throw Error(r(90));Rn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&ql(u)}break e;case"textarea":et(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&$r(n,!!o.multiple,s,!1)}}}var Er=!1;function rh(n,s,o){if(Er)return n(s,o);Er=!0;try{var u=n(s);return u}finally{if(Er=!1,(Xr!==null||Wr!==null)&&(Xh(),Xr&&(s=Xr,n=Wr,Wr=Xr=null,Gl(s),n)))for(s=0;s<n.length;s++)Gl(n[s])}}function Ys(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Ct]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(sr)try{var Xs={};Object.defineProperty(Xs,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{Gn=!1}var Tr=null,Bi=null,Jr=null;function Kl(){if(Jr)return Jr;var n,s=Bi,o=s.length,u,f="value"in Tr?Tr.value:Tr.textContent,p=f.length;for(n=0;n<o&&s[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&s[o-u]===f[p-u];u++);return Jr=f.slice(n,1<u?1-u:void 0)}function Ar(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function wr(){return!0}function Ql(){return!1}function qt(n){function s(o,u,f,p,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(o=n[A],this[A]=o?o(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?wr:Ql,this.isPropagationStopped=Ql,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=wr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=wr)},persist:function(){},isPersistent:wr}),s}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=qt(Qe),Ws=_({},Qe,{view:0,detail:0}),ih=qt(Ws),ro,io,Sr,Js=_({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Sr&&(Sr&&n.type==="mousemove"?(ro=n.screenX-Sr.screenX,io=n.screenY-Sr.screenY):io=ro=0,Sr=n),ro)},movementY:function(n){return"movementY"in n?n.movementY:io}}),Kn=qt(Js),sh=_({},Js,{dataTransfer:0}),cm=qt(sh),Zs=_({},Ws,{relatedTarget:0}),so=qt(Zs),$l=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ao=qt($l),ah=_({},Qe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oo=qt(ah),hm=_({},Qe,{data:0}),Yl=qt(hm),ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=lh[n])?!!s[n]:!1}function ta(){return Xl}var uh=_({},Ws,{key:function(n){if(n.key){var s=ea[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ar(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?oh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(n){return n.type==="keypress"?Ar(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ar(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),lo=qt(uh),ch=_({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wl=qt(ch),Zr=_({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),hh=qt(Zr),fh=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),dh=qt(fh),mh=_({},Js,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),uo=qt(mh),mn=_({},Qe,{newState:0,oldState:0}),ph=qt(mn),gh=[9,13,27,32],br=sr&&"CompositionEvent"in window,h=null;sr&&"documentMode"in document&&(h=document.documentMode);var y=sr&&"TextEvent"in window&&!h,v=sr&&(!br||h&&8<h&&11>=h),S=" ",z=!1;function Y(n,s){switch(n){case"keyup":return gh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ze=!1;function Pt(n,s){switch(n){case"compositionend":return le(s);case"keypress":return s.which!==32?null:(z=!0,S);case"textInput":return n=s.data,n===S&&z?null:n;default:return null}}function je(n,s){if(ze)return n==="compositionend"||!br&&Y(n,s)?(n=Kl(),Jr=Bi=Tr=null,ze=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Ht[n.type]:s==="textarea"}function ei(n,s,o,u){Xr?Wr?Wr.push(u):Wr=[u]:Xr=u,s=nf(s,"onChange"),0<s.length&&(o=new no("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Wt=null,Ir=null;function Jl(n){_T(n,0)}function yh(n){var s=_r(n);if(ql(s))return n}function B_(n,s){if(n==="change")return s}var z_=!1;if(sr){var fm;if(sr){var dm="oninput"in document;if(!dm){var j_=document.createElement("div");j_.setAttribute("oninput","return;"),dm=typeof j_.oninput=="function"}fm=dm}else fm=!1;z_=fm&&(!document.documentMode||9<document.documentMode)}function q_(){Wt&&(Wt.detachEvent("onpropertychange",H_),Ir=Wt=null)}function H_(n){if(n.propertyName==="value"&&yh(Ir)){var s=[];ei(s,Ir,n,Fn(n)),rh(Jl,s)}}function pI(n,s,o){n==="focusin"?(q_(),Wt=s,Ir=o,Wt.attachEvent("onpropertychange",H_)):n==="focusout"&&q_()}function gI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yh(Ir)}function yI(n,s){if(n==="click")return yh(s)}function _I(n,s){if(n==="input"||n==="change")return yh(s)}function vI(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Cn=typeof Object.is=="function"?Object.is:vI;function Zl(n,s){if(Cn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Ms.call(s,f)||!Cn(n[f],s[f]))return!1}return!0}function F_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function G_(n,s){var o=F_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=F_(o)}}function K_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?K_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Q_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Gs(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Gs(n.document)}return s}function mm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var EI=sr&&"documentMode"in document&&11>=document.documentMode,co=null,pm=null,eu=null,gm=!1;function $_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gm||co==null||co!==Gs(u)||(u=co,"selectionStart"in u&&mm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),eu&&Zl(eu,u)||(eu=u,u=nf(pm,"onSelect"),0<u.length&&(s=new no("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=co)))}function na(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var ho={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},ym={},Y_={};sr&&(Y_=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function ra(n){if(ym[n])return ym[n];if(!ho[n])return n;var s=ho[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Y_)return ym[n]=s[o];return n}var X_=ra("animationend"),W_=ra("animationiteration"),J_=ra("animationstart"),TI=ra("transitionrun"),AI=ra("transitionstart"),wI=ra("transitioncancel"),Z_=ra("transitionend"),ev=new Map,_m="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_m.push("scrollEnd");function ar(n,s){ev.set(n,s),ir(s,[n])}var tv=new WeakMap;function Qn(n,s){if(typeof n=="object"&&n!==null){var o=tv.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Za(s)},tv.set(n,s),s)}return{value:n,source:s,stack:Za(s)}}var $n=[],fo=0,vm=0;function _h(){for(var n=fo,s=vm=fo=0;s<n;){var o=$n[s];$n[s++]=null;var u=$n[s];$n[s++]=null;var f=$n[s];$n[s++]=null;var p=$n[s];if($n[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}p!==0&&nv(o,f,p)}}function vh(n,s,o,u){$n[fo++]=n,$n[fo++]=s,$n[fo++]=o,$n[fo++]=u,vm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Em(n,s,o,u){return vh(n,s,o,u),Eh(n)}function mo(n,s){return vh(n,null,null,s),Eh(n)}function nv(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=n.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&s!==null&&(f=31-nn(o),n=p.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function Eh(n){if(50<bu)throw bu=0,Ip=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var po={};function SI(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,s,o,u){return new SI(n,s,o,u)}function Tm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ti(n,s){var o=n.alternate;return o===null?(o=xn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function rv(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Th(n,s,o,u,f,p){var E=0;if(u=n,typeof n=="function")Tm(n)&&(E=1);else if(typeof n=="string")E=IR(n,o,Te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=xn(31,o,s,f),n.elementType=R,n.lanes=p,n;case k:return ia(o.children,f,p,s);case F:E=8,f|=24;break;case B:return n=xn(12,o,s,f|2),n.elementType=B,n.lanes=p,n;case ue:return n=xn(13,o,s,f),n.elementType=ue,n.lanes=p,n;case Ee:return n=xn(19,o,s,f),n.elementType=Ee,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:case te:E=10;break e;case ie:E=9;break e;case fe:E=11;break e;case O:E=14;break e;case b:E=16,u=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=xn(E,o,s,f),s.elementType=n,s.type=u,s.lanes=p,s}function ia(n,s,o,u){return n=xn(7,n,u,s),n.lanes=o,n}function Am(n,s,o){return n=xn(6,n,null,s),n.lanes=o,n}function wm(n,s,o){return s=xn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var go=[],yo=0,Ah=null,wh=0,Yn=[],Xn=0,sa=null,ni=1,ri="";function aa(n,s){go[yo++]=wh,go[yo++]=Ah,Ah=n,wh=s}function iv(n,s,o){Yn[Xn++]=ni,Yn[Xn++]=ri,Yn[Xn++]=sa,sa=n;var u=ni;n=ri;var f=32-nn(u)-1;u&=~(1<<f),o+=1;var p=32-nn(s)+f;if(30<p){var E=f-f%5;p=(u&(1<<E)-1).toString(32),u>>=E,f-=E,ni=1<<32-nn(s)+f|o<<f|u,ri=p+n}else ni=1<<p|o<<f|u,ri=n}function Sm(n){n.return!==null&&(aa(n,1),iv(n,1,0))}function bm(n){for(;n===Ah;)Ah=go[--yo],go[yo]=null,wh=go[--yo],go[yo]=null;for(;n===sa;)sa=Yn[--Xn],Yn[Xn]=null,ri=Yn[--Xn],Yn[Xn]=null,ni=Yn[--Xn],Yn[Xn]=null}var pn=null,_t=null,Ge=!1,oa=null,Rr=!1,Im=Error(r(519));function la(n){var s=Error(r(418,""));throw ru(Qn(s,n)),Im}function sv(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Mt]=n,s[Ct]=u,o){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(o=0;o<Ru.length;o++)Pe(Ru[o],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),Ks(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),eo(s);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),Qs(s,u.value,u.defaultValue,u.children),eo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||AT(s.textContent,o)?(u.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),u.onScroll!=null&&Pe("scroll",s),u.onScrollEnd!=null&&Pe("scrollend",s),u.onClick!=null&&(s.onclick=rf),s=!0):s=!1,s||la(n)}function av(n){for(pn=n.return;pn;)switch(pn.tag){case 5:case 13:Rr=!1;return;case 27:case 3:Rr=!0;return;default:pn=pn.return}}function tu(n){if(n!==pn)return!1;if(!Ge)return av(n),Ge=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||qp(n.type,n.memoizedProps)),o=!o),o&&_t&&la(n),av(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){_t=lr(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}_t=null}}else s===27?(s=_t,ts(n.type)?(n=Kp,Kp=null,_t=n):_t=s):_t=pn?lr(n.stateNode.nextSibling):null;return!0}function nu(){_t=pn=null,Ge=!1}function ov(){var n=oa;return n!==null&&(An===null?An=n:An.push.apply(An,n),oa=null),n}function ru(n){oa===null?oa=[n]:oa.push(n)}var Rm=ne(null),ua=null,ii=null;function zi(n,s,o){se(Rm,s._currentValue),s._currentValue=o}function si(n){n._currentValue=Rm.current,he(Rm)}function Cm(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function xm(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var C=0;C<s.length;C++)if(A.context===s[C]){p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),Cm(p.return,o,n),u||(E=null);break e}p=A.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),Cm(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function iu(n,s,o,u){n=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=f.type;Cn(f.pendingProps.value,E.value)||(n!==null?n.push(A):n=[A])}}else if(f===jt.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Ou):n=[Ou])}f=f.return}n!==null&&xm(s,n,o,u),s.flags|=262144}function Sh(n){for(n=n.firstContext;n!==null;){if(!Cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ca(n){ua=n,ii=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function rn(n){return lv(ua,n)}function bh(n,s){return ua===null&&ca(n),lv(n,s)}function lv(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ii===null){if(n===null)throw Error(r(308));ii=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ii=ii.next=s;return o}var bI=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},II=i.unstable_scheduleCallback,RI=i.unstable_NormalPriority,Lt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nm(){return{controller:new bI,data:new Map,refCount:0}}function su(n){n.refCount--,n.refCount===0&&II(RI,function(){n.controller.abort()})}var au=null,Dm=0,_o=0,vo=null;function CI(n,s){if(au===null){var o=au=[];Dm=0,_o=Op(),vo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Dm++,s.then(uv,uv),s}function uv(){if(--Dm===0&&au!==null){vo!==null&&(vo.status="fulfilled");var n=au;au=null,_o=0,vo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function xI(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var cv=W.S;W.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&CI(n,s),cv!==null&&cv(n,s)};var ha=ne(null);function Vm(){var n=ha.current;return n!==null?n:lt.pooledCache}function Ih(n,s){s===null?se(ha,ha.current):se(ha,s.pool)}function hv(){var n=Vm();return n===null?null:{parent:Lt._currentValue,pool:n}}var ou=Error(r(460)),fv=Error(r(474)),Rh=Error(r(542)),Om={then:function(){}};function dv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ch(){}function mv(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Ch,Ch),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gv(n),n;default:if(typeof s.status=="string")s.then(Ch,Ch);else{if(n=lt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gv(n),n}throw lu=s,ou}}var lu=null;function pv(){if(lu===null)throw Error(r(459));var n=lu;return lu=null,n}function gv(n){if(n===ou||n===Rh)throw Error(r(483))}var ji=!1;function Mm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function qi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Hi(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Eh(n),nv(n,null,o),s}return vh(n,u,s,o),Eh(n)}function uu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Ll(n,o)}}function km(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Lm=!1;function cu(){if(Lm){var n=vo;if(n!==null)throw n}}function hu(n,s,o,u){Lm=!1;var f=n.updateQueue;ji=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var C=A,H=C.next;C.next=null,E===null?p=H:E.next=H,E=C;var J=n.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==E&&(A===null?J.firstBaseUpdate=H:A.next=H,J.lastBaseUpdate=C))}if(p!==null){var ee=f.baseState;E=0,J=H=C=null,A=p;do{var G=A.lane&-536870913,K=G!==A.lane;if(K?(qe&G)===G:(u&G)===G){G!==0&&G===_o&&(Lm=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Se=n,Ae=A;G=s;var rt=o;switch(Ae.tag){case 1:if(Se=Ae.payload,typeof Se=="function"){ee=Se.call(rt,ee,G);break e}ee=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ae.payload,G=typeof Se=="function"?Se.call(rt,ee,G):Se,G==null)break e;ee=_({},ee,G);break e;case 2:ji=!0}}G=A.callback,G!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[G]:K.push(G))}else K={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(H=J=K,C=ee):J=J.next=K,E|=G;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;K=A,A=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);J===null&&(C=ee),f.baseState=C,f.firstBaseUpdate=H,f.lastBaseUpdate=J,p===null&&(f.shared.lanes=0),Wi|=E,n.lanes=E,n.memoizedState=ee}}function yv(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function _v(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)yv(o[n],s)}var Eo=ne(null),xh=ne(0);function vv(n,s){n=fi,se(xh,n),se(Eo,s),fi=n|s.baseLanes}function Um(){se(xh,fi),se(Eo,Eo.current)}function Bm(){fi=xh.current,he(Eo),he(xh)}var Fi=0,Ne=null,tt=null,Nt=null,Nh=!1,To=!1,fa=!1,Dh=0,fu=0,Ao=null,NI=0;function At(){throw Error(r(321))}function zm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Cn(n[o],s[o]))return!1;return!0}function jm(n,s,o,u,f,p){return Fi=p,Ne=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=n===null||n.memoizedState===null?nE:rE,fa=!1,p=o(u,f),fa=!1,To&&(p=Tv(s,o,u,f)),Ev(n),p}function Ev(n){W.H=Lh;var s=tt!==null&&tt.next!==null;if(Fi=0,Nt=tt=Ne=null,Nh=!1,fu=0,Ao=null,s)throw Error(r(300));n===null||Ft||(n=n.dependencies,n!==null&&Sh(n)&&(Ft=!0))}function Tv(n,s,o,u){Ne=n;var f=0;do{if(To&&(Ao=null),fu=0,To=!1,25<=f)throw Error(r(301));if(f+=1,Nt=tt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}W.H=LI,p=s(o,u)}while(To);return p}function DI(){var n=W.H,s=n.useState()[0];return s=typeof s.then=="function"?du(s):s,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(Ne.flags|=1024),s}function qm(){var n=Dh!==0;return Dh=0,n}function Hm(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Fm(n){if(Nh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Nh=!1}Fi=0,Nt=tt=Ne=null,To=!1,fu=Dh=0,Ao=null}function En(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ne.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function Dt(){if(tt===null){var n=Ne.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var s=Nt===null?Ne.memoizedState:Nt.next;if(s!==null)Nt=s,tt=n;else{if(n===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Nt===null?Ne.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Gm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(n){var s=fu;return fu+=1,Ao===null&&(Ao=[]),n=mv(Ao,n,s),s=Ne,(Nt===null?s.memoizedState:Nt.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?nE:rE),n}function Vh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return du(n);if(n.$$typeof===te)return rn(n)}throw Error(r(438,String(n)))}function Km(n){var s=null,o=Ne.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Gm(),Ne.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=P;return s.index++,o}function ai(n,s){return typeof s=="function"?s(n):s}function Oh(n){var s=Dt();return Qm(s,tt,n)}function Qm(n,s,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=n.baseQueue,p=u.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}s.baseQueue=f=p,u.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{s=f.next;var A=E=null,C=null,H=s,J=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?(qe&ee)===ee:(Fi&ee)===ee){var G=H.revertLane;if(G===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===_o&&(J=!0);else if((Fi&G)===G){H=H.next,G===_o&&(J=!0);continue}else ee={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(A=C=ee,E=p):C=C.next=ee,Ne.lanes|=G,Wi|=G;ee=H.action,fa&&o(p,ee),p=H.hasEagerState?H.eagerState:o(p,ee)}else G={lane:ee,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(A=C=G,E=p):C=C.next=G,Ne.lanes|=ee,Wi|=ee;H=H.next}while(H!==null&&H!==s);if(C===null?E=p:C.next=A,!Cn(p,n.memoizedState)&&(Ft=!0,J&&(o=vo,o!==null)))throw o;n.memoizedState=p,n.baseState=E,n.baseQueue=C,u.lastRenderedState=p}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function $m(n){var s=Dt(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do p=n(p,E.action),E=E.next;while(E!==f);Cn(p,s.memoizedState)||(Ft=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function Av(n,s,o){var u=Ne,f=Dt(),p=Ge;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var E=!Cn((tt||f).memoizedState,o);E&&(f.memoizedState=o,Ft=!0),f=f.queue;var A=bv.bind(null,u,f,n);if(mu(2048,8,A,[n]),f.getSnapshot!==s||E||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,wo(9,Mh(),Sv.bind(null,u,f,o,s),null),lt===null)throw Error(r(349));p||(Fi&124)!==0||wv(u,s,o)}return o}function wv(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Ne.updateQueue,s===null?(s=Gm(),Ne.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Sv(n,s,o,u){s.value=o,s.getSnapshot=u,Iv(s)&&Rv(n)}function bv(n,s,o){return o(function(){Iv(s)&&Rv(n)})}function Iv(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Cn(n,o)}catch{return!0}}function Rv(n){var s=mo(n,2);s!==null&&Mn(s,n,2)}function Ym(n){var s=En();if(typeof n=="function"){var o=n;if(n=o(),fa){In(!0);try{o()}finally{In(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:n},s}function Cv(n,s,o,u){return n.baseState=o,Qm(n,tt,typeof u=="function"?u:ai)}function VI(n,s,o,u,f){if(kh(n))throw Error(r(485));if(n=s.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};W.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,xv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function xv(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var p=W.T,E={};W.T=E;try{var A=o(f,u),C=W.S;C!==null&&C(E,A),Nv(n,s,A)}catch(H){Xm(n,s,H)}finally{W.T=p}}else try{p=o(f,u),Nv(n,s,p)}catch(H){Xm(n,s,H)}}function Nv(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Dv(n,s,u)},function(u){return Xm(n,s,u)}):Dv(n,s,o)}function Dv(n,s,o){s.status="fulfilled",s.value=o,Vv(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,xv(n,o)))}function Xm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Vv(s),s=s.next;while(s!==u)}n.action=null}function Vv(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Ov(n,s){return s}function Mv(n,s){if(Ge){var o=lt.formState;if(o!==null){e:{var u=Ne;if(Ge){if(_t){t:{for(var f=_t,p=Rr;f.nodeType!==8;){if(!p){f=null;break t}if(f=lr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){_t=lr(f.nextSibling),u=f.data==="F!";break e}}la(u)}u=!1}u&&(s=o[0])}}return o=En(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ov,lastRenderedState:s},o.queue=u,o=Zv.bind(null,Ne,u),u.dispatch=o,u=Ym(!1),p=tp.bind(null,Ne,!1,u.queue),u=En(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=VI.bind(null,Ne,f,p,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function Pv(n){var s=Dt();return kv(s,tt,n)}function kv(n,s,o){if(s=Qm(n,s,Ov)[0],n=Oh(ai)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=du(s)}catch(E){throw E===ou?Rh:E}else u=s;s=Dt();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(Ne.flags|=2048,wo(9,Mh(),OI.bind(null,f,o),null)),[u,p,n]}function OI(n,s){n.action=s}function Lv(n){var s=Dt(),o=tt;if(o!==null)return kv(s,o,n);Dt(),s=s.memoizedState,o=Dt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function wo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Ne.updateQueue,s===null&&(s=Gm(),Ne.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Mh(){return{destroy:void 0,resource:void 0}}function Uv(){return Dt().memoizedState}function Ph(n,s,o,u){var f=En();u=u===void 0?null:u,Ne.flags|=n,f.memoizedState=wo(1|s,Mh(),o,u)}function mu(n,s,o,u){var f=Dt();u=u===void 0?null:u;var p=f.memoizedState.inst;tt!==null&&u!==null&&zm(u,tt.memoizedState.deps)?f.memoizedState=wo(s,p,o,u):(Ne.flags|=n,f.memoizedState=wo(1|s,p,o,u))}function Bv(n,s){Ph(8390656,8,n,s)}function zv(n,s){mu(2048,8,n,s)}function jv(n,s){return mu(4,2,n,s)}function qv(n,s){return mu(4,4,n,s)}function Hv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Fv(n,s,o){o=o!=null?o.concat([n]):null,mu(4,4,Hv.bind(null,s,n),o)}function Wm(){}function Gv(n,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&zm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function Kv(n,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&zm(s,u[1]))return u[0];if(u=n(),fa){In(!0);try{n()}finally{In(!1)}}return o.memoizedState=[u,s],u}function Jm(n,s,o){return o===void 0||(Fi&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=YE(),Ne.lanes|=n,Wi|=n,o)}function Qv(n,s,o,u){return Cn(o,s)?o:Eo.current!==null?(n=Jm(n,o,u),Cn(n,s)||(Ft=!0),n):(Fi&42)===0?(Ft=!0,n.memoizedState=o):(n=YE(),Ne.lanes|=n,Wi|=n,s)}function $v(n,s,o,u,f){var p=oe.p;oe.p=p!==0&&8>p?p:8;var E=W.T,A={};W.T=A,tp(n,!1,s,o);try{var C=f(),H=W.S;if(H!==null&&H(A,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var J=xI(C,u);pu(n,s,J,On(n))}else pu(n,s,u,On(n))}catch(ee){pu(n,s,{then:function(){},status:"rejected",reason:ee},On())}finally{oe.p=p,W.T=E}}function MI(){}function Zm(n,s,o,u){if(n.tag!==5)throw Error(r(476));var f=Yv(n).queue;$v(n,f,s,_e,o===null?MI:function(){return Xv(n),o(u)})}function Yv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Xv(n){var s=Yv(n).next.queue;pu(n,s,{},On())}function ep(){return rn(Ou)}function Wv(){return Dt().memoizedState}function Jv(){return Dt().memoizedState}function PI(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=On();n=qi(o);var u=Hi(s,n,o);u!==null&&(Mn(u,s,o),uu(u,s,o)),s={cache:Nm()},n.payload=s;return}s=s.return}}function kI(n,s,o){var u=On();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},kh(n)?eE(s,o):(o=Em(n,s,o,u),o!==null&&(Mn(o,n,u),tE(o,s,u)))}function Zv(n,s,o){var u=On();pu(n,s,o,u)}function pu(n,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(kh(n))eE(s,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,A=p(E,o);if(f.hasEagerState=!0,f.eagerState=A,Cn(A,E))return vh(n,s,f,0),lt===null&&_h(),!1}catch{}finally{}if(o=Em(n,s,f,u),o!==null)return Mn(o,n,u),tE(o,s,u),!0}return!1}function tp(n,s,o,u){if(u={lane:2,revertLane:Op(),action:u,hasEagerState:!1,eagerState:null,next:null},kh(n)){if(s)throw Error(r(479))}else s=Em(n,o,u,2),s!==null&&Mn(s,n,2)}function kh(n){var s=n.alternate;return n===Ne||s!==null&&s===Ne}function eE(n,s){To=Nh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function tE(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Ll(n,o)}}var Lh={readContext:rn,use:Vh,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},nE={readContext:rn,use:Vh,useCallback:function(n,s){return En().memoizedState=[n,s===void 0?null:s],n},useContext:rn,useEffect:Bv,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Ph(4194308,4,Hv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Ph(4194308,4,n,s)},useInsertionEffect:function(n,s){Ph(4,2,n,s)},useMemo:function(n,s){var o=En();s=s===void 0?null:s;var u=n();if(fa){In(!0);try{n()}finally{In(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=En();if(o!==void 0){var f=o(s);if(fa){In(!0);try{o(s)}finally{In(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=kI.bind(null,Ne,n),[u.memoizedState,n]},useRef:function(n){var s=En();return n={current:n},s.memoizedState=n},useState:function(n){n=Ym(n);var s=n.queue,o=Zv.bind(null,Ne,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Wm,useDeferredValue:function(n,s){var o=En();return Jm(o,n,s)},useTransition:function(){var n=Ym(!1);return n=$v.bind(null,Ne,n.queue,!0,!1),En().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Ne,f=En();if(Ge){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),lt===null)throw Error(r(349));(qe&124)!==0||wv(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,Bv(bv.bind(null,u,p,n),[n]),u.flags|=2048,wo(9,Mh(),Sv.bind(null,u,p,o,s),null),o},useId:function(){var n=En(),s=lt.identifierPrefix;if(Ge){var o=ri,u=ni;o=(u&~(1<<32-nn(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Dh++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=NI++,s="«"+s+"r"+o.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:ep,useFormState:Mv,useActionState:Mv,useOptimistic:function(n){var s=En();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=tp.bind(null,Ne,!0,o),o.dispatch=s,[n,s]},useMemoCache:Km,useCacheRefresh:function(){return En().memoizedState=PI.bind(null,Ne)}},rE={readContext:rn,use:Vh,useCallback:Gv,useContext:rn,useEffect:zv,useImperativeHandle:Fv,useInsertionEffect:jv,useLayoutEffect:qv,useMemo:Kv,useReducer:Oh,useRef:Uv,useState:function(){return Oh(ai)},useDebugValue:Wm,useDeferredValue:function(n,s){var o=Dt();return Qv(o,tt.memoizedState,n,s)},useTransition:function(){var n=Oh(ai)[0],s=Dt().memoizedState;return[typeof n=="boolean"?n:du(n),s]},useSyncExternalStore:Av,useId:Wv,useHostTransitionStatus:ep,useFormState:Pv,useActionState:Pv,useOptimistic:function(n,s){var o=Dt();return Cv(o,tt,n,s)},useMemoCache:Km,useCacheRefresh:Jv},LI={readContext:rn,use:Vh,useCallback:Gv,useContext:rn,useEffect:zv,useImperativeHandle:Fv,useInsertionEffect:jv,useLayoutEffect:qv,useMemo:Kv,useReducer:$m,useRef:Uv,useState:function(){return $m(ai)},useDebugValue:Wm,useDeferredValue:function(n,s){var o=Dt();return tt===null?Jm(o,n,s):Qv(o,tt.memoizedState,n,s)},useTransition:function(){var n=$m(ai)[0],s=Dt().memoizedState;return[typeof n=="boolean"?n:du(n),s]},useSyncExternalStore:Av,useId:Wv,useHostTransitionStatus:ep,useFormState:Lv,useActionState:Lv,useOptimistic:function(n,s){var o=Dt();return tt!==null?Cv(o,tt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Km,useCacheRefresh:Jv},So=null,gu=0;function Uh(n){var s=gu;return gu+=1,So===null&&(So=[]),mv(So,n,s)}function yu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Bh(n,s){throw s.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function iE(n){var s=n._init;return s(n._payload)}function sE(n){function s(U,M){if(n){var q=U.deletions;q===null?(U.deletions=[M],U.flags|=16):q.push(M)}}function o(U,M){if(!n)return null;for(;M!==null;)s(U,M),M=M.sibling;return null}function u(U){for(var M=new Map;U!==null;)U.key!==null?M.set(U.key,U):M.set(U.index,U),U=U.sibling;return M}function f(U,M){return U=ti(U,M),U.index=0,U.sibling=null,U}function p(U,M,q){return U.index=q,n?(q=U.alternate,q!==null?(q=q.index,q<M?(U.flags|=67108866,M):q):(U.flags|=67108866,M)):(U.flags|=1048576,M)}function E(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function A(U,M,q,Z){return M===null||M.tag!==6?(M=Am(q,U.mode,Z),M.return=U,M):(M=f(M,q),M.return=U,M)}function C(U,M,q,Z){var me=q.type;return me===k?J(U,M,q.props.children,Z,q.key):M!==null&&(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===b&&iE(me)===M.type)?(M=f(M,q.props),yu(M,q),M.return=U,M):(M=Th(q.type,q.key,q.props,null,U.mode,Z),yu(M,q),M.return=U,M)}function H(U,M,q,Z){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=wm(q,U.mode,Z),M.return=U,M):(M=f(M,q.children||[]),M.return=U,M)}function J(U,M,q,Z,me){return M===null||M.tag!==7?(M=ia(q,U.mode,Z,me),M.return=U,M):(M=f(M,q),M.return=U,M)}function ee(U,M,q){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Am(""+M,U.mode,q),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return q=Th(M.type,M.key,M.props,null,U.mode,q),yu(q,M),q.return=U,q;case N:return M=wm(M,U.mode,q),M.return=U,M;case b:var Z=M._init;return M=Z(M._payload),ee(U,M,q)}if(it(M)||x(M))return M=ia(M,U.mode,q,null),M.return=U,M;if(typeof M.then=="function")return ee(U,Uh(M),q);if(M.$$typeof===te)return ee(U,bh(U,M),q);Bh(U,M)}return null}function G(U,M,q,Z){var me=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return me!==null?null:A(U,M,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return q.key===me?C(U,M,q,Z):null;case N:return q.key===me?H(U,M,q,Z):null;case b:return me=q._init,q=me(q._payload),G(U,M,q,Z)}if(it(q)||x(q))return me!==null?null:J(U,M,q,Z,null);if(typeof q.then=="function")return G(U,M,Uh(q),Z);if(q.$$typeof===te)return G(U,M,bh(U,q),Z);Bh(U,q)}return null}function K(U,M,q,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return U=U.get(q)||null,A(M,U,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return U=U.get(Z.key===null?q:Z.key)||null,C(M,U,Z,me);case N:return U=U.get(Z.key===null?q:Z.key)||null,H(M,U,Z,me);case b:var Oe=Z._init;return Z=Oe(Z._payload),K(U,M,q,Z,me)}if(it(Z)||x(Z))return U=U.get(q)||null,J(M,U,Z,me,null);if(typeof Z.then=="function")return K(U,M,q,Uh(Z),me);if(Z.$$typeof===te)return K(U,M,q,bh(M,Z),me);Bh(M,Z)}return null}function Se(U,M,q,Z){for(var me=null,Oe=null,ye=M,we=M=0,Kt=null;ye!==null&&we<q.length;we++){ye.index>we?(Kt=ye,ye=null):Kt=ye.sibling;var Fe=G(U,ye,q[we],Z);if(Fe===null){ye===null&&(ye=Kt);break}n&&ye&&Fe.alternate===null&&s(U,ye),M=p(Fe,M,we),Oe===null?me=Fe:Oe.sibling=Fe,Oe=Fe,ye=Kt}if(we===q.length)return o(U,ye),Ge&&aa(U,we),me;if(ye===null){for(;we<q.length;we++)ye=ee(U,q[we],Z),ye!==null&&(M=p(ye,M,we),Oe===null?me=ye:Oe.sibling=ye,Oe=ye);return Ge&&aa(U,we),me}for(ye=u(ye);we<q.length;we++)Kt=K(ye,U,we,q[we],Z),Kt!==null&&(n&&Kt.alternate!==null&&ye.delete(Kt.key===null?we:Kt.key),M=p(Kt,M,we),Oe===null?me=Kt:Oe.sibling=Kt,Oe=Kt);return n&&ye.forEach(function(as){return s(U,as)}),Ge&&aa(U,we),me}function Ae(U,M,q,Z){if(q==null)throw Error(r(151));for(var me=null,Oe=null,ye=M,we=M=0,Kt=null,Fe=q.next();ye!==null&&!Fe.done;we++,Fe=q.next()){ye.index>we?(Kt=ye,ye=null):Kt=ye.sibling;var as=G(U,ye,Fe.value,Z);if(as===null){ye===null&&(ye=Kt);break}n&&ye&&as.alternate===null&&s(U,ye),M=p(as,M,we),Oe===null?me=as:Oe.sibling=as,Oe=as,ye=Kt}if(Fe.done)return o(U,ye),Ge&&aa(U,we),me;if(ye===null){for(;!Fe.done;we++,Fe=q.next())Fe=ee(U,Fe.value,Z),Fe!==null&&(M=p(Fe,M,we),Oe===null?me=Fe:Oe.sibling=Fe,Oe=Fe);return Ge&&aa(U,we),me}for(ye=u(ye);!Fe.done;we++,Fe=q.next())Fe=K(ye,U,we,Fe.value,Z),Fe!==null&&(n&&Fe.alternate!==null&&ye.delete(Fe.key===null?we:Fe.key),M=p(Fe,M,we),Oe===null?me=Fe:Oe.sibling=Fe,Oe=Fe);return n&&ye.forEach(function(UR){return s(U,UR)}),Ge&&aa(U,we),me}function rt(U,M,q,Z){if(typeof q=="object"&&q!==null&&q.type===k&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case w:e:{for(var me=q.key;M!==null;){if(M.key===me){if(me=q.type,me===k){if(M.tag===7){o(U,M.sibling),Z=f(M,q.props.children),Z.return=U,U=Z;break e}}else if(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===b&&iE(me)===M.type){o(U,M.sibling),Z=f(M,q.props),yu(Z,q),Z.return=U,U=Z;break e}o(U,M);break}else s(U,M);M=M.sibling}q.type===k?(Z=ia(q.props.children,U.mode,Z,q.key),Z.return=U,U=Z):(Z=Th(q.type,q.key,q.props,null,U.mode,Z),yu(Z,q),Z.return=U,U=Z)}return E(U);case N:e:{for(me=q.key;M!==null;){if(M.key===me)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){o(U,M.sibling),Z=f(M,q.children||[]),Z.return=U,U=Z;break e}else{o(U,M);break}else s(U,M);M=M.sibling}Z=wm(q,U.mode,Z),Z.return=U,U=Z}return E(U);case b:return me=q._init,q=me(q._payload),rt(U,M,q,Z)}if(it(q))return Se(U,M,q,Z);if(x(q)){if(me=x(q),typeof me!="function")throw Error(r(150));return q=me.call(q),Ae(U,M,q,Z)}if(typeof q.then=="function")return rt(U,M,Uh(q),Z);if(q.$$typeof===te)return rt(U,M,bh(U,q),Z);Bh(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,M!==null&&M.tag===6?(o(U,M.sibling),Z=f(M,q),Z.return=U,U=Z):(o(U,M),Z=Am(q,U.mode,Z),Z.return=U,U=Z),E(U)):o(U,M)}return function(U,M,q,Z){try{gu=0;var me=rt(U,M,q,Z);return So=null,me}catch(ye){if(ye===ou||ye===Rh)throw ye;var Oe=xn(29,ye,null,U.mode);return Oe.lanes=Z,Oe.return=U,Oe}finally{}}}var bo=sE(!0),aE=sE(!1),Wn=ne(null),Cr=null;function Gi(n){var s=n.alternate;se(Ut,Ut.current&1),se(Wn,n),Cr===null&&(s===null||Eo.current!==null||s.memoizedState!==null)&&(Cr=n)}function oE(n){if(n.tag===22){if(se(Ut,Ut.current),se(Wn,n),Cr===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Cr=n)}}else Ki()}function Ki(){se(Ut,Ut.current),se(Wn,Wn.current)}function oi(n){he(Wn),Cr===n&&(Cr=null),he(Ut)}var Ut=ne(0);function zh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Gp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function np(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var rp={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=On(),f=qi(u);f.payload=s,o!=null&&(f.callback=o),s=Hi(n,f,u),s!==null&&(Mn(s,n,u),uu(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=On(),f=qi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Hi(n,f,u),s!==null&&(Mn(s,n,u),uu(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=On(),u=qi(o);u.tag=2,s!=null&&(u.callback=s),s=Hi(n,u,o),s!==null&&(Mn(s,n,o),uu(s,n,o))}};function lE(n,s,o,u,f,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,p,E):s.prototype&&s.prototype.isPureReactComponent?!Zl(o,u)||!Zl(f,p):!0}function uE(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&rp.enqueueReplaceState(s,s.state,null)}function da(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var jh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function cE(n){jh(n)}function hE(n){console.error(n)}function fE(n){jh(n)}function qh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function dE(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ip(n,s,o){return o=qi(o),o.tag=3,o.payload={element:null},o.callback=function(){qh(n,s)},o}function mE(n){return n=qi(n),n.tag=3,n}function pE(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;n.payload=function(){return f(p)},n.callback=function(){dE(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){dE(s,o,u),typeof f!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function UI(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&iu(s,o,f,!0),o=Wn.current,o!==null){switch(o.tag){case 13:return Cr===null?Cp():o.alternate===null&&vt===0&&(vt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Om?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Np(n,u,f)),!1;case 22:return o.flags|=65536,u===Om?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Np(n,u,f)),!1}throw Error(r(435,o.tag))}return Np(n,u,f),Cp(),!1}if(Ge)return s=Wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Im&&(n=Error(r(422),{cause:u}),ru(Qn(n,o)))):(u!==Im&&(s=Error(r(423),{cause:u}),ru(Qn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Qn(u,o),f=ip(n.stateNode,u,f),km(n,f),vt!==4&&(vt=2)),!1;var p=Error(r(520),{cause:u});if(p=Qn(p,o),Su===null?Su=[p]:Su.push(p),vt!==4&&(vt=2),s===null)return!0;u=Qn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=ip(o.stateNode,u,n),km(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ji===null||!Ji.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=mE(f),pE(f,n,o,u),km(o,f),!1}o=o.return}while(o!==null);return!1}var gE=Error(r(461)),Ft=!1;function Jt(n,s,o,u){s.child=n===null?aE(s,null,o,u):bo(s,n.child,o,u)}function yE(n,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var E={};for(var A in u)A!=="ref"&&(E[A]=u[A])}else E=u;return ca(s),u=jm(n,s,o,E,p,f),A=qm(),n!==null&&!Ft?(Hm(n,s,f),li(n,s,f)):(Ge&&A&&Sm(s),s.flags|=1,Jt(n,s,u,f),s.child)}function _E(n,s,o,u,f){if(n===null){var p=o.type;return typeof p=="function"&&!Tm(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,vE(n,s,p,u,f)):(n=Th(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!fp(n,f)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:Zl,o(E,u)&&n.ref===s.ref)return li(n,s,f)}return s.flags|=1,n=ti(p,u),n.ref=s.ref,n.return=s,s.child=n}function vE(n,s,o,u,f){if(n!==null){var p=n.memoizedProps;if(Zl(p,u)&&n.ref===s.ref)if(Ft=!1,s.pendingProps=u=p,fp(n,f))(n.flags&131072)!==0&&(Ft=!0);else return s.lanes=n.lanes,li(n,s,f)}return sp(n,s,o,u,f)}function EE(n,s,o){var u=s.pendingProps,f=u.children,p=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,n!==null){for(f=s.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return TE(n,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ih(s,p!==null?p.cachePool:null),p!==null?vv(s,p):Um(),oE(s);else return s.lanes=s.childLanes=536870912,TE(n,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Ih(s,p.cachePool),vv(s,p),Ki(),s.memoizedState=null):(n!==null&&Ih(s,null),Um(),Ki());return Jt(n,s,f,o),s.child}function TE(n,s,o,u){var f=Vm();return f=f===null?null:{parent:Lt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},n!==null&&Ih(s,null),Um(),oE(s),n!==null&&iu(n,s,u,!0),null}function Hh(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function sp(n,s,o,u,f){return ca(s),o=jm(n,s,o,u,void 0,f),u=qm(),n!==null&&!Ft?(Hm(n,s,f),li(n,s,f)):(Ge&&u&&Sm(s),s.flags|=1,Jt(n,s,o,f),s.child)}function AE(n,s,o,u,f,p){return ca(s),s.updateQueue=null,o=Tv(s,u,o,f),Ev(n),u=qm(),n!==null&&!Ft?(Hm(n,s,p),li(n,s,p)):(Ge&&u&&Sm(s),s.flags|=1,Jt(n,s,o,p),s.child)}function wE(n,s,o,u,f){if(ca(s),s.stateNode===null){var p=po,E=o.contextType;typeof E=="object"&&E!==null&&(p=rn(E)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=rp,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Mm(s),E=o.contextType,p.context=typeof E=="object"&&E!==null?rn(E):po,p.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(np(s,o,E,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&rp.enqueueReplaceState(p,p.state,null),hu(s,u,p,f),cu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){p=s.stateNode;var A=s.memoizedProps,C=da(o,A);p.props=C;var H=p.context,J=o.contextType;E=po,typeof J=="object"&&J!==null&&(E=rn(J));var ee=o.getDerivedStateFromProps;J=typeof ee=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||H!==E)&&uE(s,p,u,E),ji=!1;var G=s.memoizedState;p.state=G,hu(s,u,p,f),cu(),H=s.memoizedState,A||G!==H||ji?(typeof ee=="function"&&(np(s,o,ee,u),H=s.memoizedState),(C=ji||lE(s,o,C,u,G,H,E))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),p.props=u,p.state=H,p.context=E,u=C):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Pm(n,s),E=s.memoizedProps,J=da(o,E),p.props=J,ee=s.pendingProps,G=p.context,H=o.contextType,C=po,typeof H=="object"&&H!==null&&(C=rn(H)),A=o.getDerivedStateFromProps,(H=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==ee||G!==C)&&uE(s,p,u,C),ji=!1,G=s.memoizedState,p.state=G,hu(s,u,p,f),cu();var K=s.memoizedState;E!==ee||G!==K||ji||n!==null&&n.dependencies!==null&&Sh(n.dependencies)?(typeof A=="function"&&(np(s,o,A,u),K=s.memoizedState),(J=ji||lE(s,o,J,u,G,K,C)||n!==null&&n.dependencies!==null&&Sh(n.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,K,C),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,K,C)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=K),p.props=u,p.state=K,p.context=C,u=J):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),u=!1)}return p=u,Hh(n,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&u?(s.child=bo(s,n.child,null,f),s.child=bo(s,null,o,f)):Jt(n,s,o,f),s.memoizedState=p.state,n=s.child):n=li(n,s,f),n}function SE(n,s,o,u){return nu(),s.flags|=256,Jt(n,s,o,u),s.child}var ap={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function op(n){return{baseLanes:n,cachePool:hv()}}function lp(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Jn),n}function bE(n,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(Ut.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ge){if(f?Gi(s):Ki(),Ge){var A=_t,C;if(C=A){e:{for(C=A,A=Rr;C.nodeType!==8;){if(!A){A=null;break e}if(C=lr(C.nextSibling),C===null){A=null;break e}}A=C}A!==null?(s.memoizedState={dehydrated:A,treeContext:sa!==null?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},C=xn(18,null,null,0),C.stateNode=A,C.return=s,s.child=C,pn=s,_t=null,C=!0):C=!1}C||la(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Gp(A)?s.lanes=32:s.lanes=536870912,null;oi(s)}return A=u.children,u=u.fallback,f?(Ki(),f=s.mode,A=Fh({mode:"hidden",children:A},f),u=ia(u,f,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,f=s.child,f.memoizedState=op(o),f.childLanes=lp(n,E,o),s.memoizedState=ap,u):(Gi(s),up(s,A))}if(C=n.memoizedState,C!==null&&(A=C.dehydrated,A!==null)){if(p)s.flags&256?(Gi(s),s.flags&=-257,s=cp(n,s,o)):s.memoizedState!==null?(Ki(),s.child=n.child,s.flags|=128,s=null):(Ki(),f=u.fallback,A=s.mode,u=Fh({mode:"visible",children:u.children},A),f=ia(f,A,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,bo(s,n.child,null,o),u=s.child,u.memoizedState=op(o),u.childLanes=lp(n,E,o),s.memoizedState=ap,s=f);else if(Gi(s),Gp(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var H=E.dgst;E=H,u=Error(r(419)),u.stack="",u.digest=E,ru({value:u,source:null,stack:null}),s=cp(n,s,o)}else if(Ft||iu(n,s,o,!1),E=(o&n.childLanes)!==0,Ft||E){if(E=lt,E!==null&&(u=o&-o,u=(u&42)!==0?1:Oi(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,mo(n,u),Mn(E,n,u),gE;A.data==="$?"||Cp(),s=cp(n,s,o)}else A.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=C.treeContext,_t=lr(A.nextSibling),pn=s,Ge=!0,oa=null,Rr=!1,n!==null&&(Yn[Xn++]=ni,Yn[Xn++]=ri,Yn[Xn++]=sa,ni=n.id,ri=n.overflow,sa=s),s=up(s,u.children),s.flags|=4096);return s}return f?(Ki(),f=u.fallback,A=s.mode,C=n.child,H=C.sibling,u=ti(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,H!==null?f=ti(H,f):(f=ia(f,A,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,A=n.child.memoizedState,A===null?A=op(o):(C=A.cachePool,C!==null?(H=Lt._currentValue,C=C.parent!==H?{parent:H,pool:H}:C):C=hv(),A={baseLanes:A.baseLanes|o,cachePool:C}),f.memoizedState=A,f.childLanes=lp(n,E,o),s.memoizedState=ap,u):(Gi(s),o=n.child,n=o.sibling,o=ti(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=o,s.memoizedState=null,o)}function up(n,s){return s=Fh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Fh(n,s){return n=xn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function cp(n,s,o){return bo(s,n.child,null,o),n=up(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function IE(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Cm(n.return,s,o)}function hp(n,s,o,u,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function RE(n,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(Jt(n,s,u.children,o),u=Ut.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&IE(n,o,s);else if(n.tag===19)IE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(se(Ut,u),f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&zh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),hp(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&zh(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}hp(s,!0,o,null,p);break;case"together":hp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function li(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Wi|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(iu(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=ti(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ti(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function fp(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Sh(n)))}function BI(n,s,o){switch(s.tag){case 3:ot(s,s.stateNode.containerInfo),zi(s,Lt,n.memoizedState.cache),nu();break;case 27:case 5:Vi(s);break;case 4:ot(s,s.stateNode.containerInfo);break;case 10:zi(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Gi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?bE(n,s,o):(Gi(s),n=li(n,s,o),n!==null?n.sibling:null);Gi(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(iu(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return RE(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),se(Ut,Ut.current),u)break;return null;case 22:case 23:return s.lanes=0,EE(n,s,o);case 24:zi(s,Lt,n.memoizedState.cache)}return li(n,s,o)}function CE(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Ft=!0;else{if(!fp(n,o)&&(s.flags&128)===0)return Ft=!1,BI(n,s,o);Ft=(n.flags&131072)!==0}else Ft=!1,Ge&&(s.flags&1048576)!==0&&iv(s,wh,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Tm(u)?(n=da(u,n),s.tag=1,s=wE(null,s,u,n,o)):(s.tag=0,s=sp(null,s,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===fe){s.tag=11,s=yE(null,s,u,n,o);break e}else if(f===O){s.tag=14,s=_E(null,s,u,n,o);break e}}throw s=Ze(u)||u,Error(r(306,s,""))}}return s;case 0:return sp(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=da(u,s.pendingProps),wE(n,s,u,f,o);case 3:e:{if(ot(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Pm(n,s),hu(s,u,null,o);var E=s.memoizedState;if(u=E.cache,zi(s,Lt,u),u!==p.cache&&xm(s,[Lt],o,!0),cu(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=SE(n,s,u,o);break e}else if(u!==f){f=Qn(Error(r(424)),s),ru(f),s=SE(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(_t=lr(n.firstChild),pn=s,Ge=!0,oa=null,Rr=!0,o=aE(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(nu(),u===f){s=li(n,s,o);break e}Jt(n,s,u,o)}s=s.child}return s;case 26:return Hh(n,s),n===null?(o=VT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ge||(o=s.type,n=s.pendingProps,u=sf(Ie.current).createElement(o),u[Mt]=s,u[Ct]=n,en(u,o,n),Tt(u),s.stateNode=u):s.memoizedState=VT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Vi(s),n===null&&Ge&&(u=s.stateNode=xT(s.type,s.pendingProps,Ie.current),pn=s,Rr=!0,f=_t,ts(s.type)?(Kp=f,_t=lr(u.firstChild)):_t=f),Jt(n,s,s.pendingProps.children,o),Hh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ge&&((f=u=_t)&&(u=dR(u,s.type,s.pendingProps,Rr),u!==null?(s.stateNode=u,pn=s,_t=lr(u.firstChild),Rr=!1,f=!0):f=!1),f||la(s)),Vi(s),f=s.type,p=s.pendingProps,E=n!==null?n.memoizedProps:null,u=p.children,qp(f,p)?u=null:E!==null&&qp(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=jm(n,s,DI,null,null,o),Ou._currentValue=f),Hh(n,s),Jt(n,s,u,o),s.child;case 6:return n===null&&Ge&&((n=o=_t)&&(o=mR(o,s.pendingProps,Rr),o!==null?(s.stateNode=o,pn=s,_t=null,n=!0):n=!1),n||la(s)),null;case 13:return bE(n,s,o);case 4:return ot(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=bo(s,null,u,o):Jt(n,s,u,o),s.child;case 11:return yE(n,s,s.type,s.pendingProps,o);case 7:return Jt(n,s,s.pendingProps,o),s.child;case 8:return Jt(n,s,s.pendingProps.children,o),s.child;case 12:return Jt(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,zi(s,s.type,u.value),Jt(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ca(s),f=rn(f),u=u(f),s.flags|=1,Jt(n,s,u,o),s.child;case 14:return _E(n,s,s.type,s.pendingProps,o);case 15:return vE(n,s,s.type,s.pendingProps,o);case 19:return RE(n,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},n===null?(o=Fh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ti(n.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return EE(n,s,o);case 24:return ca(s),u=rn(Lt),n===null?(f=Vm(),f===null&&(f=lt,p=Nm(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Mm(s),zi(s,Lt,f)):((n.lanes&o)!==0&&(Pm(n,s),hu(s,null,null,o),cu()),f=n.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),zi(s,Lt,u)):(u=p.cache,zi(s,Lt,u),u!==f.cache&&xm(s,[Lt],o,!0))),Jt(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ui(n){n.flags|=4}function xE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!LT(s)){if(s=Wn.current,s!==null&&((qe&4194048)===qe?Cr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||s!==Cr))throw lu=Om,fv;n.flags|=8192}}function Gh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Pl():536870912,n.lanes|=s,xo|=s)}function _u(n,s){if(!Ge)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function pt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function zI(n,s,o){var u=s.pendingProps;switch(bm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(s),null;case 1:return pt(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),si(Lt),pr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(tu(s)?ui(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ov())),pt(s),null;case 26:return o=s.memoizedState,n===null?(ui(s),o!==null?(pt(s),xE(s,o)):(pt(s),s.flags&=-16777217)):o?o!==n.memoizedState?(ui(s),pt(s),xE(s,o)):(pt(s),s.flags&=-16777217):(n.memoizedProps!==u&&ui(s),pt(s),s.flags&=-16777217),null;case 27:qr(s),o=Ie.current;var f=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ui(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return pt(s),null}n=Te.current,tu(s)?sv(s):(n=xT(f,u,o),s.stateNode=n,ui(s))}return pt(s),null;case 5:if(qr(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ui(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return pt(s),null}if(n=Te.current,tu(s))sv(s);else{switch(f=sf(Ie.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Mt]=s,n[Ct]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=n;e:switch(en(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ui(s)}}return pt(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ui(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ie.current,tu(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=pn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Mt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||AT(n.nodeValue,o)),n||la(s)}else n=sf(n).createTextNode(u),n[Mt]=s,s.stateNode=n}return pt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=tu(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Mt]=s}else nu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),f=!1}else f=ov(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(oi(s),s):(oi(s),null)}if(oi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),Gh(s,s.updateQueue),pt(s),null;case 4:return pr(),n===null&&Lp(s.stateNode.containerInfo),pt(s),null;case 10:return si(s.type),pt(s),null;case 19:if(he(Ut),f=s.memoizedState,f===null)return pt(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)_u(f,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=zh(n),p!==null){for(s.flags|=128,_u(f,!1),n=p.updateQueue,s.updateQueue=n,Gh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)rv(o,n),o=o.sibling;return se(Ut,Ut.current&1|2),s.child}n=n.sibling}f.tail!==null&&jn()>$h&&(s.flags|=128,u=!0,_u(f,!1),s.lanes=4194304)}else{if(!u)if(n=zh(p),n!==null){if(s.flags|=128,u=!0,n=n.updateQueue,s.updateQueue=n,Gh(s,n),_u(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Ge)return pt(s),null}else 2*jn()-f.renderingStartTime>$h&&o!==536870912&&(s.flags|=128,u=!0,_u(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(n=f.last,n!==null?n.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=jn(),s.sibling=null,n=Ut.current,se(Ut,u?n&1|2:n&1),s):(pt(s),null);case 22:case 23:return oi(s),Bm(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(pt(s),s.subtreeFlags&6&&(s.flags|=8192)):pt(s),o=s.updateQueue,o!==null&&Gh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&he(ha),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),si(Lt),pt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function jI(n,s){switch(bm(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return si(Lt),pr(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return qr(s),null;case 13:if(oi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));nu()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return he(Ut),null;case 4:return pr(),null;case 10:return si(s.type),null;case 22:case 23:return oi(s),Bm(),n!==null&&he(ha),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return si(Lt),null;case 25:return null;default:return null}}function NE(n,s){switch(bm(s),s.tag){case 3:si(Lt),pr();break;case 26:case 27:case 5:qr(s);break;case 4:pr();break;case 13:oi(s);break;case 19:he(Ut);break;case 10:si(s.type);break;case 22:case 23:oi(s),Bm(),n!==null&&he(ha);break;case 24:si(Lt)}}function vu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var p=o.create,E=o.inst;u=p(),E.destroy=u}o=o.next}while(o!==f)}}catch(A){st(s,s.return,A)}}function Qi(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&n)===n){var E=u.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,f=s;var C=o,H=A;try{H()}catch(J){st(f,C,J)}}}u=u.next}while(u!==p)}}catch(J){st(s,s.return,J)}}function DE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{_v(s,o)}catch(u){st(n,n.return,u)}}}function VE(n,s,o){o.props=da(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){st(n,s,u)}}function Eu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){st(n,s,f)}}function xr(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){st(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){st(n,s,f)}else o.current=null}function OE(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){st(n,n.return,f)}}function dp(n,s,o){try{var u=n.stateNode;lR(u,n.type,o,s),u[Ct]=s}catch(f){st(n,n.return,f)}}function ME(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ts(n.type)||n.tag===4}function mp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ME(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ts(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pp(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=rf));else if(u!==4&&(u===27&&ts(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(pp(n,s,o),n=n.sibling;n!==null;)pp(n,s,o),n=n.sibling}function Kh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&ts(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Kh(n,s,o),n=n.sibling;n!==null;)Kh(n,s,o),n=n.sibling}function PE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);en(s,u,o),s[Mt]=n,s[Ct]=o}catch(p){st(n,n.return,p)}}var ci=!1,wt=!1,gp=!1,kE=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function qI(n,s){if(n=n.containerInfo,zp=hf,n=Q_(n),mm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,A=-1,C=-1,H=0,J=0,ee=n,G=null;t:for(;;){for(var K;ee!==o||f!==0&&ee.nodeType!==3||(A=E+f),ee!==p||u!==0&&ee.nodeType!==3||(C=E+u),ee.nodeType===3&&(E+=ee.nodeValue.length),(K=ee.firstChild)!==null;)G=ee,ee=K;for(;;){if(ee===n)break t;if(G===o&&++H===f&&(A=E),G===p&&++J===u&&(C=E),(K=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=K}o=A===-1||C===-1?null:{start:A,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(jp={focusedElem:n,selectionRange:o},hf=!1,Gt=s;Gt!==null;)if(s=Gt,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Gt=n;else for(;Gt!==null;){switch(s=Gt,p=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Se=da(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Se,p),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){st(o,o.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Fp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Fp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Gt=n;break}Gt=s.return}}function LE(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:$i(n,o),u&4&&vu(5,o);break;case 1:if($i(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(E){st(o,o.return,E)}else{var f=da(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){st(o,o.return,E)}}u&64&&DE(o),u&512&&Eu(o,o.return);break;case 3:if($i(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{_v(n,s)}catch(E){st(o,o.return,E)}}break;case 27:s===null&&u&4&&PE(o);case 26:case 5:$i(n,o),s===null&&u&4&&OE(o),u&512&&Eu(o,o.return);break;case 12:$i(n,o);break;case 13:$i(n,o),u&4&&zE(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=WI.bind(null,o),pR(n,o))));break;case 22:if(u=o.memoizedState!==null||ci,!u){s=s!==null&&s.memoizedState!==null||wt,f=ci;var p=wt;ci=u,(wt=s)&&!p?Yi(n,o,(o.subtreeFlags&8772)!==0):$i(n,o),ci=f,wt=p}break;case 30:break;default:$i(n,o)}}function UE(n){var s=n.alternate;s!==null&&(n.alternate=null,UE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ki(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ft=null,Tn=!1;function hi(n,s,o){for(o=o.child;o!==null;)BE(n,s,o),o=o.sibling}function BE(n,s,o){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(yt,o)}catch{}switch(o.tag){case 26:wt||xr(o,s),hi(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:wt||xr(o,s);var u=ft,f=Tn;ts(o.type)&&(ft=o.stateNode,Tn=!1),hi(n,s,o),xu(o.stateNode),ft=u,Tn=f;break;case 5:wt||xr(o,s);case 6:if(u=ft,f=Tn,ft=null,hi(n,s,o),ft=u,Tn=f,ft!==null)if(Tn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(o.stateNode)}catch(p){st(o,s,p)}else try{ft.removeChild(o.stateNode)}catch(p){st(o,s,p)}break;case 18:ft!==null&&(Tn?(n=ft,RT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Lu(n)):RT(ft,o.stateNode));break;case 4:u=ft,f=Tn,ft=o.stateNode.containerInfo,Tn=!0,hi(n,s,o),ft=u,Tn=f;break;case 0:case 11:case 14:case 15:wt||Qi(2,o,s),wt||Qi(4,o,s),hi(n,s,o);break;case 1:wt||(xr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&VE(o,s,u)),hi(n,s,o);break;case 21:hi(n,s,o);break;case 22:wt=(u=wt)||o.memoizedState!==null,hi(n,s,o),wt=u;break;default:hi(n,s,o)}}function zE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Lu(n)}catch(o){st(s,s.return,o)}}function HI(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new kE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new kE),s;default:throw Error(r(435,n.tag))}}function yp(n,s){var o=HI(n);s.forEach(function(u){var f=JI.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function Nn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=n,E=s,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(ts(A.type)){ft=A.stateNode,Tn=!1;break e}break;case 5:ft=A.stateNode,Tn=!1;break e;case 3:case 4:ft=A.stateNode.containerInfo,Tn=!0;break e}A=A.return}if(ft===null)throw Error(r(160));BE(p,E,f),ft=null,Tn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)jE(s,n),s=s.sibling}var or=null;function jE(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Nn(s,n),Dn(n),u&4&&(Qi(3,n,n.return),vu(3,n),Qi(5,n,n.return));break;case 1:Nn(s,n),Dn(n),u&512&&(wt||o===null||xr(o,o.return)),u&64&&ci&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=or;if(Nn(s,n),Dn(n),u&512&&(wt||o===null||xr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[qs]||p[Mt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),en(p,u,o),p[Mt]=n,Tt(p),u=p;break e;case"link":var E=PT("link","href",f).get(u+(o.href||""));if(E){for(var A=0;A<E.length;A++)if(p=E[A],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(A,1);break t}}p=f.createElement(u),en(p,u,o),f.head.appendChild(p);break;case"meta":if(E=PT("meta","content",f).get(u+(o.content||""))){for(A=0;A<E.length;A++)if(p=E[A],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(A,1);break t}}p=f.createElement(u),en(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[Mt]=n,Tt(p),u=p}n.stateNode=u}else kT(f,n.type,n.stateNode);else n.stateNode=MT(f,u,n.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?kT(f,n.type,n.stateNode):MT(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&dp(n,n.memoizedProps,o.memoizedProps)}break;case 27:Nn(s,n),Dn(n),u&512&&(wt||o===null||xr(o,o.return)),o!==null&&u&4&&dp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Nn(s,n),Dn(n),u&512&&(wt||o===null||xr(o,o.return)),n.flags&32){f=n.stateNode;try{Hn(f,"")}catch(K){st(n,n.return,K)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,dp(n,f,o!==null?o.memoizedProps:f)),u&1024&&(gp=!0);break;case 6:if(Nn(s,n),Dn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(K){st(n,n.return,K)}}break;case 3:if(lf=null,f=or,or=af(s.containerInfo),Nn(s,n),or=f,Dn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Lu(s.containerInfo)}catch(K){st(n,n.return,K)}gp&&(gp=!1,qE(n));break;case 4:u=or,or=af(n.stateNode.containerInfo),Nn(s,n),Dn(n),or=u;break;case 12:Nn(s,n),Dn(n);break;case 13:Nn(s,n),Dn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(wp=jn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,yp(n,u)));break;case 22:f=n.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,H=ci,J=wt;if(ci=H||f,wt=J||C,Nn(s,n),wt=J,ci=H,Dn(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||C||ci||wt||ma(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(p=C.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=C.stateNode;var ee=C.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){st(C,C.return,K)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(K){st(C,C.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,yp(n,o))));break;case 19:Nn(s,n),Dn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,yp(n,u)));break;case 30:break;case 21:break;default:Nn(s,n),Dn(n)}}function Dn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(ME(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=mp(n);Kh(n,p,f);break;case 5:var E=o.stateNode;o.flags&32&&(Hn(E,""),o.flags&=-33);var A=mp(n);Kh(n,A,E);break;case 3:case 4:var C=o.stateNode.containerInfo,H=mp(n);pp(n,H,C);break;default:throw Error(r(161))}}catch(J){st(n,n.return,J)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function qE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;qE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function $i(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)LE(n,s.alternate,s),s=s.sibling}function ma(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Qi(4,s,s.return),ma(s);break;case 1:xr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&VE(s,s.return,o),ma(s);break;case 27:xu(s.stateNode);case 26:case 5:xr(s,s.return),ma(s);break;case 22:s.memoizedState===null&&ma(s);break;case 30:ma(s);break;default:ma(s)}n=n.sibling}}function Yi(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,p=s,E=p.flags;switch(p.tag){case 0:case 11:case 15:Yi(f,p,o),vu(4,p);break;case 1:if(Yi(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){st(u,u.return,H)}if(u=p,f=u.updateQueue,f!==null){var A=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)yv(C[f],A)}catch(H){st(u,u.return,H)}}o&&E&64&&DE(p),Eu(p,p.return);break;case 27:PE(p);case 26:case 5:Yi(f,p,o),o&&u===null&&E&4&&OE(p),Eu(p,p.return);break;case 12:Yi(f,p,o);break;case 13:Yi(f,p,o),o&&E&4&&zE(f,p);break;case 22:p.memoizedState===null&&Yi(f,p,o),Eu(p,p.return);break;case 30:break;default:Yi(f,p,o)}s=s.sibling}}function _p(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&su(o))}function vp(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&su(n))}function Nr(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)HE(n,s,o,u),s=s.sibling}function HE(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Nr(n,s,o,u),f&2048&&vu(9,s);break;case 1:Nr(n,s,o,u);break;case 3:Nr(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&su(n)));break;case 12:if(f&2048){Nr(n,s,o,u),n=s.stateNode;try{var p=s.memoizedProps,E=p.id,A=p.onPostCommit;typeof A=="function"&&A(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){st(s,s.return,C)}}else Nr(n,s,o,u);break;case 13:Nr(n,s,o,u);break;case 23:break;case 22:p=s.stateNode,E=s.alternate,s.memoizedState!==null?p._visibility&2?Nr(n,s,o,u):Tu(n,s):p._visibility&2?Nr(n,s,o,u):(p._visibility|=2,Io(n,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&_p(E,s);break;case 24:Nr(n,s,o,u),f&2048&&vp(s.alternate,s);break;default:Nr(n,s,o,u)}}function Io(n,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=n,E=s,A=o,C=u,H=E.flags;switch(E.tag){case 0:case 11:case 15:Io(p,E,A,C,f),vu(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?Io(p,E,A,C,f):Tu(p,E):(J._visibility|=2,Io(p,E,A,C,f)),f&&H&2048&&_p(E.alternate,E);break;case 24:Io(p,E,A,C,f),f&&H&2048&&vp(E.alternate,E);break;default:Io(p,E,A,C,f)}s=s.sibling}}function Tu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:Tu(o,u),f&2048&&_p(u.alternate,u);break;case 24:Tu(o,u),f&2048&&vp(u.alternate,u);break;default:Tu(o,u)}s=s.sibling}}var Au=8192;function Ro(n){if(n.subtreeFlags&Au)for(n=n.child;n!==null;)FE(n),n=n.sibling}function FE(n){switch(n.tag){case 26:Ro(n),n.flags&Au&&n.memoizedState!==null&&CR(or,n.memoizedState,n.memoizedProps);break;case 5:Ro(n);break;case 3:case 4:var s=or;or=af(n.stateNode.containerInfo),Ro(n),or=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Au,Au=16777216,Ro(n),Au=s):Ro(n));break;default:Ro(n)}}function GE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function wu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Gt=u,QE(u,n)}GE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)KE(n),n=n.sibling}function KE(n){switch(n.tag){case 0:case 11:case 15:wu(n),n.flags&2048&&Qi(9,n,n.return);break;case 3:wu(n);break;case 12:wu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Qh(n)):wu(n);break;default:wu(n)}}function Qh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Gt=u,QE(u,n)}GE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Qi(8,s,s.return),Qh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Qh(s));break;default:Qh(s)}n=n.sibling}}function QE(n,s){for(;Gt!==null;){var o=Gt;switch(o.tag){case 0:case 11:case 15:Qi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:su(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Gt=u;else e:for(o=n;Gt!==null;){u=Gt;var f=u.sibling,p=u.return;if(UE(u),u===o){Gt=null;break e}if(f!==null){f.return=p,Gt=f;break e}Gt=p}}}var FI={getCacheForType:function(n){var s=rn(Lt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},GI=typeof WeakMap=="function"?WeakMap:Map,Ye=0,lt=null,Me=null,qe=0,Xe=0,Vn=null,Xi=!1,Co=!1,Ep=!1,fi=0,vt=0,Wi=0,pa=0,Tp=0,Jn=0,xo=0,Su=null,An=null,Ap=!1,wp=0,$h=1/0,Yh=null,Ji=null,Zt=0,Zi=null,No=null,Do=0,Sp=0,bp=null,$E=null,bu=0,Ip=null;function On(){if((Ye&2)!==0&&qe!==0)return qe&-qe;if(W.T!==null){var n=_o;return n!==0?n:Op()}return Mi()}function YE(){Jn===0&&(Jn=(qe&536870912)===0||Ge?Ml():536870912);var n=Wn.current;return n!==null&&(n.flags|=32),Jn}function Mn(n,s,o){(n===lt&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)&&(Vo(n,0),es(n,qe,Jn,!1)),Fr(n,o),((Ye&2)===0||n!==lt)&&(n===lt&&((Ye&2)===0&&(pa|=o),vt===4&&es(n,qe,Jn,!1)),Dr(n))}function XE(n,s,o){if((Ye&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&n.expiredLanes)===0||js(n,s),f=u?$I(n,s):xp(n,s,!0),p=u;do{if(f===0){Co&&!u&&es(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!KI(o)){f=xp(n,s,!1),p=!1;continue}if(f===2){if(p=s,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var A=n;f=Su;var C=A.current.memoizedState.isDehydrated;if(C&&(Vo(A,E).flags|=256),E=xp(A,E,!1),E!==2){if(Ep&&!C){A.errorRecoveryDisabledLanes|=p,pa|=p,f=4;break e}p=An,An=f,p!==null&&(An===null?An=p:An.push.apply(An,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){Vo(n,0),es(n,s,0,!0);break}e:{switch(u=n,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:es(u,s,Jn,!Xi);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=wp+300-jn(),10<f)){if(es(u,s,Jn,!Xi),$a(u,0,!0)!==0)break e;u.timeoutHandle=bT(WE.bind(null,u,o,An,Yh,Ap,s,Jn,pa,xo,Xi,p,2,-0,0),f);break e}WE(u,o,An,Yh,Ap,s,Jn,pa,xo,Xi,p,0,-0,0)}}break}while(!0);Dr(n)}function WE(n,s,o,u,f,p,E,A,C,H,J,ee,G,K){if(n.timeoutHandle=-1,ee=s.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Vu={stylesheets:null,count:0,unsuspend:RR},FE(s),ee=xR(),ee!==null)){n.cancelPendingCommit=ee(iT.bind(null,n,s,p,o,u,f,E,A,C,J,1,G,K)),es(n,p,E,!H);return}iT(n,s,p,o,u,f,E,A,C)}function KI(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Cn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function es(n,s,o,u){s&=~Tp,s&=~pa,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var p=31-nn(f),E=1<<p;u[p]=-1,f&=~E}o!==0&&gr(n,o,s)}function Xh(){return(Ye&6)===0?(Iu(0),!1):!0}function Rp(){if(Me!==null){if(Xe===0)var n=Me.return;else n=Me,ii=ua=null,Fm(n),So=null,gu=0,n=Me;for(;n!==null;)NE(n.alternate,n),n=n.return;Me=null}}function Vo(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,cR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Rp(),lt=n,Me=o=ti(n.current,null),qe=s,Xe=0,Vn=null,Xi=!1,Co=js(n,s),Ep=!1,xo=Jn=Tp=pa=Wi=vt=0,An=Su=null,Ap=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-nn(u),p=1<<f;s|=n[f],u&=~p}return fi=s,_h(),o}function JE(n,s){Ne=null,W.H=Lh,s===ou||s===Rh?(s=pv(),Xe=3):s===fv?(s=pv(),Xe=4):Xe=s===gE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vn=s,Me===null&&(vt=1,qh(n,Qn(s,n.current)))}function ZE(){var n=W.H;return W.H=Lh,n===null?Lh:n}function eT(){var n=W.A;return W.A=FI,n}function Cp(){vt=4,Xi||(qe&4194048)!==qe&&Wn.current!==null||(Co=!0),(Wi&134217727)===0&&(pa&134217727)===0||lt===null||es(lt,qe,Jn,!1)}function xp(n,s,o){var u=Ye;Ye|=2;var f=ZE(),p=eT();(lt!==n||qe!==s)&&(Yh=null,Vo(n,s)),s=!1;var E=vt;e:do try{if(Xe!==0&&Me!==null){var A=Me,C=Vn;switch(Xe){case 8:Rp(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(s=!0);var H=Xe;if(Xe=0,Vn=null,Oo(n,A,C,H),o&&Co){E=0;break e}break;default:H=Xe,Xe=0,Vn=null,Oo(n,A,C,H)}}QI(),E=vt;break}catch(J){JE(n,J)}while(!0);return s&&n.shellSuspendCounter++,ii=ua=null,Ye=u,W.H=f,W.A=p,Me===null&&(lt=null,qe=0,_h()),E}function QI(){for(;Me!==null;)tT(Me)}function $I(n,s){var o=Ye;Ye|=2;var u=ZE(),f=eT();lt!==n||qe!==s?(Yh=null,$h=jn()+500,Vo(n,s)):Co=js(n,s);e:do try{if(Xe!==0&&Me!==null){s=Me;var p=Vn;t:switch(Xe){case 1:Xe=0,Vn=null,Oo(n,s,p,1);break;case 2:case 9:if(dv(p)){Xe=0,Vn=null,nT(s);break}s=function(){Xe!==2&&Xe!==9||lt!==n||(Xe=7),Dr(n)},p.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:dv(p)?(Xe=0,Vn=null,nT(s)):(Xe=0,Vn=null,Oo(n,s,p,7));break;case 5:var E=null;switch(Me.tag){case 26:E=Me.memoizedState;case 5:case 27:var A=Me;if(!E||LT(E)){Xe=0,Vn=null;var C=A.sibling;if(C!==null)Me=C;else{var H=A.return;H!==null?(Me=H,Wh(H)):Me=null}break t}}Xe=0,Vn=null,Oo(n,s,p,5);break;case 6:Xe=0,Vn=null,Oo(n,s,p,6);break;case 8:Rp(),vt=6;break e;default:throw Error(r(462))}}YI();break}catch(J){JE(n,J)}while(!0);return ii=ua=null,W.H=u,W.A=f,Ye=o,Me!==null?0:(lt=null,qe=0,_h(),vt)}function YI(){for(;Me!==null&&!Nl();)tT(Me)}function tT(n){var s=CE(n.alternate,n,fi);n.memoizedProps=n.pendingProps,s===null?Wh(n):Me=s}function nT(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=AE(o,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=AE(o,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:Fm(s);default:NE(o,s),s=Me=rv(s,fi),s=CE(o,s,fi)}n.memoizedProps=n.pendingProps,s===null?Wh(n):Me=s}function Oo(n,s,o,u){ii=ua=null,Fm(s),So=null,gu=0;var f=s.return;try{if(UI(n,f,s,o,qe)){vt=1,qh(n,Qn(o,n.current)),Me=null;return}}catch(p){if(f!==null)throw Me=f,p;vt=1,qh(n,Qn(o,n.current)),Me=null;return}s.flags&32768?(Ge||u===1?n=!0:Co||(qe&536870912)!==0?n=!1:(Xi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),rT(s,n)):Wh(s)}function Wh(n){var s=n;do{if((s.flags&32768)!==0){rT(s,Xi);return}n=s.return;var o=zI(s.alternate,s,fi);if(o!==null){Me=o;return}if(s=s.sibling,s!==null){Me=s;return}Me=s=n}while(s!==null);vt===0&&(vt=5)}function rT(n,s){do{var o=jI(n.alternate,n);if(o!==null){o.flags&=32767,Me=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Me=n;return}Me=n=o}while(n!==null);vt=6,Me=null}function iT(n,s,o,u,f,p,E,A,C){n.cancelPendingCommit=null;do Jh();while(Zt!==0);if((Ye&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=vm,kl(n,o,p,E,A,C),n===lt&&(Me=lt=null,qe=0),No=s,Zi=n,Do=o,Sp=p,bp=f,$E=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ZI(Ls,function(){return uT(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,f=oe.p,oe.p=2,E=Ye,Ye|=4;try{qI(n,s,o)}finally{Ye=E,oe.p=f,W.T=u}}Zt=1,sT(),aT(),oT()}}function sT(){if(Zt===1){Zt=0;var n=Zi,s=No,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var u=oe.p;oe.p=2;var f=Ye;Ye|=4;try{jE(s,n);var p=jp,E=Q_(n.containerInfo),A=p.focusedElem,C=p.selectionRange;if(E!==A&&A&&A.ownerDocument&&K_(A.ownerDocument.documentElement,A)){if(C!==null&&mm(A)){var H=C.start,J=C.end;if(J===void 0&&(J=H),"selectionStart"in A)A.selectionStart=H,A.selectionEnd=Math.min(J,A.value.length);else{var ee=A.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var K=G.getSelection(),Se=A.textContent.length,Ae=Math.min(C.start,Se),rt=C.end===void 0?Ae:Math.min(C.end,Se);!K.extend&&Ae>rt&&(E=rt,rt=Ae,Ae=E);var U=G_(A,Ae),M=G_(A,rt);if(U&&M&&(K.rangeCount!==1||K.anchorNode!==U.node||K.anchorOffset!==U.offset||K.focusNode!==M.node||K.focusOffset!==M.offset)){var q=ee.createRange();q.setStart(U.node,U.offset),K.removeAllRanges(),Ae>rt?(K.addRange(q),K.extend(M.node,M.offset)):(q.setEnd(M.node,M.offset),K.addRange(q))}}}}for(ee=[],K=A;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ee.length;A++){var Z=ee[A];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}hf=!!zp,jp=zp=null}finally{Ye=f,oe.p=u,W.T=o}}n.current=s,Zt=2}}function aT(){if(Zt===2){Zt=0;var n=Zi,s=No,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var u=oe.p;oe.p=2;var f=Ye;Ye|=4;try{LE(n,s.alternate,s)}finally{Ye=f,oe.p=u,W.T=o}}Zt=3}}function oT(){if(Zt===4||Zt===3){Zt=0,Qc();var n=Zi,s=No,o=Do,u=$E;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Zt=5:(Zt=0,No=Zi=null,lT(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ji=null),Ya(o),s=s.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(yt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=W.T,f=oe.p,oe.p=2,W.T=null;try{for(var p=n.onRecoverableError,E=0;E<u.length;E++){var A=u[E];p(A.value,{componentStack:A.stack})}}finally{W.T=s,oe.p=f}}(Do&3)!==0&&Jh(),Dr(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Ip?bu++:(bu=0,Ip=n):bu=0,Iu(0)}}function lT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,su(s)))}function Jh(n){return sT(),aT(),oT(),uT()}function uT(){if(Zt!==5)return!1;var n=Zi,s=Sp;Sp=0;var o=Ya(Do),u=W.T,f=oe.p;try{oe.p=32>o?32:o,W.T=null,o=bp,bp=null;var p=Zi,E=Do;if(Zt=0,No=Zi=null,Do=0,(Ye&6)!==0)throw Error(r(331));var A=Ye;if(Ye|=4,KE(p.current),HE(p,p.current,E,o),Ye=A,Iu(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(yt,p)}catch{}return!0}finally{oe.p=f,W.T=u,lT(n,s)}}function cT(n,s,o){s=Qn(o,s),s=ip(n.stateNode,s,2),n=Hi(n,s,2),n!==null&&(Fr(n,2),Dr(n))}function st(n,s,o){if(n.tag===3)cT(n,n,o);else for(;s!==null;){if(s.tag===3){cT(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ji===null||!Ji.has(u))){n=Qn(o,n),o=mE(2),u=Hi(s,o,2),u!==null&&(pE(o,u,s,n),Fr(u,2),Dr(u));break}}s=s.return}}function Np(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new GI;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Ep=!0,f.add(o),n=XI.bind(null,n,s,o),s.then(n,n))}function XI(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,lt===n&&(qe&o)===o&&(vt===4||vt===3&&(qe&62914560)===qe&&300>jn()-wp?(Ye&2)===0&&Vo(n,0):Tp|=o,xo===qe&&(xo=0)),Dr(n)}function hT(n,s){s===0&&(s=Pl()),n=mo(n,s),n!==null&&(Fr(n,s),Dr(n))}function WI(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),hT(n,o)}function JI(n,s){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),hT(n,o)}function ZI(n,s){return Ps(n,s)}var Zh=null,Mo=null,Dp=!1,ef=!1,Vp=!1,ga=0;function Dr(n){n!==Mo&&n.next===null&&(Mo===null?Zh=Mo=n:Mo=Mo.next=n),ef=!0,Dp||(Dp=!0,tR())}function Iu(n,s){if(!Vp&&ef){Vp=!0;do for(var o=!1,u=Zh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var E=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-nn(42|n)+1)-1,p&=f&~(E&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,pT(u,p))}else p=qe,p=$a(u,u===lt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||js(u,p)||(o=!0,pT(u,p));u=u.next}while(o);Vp=!1}}function eR(){fT()}function fT(){ef=Dp=!1;var n=0;ga!==0&&(uR()&&(n=ga),ga=0);for(var s=jn(),o=null,u=Zh;u!==null;){var f=u.next,p=dT(u,s);p===0?(u.next=null,o===null?Zh=f:o.next=f,f===null&&(Mo=o)):(o=u,(n!==0||(p&3)!==0)&&(ef=!0)),u=f}Iu(n)}function dT(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-nn(p),A=1<<E,C=f[E];C===-1?((A&o)===0||(A&u)!==0)&&(f[E]=Ol(A,s)):C<=s&&(n.expiredLanes|=A),p&=~A}if(s=lt,o=qe,o=$a(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&ks(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||js(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&ks(u),Ya(o)){case 2:case 8:o=Ka;break;case 32:o=Ls;break;case 268435456:o=Qa;break;default:o=Ls}return u=mT.bind(null,n),o=Ps(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&ks(u),n.callbackPriority=2,n.callbackNode=null,2}function mT(n,s){if(Zt!==0&&Zt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Jh()&&n.callbackNode!==o)return null;var u=qe;return u=$a(n,n===lt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(XE(n,u,s),dT(n,jn()),n.callbackNode!=null&&n.callbackNode===o?mT.bind(null,n):null)}function pT(n,s){if(Jh())return null;XE(n,s,!0)}function tR(){hR(function(){(Ye&6)!==0?Ps(Dl,eR):fT()})}function Op(){return ga===0&&(ga=Ml()),ga}function gT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:to(""+n)}function yT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function nR(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=gT((f[Ct]||null).action),E=u.submitter;E&&(s=(s=E[Ct]||null)?gT(s.formAction):E.getAttribute("formAction"),s!==null&&(p=s,E=null));var A=new no("action","action",null,u,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ga!==0){var C=E?yT(f,E):new FormData(f);Zm(o,{pending:!0,data:C,method:f.method,action:p},null,C)}}else typeof p=="function"&&(A.preventDefault(),C=E?yT(f,E):new FormData(f),Zm(o,{pending:!0,data:C,method:f.method,action:p},p,C))},currentTarget:f}]})}}for(var Mp=0;Mp<_m.length;Mp++){var Pp=_m[Mp],rR=Pp.toLowerCase(),iR=Pp[0].toUpperCase()+Pp.slice(1);ar(rR,"on"+iR)}ar(X_,"onAnimationEnd"),ar(W_,"onAnimationIteration"),ar(J_,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar(TI,"onTransitionRun"),ar(AI,"onTransitionStart"),ar(wI,"onTransitionCancel"),ar(Z_,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function _T(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var E=u.length-1;0<=E;E--){var A=u[E],C=A.instance,H=A.currentTarget;if(A=A.listener,C!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=H;try{p(f)}catch(J){jh(J)}f.currentTarget=null,p=C}else for(E=0;E<u.length;E++){if(A=u[E],C=A.instance,H=A.currentTarget,A=A.listener,C!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=H;try{p(f)}catch(J){jh(J)}f.currentTarget=null,p=C}}}}function Pe(n,s){var o=s[Ul];o===void 0&&(o=s[Ul]=new Set);var u=n+"__bubble";o.has(u)||(vT(s,n,2,!1),o.add(u))}function kp(n,s,o){var u=0;s&&(u|=4),vT(o,n,u,s)}var tf="_reactListening"+Math.random().toString(36).slice(2);function Lp(n){if(!n[tf]){n[tf]=!0,Bl.forEach(function(o){o!=="selectionchange"&&(sR.has(o)||kp(o,!1,n),kp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[tf]||(s[tf]=!0,kp("selectionchange",!1,s))}}function vT(n,s,o,u){switch(HT(s)){case 2:var f=VR;break;case 8:f=OR;break;default:f=Wp}o=f.bind(null,s,o,n),f=void 0,!Gn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function Up(n,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var A=u.stateNode.containerInfo;if(A===f)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;A!==null;){if(E=Gr(A),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=p=E;continue e}A=A.parentNode}}u=u.return}rh(function(){var H=p,J=Fn(o),ee=[];e:{var G=ev.get(n);if(G!==void 0){var K=no,Se=n;switch(n){case"keypress":if(Ar(o)===0)break e;case"keydown":case"keyup":K=lo;break;case"focusin":Se="focus",K=so;break;case"focusout":Se="blur",K=so;break;case"beforeblur":case"afterblur":K=so;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=cm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=hh;break;case X_:case W_:case J_:K=ao;break;case Z_:K=dh;break;case"scroll":case"scrollend":K=ih;break;case"wheel":K=uo;break;case"copy":case"cut":case"paste":K=oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Wl;break;case"toggle":case"beforetoggle":K=ph}var Ae=(s&4)!==0,rt=!Ae&&(n==="scroll"||n==="scrollend"),U=Ae?G!==null?G+"Capture":null:G;Ae=[];for(var M=H,q;M!==null;){var Z=M;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||U===null||(Z=Ys(M,U),Z!=null&&Ae.push(Cu(M,Z,q))),rt)break;M=M.return}0<Ae.length&&(G=new K(G,Se,null,o,J),ee.push({event:G,listeners:Ae}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",G&&o!==Yr&&(Se=o.relatedTarget||o.fromElement)&&(Gr(Se)||Se[qn]))break e;if((K||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,K?(Se=o.relatedTarget||o.toElement,K=H,Se=Se?Gr(Se):null,Se!==null&&(rt=l(Se),Ae=Se.tag,Se!==rt||Ae!==5&&Ae!==27&&Ae!==6)&&(Se=null)):(K=null,Se=H),K!==Se)){if(Ae=Kn,Z="onMouseLeave",U="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=Wl,Z="onPointerLeave",U="onPointerEnter",M="pointer"),rt=K==null?G:_r(K),q=Se==null?G:_r(Se),G=new Ae(Z,M+"leave",K,o,J),G.target=rt,G.relatedTarget=q,Z=null,Gr(J)===H&&(Ae=new Ae(U,M+"enter",Se,o,J),Ae.target=q,Ae.relatedTarget=rt,Z=Ae),rt=Z,K&&Se)t:{for(Ae=K,U=Se,M=0,q=Ae;q;q=Po(q))M++;for(q=0,Z=U;Z;Z=Po(Z))q++;for(;0<M-q;)Ae=Po(Ae),M--;for(;0<q-M;)U=Po(U),q--;for(;M--;){if(Ae===U||U!==null&&Ae===U.alternate)break t;Ae=Po(Ae),U=Po(U)}Ae=null}else Ae=null;K!==null&&ET(ee,G,K,Ae,!1),Se!==null&&rt!==null&&ET(ee,rt,Se,Ae,!0)}}e:{if(G=H?_r(H):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var me=B_;else if(kt(G))if(z_)me=_I;else{me=gI;var Oe=pI}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Fl(H.elementType)&&(me=B_):me=yI;if(me&&(me=me(n,H))){ei(ee,me,o,J);break e}Oe&&Oe(n,G,H),n==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Ui(G,"number",G.value)}switch(Oe=H?_r(H):window,n){case"focusin":(kt(Oe)||Oe.contentEditable==="true")&&(co=Oe,pm=H,eu=null);break;case"focusout":eu=pm=co=null;break;case"mousedown":gm=!0;break;case"contextmenu":case"mouseup":case"dragend":gm=!1,$_(ee,o,J);break;case"selectionchange":if(EI)break;case"keydown":case"keyup":$_(ee,o,J)}var ye;if(br)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ze?Y(n,o)&&(we="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(we="onCompositionStart");we&&(v&&o.locale!=="ko"&&(ze||we!=="onCompositionStart"?we==="onCompositionEnd"&&ze&&(ye=Kl()):(Tr=J,Bi="value"in Tr?Tr.value:Tr.textContent,ze=!0)),Oe=nf(H,we),0<Oe.length&&(we=new Yl(we,n,null,o,J),ee.push({event:we,listeners:Oe}),ye?we.data=ye:(ye=le(o),ye!==null&&(we.data=ye)))),(ye=y?Pt(n,o):je(n,o))&&(we=nf(H,"onBeforeInput"),0<we.length&&(Oe=new Yl("onBeforeInput","beforeinput",null,o,J),ee.push({event:Oe,listeners:we}),Oe.data=ye)),nR(ee,n,H,o,J)}_T(ee,s)})}function Cu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function nf(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ys(n,o),f!=null&&u.unshift(Cu(n,f,p)),f=Ys(n,s),f!=null&&u.push(Cu(n,f,p))),n.tag===3)return u;n=n.return}return[]}function Po(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ET(n,s,o,u,f){for(var p=s._reactName,E=[];o!==null&&o!==u;){var A=o,C=A.alternate,H=A.stateNode;if(A=A.tag,C!==null&&C===u)break;A!==5&&A!==26&&A!==27||H===null||(C=H,f?(H=Ys(o,p),H!=null&&E.unshift(Cu(o,H,C))):f||(H=Ys(o,p),H!=null&&E.push(Cu(o,H,C)))),o=o.return}E.length!==0&&n.push({event:s,listeners:E})}var aR=/\r\n?/g,oR=/\u0000|\uFFFD/g;function TT(n){return(typeof n=="string"?n:""+n).replace(aR,`
`).replace(oR,"")}function AT(n,s){return s=TT(s),TT(n)===s}function rf(){}function nt(n,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Hn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Hn(n,""+u);break;case"className":vr(n,"class",u);break;case"tabIndex":vr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vr(n,o,u);break;case"style":Hl(n,u,p);break;case"data":if(s!=="object"){vr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=to(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&nt(n,s,"name",f.name,f,null),nt(n,s,"formEncType",f.formEncType,f,null),nt(n,s,"formMethod",f.formMethod,f,null),nt(n,s,"formTarget",f.formTarget,f,null)):(nt(n,s,"encType",f.encType,f,null),nt(n,s,"method",f.method,f,null),nt(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=to(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=rf);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=to(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Pe("beforetoggle",n),Pe("toggle",n),Li(n,"popover",u);break;case"xlinkActuate":Xt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Li(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=lm.get(o)||o,Li(n,o,u))}}function Bp(n,s,o,u,f,p){switch(o){case"style":Hl(n,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Hn(n,u):(typeof u=="number"||typeof u=="bigint")&&Hn(n,""+u);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=rf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xa.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=n[Ct]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Li(n,o,u)}}}function en(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",n),Pe("load",n);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:nt(n,s,p,E,o,null)}}f&&nt(n,s,"srcSet",o.srcSet,o,null),u&&nt(n,s,"src",o.src,o,null);return;case"input":Pe("invalid",n);var A=p=E=f=null,C=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":f=J;break;case"type":E=J;break;case"checked":C=J;break;case"defaultChecked":H=J;break;case"value":p=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:nt(n,s,u,J,o,null)}}Ks(n,p,A,C,H,E,f,!1),eo(n);return;case"select":Pe("invalid",n),u=E=p=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":E=A;break;case"multiple":u=A;default:nt(n,s,f,A,o,null)}s=p,o=E,n.multiple=!!u,s!=null?$r(n,!!u,s,!1):o!=null&&$r(n,!!u,o,!0);return;case"textarea":Pe("invalid",n),p=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(A=o[E],A!=null))switch(E){case"value":u=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:nt(n,s,E,A,o,null)}Qs(n,u,f,p),eo(n);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(n,s,C,u,o,null)}return;case"dialog":Pe("beforetoggle",n),Pe("toggle",n),Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":Pe("load",n);break;case"video":case"audio":for(u=0;u<Ru.length;u++)Pe(Ru[u],n);break;case"image":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"embed":case"source":case"link":Pe("error",n),Pe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:nt(n,s,H,u,o,null)}return;default:if(Fl(s)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&Bp(n,s,J,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&nt(n,s,A,u,o,null))}function lR(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,A=null,C=null,H=null,J=null;for(K in o){var ee=o[K];if(o.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":C=ee;default:u.hasOwnProperty(K)||nt(n,s,K,null,u,ee)}}for(var G in u){var K=u[G];if(ee=o[G],u.hasOwnProperty(G)&&(K!=null||ee!=null))switch(G){case"type":p=K;break;case"name":f=K;break;case"checked":H=K;break;case"defaultChecked":J=K;break;case"value":E=K;break;case"defaultValue":A=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:K!==ee&&nt(n,s,G,K,u,ee)}}Rn(n,E,A,C,H,J,p,f);return;case"select":K=E=A=G=null;for(p in o)if(C=o[p],o.hasOwnProperty(p)&&C!=null)switch(p){case"value":break;case"multiple":K=C;default:u.hasOwnProperty(p)||nt(n,s,p,null,u,C)}for(f in u)if(p=u[f],C=o[f],u.hasOwnProperty(f)&&(p!=null||C!=null))switch(f){case"value":G=p;break;case"defaultValue":A=p;break;case"multiple":E=p;default:p!==C&&nt(n,s,f,p,u,C)}s=A,o=E,u=K,G!=null?$r(n,!!o,G,!1):!!u!=!!o&&(s!=null?$r(n,!!o,s,!0):$r(n,!!o,o?[]:"",!1));return;case"textarea":K=G=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:nt(n,s,A,null,u,f)}for(E in u)if(f=u[E],p=o[E],u.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":G=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&nt(n,s,E,f,u,p)}et(n,G,K);return;case"option":for(var Se in o)if(G=o[Se],o.hasOwnProperty(Se)&&G!=null&&!u.hasOwnProperty(Se))switch(Se){case"selected":n.selected=!1;break;default:nt(n,s,Se,null,u,G)}for(C in u)if(G=u[C],K=o[C],u.hasOwnProperty(C)&&G!==K&&(G!=null||K!=null))switch(C){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:nt(n,s,C,G,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)G=o[Ae],o.hasOwnProperty(Ae)&&G!=null&&!u.hasOwnProperty(Ae)&&nt(n,s,Ae,null,u,G);for(H in u)if(G=u[H],K=o[H],u.hasOwnProperty(H)&&G!==K&&(G!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:nt(n,s,H,G,u,K)}return;default:if(Fl(s)){for(var rt in o)G=o[rt],o.hasOwnProperty(rt)&&G!==void 0&&!u.hasOwnProperty(rt)&&Bp(n,s,rt,void 0,u,G);for(J in u)G=u[J],K=o[J],!u.hasOwnProperty(J)||G===K||G===void 0&&K===void 0||Bp(n,s,J,G,u,K);return}}for(var U in o)G=o[U],o.hasOwnProperty(U)&&G!=null&&!u.hasOwnProperty(U)&&nt(n,s,U,null,u,G);for(ee in u)G=u[ee],K=o[ee],!u.hasOwnProperty(ee)||G===K||G==null&&K==null||nt(n,s,ee,G,u,K)}var zp=null,jp=null;function sf(n){return n.nodeType===9?n:n.ownerDocument}function wT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ST(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function qp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Hp=null;function uR(){var n=window.event;return n&&n.type==="popstate"?n===Hp?!1:(Hp=n,!0):(Hp=null,!1)}var bT=typeof setTimeout=="function"?setTimeout:void 0,cR=typeof clearTimeout=="function"?clearTimeout:void 0,IT=typeof Promise=="function"?Promise:void 0,hR=typeof queueMicrotask=="function"?queueMicrotask:typeof IT<"u"?function(n){return IT.resolve(null).then(n).catch(fR)}:bT;function fR(n){setTimeout(function(){throw n})}function ts(n){return n==="head"}function RT(n,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&xu(E.documentElement),o&2&&xu(E.body),o&4)for(o=E.head,xu(o),E=o.firstChild;E;){var A=E.nextSibling,C=E.nodeName;E[qs]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=A}}if(f===0){n.removeChild(p),Lu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);Lu(s)}function Fp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Fp(o),ki(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function dR(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[qs])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=lr(n.nextSibling),n===null)break}return null}function mR(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=lr(n.nextSibling),n===null))return null;return n}function Gp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function pR(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function lr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var Kp=null;function CT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function xT(n,s,o){switch(s=sf(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function xu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ki(n)}var Zn=new Map,NT=new Set;function af(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var di=oe.d;oe.d={f:gR,r:yR,D:_R,C:vR,L:ER,m:TR,X:wR,S:AR,M:SR};function gR(){var n=di.f(),s=Xh();return n||s}function yR(n){var s=yr(n);s!==null&&s.tag===5&&s.type==="form"?Xv(s):di.r(n)}var ko=typeof document>"u"?null:document;function DT(n,s,o){var u=ko;if(u&&typeof s=="string"&&s){var f=xt(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),NT.has(f)||(NT.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),en(s,"link",n),Tt(s),u.head.appendChild(s)))}}function _R(n){di.D(n),DT("dns-prefetch",n,null)}function vR(n,s){di.C(n,s),DT("preconnect",n,s)}function ER(n,s,o){di.L(n,s,o);var u=ko;if(u&&n&&s){var f='link[rel="preload"][as="'+xt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+xt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+xt(o.imageSizes)+'"]')):f+='[href="'+xt(n)+'"]';var p=f;switch(s){case"style":p=Lo(n);break;case"script":p=Uo(n)}Zn.has(p)||(n=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Zn.set(p,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Nu(p))||s==="script"&&u.querySelector(Du(p))||(s=u.createElement("link"),en(s,"link",n),Tt(s),u.head.appendChild(s)))}}function TR(n,s){di.m(n,s);var o=ko;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+xt(u)+'"][href="'+xt(n)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Uo(n)}if(!Zn.has(p)&&(n=_({rel:"modulepreload",href:n},s),Zn.set(p,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Du(p)))return}u=o.createElement("link"),en(u,"link",n),Tt(u),o.head.appendChild(u)}}}function AR(n,s,o){di.S(n,s,o);var u=ko;if(u&&n){var f=fn(u).hoistableStyles,p=Lo(n);s=s||"default";var E=f.get(p);if(!E){var A={loading:0,preload:null};if(E=u.querySelector(Nu(p)))A.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Zn.get(p))&&Qp(n,o);var C=E=u.createElement("link");Tt(C),en(C,"link",n),C._p=new Promise(function(H,J){C.onload=H,C.onerror=J}),C.addEventListener("load",function(){A.loading|=1}),C.addEventListener("error",function(){A.loading|=2}),A.loading|=4,of(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:A},f.set(p,E)}}}function wR(n,s){di.X(n,s);var o=ko;if(o&&n){var u=fn(o).hoistableScripts,f=Uo(n),p=u.get(f);p||(p=o.querySelector(Du(f)),p||(n=_({src:n,async:!0},s),(s=Zn.get(f))&&$p(n,s),p=o.createElement("script"),Tt(p),en(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function SR(n,s){di.M(n,s);var o=ko;if(o&&n){var u=fn(o).hoistableScripts,f=Uo(n),p=u.get(f);p||(p=o.querySelector(Du(f)),p||(n=_({src:n,async:!0,type:"module"},s),(s=Zn.get(f))&&$p(n,s),p=o.createElement("script"),Tt(p),en(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function VT(n,s,o,u){var f=(f=Ie.current)?af(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Lo(o.href),o=fn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Lo(o.href);var p=fn(f).hoistableStyles,E=p.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=f.querySelector(Nu(n)))&&!p._p&&(E.instance=p,E.state.loading=5),Zn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Zn.set(n,o),p||bR(f,n,o,E.state))),s&&u===null)throw Error(r(528,""));return E}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Uo(o),o=fn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Lo(n){return'href="'+xt(n)+'"'}function Nu(n){return'link[rel="stylesheet"]['+n+"]"}function OT(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function bR(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),en(s,"link",o),Tt(s),n.head.appendChild(s))}function Uo(n){return'[src="'+xt(n)+'"]'}function Du(n){return"script[async]"+n}function MT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+xt(o.href)+'"]');if(u)return s.instance=u,Tt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Tt(u),en(u,"style",f),of(u,o.precedence,n),s.instance=u;case"stylesheet":f=Lo(o.href);var p=n.querySelector(Nu(f));if(p)return s.state.loading|=4,s.instance=p,Tt(p),p;u=OT(o),(f=Zn.get(f))&&Qp(u,f),p=(n.ownerDocument||n).createElement("link"),Tt(p);var E=p;return E._p=new Promise(function(A,C){E.onload=A,E.onerror=C}),en(p,"link",u),s.state.loading|=4,of(p,o.precedence,n),s.instance=p;case"script":return p=Uo(o.src),(f=n.querySelector(Du(p)))?(s.instance=f,Tt(f),f):(u=o,(f=Zn.get(p))&&(u=_({},o),$p(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Tt(f),en(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,of(u,o.precedence,n));return s.instance}function of(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,E=0;E<u.length;E++){var A=u[E];if(A.dataset.precedence===s)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Qp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function $p(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var lf=null;function PT(n,s,o){if(lf===null){var u=new Map,f=lf=new Map;f.set(o,u)}else f=lf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var p=o[f];if(!(p[qs]||p[Mt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(s)||"";E=n+E;var A=u.get(E);A?A.push(p):u.set(E,[p])}}return u}function kT(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function IR(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function LT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Vu=null;function RR(){}function CR(n,s,o){if(Vu===null)throw Error(r(475));var u=Vu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Lo(o.href),p=n.querySelector(Nu(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=uf.bind(u),n.then(u,u)),s.state.loading|=4,s.instance=p,Tt(p);return}p=n.ownerDocument||n,o=OT(o),(f=Zn.get(f))&&Qp(o,f),p=p.createElement("link"),Tt(p);var E=p;E._p=new Promise(function(A,C){E.onload=A,E.onerror=C}),en(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=uf.bind(u),n.addEventListener("load",s),n.addEventListener("error",s))}}function xR(){if(Vu===null)throw Error(r(475));var n=Vu;return n.stylesheets&&n.count===0&&Yp(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&Yp(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function uf(){if(this.count--,this.count===0){if(this.stylesheets)Yp(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var cf=null;function Yp(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,cf=new Map,s.forEach(NR,n),cf=null,uf.call(n))}function NR(n,s){if(!(s.state.loading&4)){var o=cf.get(n);if(o)var u=o.get(null);else{o=new Map,cf.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),p=o.get(E)||u,p===u&&o.set(null,f),o.set(E,f),this.count++,u=uf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Ou={$$typeof:te,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function DR(n,s,o,u,f,p,E,A){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function UT(n,s,o,u,f,p,E,A,C,H,J,ee){return n=new DR(n,s,o,E,A,C,H,ee),s=1,p===!0&&(s|=24),p=xn(3,null,null,s),n.current=p,p.stateNode=n,s=Nm(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Mm(p),n}function BT(n){return n?(n=po,n):po}function zT(n,s,o,u,f,p){f=BT(f),u.context===null?u.context=f:u.pendingContext=f,u=qi(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Hi(n,u,s),o!==null&&(Mn(o,n,s),uu(o,n,s))}function jT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Xp(n,s){jT(n,s),(n=n.alternate)&&jT(n,s)}function qT(n){if(n.tag===13){var s=mo(n,67108864);s!==null&&Mn(s,n,67108864),Xp(n,67108864)}}var hf=!0;function VR(n,s,o,u){var f=W.T;W.T=null;var p=oe.p;try{oe.p=2,Wp(n,s,o,u)}finally{oe.p=p,W.T=f}}function OR(n,s,o,u){var f=W.T;W.T=null;var p=oe.p;try{oe.p=8,Wp(n,s,o,u)}finally{oe.p=p,W.T=f}}function Wp(n,s,o,u){if(hf){var f=Jp(u);if(f===null)Up(n,s,u,ff,o),FT(n,u);else if(PR(f,n,s,o,u))u.stopPropagation();else if(FT(n,u),s&4&&-1<MR.indexOf(n)){for(;f!==null;){var p=yr(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=rr(p.pendingLanes);if(E!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var C=1<<31-nn(E);A.entanglements[1]|=C,E&=~C}Dr(p),(Ye&6)===0&&($h=jn()+500,Iu(0))}}break;case 13:A=mo(p,2),A!==null&&Mn(A,p,2),Xh(),Xp(p,2)}if(p=Jp(u),p===null&&Up(n,s,u,ff,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Up(n,s,u,null,o)}}function Jp(n){return n=Fn(n),Zp(n)}var ff=null;function Zp(n){if(ff=null,n=Gr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ff=n,null}function HT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nm()){case Dl:return 2;case Ka:return 8;case Ls:case rm:return 32;case Qa:return 268435456;default:return 32}default:return 32}}var eg=!1,ns=null,rs=null,is=null,Mu=new Map,Pu=new Map,ss=[],MR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FT(n,s){switch(n){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Mu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(s.pointerId)}}function ku(n,s,o,u,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=yr(s),s!==null&&qT(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function PR(n,s,o,u,f){switch(s){case"focusin":return ns=ku(ns,n,s,o,u,f),!0;case"dragenter":return rs=ku(rs,n,s,o,u,f),!0;case"mouseover":return is=ku(is,n,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return Mu.set(p,ku(Mu.get(p)||null,n,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Pu.set(p,ku(Pu.get(p)||null,n,s,o,u,f)),!0}return!1}function GT(n){var s=Gr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Xc(n.priority,function(){if(o.tag===13){var u=On();u=Oi(u);var f=mo(o,u);f!==null&&Mn(f,o,u),Xp(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function df(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Jp(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Yr=u,o.target.dispatchEvent(u),Yr=null}else return s=yr(o),s!==null&&qT(s),n.blockedOn=o,!1;s.shift()}return!0}function KT(n,s,o){df(n)&&o.delete(s)}function kR(){eg=!1,ns!==null&&df(ns)&&(ns=null),rs!==null&&df(rs)&&(rs=null),is!==null&&df(is)&&(is=null),Mu.forEach(KT),Pu.forEach(KT)}function mf(n,s){n.blockedOn===s&&(n.blockedOn=null,eg||(eg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,kR)))}var pf=null;function QT(n){pf!==n&&(pf=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){pf===n&&(pf=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Zp(u||o)===null)continue;break}var p=yr(o);p!==null&&(n.splice(s,3),s-=3,Zm(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Lu(n){function s(C){return mf(C,n)}ns!==null&&mf(ns,n),rs!==null&&mf(rs,n),is!==null&&mf(is,n),Mu.forEach(s),Pu.forEach(s);for(var o=0;o<ss.length;o++){var u=ss[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ss.length&&(o=ss[0],o.blockedOn===null);)GT(o),o.blockedOn===null&&ss.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],E=f[Ct]||null;if(typeof p=="function")E||QT(o);else if(E){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[Ct]||null)A=E.formAction;else if(Zp(f)!==null)continue}else A=E.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),QT(o)}}}function tg(n){this._internalRoot=n}gf.prototype.render=tg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=On();zT(o,u,n,s,null,null)},gf.prototype.unmount=tg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;zT(n.current,2,null,n,null,null),Xh(),s[qn]=null}};function gf(n){this._internalRoot=n}gf.prototype.unstable_scheduleHydration=function(n){if(n){var s=Mi();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ss.length&&s!==0&&s<ss[o].priority;o++);ss.splice(o,0,n),o===0&&GT(n)}};var $T=e.version;if($T!=="19.1.0")throw Error(r(527,$T,"19.1.0"));oe.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=m(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var LR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{yt=yf.inject(LR),$e=yf}catch{}}return Bu.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,u="",f=cE,p=hE,E=fE,A=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=UT(n,1,!1,null,null,o,u,f,p,E,A,null),n[qn]=s.current,Lp(n),new tg(s)},Bu.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var u=!1,f="",p=cE,E=hE,A=fE,C=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),s=UT(n,1,!0,s,o??null,u,f,p,E,A,C,H),s.context=BT(null),o=s.current,u=On(),u=Oi(u),f=qi(u),f.callback=null,Hi(o,f,u),o=u,s.current.lanes=o,Fr(s,o),Dr(s),n[qn]=s.current,Lp(n),new gf(s)},Bu.version="19.1.0",Bu}var i0;function QR(){if(i0)return ig.exports;i0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ig.exports=KR(),ig.exports}var $R=QR();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var s0="popstate";function YR(i={}){function e(a,l){let{pathname:c="/",search:d="",hash:m=""}=Fa(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Ig("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:uc(l))}function r(a,l){nr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return WR(e,t,r,i)}function mt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function nr(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XR(){return Math.random().toString(36).substring(2,10)}function a0(i,e){return{usr:i.state,key:i.key,idx:e}}function Ig(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Fa(e):e,state:t,key:e&&e.key||r||XR()}}function uc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Fa(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function WR(i,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let B=_(),Q=B==null?null:B-g;g=B,m&&m({action:d,location:F.location,delta:Q})}function w(B,Q){d="PUSH";let ie=Ig(F.location,B,Q);t&&t(ie,B),g=_()+1;let te=a0(ie,g),fe=F.createHref(ie);try{c.pushState(te,"",fe)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;a.location.assign(fe)}l&&m&&m({action:d,location:F.location,delta:1})}function N(B,Q){d="REPLACE";let ie=Ig(F.location,B,Q);t&&t(ie,B),g=_();let te=a0(ie,g),fe=F.createHref(ie);c.replaceState(te,"",fe),l&&m&&m({action:d,location:F.location,delta:0})}function k(B){return JR(B)}let F={get action(){return d},get location(){return i(a,c)},listen(B){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(s0,T),m=B,()=>{a.removeEventListener(s0,T),m=null}},createHref(B){return e(a,B)},createURL:k,encodeLocation(B){let Q=k(B);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:w,replace:N,go(B){return c.go(B)}};return F}function JR(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mt(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:uc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Aw(i,e,t="/"){return ZR(i,e,t,!1)}function ZR(i,e,t,r){let a=typeof e=="string"?Fa(e):e,l=wi(a.pathname||"/",t);if(l==null)return null;let c=ww(i);eC(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=hC(l);d=uC(c[m],g,r)}return d}function ww(i,e=[],t=[],r=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(mt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let g=Ei([r,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(mt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),ww(l.children,e,_,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:oC(g,l.index),routesMeta:_})};return i.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let d of Sw(l.path))a(l,c,d)}),e}function Sw(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=Sw(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>i.startsWith("/")&&m===""?"/":m)}function eC(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:lC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var tC=/^:[\w-]+$/,nC=3,rC=2,iC=1,sC=10,aC=-2,o0=i=>i==="*";function oC(i,e){let t=i.split("/"),r=t.length;return t.some(o0)&&(r+=aC),e&&(r+=rC),t.filter(a=>!o0(a)).reduce((a,l)=>a+(tC.test(l)?nC:l===""?iC:sC),r)}function lC(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function uC(i,e,t=!1){let{routesMeta:r}=i,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],g=d===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=Kf({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),w=m.route;if(!T&&g&&t&&!r[r.length-1].route.index&&(T=Kf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Ei([l,T.pathname]),pathnameBase:pC(Ei([l,T.pathnameBase])),route:w}),T.pathnameBase!=="/"&&(l=Ei([l,T.pathnameBase]))}return c}function Kf(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=cC(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((g,{paramName:_,isOptional:T},w)=>{if(_==="*"){let k=d[w]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const N=d[w];return T&&!N?g[_]=void 0:g[_]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:i}}function cC(i,e=!1,t=!0){nr(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function hC(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nr(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function wi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}function fC(i,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?Fa(i):i;return{pathname:t?t.startsWith("/")?t:dC(t,e):e,search:gC(r),hash:yC(a)}}function dC(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function lg(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mC(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function my(i){let e=mC(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function py(i,e,t,r=!1){let a;typeof i=="string"?a=Fa(i):(a={...i},mt(!a.pathname||!a.pathname.includes("?"),lg("?","pathname","search",a)),mt(!a.pathname||!a.pathname.includes("#"),lg("#","pathname","hash",a)),mt(!a.search||!a.search.includes("#"),lg("#","search","hash",a)));let l=i===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),T-=1;a.pathname=w.join("/")}d=T>=0?e[T]:"/"}let m=fC(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var Ei=i=>i.join("/").replace(/\/\/+/g,"/"),pC=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),gC=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,yC=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function _C(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var bw=["POST","PUT","PATCH","DELETE"];new Set(bw);var vC=["GET",...bw];new Set(vC);var vl=$.createContext(null);vl.displayName="DataRouter";var wd=$.createContext(null);wd.displayName="DataRouterState";$.createContext(!1);var Iw=$.createContext({isTransitioning:!1});Iw.displayName="ViewTransition";var EC=$.createContext(new Map);EC.displayName="Fetchers";var TC=$.createContext(null);TC.displayName="Await";var dr=$.createContext(null);dr.displayName="Navigation";var Cc=$.createContext(null);Cc.displayName="Location";var mr=$.createContext({outlet:null,matches:[],isDataRoute:!1});mr.displayName="Route";var gy=$.createContext(null);gy.displayName="RouteError";function AC(i,{relative:e}={}){mt(El(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=$.useContext(dr),{hash:a,pathname:l,search:c}=Nc(i,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ei([t,l])),r.createHref({pathname:d,search:c,hash:a})}function El(){return $.useContext(Cc)!=null}function Cs(){return mt(El(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Cc).location}var Rw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Cw(i){$.useContext(dr).static||$.useLayoutEffect(i)}function xc(){let{isDataRoute:i}=$.useContext(mr);return i?kC():wC()}function wC(){mt(El(),"useNavigate() may be used only in the context of a <Router> component.");let i=$.useContext(vl),{basename:e,navigator:t}=$.useContext(dr),{matches:r}=$.useContext(mr),{pathname:a}=Cs(),l=JSON.stringify(my(r)),c=$.useRef(!1);return Cw(()=>{c.current=!0}),$.useCallback((m,g={})=>{if(nr(c.current,Rw),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=py(m,JSON.parse(l),a,g.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ei([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,i])}$.createContext(null);function SC(){let{matches:i}=$.useContext(mr),e=i[i.length-1];return e?e.params:{}}function Nc(i,{relative:e}={}){let{matches:t}=$.useContext(mr),{pathname:r}=Cs(),a=JSON.stringify(my(t));return $.useMemo(()=>py(i,JSON.parse(a),r,e==="path"),[i,a,r,e])}function bC(i,e){return xw(i,e)}function xw(i,e,t,r){mt(El(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=$.useContext(dr),{matches:l}=$.useContext(mr),c=l[l.length-1],d=c?c.params:{},m=c?c.pathname:"/",g=c?c.pathnameBase:"/",_=c&&c.route;{let Q=_&&_.path||"";Nw(m,!_||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let T=Cs(),w;if(e){let Q=typeof e=="string"?Fa(e):e;mt(g==="/"||Q.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),w=Q}else w=T;let N=w.pathname||"/",k=N;if(g!=="/"){let Q=g.replace(/^\//,"").split("/");k="/"+N.replace(/^\//,"").split("/").slice(Q.length).join("/")}let F=Aw(i,{pathname:k});nr(_||F!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),nr(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=NC(F&&F.map(Q=>Object.assign({},Q,{params:Object.assign({},d,Q.params),pathname:Ei([g,a.encodeLocation?a.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?g:Ei([g,a.encodeLocation?a.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),l,t,r);return e&&B?$.createElement(Cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},B):B}function IC(){let i=PC(),e=_C(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=$.createElement($.Fragment,null,$.createElement("p",null,"💿 Hey developer 👋"),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:l},"ErrorBoundary")," or"," ",$.createElement("code",{style:l},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:a},t):null,c)}var RC=$.createElement(IC,null),CC=class extends $.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?$.createElement(mr.Provider,{value:this.props.routeContext},$.createElement(gy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xC({routeContext:i,match:e,children:t}){let r=$.useContext(vl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(mr.Provider,{value:i},t)}function NC(i,e=[],t=null,r=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,l=t?.errors;if(l!=null){let m=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);mt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=m),g.route.id){let{loaderData:_,errors:T}=t,w=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!T||T[g.route.id]===void 0);if(g.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let T,w=!1,N=null,k=null;t&&(T=l&&g.route.id?l[g.route.id]:void 0,N=g.route.errorElement||RC,c&&(d<0&&_===0?(Nw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,k=null):d===_&&(w=!0,k=g.route.hydrateFallbackElement||null)));let F=e.concat(a.slice(0,_+1)),B=()=>{let Q;return T?Q=N:w?Q=k:g.route.Component?Q=$.createElement(g.route.Component,null):g.route.element?Q=g.route.element:Q=m,$.createElement(xC,{match:g,routeContext:{outlet:m,matches:F,isDataRoute:t!=null},children:Q})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?$.createElement(CC,{location:t.location,revalidation:t.revalidation,component:N,error:T,children:B(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):B()},null)}function yy(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DC(i){let e=$.useContext(vl);return mt(e,yy(i)),e}function VC(i){let e=$.useContext(wd);return mt(e,yy(i)),e}function OC(i){let e=$.useContext(mr);return mt(e,yy(i)),e}function _y(i){let e=OC(i),t=e.matches[e.matches.length-1];return mt(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function MC(){return _y("useRouteId")}function PC(){let i=$.useContext(gy),e=VC("useRouteError"),t=_y("useRouteError");return i!==void 0?i:e.errors?.[t]}function kC(){let{router:i}=DC("useNavigate"),e=_y("useNavigate"),t=$.useRef(!1);return Cw(()=>{t.current=!0}),$.useCallback(async(a,l={})=>{nr(t.current,Rw),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...l}))},[i,e])}var l0={};function Nw(i,e,t){!e&&!l0[i]&&(l0[i]=!0,nr(!1,t))}$.memo(LC);function LC({routes:i,future:e,state:t}){return xw(i,void 0,t,e)}function UC({to:i,replace:e,state:t,relative:r}){mt(El(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=$.useContext(dr);nr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=$.useContext(mr),{pathname:c}=Cs(),d=xc(),m=py(i,my(l),c,r==="path"),g=JSON.stringify(m);return $.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:r})},[d,g,r,e,t]),null}function Rf(i){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BC({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){mt(!El(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Fa(t));let{pathname:m="/",search:g="",hash:_="",state:T=null,key:w="default"}=t,N=$.useMemo(()=>{let k=wi(m,c);return k==null?null:{location:{pathname:k,search:g,hash:_,state:T,key:w},navigationType:r}},[c,m,g,_,T,w,r]);return nr(N!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:$.createElement(dr.Provider,{value:d},$.createElement(Cc.Provider,{children:e,value:N}))}function zC({children:i,location:e}){return bC(Rg(i),e)}function Rg(i,e=[]){let t=[];return $.Children.forEach(i,(r,a)=>{if(!$.isValidElement(r))return;let l=[...e,a];if(r.type===$.Fragment){t.push.apply(t,Rg(r.props.children,l));return}mt(r.type===Rf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Rg(r.props.children,l)),t.push(c)}),t}var Cf="get",xf="application/x-www-form-urlencoded";function Sd(i){return i!=null&&typeof i.tagName=="string"}function jC(i){return Sd(i)&&i.tagName.toLowerCase()==="button"}function qC(i){return Sd(i)&&i.tagName.toLowerCase()==="form"}function HC(i){return Sd(i)&&i.tagName.toLowerCase()==="input"}function FC(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function GC(i,e){return i.button===0&&(!e||e==="_self")&&!FC(i)}var _f=null;function KC(){if(_f===null)try{new FormData(document.createElement("form"),0),_f=!1}catch{_f=!0}return _f}var QC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ug(i){return i!=null&&!QC.has(i)?(nr(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xf}"`),null):i}function $C(i,e){let t,r,a,l,c;if(qC(i)){let d=i.getAttribute("action");r=d?wi(d,e):null,t=i.getAttribute("method")||Cf,a=ug(i.getAttribute("enctype"))||xf,l=new FormData(i)}else if(jC(i)||HC(i)&&(i.type==="submit"||i.type==="image")){let d=i.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||d.getAttribute("action");if(r=m?wi(m,e):null,t=i.getAttribute("formmethod")||d.getAttribute("method")||Cf,a=ug(i.getAttribute("formenctype"))||ug(d.getAttribute("enctype"))||xf,l=new FormData(d,i),!KC()){let{name:g,type:_,value:T}=i;if(_==="image"){let w=g?`${g}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else g&&l.append(g,T)}}else{if(Sd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cf,r=null,a=xf,c=i}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vy(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function YC(i,e,t){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&wi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function XC(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WC(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function JC(i,e,t){let r=await Promise.all(i.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await XC(l,t);return c.links?c.links():[]}return[]}));return n2(r.flat(1).filter(WC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function u0(i,e,t,r,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{let _=r.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function ZC(i,e,{includeHydrateFallback:t}={}){return e2(i.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function e2(i){return[...new Set(i)]}function t2(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function n2(i,e){let t=new Set;return new Set(e),i.reduce((r,a)=>{let l=JSON.stringify(t2(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function Dw(){let i=$.useContext(vl);return vy(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function r2(){let i=$.useContext(wd);return vy(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ey=$.createContext(void 0);Ey.displayName="FrameworkContext";function Vw(){let i=$.useContext(Ey);return vy(i,"You must render this element inside a <HydratedRouter> element"),i}function i2(i,e){let t=$.useContext(Ey),[r,a]=$.useState(!1),[l,c]=$.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,w=$.useRef(null);$.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let F=Q=>{Q.forEach(ie=>{c(ie.isIntersecting)})},B=new IntersectionObserver(F,{threshold:.5});return w.current&&B.observe(w.current),()=>{B.disconnect()}}},[i]),$.useEffect(()=>{if(r){let F=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(F)}}},[r]);let N=()=>{a(!0)},k=()=>{a(!1),c(!1)};return t?i!=="intent"?[l,w,{}]:[l,w,{onFocus:zu(d,N),onBlur:zu(m,k),onMouseEnter:zu(g,N),onMouseLeave:zu(_,k),onTouchStart:zu(T,N)}]:[!1,w,{}]}function zu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function s2({page:i,...e}){let{router:t}=Dw(),r=$.useMemo(()=>Aw(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?$.createElement(o2,{page:i,matches:r,...e}):null}function a2(i){let{manifest:e,routeModules:t}=Vw(),[r,a]=$.useState([]);return $.useEffect(()=>{let l=!1;return JC(i,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[i,e,t]),r}function o2({page:i,matches:e,...t}){let r=Cs(),{manifest:a,routeModules:l}=Vw(),{basename:c}=Dw(),{loaderData:d,matches:m}=r2(),g=$.useMemo(()=>u0(i,e,m,a,r,"data"),[i,e,m,a,r]),_=$.useMemo(()=>u0(i,e,m,a,r,"assets"),[i,e,m,a,r]),T=$.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let k=new Set,F=!1;if(e.forEach(Q=>{let ie=a.routes[Q.route.id];!ie||!ie.hasLoader||(!g.some(te=>te.route.id===Q.route.id)&&Q.route.id in d&&l[Q.route.id]?.shouldRevalidate||ie.hasClientLoader?F=!0:k.add(Q.route.id))}),k.size===0)return[];let B=YC(i,c,"data");return F&&k.size>0&&B.searchParams.set("_routes",e.filter(Q=>k.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[B.pathname+B.search]},[c,d,r,a,g,e,i,l]),w=$.useMemo(()=>ZC(_,a),[_,a]),N=a2(_);return $.createElement($.Fragment,null,T.map(k=>$.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),w.map(k=>$.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),N.map(({key:k,link:F})=>$.createElement("link",{key:k,...F})))}function l2(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ow=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ow&&(window.__reactRouterVersion="7.7.1")}catch{}function u2({basename:i,children:e,window:t}){let r=$.useRef();r.current==null&&(r.current=YR({window:t,v5Compat:!0}));let a=r.current,[l,c]=$.useState({action:a.action,location:a.location}),d=$.useCallback(m=>{$.startTransition(()=>c(m))},[c]);return $.useLayoutEffect(()=>a.listen(d),[a,d]),$.createElement(BC,{basename:i,children:e,location:l.location,navigationType:l.action,navigator:a})}var Mw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pw=$.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:_,viewTransition:T,...w},N){let{basename:k}=$.useContext(dr),F=typeof g=="string"&&Mw.test(g),B,Q=!1;if(typeof g=="string"&&F&&(B=g,Ow))try{let R=new URL(window.location.href),P=g.startsWith("//")?new URL(R.protocol+g):new URL(g),L=wi(P.pathname,k);P.origin===R.origin&&L!=null?g=L+P.search+P.hash:Q=!0}catch{nr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=AC(g,{relative:a}),[te,fe,ue]=i2(r,w),Ee=d2(g,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function O(R){e&&e(R),R.defaultPrevented||Ee(R)}let b=$.createElement("a",{...w,...ue,href:B||ie,onClick:Q||l?e:O,ref:l2(N,fe),target:m,"data-discover":!F&&t==="render"?"true":void 0});return te&&!F?$.createElement($.Fragment,null,b,$.createElement(s2,{page:ie})):b});Pw.displayName="Link";var c2=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},_){let T=Nc(c,{relative:g.relative}),w=Cs(),N=$.useContext(wd),{navigator:k,basename:F}=$.useContext(dr),B=N!=null&&_2(T)&&d===!0,Q=k.encodeLocation?k.encodeLocation(T).pathname:T.pathname,ie=w.pathname,te=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(ie=ie.toLowerCase(),te=te?te.toLowerCase():null,Q=Q.toLowerCase()),te&&F&&(te=wi(te,F)||te);const fe=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let ue=ie===Q||!a&&ie.startsWith(Q)&&ie.charAt(fe)==="/",Ee=te!=null&&(te===Q||!a&&te.startsWith(Q)&&te.charAt(Q.length)==="/"),O={isActive:ue,isPending:Ee,isTransitioning:B},b=ue?e:void 0,R;typeof r=="function"?R=r(O):R=[r,ue?"active":null,Ee?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(O):l;return $.createElement(Pw,{...g,"aria-current":b,className:R,ref:_,style:P,to:c,viewTransition:d},typeof m=="function"?m(O):m)});c2.displayName="NavLink";var h2=$.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=Cf,action:d,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:T,...w},N)=>{let k=g2(),F=y2(d,{relative:g}),B=c.toLowerCase()==="get"?"get":"post",Q=typeof d=="string"&&Mw.test(d),ie=te=>{if(m&&m(te),te.defaultPrevented)return;te.preventDefault();let fe=te.nativeEvent.submitter,ue=fe?.getAttribute("formmethod")||c;k(fe||te.currentTarget,{fetcherKey:e,method:ue,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:T})};return $.createElement("form",{ref:N,method:B,action:F,onSubmit:r?m:ie,...w,"data-discover":!Q&&i==="render"?"true":void 0})});h2.displayName="Form";function f2(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kw(i){let e=$.useContext(vl);return mt(e,f2(i)),e}function d2(i,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=xc(),m=Cs(),g=Nc(i,{relative:l});return $.useCallback(_=>{if(GC(_,e)){_.preventDefault();let T=t!==void 0?t:uc(m)===uc(g);d(i,{replace:T,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,g,t,r,e,i,a,l,c])}var m2=0,p2=()=>`__${String(++m2)}__`;function g2(){let{router:i}=kw("useSubmit"),{basename:e}=$.useContext(dr),t=MC();return $.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:g}=$C(r,e);if(a.navigate===!1){let _=a.fetcherKey||p2();await i.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await i.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function y2(i,{relative:e}={}){let{basename:t}=$.useContext(dr),r=$.useContext(mr);mt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Nc(i||".",{relative:e})},c=Cs();if(i==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!i||i===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ei([t,l.pathname])),uc(l)}function _2(i,{relative:e}={}){let t=$.useContext(Iw);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=kw("useViewTransitionState"),a=Nc(i,{relative:e});if(!t.isTransitioning)return!1;let l=wi(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=wi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Kf(a.pathname,c)!=null||Kf(a.pathname,l)!=null}var Lw=Tw();const v2="_root_e2y3u_1",E2="_toolbar_e2y3u_9",T2="_pageTitle_e2y3u_19",A2="_backButton_e2y3u_24",w2="_finishButton_e2y3u_35",S2="_stats_e2y3u_47",b2="_stat_e2y3u_47",I2="_statName_e2y3u_61",R2="_statValue_e2y3u_65",C2="_accent_e2y3u_68",x2="_exercises_e2y3u_72",N2="_addExerciseButton_e2y3u_79",Qt={root:v2,toolbar:E2,pageTitle:T2,backButton:A2,finishButton:w2,stats:S2,stat:b2,statName:I2,statValue:R2,accent:C2,exercises:x2,addExerciseButton:N2};var Uw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c0=Ra.createContext&&Ra.createContext(Uw),D2=["attr","size","title"];function V2(i,e){if(i==null)return{};var t=O2(i,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(t[r]=i[r])}return t}function O2(i,e){if(i==null)return{};var t={};for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){if(e.indexOf(r)>=0)continue;t[r]=i[r]}return t}function Qf(){return Qf=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Qf.apply(this,arguments)}function h0(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),t.push.apply(t,r)}return t}function $f(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h0(Object(t),!0).forEach(function(r){M2(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):h0(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function M2(i,e,t){return e=P2(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function P2(i){var e=k2(i,"string");return typeof e=="symbol"?e:e+""}function k2(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Bw(i){return i&&i.map((e,t)=>Ra.createElement(e.tag,$f({key:t},e.attr),Bw(e.child)))}function vn(i){return e=>Ra.createElement(L2,Qf({attr:$f({},i.attr)},e),Bw(i.child))}function L2(i){var e=t=>{var{attr:r,size:a,title:l}=i,c=V2(i,D2),d=a||t.size||"1em",m;return t.className&&(m=t.className),i.className&&(m=(m?m+" ":"")+i.className),Ra.createElement("svg",Qf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:m,style:$f($f({color:i.color||t.color},t.style),i.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&Ra.createElement("title",null,l),i.children)};return c0!==void 0?Ra.createElement(c0.Consumer,null,t=>e(t)):e(Uw)}function U2(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8A5.87 5.87 0 0 1 6 12c0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"},child:[]}]})(i)}function Ty(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(i)}function B2(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(i)}function z2(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z"},child:[]}]})(i)}function f0(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M8 5v14l11-7z"},child:[]}]})(i)}function bd(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(i)}function j2(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 9h4v11H4zM16 13h4v7h-4zM10 4h4v16h-4z"},child:[]}]})(i)}function q2(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(i)}function Ay(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(i)}function H2(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"},child:[]}]})(i)}function wy(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(i)}function F2(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(i)}function G2(i){return vn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(i)}function zw(i){var e,t,r="";if(typeof i=="string"||typeof i=="number")r+=i;else if(typeof i=="object")if(Array.isArray(i)){var a=i.length;for(e=0;e<a;e++)i[e]&&(t=zw(i[e]))&&(r&&(r+=" "),r+=t)}else for(t in i)i[t]&&(r&&(r+=" "),r+=t);return r}function Ti(){for(var i,e,t=0,r="",a=arguments.length;t<a;t++)(i=arguments[t])&&(e=zw(i))&&(r&&(r+=" "),r+=e);return r}const K2=()=>{};var d0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Q2=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],d=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,d=c?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let w=(d&15)<<2|g>>6,N=g&63;m||(N=64,c||(w=64)),r.push(t[_],t[T],t[w],t[N])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(jw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Q2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],d=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const T=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new $2;const w=l<<2|d>>4;if(r.push(w),g!==64){const N=d<<4&240|g>>2;if(r.push(N),T!==64){const k=g<<6&192|T;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class $2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y2=function(i){const e=jw(i);return qw.encodeByteArray(e,!0)},Hw=function(i){return Y2(i).replace(/\./g,"")},Fw=function(i){try{return qw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=()=>Gw().__FIREBASE_DEFAULTS__,W2=()=>{if(typeof process>"u"||typeof d0>"u")return;const i=d0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},J2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Fw(i[1]);return e&&JSON.parse(e)},Id=()=>{try{return K2()||X2()||W2()||J2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Z2=i=>Id()?.emulatorHosts?.[i],Kw=()=>Id()?.config,Qw=i=>Id()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $w(i){return(await fetch(i,{credentials:"include"})).ok}const Ju={};function tx(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ju))Ju[e]?i.emulator.push(e):i.prod.push(e);return i}function nx(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let m0=!1;function rx(i,e){if(typeof window>"u"||typeof document>"u"||!Tl(window.location.host)||Ju[i]===e||Ju[i]||m0)return;Ju[i]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",l=tx().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,N){w.setAttribute("width","24"),w.setAttribute("id",N),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{m0=!0,c()},w}function _(w,N){w.setAttribute("id",N),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function T(){const w=nx(r),N=t("text"),k=document.getElementById(N)||document.createElement("span"),F=t("learnmore"),B=document.getElementById(F)||document.createElement("a"),Q=t("preprendIcon"),ie=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const te=w.element;d(te),_(B,F);const fe=g();m(ie,Q),te.append(ie,k,B,fe),document.body.appendChild(te)}l?(k.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ix(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function Yw(){const i=Id()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ax(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function ox(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lx(){const i=Bt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Xw(){return!Yw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ww(){return!Yw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Jw(){try{return typeof indexedDB=="object"}catch{return!1}}function ux(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="FirebaseError";class Ci extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=cx,Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?hx(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ci(a,d,r)}}function hx(i,e){return i.replace(fx,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const fx=/\{\$([^}]+)}/g;function dx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Oa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],c=e[a];if(p0(l)&&p0(c)){if(!Oa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function p0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mx(i,e){const t=new px(i,e);return t.subscribe.bind(t)}class px{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");gx(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=cg),a.error===void 0&&(a.error=cg),a.complete===void 0&&(a.complete=cg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gx(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function cg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(i){return i&&i._delegate?i._delegate:i}class Ma{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ex;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vx(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_x(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _x(i){return i===_a?void 0:i}function vx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ke||(ke={}));const Tx={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Ax=ke.INFO,wx={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Sx=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=wx[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sy{constructor(e){this.name=e,this._logLevel=Ax,this._logHandler=Sx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const bx=(i,e)=>e.some(t=>i instanceof t);let g0,y0;function Ix(){return g0||(g0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rx(){return y0||(y0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zw=new WeakMap,Cg=new WeakMap,eS=new WeakMap,hg=new WeakMap,by=new WeakMap;function Cx(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(gs(i.result)),a()},c=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Zw.set(t,i)}).catch(()=>{}),by.set(e,i),e}function xx(i){if(Cg.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});Cg.set(i,e)}let xg={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Cg.get(i);if(e==="objectStoreNames")return i.objectStoreNames||eS.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gs(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Nx(i){xg=i(xg)}function Dx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(fg(this),e,...t);return eS.set(r,e.sort?e.sort():[e]),gs(r)}:Rx().includes(i)?function(...e){return i.apply(fg(this),e),gs(Zw.get(this))}:function(...e){return gs(i.apply(fg(this),e))}}function Vx(i){return typeof i=="function"?Dx(i):(i instanceof IDBTransaction&&xx(i),bx(i,Ix())?new Proxy(i,xg):i)}function gs(i){if(i instanceof IDBRequest)return Cx(i);if(hg.has(i))return hg.get(i);const e=Vx(i);return e!==i&&(hg.set(i,e),by.set(e,i)),e}const fg=i=>by.get(i);function Ox(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),d=gs(c);return r&&c.addEventListener("upgradeneeded",m=>{r(gs(c.result),m.oldVersion,m.newVersion,gs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const Mx=["get","getKey","getAll","getAllKeys","count"],Px=["put","add","delete","clear"],dg=new Map;function _0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(dg.get(e))return dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=Px.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Mx.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return dg.set(e,l),l}Nx(i=>({...i,get:(e,t,r)=>_0(e,t)||i.get(e,t,r),has:(e,t)=>!!_0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Lx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Lx(i){return i.getComponent()?.type==="VERSION"}const Ng="@firebase/app",v0="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Sy("@firebase/app"),Ux="@firebase/app-compat",Bx="@firebase/analytics-compat",zx="@firebase/analytics",jx="@firebase/app-check-compat",qx="@firebase/app-check",Hx="@firebase/auth",Fx="@firebase/auth-compat",Gx="@firebase/database",Kx="@firebase/data-connect",Qx="@firebase/database-compat",$x="@firebase/functions",Yx="@firebase/functions-compat",Xx="@firebase/installations",Wx="@firebase/installations-compat",Jx="@firebase/messaging",Zx="@firebase/messaging-compat",eN="@firebase/performance",tN="@firebase/performance-compat",nN="@firebase/remote-config",rN="@firebase/remote-config-compat",iN="@firebase/storage",sN="@firebase/storage-compat",aN="@firebase/firestore",oN="@firebase/ai",lN="@firebase/firestore-compat",uN="firebase",cN="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="[DEFAULT]",hN={[Ng]:"fire-core",[Ux]:"fire-core-compat",[zx]:"fire-analytics",[Bx]:"fire-analytics-compat",[qx]:"fire-app-check",[jx]:"fire-app-check-compat",[Hx]:"fire-auth",[Fx]:"fire-auth-compat",[Gx]:"fire-rtdb",[Kx]:"fire-data-connect",[Qx]:"fire-rtdb-compat",[$x]:"fire-fn",[Yx]:"fire-fn-compat",[Xx]:"fire-iid",[Wx]:"fire-iid-compat",[Jx]:"fire-fcm",[Zx]:"fire-fcm-compat",[eN]:"fire-perf",[tN]:"fire-perf-compat",[nN]:"fire-rc",[rN]:"fire-rc-compat",[iN]:"fire-gcs",[sN]:"fire-gcs-compat",[aN]:"fire-fst",[lN]:"fire-fst-compat",[oN]:"fire-vertex","fire-js":"fire-js",[uN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=new Map,fN=new Map,Vg=new Map;function E0(i,e){try{i.container.addComponent(e)}catch(t){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function tl(i){const e=i.name;if(Vg.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;Vg.set(e,i);for(const t of Yf.values())E0(t,i);for(const t of fN.values())E0(t,i);return!0}function Iy(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function er(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Dc("app","Firebase",dN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=cN;function tS(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r={name:Dg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ys.create("bad-app-name",{appName:String(a)});if(t||(t=Kw()),!t)throw ys.create("no-options");const l=Yf.get(a);if(l){if(Oa(t,l.options)&&Oa(r,l.config))return l;throw ys.create("duplicate-app",{appName:a})}const c=new Ex(a);for(const m of Vg.values())c.addComponent(m);const d=new mN(t,r,c);return Yf.set(a,d),d}function pN(i=Dg){const e=Yf.get(i);if(!e&&i===Dg&&Kw())return tS();if(!e)throw ys.create("no-app",{appName:i});return e}function _s(i,e,t){let r=hN[i]??i;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(c.join(" "));return}tl(new Ma(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="firebase-heartbeat-database",yN=1,cc="firebase-heartbeat-store";let mg=null;function nS(){return mg||(mg=Ox(gN,yN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(cc)}catch(t){console.warn(t)}}}}).catch(i=>{throw ys.create("idb-open",{originalErrorMessage:i.message})})),mg}async function _N(i){try{const t=(await nS()).transaction(cc),r=await t.objectStore(cc).get(rS(i));return await t.done,r}catch(e){if(e instanceof Ci)Si.warn(e.message);else{const t=ys.create("idb-get",{originalErrorMessage:e?.message});Si.warn(t.message)}}}async function T0(i,e){try{const r=(await nS()).transaction(cc,"readwrite");await r.objectStore(cc).put(e,rS(i)),await r.done}catch(t){if(t instanceof Ci)Si.warn(t.message);else{const r=ys.create("idb-set",{originalErrorMessage:t?.message});Si.warn(r.message)}}}function rS(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1024,EN=30;class TN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=A0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>EN){const a=SN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Si.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=A0(),{heartbeatsToSend:t,unsentEntries:r}=AN(this._heartbeatsCache.heartbeats),a=Hw(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Si.warn(e),""}}}function A0(){return new Date().toISOString().substring(0,10)}function AN(i,e=vN){const t=[];let r=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),w0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),w0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class wN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jw()?ux().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _N(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function w0(i){return Hw(JSON.stringify({version:2,heartbeats:i})).length}function SN(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(i){tl(new Ma("platform-logger",e=>new kx(e),"PRIVATE")),tl(new Ma("heartbeat",e=>new TN(e),"PRIVATE")),_s(Ng,v0,i),_s(Ng,v0,"esm2020"),_s("fire-js","")}bN("");var S0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,iS;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,b){function R(){}R.prototype=b.prototype,O.D=b.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(P,L,x){for(var I=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)I[Ze-2]=arguments[Ze];return b.prototype[L].apply(P,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,b,R){R||(R=0);var P=Array(16);if(typeof b=="string")for(var L=0;16>L;++L)P[L]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(L=0;16>L;++L)P[L]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=O.g[0],R=O.g[1],L=O.g[2];var x=O.g[3],I=b+(x^R&(L^x))+P[0]+3614090360&4294967295;b=R+(I<<7&4294967295|I>>>25),I=x+(L^b&(R^L))+P[1]+3905402710&4294967295,x=b+(I<<12&4294967295|I>>>20),I=L+(R^x&(b^R))+P[2]+606105819&4294967295,L=x+(I<<17&4294967295|I>>>15),I=R+(b^L&(x^b))+P[3]+3250441966&4294967295,R=L+(I<<22&4294967295|I>>>10),I=b+(x^R&(L^x))+P[4]+4118548399&4294967295,b=R+(I<<7&4294967295|I>>>25),I=x+(L^b&(R^L))+P[5]+1200080426&4294967295,x=b+(I<<12&4294967295|I>>>20),I=L+(R^x&(b^R))+P[6]+2821735955&4294967295,L=x+(I<<17&4294967295|I>>>15),I=R+(b^L&(x^b))+P[7]+4249261313&4294967295,R=L+(I<<22&4294967295|I>>>10),I=b+(x^R&(L^x))+P[8]+1770035416&4294967295,b=R+(I<<7&4294967295|I>>>25),I=x+(L^b&(R^L))+P[9]+2336552879&4294967295,x=b+(I<<12&4294967295|I>>>20),I=L+(R^x&(b^R))+P[10]+4294925233&4294967295,L=x+(I<<17&4294967295|I>>>15),I=R+(b^L&(x^b))+P[11]+2304563134&4294967295,R=L+(I<<22&4294967295|I>>>10),I=b+(x^R&(L^x))+P[12]+1804603682&4294967295,b=R+(I<<7&4294967295|I>>>25),I=x+(L^b&(R^L))+P[13]+4254626195&4294967295,x=b+(I<<12&4294967295|I>>>20),I=L+(R^x&(b^R))+P[14]+2792965006&4294967295,L=x+(I<<17&4294967295|I>>>15),I=R+(b^L&(x^b))+P[15]+1236535329&4294967295,R=L+(I<<22&4294967295|I>>>10),I=b+(L^x&(R^L))+P[1]+4129170786&4294967295,b=R+(I<<5&4294967295|I>>>27),I=x+(R^L&(b^R))+P[6]+3225465664&4294967295,x=b+(I<<9&4294967295|I>>>23),I=L+(b^R&(x^b))+P[11]+643717713&4294967295,L=x+(I<<14&4294967295|I>>>18),I=R+(x^b&(L^x))+P[0]+3921069994&4294967295,R=L+(I<<20&4294967295|I>>>12),I=b+(L^x&(R^L))+P[5]+3593408605&4294967295,b=R+(I<<5&4294967295|I>>>27),I=x+(R^L&(b^R))+P[10]+38016083&4294967295,x=b+(I<<9&4294967295|I>>>23),I=L+(b^R&(x^b))+P[15]+3634488961&4294967295,L=x+(I<<14&4294967295|I>>>18),I=R+(x^b&(L^x))+P[4]+3889429448&4294967295,R=L+(I<<20&4294967295|I>>>12),I=b+(L^x&(R^L))+P[9]+568446438&4294967295,b=R+(I<<5&4294967295|I>>>27),I=x+(R^L&(b^R))+P[14]+3275163606&4294967295,x=b+(I<<9&4294967295|I>>>23),I=L+(b^R&(x^b))+P[3]+4107603335&4294967295,L=x+(I<<14&4294967295|I>>>18),I=R+(x^b&(L^x))+P[8]+1163531501&4294967295,R=L+(I<<20&4294967295|I>>>12),I=b+(L^x&(R^L))+P[13]+2850285829&4294967295,b=R+(I<<5&4294967295|I>>>27),I=x+(R^L&(b^R))+P[2]+4243563512&4294967295,x=b+(I<<9&4294967295|I>>>23),I=L+(b^R&(x^b))+P[7]+1735328473&4294967295,L=x+(I<<14&4294967295|I>>>18),I=R+(x^b&(L^x))+P[12]+2368359562&4294967295,R=L+(I<<20&4294967295|I>>>12),I=b+(R^L^x)+P[5]+4294588738&4294967295,b=R+(I<<4&4294967295|I>>>28),I=x+(b^R^L)+P[8]+2272392833&4294967295,x=b+(I<<11&4294967295|I>>>21),I=L+(x^b^R)+P[11]+1839030562&4294967295,L=x+(I<<16&4294967295|I>>>16),I=R+(L^x^b)+P[14]+4259657740&4294967295,R=L+(I<<23&4294967295|I>>>9),I=b+(R^L^x)+P[1]+2763975236&4294967295,b=R+(I<<4&4294967295|I>>>28),I=x+(b^R^L)+P[4]+1272893353&4294967295,x=b+(I<<11&4294967295|I>>>21),I=L+(x^b^R)+P[7]+4139469664&4294967295,L=x+(I<<16&4294967295|I>>>16),I=R+(L^x^b)+P[10]+3200236656&4294967295,R=L+(I<<23&4294967295|I>>>9),I=b+(R^L^x)+P[13]+681279174&4294967295,b=R+(I<<4&4294967295|I>>>28),I=x+(b^R^L)+P[0]+3936430074&4294967295,x=b+(I<<11&4294967295|I>>>21),I=L+(x^b^R)+P[3]+3572445317&4294967295,L=x+(I<<16&4294967295|I>>>16),I=R+(L^x^b)+P[6]+76029189&4294967295,R=L+(I<<23&4294967295|I>>>9),I=b+(R^L^x)+P[9]+3654602809&4294967295,b=R+(I<<4&4294967295|I>>>28),I=x+(b^R^L)+P[12]+3873151461&4294967295,x=b+(I<<11&4294967295|I>>>21),I=L+(x^b^R)+P[15]+530742520&4294967295,L=x+(I<<16&4294967295|I>>>16),I=R+(L^x^b)+P[2]+3299628645&4294967295,R=L+(I<<23&4294967295|I>>>9),I=b+(L^(R|~x))+P[0]+4096336452&4294967295,b=R+(I<<6&4294967295|I>>>26),I=x+(R^(b|~L))+P[7]+1126891415&4294967295,x=b+(I<<10&4294967295|I>>>22),I=L+(b^(x|~R))+P[14]+2878612391&4294967295,L=x+(I<<15&4294967295|I>>>17),I=R+(x^(L|~b))+P[5]+4237533241&4294967295,R=L+(I<<21&4294967295|I>>>11),I=b+(L^(R|~x))+P[12]+1700485571&4294967295,b=R+(I<<6&4294967295|I>>>26),I=x+(R^(b|~L))+P[3]+2399980690&4294967295,x=b+(I<<10&4294967295|I>>>22),I=L+(b^(x|~R))+P[10]+4293915773&4294967295,L=x+(I<<15&4294967295|I>>>17),I=R+(x^(L|~b))+P[1]+2240044497&4294967295,R=L+(I<<21&4294967295|I>>>11),I=b+(L^(R|~x))+P[8]+1873313359&4294967295,b=R+(I<<6&4294967295|I>>>26),I=x+(R^(b|~L))+P[15]+4264355552&4294967295,x=b+(I<<10&4294967295|I>>>22),I=L+(b^(x|~R))+P[6]+2734768916&4294967295,L=x+(I<<15&4294967295|I>>>17),I=R+(x^(L|~b))+P[13]+1309151649&4294967295,R=L+(I<<21&4294967295|I>>>11),I=b+(L^(R|~x))+P[4]+4149444226&4294967295,b=R+(I<<6&4294967295|I>>>26),I=x+(R^(b|~L))+P[11]+3174756917&4294967295,x=b+(I<<10&4294967295|I>>>22),I=L+(b^(x|~R))+P[2]+718787259&4294967295,L=x+(I<<15&4294967295|I>>>17),I=R+(x^(L|~b))+P[9]+3951481745&4294967295,O.g[0]=O.g[0]+b&4294967295,O.g[1]=O.g[1]+(L+(I<<21&4294967295|I>>>11))&4294967295,O.g[2]=O.g[2]+L&4294967295,O.g[3]=O.g[3]+x&4294967295}r.prototype.u=function(O,b){b===void 0&&(b=O.length);for(var R=b-this.blockSize,P=this.B,L=this.h,x=0;x<b;){if(L==0)for(;x<=R;)a(this,O,x),x+=this.blockSize;if(typeof O=="string"){for(;x<b;)if(P[L++]=O.charCodeAt(x++),L==this.blockSize){a(this,P),L=0;break}}else for(;x<b;)if(P[L++]=O[x++],L==this.blockSize){a(this,P),L=0;break}}this.h=L,this.o+=b},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var b=1;b<O.length-8;++b)O[b]=0;var R=8*this.o;for(b=O.length-8;b<O.length;++b)O[b]=R&255,R/=256;for(this.u(O),O=Array(16),b=R=0;4>b;++b)for(var P=0;32>P;P+=8)O[R++]=this.g[b]>>>P&255;return O};function l(O,b){var R=d;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=b(O)}function c(O,b){this.h=b;for(var R=[],P=!0,L=O.length-1;0<=L;L--){var x=O[L]|0;P&&x==b||(R[L]=x,P=!1)}this.g=R}var d={};function m(O){return-128<=O&&128>O?l(O,function(b){return new c([b|0],0>b?-1:0)}):new c([O|0],0>O?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return T;if(0>O)return B(g(-O));for(var b=[],R=1,P=0;O>=R;P++)b[P]=O/R|0,R*=4294967296;return new c(b,0)}function _(O,b){if(O.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(O.charAt(0)=="-")return B(_(O.substring(1),b));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(b,8)),P=T,L=0;L<O.length;L+=8){var x=Math.min(8,O.length-L),I=parseInt(O.substring(L,L+x),b);8>x?(x=g(Math.pow(b,x)),P=P.j(x).add(g(I))):(P=P.j(R),P=P.add(g(I)))}return P}var T=m(0),w=m(1),N=m(16777216);i=c.prototype,i.m=function(){if(F(this))return-B(this).m();for(var O=0,b=1,R=0;R<this.g.length;R++){var P=this.i(R);O+=(0<=P?P:4294967296+P)*b,b*=4294967296}return O},i.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(k(this))return"0";if(F(this))return"-"+B(this).toString(O);for(var b=g(Math.pow(O,6)),R=this,P="";;){var L=fe(R,b).g;R=Q(R,L.j(b));var x=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=L,k(R))return x+P;for(;6>x.length;)x="0"+x;P=x+P}},i.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function k(O){if(O.h!=0)return!1;for(var b=0;b<O.g.length;b++)if(O.g[b]!=0)return!1;return!0}function F(O){return O.h==-1}i.l=function(O){return O=Q(this,O),F(O)?-1:k(O)?0:1};function B(O){for(var b=O.g.length,R=[],P=0;P<b;P++)R[P]=~O.g[P];return new c(R,~O.h).add(w)}i.abs=function(){return F(this)?B(this):this},i.add=function(O){for(var b=Math.max(this.g.length,O.g.length),R=[],P=0,L=0;L<=b;L++){var x=P+(this.i(L)&65535)+(O.i(L)&65535),I=(x>>>16)+(this.i(L)>>>16)+(O.i(L)>>>16);P=I>>>16,x&=65535,I&=65535,R[L]=I<<16|x}return new c(R,R[R.length-1]&-2147483648?-1:0)};function Q(O,b){return O.add(B(b))}i.j=function(O){if(k(this)||k(O))return T;if(F(this))return F(O)?B(this).j(B(O)):B(B(this).j(O));if(F(O))return B(this.j(B(O)));if(0>this.l(N)&&0>O.l(N))return g(this.m()*O.m());for(var b=this.g.length+O.g.length,R=[],P=0;P<2*b;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var L=0;L<O.g.length;L++){var x=this.i(P)>>>16,I=this.i(P)&65535,Ze=O.i(L)>>>16,it=O.i(L)&65535;R[2*P+2*L]+=I*it,ie(R,2*P+2*L),R[2*P+2*L+1]+=x*it,ie(R,2*P+2*L+1),R[2*P+2*L+1]+=I*Ze,ie(R,2*P+2*L+1),R[2*P+2*L+2]+=x*Ze,ie(R,2*P+2*L+2)}for(P=0;P<b;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=b;P<2*b;P++)R[P]=0;return new c(R,0)};function ie(O,b){for(;(O[b]&65535)!=O[b];)O[b+1]+=O[b]>>>16,O[b]&=65535,b++}function te(O,b){this.g=O,this.h=b}function fe(O,b){if(k(b))throw Error("division by zero");if(k(O))return new te(T,T);if(F(O))return b=fe(B(O),b),new te(B(b.g),B(b.h));if(F(b))return b=fe(O,B(b)),new te(B(b.g),b.h);if(30<O.g.length){if(F(O)||F(b))throw Error("slowDivide_ only works with positive integers.");for(var R=w,P=b;0>=P.l(O);)R=ue(R),P=ue(P);var L=Ee(R,1),x=Ee(P,1);for(P=Ee(P,2),R=Ee(R,2);!k(P);){var I=x.add(P);0>=I.l(O)&&(L=L.add(R),x=I),P=Ee(P,1),R=Ee(R,1)}return b=Q(O,L.j(b)),new te(L,b)}for(L=T;0<=O.l(b);){for(R=Math.max(1,Math.floor(O.m()/b.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),x=g(R),I=x.j(b);F(I)||0<I.l(O);)R-=P,x=g(R),I=x.j(b);k(x)&&(x=w),L=L.add(x),O=Q(O,I)}return new te(L,O)}i.A=function(O){return fe(this,O).h},i.and=function(O){for(var b=Math.max(this.g.length,O.g.length),R=[],P=0;P<b;P++)R[P]=this.i(P)&O.i(P);return new c(R,this.h&O.h)},i.or=function(O){for(var b=Math.max(this.g.length,O.g.length),R=[],P=0;P<b;P++)R[P]=this.i(P)|O.i(P);return new c(R,this.h|O.h)},i.xor=function(O){for(var b=Math.max(this.g.length,O.g.length),R=[],P=0;P<b;P++)R[P]=this.i(P)^O.i(P);return new c(R,this.h^O.h)};function ue(O){for(var b=O.g.length+1,R=[],P=0;P<b;P++)R[P]=O.i(P)<<1|O.i(P-1)>>>31;return new c(R,O.h)}function Ee(O,b){var R=b>>5;b%=32;for(var P=O.g.length-R,L=[],x=0;x<P;x++)L[x]=0<b?O.i(x+R)>>>b|O.i(x+R+1)<<32-b:O.i(x+R);return new c(L,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,vs=c}).apply(typeof S0<"u"?S0:typeof self<"u"?self:typeof window<"u"?window:{});var vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sS,Qu,aS,Nf,Og,oS,lS,uS;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof vf=="object"&&vf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var z=h[S];if(!(z in v))break e;v=v[z]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,S=!1,z={next:function(){if(!S&&v<h.length){var Y=v++;return{value:y(Y,h[Y]),done:!1}}return S=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,S),h.apply(y,z)}}return function(){return h.apply(y,arguments)}}function w(h,y,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,w.apply(null,arguments)}function N(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function k(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(S,z,Y){for(var le=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)le[ze-2]=arguments[ze];return y.prototype[z].apply(S,le)}}function F(h){const y=h.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function B(h,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(m(S)){const z=h.length||0,Y=S.length||0;h.length=z+Y;for(let le=0;le<Y;le++)h[z+le]=S[le]}else h.push(S)}}class Q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ie(h){return/^[\s\xa0]*$/.test(h)}function te(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function fe(h){return fe[" "](h),h}fe[" "]=function(){};var ue=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function Ee(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function O(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function b(h){const y={};for(const v in h)y[v]=h[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,y){let v,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(v in S)h[v]=S[v];for(let Y=0;Y<R.length;Y++)v=R[Y],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function L(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function x(h){d.setTimeout(()=>{throw h},0)}function I(){var h=Be;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Ze{constructor(){this.h=this.g=null}add(y,v){const S=it.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var it=new Q(()=>new W,h=>h.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,_e=!1,Be=new Ze,D=()=>{const h=d.Promise.resolve(void 0);oe=()=>{h.then(ne)}};var ne=()=>{for(var h;h=I();){try{h.h.call(h.g)}catch(v){x(v)}var y=it;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}_e=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function Ve(h,y){if(se.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ue){e:{try{fe(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ie[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ve.aa.h.call(this)}}k(Ve,se);var Ie={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var jt="closure_listenable_"+(1e6*Math.random()|0),ot=0;function pr(h,y,v,S,z){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=z,this.key=++ot,this.da=this.fa=!1}function Vi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function qr(h){this.src=h,this.g={},this.h=0}qr.prototype.add=function(h,y,v,S,z){var Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);var le=Ps(h,y,S,z);return-1<le?(y=h[le],v||(y.fa=!1)):(y=new pr(y,this.src,Y,!!S,z),y.fa=v,h.push(y)),y};function Ms(h,y){var v=y.type;if(v in h.g){var S=h.g[v],z=Array.prototype.indexOf.call(S,y,void 0),Y;(Y=0<=z)&&Array.prototype.splice.call(S,z,1),Y&&(Vi(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ps(h,y,v,S){for(var z=0;z<h.length;++z){var Y=h[z];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==S)return z}return-1}var ks="closure_lm_"+(1e6*Math.random()|0),Nl={};function Qc(h,y,v,S,z){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Qc(h,y[Y],v,S,z);return null}return v=$c(v),h&&h[jt]?h.K(y,v,g(S)?!!S.capture:!1,z):jn(h,y,v,!1,S,z)}function jn(h,y,v,S,z,Y){if(!y)throw Error("Invalid event type");var le=g(z)?!!z.capture:!!z,ze=Qa(h);if(ze||(h[ks]=ze=new qr(h)),v=ze.add(y,v,S,le,Y),v.proxy)return v;if(S=nm(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)Te||(z=le),z===void 0&&(z=!1),h.addEventListener(y.toString(),S,z);else if(h.attachEvent)h.attachEvent(Ls(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function nm(){function h(v){return y.call(h.src,h.listener,v)}const y=rm;return h}function Dl(h,y,v,S,z){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Dl(h,y[Y],v,S,z);else S=g(S)?!!S.capture:!!S,v=$c(v),h&&h[jt]?(h=h.i,y=String(y).toString(),y in h.g&&(Y=h.g[y],v=Ps(Y,v,S,z),-1<v&&(Vi(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete h.g[y],h.h--)))):h&&(h=Qa(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ps(y,v,S,z)),(v=-1<h?y[h]:null)&&Ka(v))}function Ka(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[jt])Ms(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(Ls(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Qa(y))?(Ms(v,h),v.h==0&&(v.src=null,y[ks]=null)):Vi(h)}}}function Ls(h){return h in Nl?Nl[h]:Nl[h]="on"+h}function rm(h,y){if(h.da)h=!0;else{y=new Ve(y,this);var v=h.listener,S=h.ha||h.src;h.fa&&Ka(h),h=v.call(S,y)}return h}function Qa(h){return h=h[ks],h instanceof qr?h:null}var Vl="__closure_events_fn_"+(1e9*Math.random()>>>0);function $c(h){return typeof h=="function"?h:(h[Vl]||(h[Vl]=function(y){return h.handleEvent(y)}),h[Vl])}function yt(){he.call(this),this.i=new qr(this),this.M=this,this.F=null}k(yt,he),yt.prototype[jt]=!0,yt.prototype.removeEventListener=function(h,y,v,S){Dl(this,h,y,v,S)};function $e(h,y){var v,S=h.F;if(S)for(v=[];S;S=S.F)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new se(y,h);else if(y instanceof se)y.target=y.target||h;else{var z=y;y=new se(S,h),P(y,z)}if(z=!0,v)for(var Y=v.length-1;0<=Y;Y--){var le=y.g=v[Y];z=In(le,S,!0,y)&&z}if(le=y.g=h,z=In(le,S,!0,y)&&z,z=In(le,S,!1,y)&&z,v)for(Y=0;Y<v.length;Y++)le=y.g=v[Y],z=In(le,S,!1,y)&&z}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],S=0;S<v.length;S++)Vi(v[S]);delete h.g[y],h.h--}}this.F=null},yt.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},yt.prototype.L=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function In(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,Y=0;Y<y.length;++Y){var le=y[Y];if(le&&!le.da&&le.capture==v){var ze=le.listener,Pt=le.ha||le.src;le.fa&&Ms(h.i,le),z=ze.call(Pt,S)!==!1&&z}}return z&&!S.defaultPrevented}function nn(h,y,v){if(typeof h=="function")v&&(h=w(h,v));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Yc(h){h.g=nn(()=>{h.g=null,h.i&&(h.i=!1,Yc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class im extends he{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Yc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(h){he.call(this),this.h=h,this.g={}}k(Us,he);var Bs=[];function zs(h){Ee(h.g,function(y,v){this.g.hasOwnProperty(v)&&Ka(y)},h),h.g={}}Us.prototype.N=function(){Us.aa.N.call(this),zs(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rr=d.JSON.stringify,$a=d.JSON.parse,js=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ol(){}Ol.prototype.h=null;function Ml(h){return h.h||(h.h=h.i())}function Pl(){}var Hr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fr(){se.call(this,"d")}k(Fr,se);function kl(){se.call(this,"c")}k(kl,se);var gr={},Ll=null;function Oi(){return Ll=Ll||new yt}gr.La="serverreachability";function Ya(h){se.call(this,gr.La,h)}k(Ya,se);function Mi(h){const y=Oi();$e(y,new Ya(y))}gr.STAT_EVENT="statevent";function Xc(h,y){se.call(this,gr.STAT_EVENT,h),this.stat=y}k(Xc,se);function ht(h){const y=Oi();$e(y,new Xc(y,h))}gr.Ma="timingevent";function Mt(h,y){se.call(this,gr.Ma,h),this.size=y}k(Mt,se);function Ct(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Ul(h,y,v,S,z,Y){h.info(function(){if(h.g)if(Y)for(var le="",ze=Y.split("&"),Pt=0;Pt<ze.length;Pt++){var je=ze[Pt].split("=");if(1<je.length){var Ht=je[0];je=je[1];var kt=Ht.split("_");le=2<=kt.length&&kt[1]=="type"?le+(Ht+"="+je+"&"):le+(Ht+"=redacted&")}}else le=null;else le=Y;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+y+`
`+v+`
`+le})}function sm(h,y,v,S,z,Y,le){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+y+`
`+v+`
`+Y+" "+le})}function Pi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+qs(h,v)+(S?" "+S:"")})}function Wc(h,y){h.info(function(){return"TIMEOUT: "+y})}qn.prototype.info=function(){};function qs(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var S=v[h];if(!(2>S.length)){var z=S[1];if(Array.isArray(z)&&!(1>z.length)){var Y=z[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return rr(v)}catch{return y}}var ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yr;function _r(){}k(_r,Ol),_r.prototype.g=function(){return new XMLHttpRequest},_r.prototype.i=function(){return{}},yr=new _r;function fn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.R=S||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var Bl={},Xa={};function ir(h,y,v){h.L=1,h.v=Qs(Rn(y)),h.m=v,h.P=!0,Kr(h,null)}function Kr(h,y){h.F=Date.now(),Hs(h),h.A=Rn(h.v);var v=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),Gl(v.i,"t",S),h.C=0,v=h.j.J,h.h=new Tt,h.g=dh(h.j,v?y:null,!h.m),0<h.O&&(h.M=new im(w(h.Y,h,h.g),h.O)),y=h.U,v=h.g,S=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(Bs[0]=z.toString()),z=Bs);for(var Y=0;Y<z.length;Y++){var le=Qc(v,z[Y],S||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Mi(),Ul(h.i,h.u,h.A,h.l,h.R,h.m)}fn.prototype.ca=function(h){h=h.target;const y=this.M;y&&Kn(h)==3?y.j():this.Y(h)},fn.prototype.Y=function(h){try{if(h==this.g)e:{const kt=Kn(this.g);var y=this.g.Ba();const ei=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||sh(this.g)))){this.J||kt!=4||y==7||(y==8||0>=ei?Mi(3):Mi(2)),Li(this);var v=this.g.Z();this.X=v;t:if(Jc(this)){var S=sh(this.g);h="";var z=S.length,Y=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xt(this),vr(this);var le="";break t}this.h.i=new d.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,h+=this.h.i.decode(S[y],{stream:!(Y&&y==z-1)});S.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,sm(this.i,this.u,this.A,this.l,this.R,kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Pt=this.g;if((ze=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(ze)){var je=ze;break t}}je=null}if(v=je)Pi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fs(this,v);else{this.o=!1,this.s=3,ht(12),Xt(this),vr(this);break e}}if(this.P){v=!0;let Wt;for(;!this.J&&this.C<le.length;)if(Wt=Zc(this,le),Wt==Xa){kt==4&&(this.s=4,ht(14),v=!1),Pi(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Bl){this.s=4,ht(15),Pi(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else Pi(this.i,this.l,Wt,null),Fs(this,Wt);if(Jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||le.length!=0||this.h.h||(this.s=1,ht(16),v=!1),this.o=this.o&&v,!v)Pi(this.i,this.l,le,"[Invalid Chunked Response]"),Xt(this),vr(this);else if(0<le.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),ta(Ht),Ht.M=!0,ht(11))}}else Pi(this.i,this.l,le,null),Fs(this,le);kt==4&&Xt(this),this.o&&!this.J&&(kt==4?ch(this.j,this):(this.o=!1,Hs(this)))}else cm(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Xt(this),vr(this)}}}catch{}finally{}};function Jc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Zc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?Xa:(v=Number(y.substring(v,S)),isNaN(v)?Bl:(S+=1,S+v>y.length?Xa:(y=y.slice(S,S+v),h.C=S+v,y)))}fn.prototype.cancel=function(){this.J=!0,Xt(this)};function Hs(h){h.S=Date.now()+h.I,eh(h,h.I)}function eh(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ct(w(h.ba,h),y)}function Li(h){h.B&&(d.clearTimeout(h.B),h.B=null)}fn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Wc(this.i,this.A),this.L!=2&&(Mi(),ht(17)),Xt(this),this.s=2,vr(this)):eh(this,this.S-h)};function vr(h){h.j.G==0||h.J||ch(h.j,h)}function Xt(h){Li(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,zs(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Fs(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||zl(v.h,h))){if(!h.K&&zl(v.h,h)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)lo(v),ao(v);else break e;Xl(v),ht(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ct(w(v.Za,v),6e3));if(1>=Ja(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Zr(v,11)}else if((h.K||v.g==h)&&lo(v),!ie(y))for(z=v.Da.g.parse(y),y=0;y<z.length;y++){let je=z[y];if(v.T=je[0],je=je[1],v.G==2)if(je[0]=="c"){v.K=je[1],v.ia=je[2];const Ht=je[3];Ht!=null&&(v.la=Ht,v.j.info("VER="+v.la));const kt=je[4];kt!=null&&(v.Aa=kt,v.j.info("SVER="+v.Aa));const ei=je[5];ei!=null&&typeof ei=="number"&&0<ei&&(S=1.5*ei,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Wt=h.g;if(Wt){const Ir=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ir){var Y=S.h;Y.g||Ir.indexOf("spdy")==-1&&Ir.indexOf("quic")==-1&&Ir.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Za(Y,Y.h),Y.h=null))}if(S.D){const Jl=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Jl&&(S.ya=Jl,et(S.I,S.D,Jl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var le=h;if(S.qa=fh(S,S.J?S.ia:null,S.W),le.K){dn(S.h,le);var ze=le,Pt=S.L;Pt&&(ze.I=Pt),ze.B&&(Li(ze),Hs(ze)),S.g=le}else lh(S);0<v.i.length&&oo(v)}else je[0]!="stop"&&je[0]!="close"||Zr(v,7);else v.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Zr(v,7):$l(v):je[0]!="noop"&&v.l&&v.l.ta(je),v.v=0)}}Mi(4)}catch{}}var th=class{constructor(h,y){this.g=h,this.map=y}};function Qr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ja(h){return h.h?1:h.g?h.g.size:0}function zl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Za(h,y){h.g?h.g.add(y):h.h=y}function dn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Qr.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function jl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return F(h.i)}function am(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,S=0;S<v;S++)y.push(h[S]);return y}y=[],v=0;for(S in h)y[v++]=h[S];return y}function eo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const S in h)y[v++]=S;return y}}}function ql(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=eo(h),S=am(h),z=S.length,Y=0;Y<z;Y++)y.call(void 0,S[Y],v&&v[Y],h)}var Gs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function om(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var S=h[v].indexOf("="),z=null;if(0<=S){var Y=h[v].substring(0,S);z=h[v].substring(S+1)}else Y=h[v];y(Y,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function xt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof xt){this.h=h.h,Ks(this,h.j),this.o=h.o,this.g=h.g,Ui(this,h.s),this.l=h.l;var y=h.i,v=new Yr;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),$r(this,v),this.m=h.m}else h&&(y=String(h).match(Gs))?(this.h=!1,Ks(this,y[1]||"",!0),this.o=Hn(y[2]||""),this.g=Hn(y[3]||"",!0),Ui(this,y[4]),this.l=Hn(y[5]||"",!0),$r(this,y[6]||"",!0),this.m=Hn(y[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}xt.prototype.toString=function(){var h=[],y=this.j;y&&h.push($s(y,Hl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push($s(y,Hl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push($s(v,v.charAt(0)=="/"?lm:Fl,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",$s(v,to)),h.join("")};function Rn(h){return new xt(h)}function Ks(h,y,v){h.j=v?Hn(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ui(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function $r(h,y,v){y instanceof Yr?(h.i=y,rh(h.i,h.h)):(v||(y=$s(y,um)),h.i=new Yr(y,h.h))}function et(h,y,v){h.i.set(y,v)}function Qs(h){return et(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Hn(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function $s(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,nh),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function nh(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Hl=/[#\/\?@]/g,Fl=/[#\?:]/g,lm=/[#\?]/g,um=/[#\?@]/g,to=/#/g;function Yr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Fn(h){h.g||(h.g=new Map,h.h=0,h.i&&om(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=Yr.prototype,i.add=function(h,y){Fn(this),this.i=null,h=Er(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Xr(h,y){Fn(h),y=Er(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Wr(h,y){return Fn(h),y=Er(h,y),h.g.has(y)}i.forEach=function(h,y){Fn(this),this.g.forEach(function(v,S){v.forEach(function(z){h.call(y,z,S,this)},this)},this)},i.na=function(){Fn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const z=h[S];for(let Y=0;Y<z.length;Y++)v.push(y[S])}return v},i.V=function(h){Fn(this);let y=[];if(typeof h=="string")Wr(this,h)&&(y=y.concat(this.g.get(Er(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},i.set=function(h,y){return Fn(this),this.i=null,h=Er(this,h),Wr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Gl(h,y,v){Xr(h,y),0<v.length&&(h.i=null,h.g.set(Er(h,y),F(v)),h.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const Y=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var z=Y;le[S]!==""&&(z+="="+encodeURIComponent(String(le[S]))),h.push(z)}}return this.i=h.join("&")};function Er(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function rh(h,y){y&&!h.j&&(Fn(h),h.i=null,h.g.forEach(function(v,S){var z=S.toLowerCase();S!=z&&(Xr(this,S),Gl(this,z,v))},h)),h.j=y}function Ys(h,y){const v=new qn;if(d.Image){const S=new Image;S.onload=N(Gn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=N(Gn,v,"TestLoadImage: error",!1,y,S),S.onabort=N(Gn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=N(Gn,v,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function sr(h,y){const v=new qn,S=new AbortController,z=setTimeout(()=>{S.abort(),Gn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(Y=>{clearTimeout(z),Y.ok?Gn(v,"TestPingServer: ok",!0,y):Gn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Gn(v,"TestPingServer: error",!1,y)})}function Gn(h,y,v,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(v)}catch{}}function Xs(){this.g=new js}function Tr(h,y,v){const S=v||"";try{ql(h,function(z,Y){let le=z;g(z)&&(le=rr(z)),y.push(S+Y+"="+encodeURIComponent(le))})}catch(z){throw y.push(S+"type="+encodeURIComponent("_badmap")),z}}function Bi(h){this.l=h.Ub||null,this.j=h.eb||!1}k(Bi,Ol),Bi.prototype.g=function(){return new Jr(this.l,this.j)},Bi.prototype.i=function(h){return function(){return h}}({});function Jr(h,y){yt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Jr,yt),i=Jr.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,wr(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ar(this):wr(this),this.readyState==3&&Kl(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,Ar(this))},i.Qa=function(h){this.g&&(this.response=h,Ar(this))},i.ga=function(){this.g&&Ar(this)};function Ar(h){h.readyState=4,h.l=null,h.j=null,h.v=null,wr(h)}i.setRequestHeader=function(h,y){this.u.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function wr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Jr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ql(h){let y="";return Ee(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function qt(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Ql(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):et(h,y,v))}function Qe(h){yt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Qe,yt);var no=/^https?$/i,Ws=["POST","PUT"];i=Qe.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yr.g(),this.v=this.o?Ml(this.o):Ml(yr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){ih(this,Y);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)v.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())v.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),z=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ws,y,void 0))||S||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,le]of v)this.g.setRequestHeader(Y,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Js(this),this.u=!0,this.g.send(h),this.u=!1}catch(Y){ih(this,Y)}};function ih(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,ro(h),Sr(h)}function ro(h){h.A||(h.A=!0,$e(h,"complete"),$e(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,$e(this,"complete"),$e(this,"abort"),Sr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sr(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?io(this):this.bb())},i.bb=function(){io(this)};function io(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Kn(h)!=4||h.Z()!=2)){if(h.u&&Kn(h)==4)nn(h.Ea,0,h);else if($e(h,"readystatechange"),Kn(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=le===0){var z=String(h.D).match(Gs)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),S=!no.test(z?z.toLowerCase():"")}v=S}if(v)$e(h,"complete"),$e(h,"success");else{h.m=6;try{var Y=2<Kn(h)?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.Z()+"]",ro(h)}}finally{Sr(h)}}}}function Sr(h,y){if(h.g){Js(h);const v=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||$e(h,"ready");try{v.onreadystatechange=S}catch{}}}function Js(h){h.I&&(d.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function Kn(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),$a(y)}};function sh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function cm(h){const y={};h=(h.g&&2<=Kn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(ie(h[S]))continue;var v=L(h[S]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[z]||[];y[z]=Y,Y.push(v)}O(y,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function so(h){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zs("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zs("baseRetryDelayMs",5e3,h),this.cb=Zs("retryDelaySeedMs",1e4,h),this.Wa=Zs("forwardChannelMaxRetries",2,h),this.wa=Zs("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Qr(h&&h.concurrentRequestLimit),this.Da=new Xs,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=so.prototype,i.la=8,i.G=1,i.connect=function(h,y,v,S){ht(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=fh(this,null,this.W),oo(this)};function $l(h){if(ah(h),h.G==3){var y=h.U++,v=Rn(h.I);if(et(v,"SID",h.K),et(v,"RID",y),et(v,"TYPE","terminate"),ea(h,v),y=new fn(h,h.j,y),y.L=2,y.v=Qs(Rn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=dh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Hs(y)}hh(h)}function ao(h){h.g&&(ta(h),h.g.cancel(),h.g=null)}function ah(h){ao(h),h.u&&(d.clearTimeout(h.u),h.u=null),lo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function oo(h){if(!Wa(h.h)&&!h.s){h.s=!0;var y=h.Ga;oe||D(),_e||(oe(),_e=!0),Be.add(y,h),h.B=0}}function hm(h,y){return Ja(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ct(w(h.Ga,h,y),Wl(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new fn(this,this.j,h);let Y=this.o;if(this.S&&(Y?(Y=b(Y),P(Y,this.S)):Y=this.S),this.m!==null||this.O||(z.H=Y,Y=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=oh(this,z,y),v=Rn(this.I),et(v,"RID",h),et(v,"CVER",22),this.D&&et(v,"X-HTTP-Session-Id",this.D),ea(this,v),Y&&(this.O?y="headers="+encodeURIComponent(String(Ql(Y)))+"&"+y:this.m&&qt(v,this.m,Y)),Za(this.h,z),this.Ua&&et(v,"TYPE","init"),this.P?(et(v,"$req",y),et(v,"SID","null"),z.T=!0,ir(z,v,null)):ir(z,v,y),this.G=2}}else this.G==3&&(h?Yl(this,h):this.i.length==0||Wa(this.h)||Yl(this))};function Yl(h,y){var v;y?v=y.l:v=h.U++;const S=Rn(h.I);et(S,"SID",h.K),et(S,"RID",v),et(S,"AID",h.T),ea(h,S),h.m&&h.o&&qt(S,h.m,h.o),v=new fn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=oh(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Za(h.h,v),ir(v,S,y)}function ea(h,y){h.H&&Ee(h.H,function(v,S){et(y,S,v)}),h.l&&ql({},function(v,S){et(y,S,v)})}function oh(h,y,v){v=Math.min(h.i.length,v);var S=h.l?w(h.l.Na,h.l,h):null;e:{var z=h.i;let Y=-1;for(;;){const le=["count="+v];Y==-1?0<v?(Y=z[0].g,le.push("ofs="+Y)):Y=0:le.push("ofs="+Y);let ze=!0;for(let Pt=0;Pt<v;Pt++){let je=z[Pt].g;const Ht=z[Pt].map;if(je-=Y,0>je)Y=Math.max(0,z[Pt].g-100),ze=!1;else try{Tr(Ht,le,"req"+je+"_")}catch{S&&S(Ht)}}if(ze){S=le.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,S}function lh(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;oe||D(),_e||(oe(),_e=!0),Be.add(y,h),h.v=0}}function Xl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ct(w(h.Fa,h),Wl(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,uh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ct(w(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),ao(this),uh(this))};function ta(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function uh(h){h.g=new fn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Rn(h.qa);et(y,"RID","rpc"),et(y,"SID",h.K),et(y,"AID",h.T),et(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&et(y,"TO",h.ja),et(y,"TYPE","xmlhttp"),ea(h,y),h.m&&h.o&&qt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Qs(Rn(y)),v.m=null,v.P=!0,Kr(v,h)}i.Za=function(){this.C!=null&&(this.C=null,ao(this),Xl(this),ht(19))};function lo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ch(h,y){var v=null;if(h.g==y){lo(h),ta(h),h.g=null;var S=2}else if(zl(h.h,y))v=y.D,dn(h.h,y),S=1;else return;if(h.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var z=h.B;S=Oi(),$e(S,new Mt(S,v)),oo(h)}else lh(h);else if(z=y.s,z==3||z==0&&0<y.X||!(S==1&&hm(h,y)||S==2&&Xl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),z){case 1:Zr(h,5);break;case 4:Zr(h,10);break;case 3:Zr(h,6);break;default:Zr(h,2)}}}function Wl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Zr(h,y){if(h.j.info("Error code "+y),y==2){var v=w(h.fb,h),S=h.Xa;const z=!S;S=new xt(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ks(S,"https"),Qs(S),z?Ys(S.toString(),v):sr(S.toString(),v)}else ht(2);h.G=0,h.l&&h.l.sa(y),hh(h),ah(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function hh(h){if(h.G=0,h.ka=[],h.l){const y=jl(h.h);(y.length!=0||h.i.length!=0)&&(B(h.ka,y),B(h.ka,h.i),h.h.i.length=0,F(h.i),h.i.length=0),h.l.ra()}}function fh(h,y,v){var S=v instanceof xt?Rn(v):new xt(v);if(S.g!="")y&&(S.g=y+"."+S.g),Ui(S,S.s);else{var z=d.location;S=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var Y=new xt(null);S&&Ks(Y,S),y&&(Y.g=y),z&&Ui(Y,z),v&&(Y.l=v),S=Y}return v=h.D,y=h.ya,v&&y&&et(S,v,y),et(S,"VER",h.la),ea(h,S),S}function dh(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Qe(new Bi({eb:v})):new Qe(h.pa),y.Ha(h.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function mh(){}i=mh.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function uo(){}uo.prototype.g=function(h,y){return new mn(h,y)};function mn(h,y){yt.call(this),this.g=new so(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!ie(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ie(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new br(this)}k(mn,yt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){$l(this.g)},mn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=rr(h),h=v);y.i.push(new th(y.Ya++,h)),y.G==3&&oo(y)},mn.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,mn.aa.N.call(this)};function ph(h){Fr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}k(ph,Fr);function gh(){kl.call(this),this.status=1}k(gh,kl);function br(h){this.g=h}k(br,mh),br.prototype.ua=function(){$e(this.g,"a")},br.prototype.ta=function(h){$e(this.g,new ph(h))},br.prototype.sa=function(h){$e(this.g,new gh)},br.prototype.ra=function(){$e(this.g,"b")},uo.prototype.createWebChannel=uo.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,uS=function(){return new uo},lS=function(){return Oi()},oS=gr,Og={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,Nf=ki,Gr.COMPLETE="complete",aS=Gr,Pl.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Qu=Pl,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,sS=Qe}).apply(typeof vf<"u"?vf:typeof self<"u"?self:typeof window<"u"?window:{});const b0="@firebase/firestore",I0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new Sy("@firebase/firestore");function Ko(){return Pa.logLevel}function re(i,...e){if(Pa.logLevel<=ke.DEBUG){const t=e.map(Ry);Pa.debug(`Firestore (${wl}): ${i}`,...t)}}function bt(i,...e){if(Pa.logLevel<=ke.ERROR){const t=e.map(Ry);Pa.error(`Firestore (${wl}): ${i}`,...t)}}function hc(i,...e){if(Pa.logLevel<=ke.WARN){const t=e.map(Ry);Pa.warn(`Firestore (${wl}): ${i}`,...t)}}function Ry(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,cS(i,r,t)}function cS(i,e,t){let r=`FIRESTORE (${wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bt(r),new Error(r)}function ge(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||cS(e,a,r)}function pe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}}class CN{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ai,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ai)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new IN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class xN{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new xN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class R0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);const r=l=>{l.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const a=l=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new R0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new R0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=VN(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Re(i,e){return i<e?-1:i>e?1:0}function Mg(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++){const a=i.charAt(r),l=e.charAt(r);if(a!==l)return pg(a)===pg(l)?Re(a,l):pg(a)?1:-1}return Re(i.length,e.length)}const ON=55296,MN=57343;function pg(i){const e=i.charCodeAt(0);return e>=ON&&e<=MN}function nl(i,e,t){return i.length===e.length&&i.every((r,a)=>t(r,e[a]))}function hS(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="__name__";class Vr{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&de(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Vr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Re(e.length,t.length)}static compareSegments(e,t){const r=Vr.isNumericId(e),a=Vr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Vr.extractNumericId(e).compare(Vr.extractNumericId(t)):Mg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class Ke extends Vr{construct(e,t,r){return new Ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new Ke(t)}static emptyPath(){return new Ke([])}}const PN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends Vr{construct(e,t,r){return new gt(e,t,r)}static isValidIdentifier(e){return PN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===C0}static keyField(){return new gt([C0])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ae(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ae(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ae(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new ae(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(t)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Ke.fromString(e))}static fromName(e){return new ce(Ke.fromString(e).popFirst(5))}static empty(){return new ce(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(i,e,t){if(!t)throw new ae(X.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function kN(i,e,t,r){if(e===!0&&r===!0)throw new ae(X.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function x0(i){if(!ce.isDocumentKey(i))throw new ae(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function N0(i){if(ce.isDocumentKey(i))throw new ae(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function dS(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Rd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":de(12329,{type:typeof i})}function kr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ae(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rd(i);throw new ae(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(i,e){const t={typeString:i};return e&&(t.value=e),t}function Oc(i,e){if(!dS(i))throw new ae(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ae(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=-62135596800,V0=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*V0);return new Ue(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<D0)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/V0}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-D0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:Ot("string",Ue._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Ue(0,0))}static max(){return new ve(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=-1;class Xf{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Pg(i){return i.fields.find(e=>e.kind===2)}function va(i){return i.fields.filter(e=>e.kind!==2)}Xf.UNKNOWN_ID=-1;class Df{constructor(e,t){this.fieldPath=e,this.kind=t}}class fc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fc(0,Un.min())}}function mS(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=ve.fromTimestamp(r===1e9?new Ue(t+1,0):new Ue(t,r));return new Un(a,ce.empty(),e)}function pS(i){return new Un(i.readTime,i.key,rl)}class Un{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Un(ve.min(),ce.empty(),rl)}static max(){return new Un(ve.max(),ce.empty(),rl)}}function xy(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(i.documentKey,e.documentKey),t!==0?t:Re(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(i){if(i.code!==X.FAILED_PRECONDITION||i.message!==gS)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):j.reject(t)}static resolve(e){return new j((t,r)=>{t(e)})}static reject(e){return new j((t,r)=>{r(e)})}static waitFor(e){return new j((t,r)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>r(m))}),c=!0,l===a&&t()})}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next(a=>a?j.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,l)=>{r.push(t.call(this,a,l))}),this.waitFor(r)}static mapArray(e,t){return new j((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next(_=>{c[g]=_,++d,d===l&&r(c)},_=>a(_))}})}static doWhile(e,t){return new j((r,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):r()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="SimpleDb";class Cd{static open(e,t,r,a){try{return new Cd(t,e.transaction(a,r))}catch(l){throw new Zu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ai,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Zu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Ny(r.target.error);this.S.reject(new Zu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(Pn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new UN(t)}}class Es{static delete(e){return re(Pn,"Removing database:",e),Ta(Gw().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Jw())return!1;if(Es.F())return!0;const e=Bt(),t=Es.M(e),r=0<t&&t<10,a=_S(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Es.M(Bt())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(re(Pn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new Zu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new ae(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ae(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Zu(e,c))},a.onupgradeneeded=l=>{re(Pn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next(()=>{re(Pn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=Cd.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next(g=>(d.C(),g)).catch(g=>(d.abort(g),j.reject(g))).toPromise();return m.catch(()=>{}),await d.D,m}catch(d){const m=d,g=m.name!=="FirebaseError"&&c<3;if(re(Pn,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _S(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class LN{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ta(this.U.delete())}}class Zu extends ae{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ns(i){return i.name==="IndexedDbTransactionError"}class UN{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(re(Pn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(re(Pn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ta(r)}add(e){return re(Pn,"ADD",this.store.name,e,e),Ta(this.store.add(e))}get(e){return Ta(this.store.get(e)).next(t=>(t===void 0&&(t=null),re(Pn,"GET",this.store.name,e,t),t))}delete(e){return re(Pn,"DELETE",this.store.name,e),Ta(this.store.delete(e))}count(){return re(Pn,"COUNT",this.store.name),Ta(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new j((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(r),c=[];return this.H(l,(d,m)=>{c.push(m)}).next(()=>c)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}})}Z(e,t){re(Pn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,(l,c,d)=>d.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}te(e){const t=this.cursor({});return new j((r,a)=>{t.onerror=l=>{const c=Ny(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}H(e,t){const r=[];return new j((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new LN(d),g=t(d.primaryKey,d.value,m);if(g instanceof j){const _=g.catch(T=>(m.done(),j.reject(T)));r.push(_)}m.isDone?a():m.G===null?d.continue():d.continue(m.G)}}).next(()=>j.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ta(i){return new j((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=Ny(r.target.error);t(a)}})}let O0=!1;function Ny(i){const e=Es.M(Bt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return O0||(O0=!0,setTimeout(()=>{throw r},0)),r}}return i}const ec="IndexBackfiller";class BN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){re(ec,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();re(ec,`Documents written: ${t}`)}catch(t){Ns(t)?re(ec,"Ignoring IndexedDB error during index backfill: ",t):await xs(t)}await this.re(6e4)})}}class zN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let a=t,l=!0;return j.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return re(ec,`Processing collection: ${c}`),this.oe(e,c,a).next(d=>{a-=d,r.add(c)});l=!1})).next(()=>t-a)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this._e(a,l)).next(d=>(re(ec,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}_e(e,t){let r=e;return t.changes.forEach((a,l)=>{const c=pS(l);xy(c,r)>0&&(r=c)}),new Un(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=-1;function xd(i){return i==null}function dc(i){return i===0&&1/i==-1/0}function vS(i){return typeof i=="number"&&Number.isInteger(i)&&!dc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="";function hn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=M0(e)),e=jN(i.get(t),e);return M0(e)}function jN(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case Wf:t+="";break;default:t+=l}}return t}function M0(i){return i+Wf+""}function Mr(i){const e=i.length;if(ge(e>=2,64408,{path:i}),e===2)return ge(i.charAt(0)===Wf&&i.charAt(1)==="",56145,{path:i}),Ke.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=i.indexOf(Wf,l);switch((c<0||c>t)&&de(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=i.substring(l,c),a+="\0";break;case"":a+=i.substring(l,c+1);break;default:de(61167,{path:i})}l=c+2}return new Ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="remoteDocuments",Mc="owner",Bo="owner",mc="mutationQueues",qN="userId",cr="mutations",P0="batchId",ba="userMutationsIndex",k0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(i,e){return[i,hn(e)]}function ES(i,e,t){return[i,hn(e),t]}const HN={},il="documentMutations",Jf="remoteDocumentsV14",FN=["prefixPath","collectionGroup","readTime","documentId"],Of="documentKeyIndex",GN=["prefixPath","collectionGroup","documentId"],TS="collectionGroupIndex",KN=["collectionGroup","readTime","prefixPath","documentId"],pc="remoteDocumentGlobal",kg="remoteDocumentGlobalKey",sl="targets",AS="queryTargetsIndex",QN=["canonicalId","targetId"],al="targetDocuments",$N=["targetId","path"],Dy="documentTargetsIndex",YN=["path","targetId"],Zf="targetGlobalKey",xa="targetGlobal",gc="collectionParents",XN=["collectionId","parent"],ol="clientMetadata",WN="clientId",Nd="bundles",JN="bundleId",Dd="namedQueries",ZN="name",Vy="indexConfiguration",eD="indexId",Lg="collectionGroupIndex",tD="collectionGroup",tc="indexState",nD=["indexId","uid"],wS="sequenceNumberIndex",rD=["uid","sequenceNumber"],nc="indexEntries",iD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SS="documentKeyIndex",sD=["indexId","uid","orderedDocumentKey"],Vd="documentOverlays",aD=["userId","collectionPath","documentId"],Ug="collectionPathOverlayIndex",oD=["userId","collectionPath","largestBatchId"],bS="collectionGroupOverlayIndex",lD=["userId","collectionGroup","largestBatchId"],Oy="globals",uD="name",IS=[mc,cr,il,Ea,sl,Mc,xa,al,ol,pc,gc,Nd,Dd],cD=[...IS,Vd],RS=[mc,cr,il,Jf,sl,Mc,xa,al,ol,pc,gc,Nd,Dd,Vd],CS=RS,My=[...CS,Vy,tc,nc],hD=My,xS=[...My,Oy],fD=xS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends yS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function zt(i,e){const t=pe(i);return Es.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ds(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function NS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ef(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ef(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ef(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ef(this.root,e,this.comparator,!0)}}class Ef{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??tn.RED,this.left=a??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new tn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return tn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new U0(this.data.getIterator())}getIteratorFrom(e){return new U0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Je(this.comparator);return t.data=e,t}}class U0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zo(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new Sn([])}unionWith(e){let t=new Je(gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Sn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new DS("Invalid base64 string: "+l):l}}(e);return new Rt(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new Rt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const dD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(i){if(ge(!!i,39018),typeof i=="string"){let e=0;const t=dD.exec(i);if(ge(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(i.seconds),nanos:dt(i.nanos)}}function dt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ii(i){return typeof i=="string"?Rt.fromBase64String(i):Rt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="server_timestamp",OS="__type__",MS="__previous_value__",PS="__local_write_time__";function Py(i){return(i?.mapValue?.fields||{})[OS]?.stringValue===VS}function Od(i){const e=i.mapValue.fields[MS];return Py(e)?Od(e):e}function yc(i){const e=bi(i.mapValue.fields[PS].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,t,r,a,l,c,d,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const ed="(default)";class ka{constructor(e,t){this.projectId=e,this.database=t||ed}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database===ed}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="__type__",kS="__max__",ps={mapValue:{fields:{__type__:{stringValue:kS}}}},Ly="__vector__",ll="value",Mf={nullValue:"NULL_VALUE"};function ws(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Py(i)?4:LS(i)?9007199254740991:Md(i)?10:11:de(28295,{value:i})}function zr(i,e){if(i===e)return!0;const t=ws(i);if(t!==ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return yc(i).isEqual(yc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=bi(a.timestampValue),d=bi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,l){return Ii(a.bytesValue).isEqual(Ii(l.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,l){return dt(a.geoPointValue.latitude)===dt(l.geoPointValue.latitude)&&dt(a.geoPointValue.longitude)===dt(l.geoPointValue.longitude)}(i,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return dt(a.integerValue)===dt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=dt(a.doubleValue),d=dt(l.doubleValue);return c===d?dc(c)===dc(d):isNaN(c)&&isNaN(d)}return!1}(i,e);case 9:return nl(i.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(L0(c)!==L0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!zr(c[m],d[m])))return!1;return!0}(i,e);default:return de(52216,{left:i})}}function _c(i,e){return(i.values||[]).find(t=>zr(t,e))!==void 0}function Ss(i,e){if(i===e)return 0;const t=ws(i),r=ws(e);if(t!==r)return Re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(i.booleanValue,e.booleanValue);case 2:return function(l,c){const d=dt(l.integerValue||l.doubleValue),m=dt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(i,e);case 3:return B0(i.timestampValue,e.timestampValue);case 4:return B0(yc(i),yc(e));case 5:return Mg(i.stringValue,e.stringValue);case 6:return function(l,c){const d=Ii(l),m=Ii(c);return d.compareTo(m)}(i.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=Re(d[g],m[g]);if(_!==0)return _}return Re(d.length,m.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Re(dt(l.latitude),dt(c.latitude));return d!==0?d:Re(dt(l.longitude),dt(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return z0(i.arrayValue,e.arrayValue);case 10:return function(l,c){const d=l.fields||{},m=c.fields||{},g=d[ll]?.arrayValue,_=m[ll]?.arrayValue,T=Re(g?.values?.length||0,_?.values?.length||0);return T!==0?T:z0(g,_)}(i.mapValue,e.mapValue);case 11:return function(l,c){if(l===ps.mapValue&&c===ps.mapValue)return 0;if(l===ps.mapValue)return 1;if(c===ps.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const w=Mg(m[T],_[T]);if(w!==0)return w;const N=Ss(d[m[T]],g[_[T]]);if(N!==0)return N}return Re(m.length,_.length)}(i.mapValue,e.mapValue);default:throw de(23264,{he:t})}}function B0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Re(i,e);const t=bi(i),r=bi(e),a=Re(t.seconds,r.seconds);return a!==0?a:Re(t.nanos,r.nanos)}function z0(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Ss(t[a],r[a]);if(l)return l}return Re(t.length,r.length)}function ul(i){return zg(i)}function zg(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=bi(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Ii(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ce.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=zg(l);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${zg(t.fields[c])}`;return a+"}"}(i.mapValue):de(61005,{value:i})}function Pf(i){switch(ws(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Od(i);return e?16+Pf(e):16;case 5:return 2*i.stringValue.length;case 6:return Ii(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+Pf(l),0)}(i.arrayValue);case 10:case 11:return function(r){let a=0;return Ds(r.fields,(l,c)=>{a+=l.length+Pf(c)}),a}(i.mapValue);default:throw de(13486,{value:i})}}function vc(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function jg(i){return!!i&&"integerValue"in i}function Ec(i){return!!i&&"arrayValue"in i}function j0(i){return!!i&&"nullValue"in i}function q0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function kf(i){return!!i&&"mapValue"in i}function Md(i){return(i?.mapValue?.fields||{})[ky]?.stringValue===Ly}function rc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ds(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rc(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rc(i.arrayValue.values[t]);return e}return{...i}}function LS(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===kS}const US={mapValue:{fields:{[ky]:{stringValue:Ly},[ll]:{arrayValue:{}}}}};function pD(i){return"nullValue"in i?Mf:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?vc(ka.empty(),ce.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Md(i)?US:{mapValue:{}}:de(35942,{value:i})}function gD(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?vc(ka.empty(),ce.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?US:"mapValue"in i?Md(i)?{mapValue:{}}:ps:de(61959,{value:i})}function H0(i,e){const t=Ss(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function F0(i,e){const t=Ss(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(t)}setAll(e){let t=gt.emptyPath(),r={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=rc(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];kf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ds(t,(a,l)=>e[a]=l);for(const a of r)delete e[a]}clone(){return new cn(rc(this.value))}}function BS(i){const e=[];return Ds(i.fields,(t,r)=>{const a=new gt([t]);if(kf(r)){const l=BS(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Et(e,0,ve.min(),ve.min(),ve.min(),cn.empty(),0)}static newFoundDocument(e,t,r,a){return new Et(e,1,t,ve.min(),r,a,0)}static newNoDocument(e,t){return new Et(e,2,t,ve.min(),ve.min(),cn.empty(),0)}static newUnknownDocument(e,t){return new Et(e,3,t,ve.min(),ve.min(),cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t){this.position=e,this.inclusive=t}}function G0(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?r=ce.comparator(ce.fromName(c.referenceValue),t.key):r=Ss(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function K0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!zr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function yD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{}class Le extends zS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _D(e,t,r):t==="array-contains"?new TD(e,r):t==="in"?new KS(e,r):t==="not-in"?new AD(e,r):t==="array-contains-any"?new wD(e,r):new Le(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vD(e,r):new ED(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ss(t,this.value)):t!==null&&ws(this.value)===ws(t)&&this.matchesComparison(Ss(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class We extends zS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new We(e,t)}matches(e){return hl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hl(i){return i.op==="and"}function qg(i){return i.op==="or"}function Uy(i){return jS(i)&&hl(i)}function jS(i){for(const e of i.filters)if(e instanceof We)return!1;return!0}function Hg(i){if(i instanceof Le)return i.field.canonicalString()+i.op.toString()+ul(i.value);if(Uy(i))return i.filters.map(e=>Hg(e)).join(",");{const e=i.filters.map(t=>Hg(t)).join(",");return`${i.op}(${e})`}}function qS(i,e){return i instanceof Le?function(r,a){return a instanceof Le&&r.op===a.op&&r.field.isEqual(a.field)&&zr(r.value,a.value)}(i,e):i instanceof We?function(r,a){return a instanceof We&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&qS(c,a.filters[d]),!0):!1}(i,e):void de(19439)}function HS(i,e){const t=i.filters.concat(e);return We.create(t,i.op)}function FS(i){return i instanceof Le?function(t){return`${t.field.canonicalString()} ${t.op} ${ul(t.value)}`}(i):i instanceof We?function(t){return t.op.toString()+" {"+t.getFilters().map(FS).join(" ,")+"}"}(i):"Filter"}class _D extends Le{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class vD extends Le{constructor(e,t){super(e,"in",t),this.keys=GS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ED extends Le{constructor(e,t){super(e,"not-in",t),this.keys=GS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GS(i,e){return(e.arrayValue?.values||[]).map(t=>ce.fromName(t.referenceValue))}class TD extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ec(t)&&_c(t.arrayValue,this.value)}}class KS extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_c(this.value.arrayValue,t)}}class AD extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_c(this.value.arrayValue,t)}}class wD extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ec(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_c(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Fg(i,e=null,t=[],r=[],a=null,l=null,c=null){return new SD(i,e,t,r,a,l,c)}function La(i){const e=pe(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Hg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ul(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ul(r)).join(",")),e.Te=t}return e.Te}function Pc(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!yD(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!qS(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!K0(i.startAt,e.startAt)&&K0(i.endAt,e.endAt)}function td(i){return ce.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function nd(i,e){return i.filters.filter(t=>t instanceof Le&&t.field.isEqual(e))}function Q0(i,e,t){let r=Mf,a=!0;for(const l of nd(i,e)){let c=Mf,d=!0;switch(l.op){case"<":case"<=":c=pD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=Mf}H0({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];H0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function $0(i,e,t){let r=ps,a=!0;for(const l of nd(i,e)){let c=ps,d=!0;switch(l.op){case">=":case">":c=gD(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ps}F0({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];F0({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QS(i,e,t,r,a,l,c,d){return new Sl(i,e,t,r,a,l,c,d)}function Pd(i){return new Sl(i)}function Y0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function $S(i){return i.collectionGroup!==null}function ic(i){const e=pe(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Je(gt.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Tc(l,r))}),t.has(gt.keyField().canonicalString())||e.Ie.push(new Tc(gt.keyField(),r))}return e.Ie}function Ln(i){const e=pe(i);return e.Ee||(e.Ee=bD(e,ic(i))),e.Ee}function bD(i,e){if(i.limitType==="F")return Fg(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Tc(a.field,l)});const t=i.endAt?new cl(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new cl(i.startAt.position,i.startAt.inclusive):null;return Fg(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Gg(i,e){const t=i.filters.concat([e]);return new Sl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function rd(i,e,t){return new Sl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function kd(i,e){return Pc(Ln(i),Ln(e))&&i.limitType===e.limitType}function YS(i){return`${La(Ln(i))}|lt:${i.limitType}`}function Qo(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(a=>FS(a)).join(", ")}]`),xd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(a=>ul(a)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(a=>ul(a)).join(",")),`Target(${r})`}(Ln(i))}; limitType=${i.limitType})`}function kc(i,e){return e.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ce.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(i,e)&&function(r,a){for(const l of ic(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(i,e)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(i,e)&&function(r,a){return!(r.startAt&&!function(c,d,m){const g=G0(c,d,m);return c.inclusive?g<=0:g<0}(r.startAt,ic(r),a)||r.endAt&&!function(c,d,m){const g=G0(c,d,m);return c.inclusive?g>=0:g>0}(r.endAt,ic(r),a))}(i,e)}function XS(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function WS(i){return(e,t)=>{let r=!1;for(const a of ic(i)){const l=ID(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function ID(i,e,t){const r=i.field.isKeyField()?ce.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Ss(m,g):de(42886)}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,(t,r)=>{for(const[a,l]of r)e(a,l)})}isEmpty(){return NS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new ct(ce.comparator);function kn(){return RD}const JS=new ct(ce.comparator);function $u(...i){let e=JS;for(const t of i)e=e.insert(t.key,t);return e}function ZS(i){let e=JS;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Pr(){return sc()}function eb(){return sc()}function sc(){return new xi(i=>i.toString(),(i,e)=>i.isEqual(e))}const CD=new ct(ce.comparator),xD=new Je(ce.comparator);function De(...i){let e=xD;for(const t of i)e=e.add(t);return e}const ND=new Je(Re);function By(){return ND}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function tb(i){return{integerValue:""+i}}function DD(i,e){return vS(e)?tb(e):zy(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(){this._=void 0}}function VD(i,e,t){return i instanceof Ac?function(a,l){const c={fields:{[OS]:{stringValue:VS},[PS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Py(l)&&(l=Od(l)),l&&(c.fields[MS]=l),{mapValue:c}}(t,e):i instanceof fl?rb(i,e):i instanceof dl?ib(i,e):function(a,l){const c=nb(a,l),d=X0(c)+X0(a.Ae);return jg(c)&&jg(a.Ae)?tb(d):zy(a.serializer,d)}(i,e)}function OD(i,e,t){return i instanceof fl?rb(i,e):i instanceof dl?ib(i,e):t}function nb(i,e){return i instanceof wc?function(r){return jg(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Ac extends Ld{}class fl extends Ld{constructor(e){super(),this.elements=e}}function rb(i,e){const t=sb(e);for(const r of i.elements)t.some(a=>zr(a,r))||t.push(r);return{arrayValue:{values:t}}}class dl extends Ld{constructor(e){super(),this.elements=e}}function ib(i,e){let t=sb(e);for(const r of i.elements)t=t.filter(a=>!zr(a,r));return{arrayValue:{values:t}}}class wc extends Ld{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function X0(i){return dt(i.integerValue||i.doubleValue)}function sb(i){return Ec(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,t){this.field=e,this.transform=t}}function PD(i,e){return i.field.isEqual(e.field)&&function(r,a){return r instanceof fl&&a instanceof fl||r instanceof dl&&a instanceof dl?nl(r.elements,a.elements,zr):r instanceof wc&&a instanceof wc?zr(r.Ae,a.Ae):r instanceof Ac&&a instanceof Ac}(i.transform,e.transform)}class kD{constructor(e,t){this.version=e,this.transformResults=t}}class yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Ud{}function ab(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Bd(i.key,yn.none()):new bl(i.key,i.data,yn.none());{const t=i.data,r=cn.empty();let a=new Je(gt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Ni(i.key,r,new Sn(a.toArray()),yn.none())}}function LD(i,e,t){i instanceof bl?function(a,l,c){const d=a.value.clone(),m=J0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(i,e,t):i instanceof Ni?function(a,l,c){if(!Lf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=J0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(ob(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(i,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function ac(i,e,t,r){return i instanceof bl?function(l,c,d,m){if(!Lf(l.precondition,c))return d;const g=l.value.clone(),_=Z0(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(i,e,t,r):i instanceof Ni?function(l,c,d,m){if(!Lf(l.precondition,c))return d;const g=Z0(l.fieldTransforms,m,c),_=c.data;return _.setAll(ob(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(i,e,t,r):function(l,c,d){return Lf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(i,e,t)}function UD(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=nb(r.transform,a||null);l!=null&&(t===null&&(t=cn.empty()),t.set(r.field,l))}return t||null}function W0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&nl(r,a,(l,c)=>PD(l,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class bl extends Ud{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ni extends Ud{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ob(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function J0(i,e,t){const r=new Map;ge(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,OD(c,d,t[a]))}return r}function Z0(i,e,t){const r=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);r.set(a.field,VD(l,c,e))}return r}class Bd extends Ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lb extends Ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&LD(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eb();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=ab(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),De())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,(t,r)=>W0(t,r))&&nl(this.baseMutations,e.baseMutations,(t,r)=>W0(t,r))}}class qy{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=function(){return CD}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new qy(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,He;function zD(i){switch(i){case X.OK:return de(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return de(15467,{code:i})}}function ub(i){if(i===void 0)return bt("GRPC error has no .code"),X.UNKNOWN;switch(i){case Vt.OK:return X.OK;case Vt.CANCELLED:return X.CANCELLED;case Vt.UNKNOWN:return X.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return X.INTERNAL;case Vt.UNAVAILABLE:return X.UNAVAILABLE;case Vt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Vt.NOT_FOUND:return X.NOT_FOUND;case Vt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Vt.ABORTED:return X.ABORTED;case Vt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Vt.DATA_LOSS:return X.DATA_LOSS;default:return de(39323,{code:i})}}(He=Vt||(Vt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new vs([4294967295,4294967295],0);function eA(i){const e=jD().encode(i),t=new iS;return t.update(e),new Uint8Array(t.digest())}function tA(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new vs([t,r],0),new vs([a,l],0)]}class Fy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yu(`Invalid padding: ${t}`);if(r<0)throw new Yu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Yu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vs.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(vs.fromNumber(r)));return a.compare(qD)===1&&(a=new vs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eA(e),[r,a]=tA(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Fy(l,a,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.ge===0)return;const t=eA(e),[r,a]=tA(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lc(ve.min(),a,new ct(Re),kn(),De())}}class Uc{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Uc(r,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class cb{constructor(e,t){this.targetId=e,this.Ce=t}}class hb{constructor(e,t,r=Rt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class nA{constructor(){this.ve=0,this.Fe=rA(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),t=De(),r=De();return this.Fe.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:de(38017,{changeType:l})}}),new Uc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=rA()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class HD{constructor(e){this.Ge=e,this.ze=new Map,this.je=kn(),this.Je=Tf(),this.He=Tf(),this.Ye=new ct(Re)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,a)=>{this.rt(a)&&t(a)})}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(td(l))if(r===0){const c=new ce(l.path);this.et(t,c,Et.newNoDocument(c,ve.min()))}else ge(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Ii(r).toUint8Array()}catch(m){if(m instanceof DS)return hc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Fy(c,a,l)}catch(m){return hc(m instanceof Yu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach(l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)}),a}Tt(e){const t=new Map;this.ze.forEach((l,c)=>{const d=this.ot(c);if(d){if(l.current&&td(d.target)){const m=new ce(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Et.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}});let r=De();this.He.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.je.forEach((l,c)=>c.setReadTime(e));const a=new Lc(e,t,this.Ye,this.je,r);return this.je=kn(),this.Je=Tf(),this.He=Tf(),this.Ye=new ct(Re),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nA,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Je(Re),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Je(Re),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nA),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Tf(){return new ct(ce.comparator)}function rA(){return new ct(ce.comparator)}const FD={asc:"ASCENDING",desc:"DESCENDING"},GD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KD={and:"AND",or:"OR"};class QD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kg(i,e){return i.useProto3Json||xd(e)?e:{value:e}}function ml(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function $D(i,e){return ml(i,e.toTimestamp())}function _n(i){return ge(!!i,49232),ve.fromTimestamp(function(t){const r=bi(t);return new Ue(r.seconds,r.nanos)}(i))}function Gy(i,e){return Qg(i,e).canonicalString()}function Qg(i,e){const t=function(a){return new Ke(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?t:t.child(e)}function db(i){const e=Ke.fromString(i);return ge(Ab(e),10190,{key:e.toString()}),e}function id(i,e){return Gy(i.databaseId,e.path)}function Na(i,e){const t=db(e);if(t.get(1)!==i.databaseId.projectId)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ae(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ce(gb(t))}function mb(i,e){return Gy(i.databaseId,e)}function pb(i){const e=db(i);return e.length===4?Ke.emptyPath():gb(e)}function $g(i){return new Ke(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function gb(i){return ge(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function iA(i,e,t){return{name:id(i,e),fields:t.value.mapValue.fields}}function YD(i,e,t){const r=Na(i,e.name),a=_n(e.updateTime),l=e.createTime?_n(e.createTime):ve.min(),c=new cn({mapValue:{fields:e.fields}}),d=Et.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function XD(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:de(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,_){return g.useProto3Json?(ge(_===void 0||typeof _=="string",58123),Rt.fromBase64String(_||"")):(ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Rt.fromUint8Array(_||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(g){const _=g.code===void 0?X.UNKNOWN:ub(g.code);return new ae(_,g.message||"")}(c);t=new hb(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Na(i,r.document.name),l=_n(r.document.updateTime),c=r.document.createTime?_n(r.document.createTime):ve.min(),d=new cn({mapValue:{fields:r.document.fields}}),m=Et.newFoundDocument(a,l,c,d),g=r.targetIds||[],_=r.removedTargetIds||[];t=new Uf(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Na(i,r.document),l=r.readTime?_n(r.readTime):ve.min(),c=Et.newNoDocument(a,l),d=r.removedTargetIds||[];t=new Uf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Na(i,r.document),l=r.removedTargetIds||[];t=new Uf([],l,a,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new BD(a,l),d=r.targetId;t=new cb(d,c)}}return t}function sd(i,e){let t;if(e instanceof bl)t={update:iA(i,e.key,e.value)};else if(e instanceof Bd)t={delete:id(i,e.key)};else if(e instanceof Ni)t={update:iA(i,e.key,e.data),updateMask:nV(e.fieldMask)};else{if(!(e instanceof lb))return de(16599,{Vt:e.type});t={verify:id(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Ac)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof fl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof dl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof wc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw de(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:$D(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:de(27497)}(i,e.precondition)),t}function Yg(i,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?yn.updateTime(_n(l.updateTime)):l.exists!==void 0?yn.exists(l.exists):yn.none()}(e.currentDocument):yn.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)ge(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),m=new Ac;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new fl(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new dl(_)}else"increment"in d?m=new wc(c,d.increment):de(16584,{proto:d});const g=gt.fromServerFormat(d.fieldPath);return new MD(g,m)}(i,a)):[];if(e.update){e.update.name;const a=Na(i,e.update.name),l=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const g=m.fieldPaths||[];return new Sn(g.map(_=>gt.fromServerFormat(_)))}(e.updateMask);return new Ni(a,l,c,t,r)}return new bl(a,l,t,r)}if(e.delete){const a=Na(i,e.delete);return new Bd(a,t)}if(e.verify){const a=Na(i,e.verify);return new lb(a,t)}return de(1463,{proto:e})}function WD(i,e){return i&&i.length>0?(ge(e!==void 0,14353),i.map(t=>function(a,l){let c=a.updateTime?_n(a.updateTime):_n(l);return c.isEqual(ve.min())&&(c=_n(l)),new kD(c,a.transformResults||[])}(t,e))):[]}function yb(i,e){return{documents:[mb(i,e.path)]}}function _b(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mb(i,a);const l=function(g){if(g.length!==0)return Tb(We.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(_=>function(w){return{field:$o(w.field),direction:ZD(w.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Kg(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:t,parent:a}}function vb(i){let e=pb(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){ge(r===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const w=Eb(T);return w instanceof We&&Uy(w)?w.getFilters():[w]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(w=>function(k){return new Tc(Yo(k.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(T){let w;return w=typeof T=="object"?T.value:T,xd(w)?null:w}(t.limit));let m=null;t.startAt&&(m=function(T){const w=!!T.before,N=T.values||[];return new cl(N,w)}(t.startAt));let g=null;return t.endAt&&(g=function(T){const w=!T.before,N=T.values||[];return new cl(N,w)}(t.endAt)),QS(e,a,c,l,d,"F",m,g)}function JD(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Eb(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yo(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Yo(t.unaryFilter.field);return Le.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Yo(t.unaryFilter.field);return Le.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yo(t.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(i):i.fieldFilter!==void 0?function(t){return Le.create(Yo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return We.create(t.compositeFilter.filters.map(r=>Eb(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(t.compositeFilter.op))}(i):de(30097,{filter:i})}function ZD(i){return FD[i]}function eV(i){return GD[i]}function tV(i){return KD[i]}function $o(i){return{fieldPath:i.canonicalString()}}function Yo(i){return gt.fromServerFormat(i.fieldPath)}function Tb(i){return i instanceof Le?function(t){if(t.op==="=="){if(q0(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NAN"}};if(j0(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(q0(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NAN"}};if(j0(t.value))return{unaryFilter:{field:$o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(t.field),op:eV(t.op),value:t.value}}}(i):i instanceof We?function(t){const r=t.getFilters().map(a=>Tb(a));return r.length===1?r[0]:{compositeFilter:{op:tV(t.op),filters:r}}}(i):de(54877,{filter:i})}function nV(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ab(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t,r,a,l=ve.min(),c=ve.min(),d=Rt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.yt=e}}function rV(i,e){let t;if(e.document)t=YD(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ce.fromSegments(e.noDocument.path),a=Ba(e.noDocument.readTime);t=Et.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return de(56709);{const r=ce.fromSegments(e.unknownDocument.path),a=Ba(e.unknownDocument.version);t=Et.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(a){const l=new Ue(a[0],a[1]);return ve.fromTimestamp(l)}(e.readTime)),t}function sA(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ad(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(l,c){return{name:id(l,c.key),fields:c.data.value.mapValue.fields,updateTime:ml(l,c.version.toTimestamp()),createTime:ml(l,c.createTime.toTimestamp())}}(i.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ua(e.version)};else{if(!e.isUnknownDocument())return de(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ua(e.version)}}return r}function ad(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ua(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ba(i){const e=new Ue(i.seconds,i.nanoseconds);return ve.fromTimestamp(e)}function Aa(i,e){const t=(e.baseMutations||[]).map(l=>Yg(i.yt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map(l=>Yg(i.yt,l)),a=Ue.fromMillis(e.localWriteTimeMs);return new jy(e.batchId,a,t,r)}function Xu(i){const e=Ba(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Ba(i.lastLimboFreeSnapshotVersion):ve.min();let r;return r=function(l){return l.documents!==void 0}(i.query)?function(l){const c=l.documents.length;return ge(c===1,1966,{count:c}),Ln(Pd(pb(l.documents[0])))}(i.query):function(l){return Ln(vb(l))}(i.query),new gi(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Rt.fromBase64String(i.resumeToken))}function Sb(i,e){const t=Ua(e.snapshotVersion),r=Ua(e.lastLimboFreeSnapshotVersion);let a;a=td(e.target)?yb(i.yt,e.target):_b(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:La(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function bb(i){const e=vb({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?rd(e,e.limit,"L"):e}function gg(i,e){return new Hy(e.largestBatchId,Yg(i.yt,e.overlayMutation))}function aA(i,e){const t=e.path.lastSegment();return[i,hn(e.path.popLast()),t]}function oA(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:Ua(r.readTime),documentKey:hn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{getBundleMetadata(e,t){return lA(e).get(t).next(r=>{if(r)return function(l){return{id:l.bundleId,createTime:Ba(l.createTime),version:l.version}}(r)})}saveBundleMetadata(e,t){return lA(e).put(function(a){return{bundleId:a.id,createTime:Ua(_n(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return uA(e).get(t).next(r=>{if(r)return function(l){return{name:l.name,query:bb(l.bundledQuery),readTime:Ba(l.readTime)}}(r)})}saveNamedQuery(e,t){return uA(e).put(function(a){return{name:a.name,readTime:Ua(_n(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function lA(i){return zt(i,Nd)}function uA(i){return zt(i,Dd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new zd(e,r)}getOverlay(e,t){return ju(e).get(aA(this.userId,t)).next(r=>r?gg(this.serializer,r):null)}getOverlays(e,t){const r=Pr();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((l,c)=>{const d=new Hy(t,c);a.push(this.St(e,d))}),j.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(c=>a.add(hn(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(ju(e).Z(Ug,d))}),j.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Pr(),l=hn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return ju(e).J(Ug,c).next(d=>{for(const m of d){const g=gg(this.serializer,m);a.set(g.getKey(),g)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const l=Pr();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ju(e).ee({index:bS,range:d},(m,g,_)=>{const T=gg(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()}).next(()=>l)}St(e,t){return ju(e).put(function(a,l,c){const[d,m,g]=aA(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:sd(a.yt,c.mutation)}}(this.serializer,this.userId,t))}}function ju(i){return zt(i,Vd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{bt(e){return zt(e,Oy)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Rt.fromUint8Array(r):Rt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(dt(e.integerValue));else if("doubleValue"in e){const r=dt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),dc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=bi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ii(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?LS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Md(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):de(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=ll,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(dt(l)),this.Ot(a,t),this.Ct(r[a],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ce.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}wa.Kt=new wa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=255;function aV(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function cA(i){const e=64-function(r){let a=0;for(let l=0;l<8;++l){const c=aV(255&r[l]);if(a+=c,c!==8)break}return a}(i);return Math.ceil(e/8)}class oV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),r=cA(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=cA(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(jo),this.sn(255)}_n(){this.an(jo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===jo?(this.sn(jo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===jo?(this.an(jo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class lV{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class uV{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class qu{constructor(){this.cn=new oV,this.ln=new lV(this.cn),this.hn=new uV(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t,r,a){this.Tn=e,this.In=t,this.En=r,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Sa(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Bf(this.En),directionalValue:Bf(this.dn),orderedDocumentKey:Bf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function os(i,e){let t=i.Tn-e.Tn;return t!==0?t:(t=hA(i.En,e.En),t!==0?t:(t=hA(i.dn,e.dn),t!==0?t:ce.comparator(i.In,e.In)))}function hA(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function Bf(i){return Ww()?function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r}(i):i}function fA(i){return typeof i!="string"?i:function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}(i)}class dA{constructor(e){this.mn=new Je((t,r)=>gt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ge(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Pg(e);if(t!==void 0&&!this.wn(t))return!1;const r=va(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.wn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.Sn(d,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new Je(gt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Df(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Df(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Df(r.field,r.dir==="asc"?0:1)));return new Xf(Xf.UNKNOWN_ID,this.collectionId,t,fc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(i){if(ge(i instanceof Le||i instanceof We,20012),i instanceof Le){if(i instanceof KS){const t=i.value.arrayValue?.values?.map(r=>Le.create(i.field,"==",r))||[];return We.create(t,"or")}return i}const e=i.filters.map(t=>Ib(t));return We.create(e,i.op)}function cV(i){if(i.getFilters().length===0)return[];const e=Jg(Ib(i));return ge(Rb(e),7391),Xg(e)||Wg(e)?[e]:e.getFilters()}function Xg(i){return i instanceof Le}function Wg(i){return i instanceof We&&Uy(i)}function Rb(i){return Xg(i)||Wg(i)||function(t){if(t instanceof We&&qg(t)){for(const r of t.getFilters())if(!Xg(r)&&!Wg(r))return!1;return!0}return!1}(i)}function Jg(i){if(ge(i instanceof Le||i instanceof We,34018),i instanceof Le)return i;if(i.filters.length===1)return Jg(i.filters[0]);const e=i.filters.map(r=>Jg(r));let t=We.create(e,i.op);return t=od(t),Rb(t)?t:(ge(t instanceof We,64498),ge(hl(t),40251),ge(t.filters.length>1,57927),t.filters.reduce((r,a)=>Ky(r,a)))}function Ky(i,e){let t;return ge(i instanceof Le||i instanceof We,38388),ge(e instanceof Le||e instanceof We,25473),t=i instanceof Le?e instanceof Le?function(a,l){return We.create([a,l],"and")}(i,e):mA(i,e):e instanceof Le?mA(e,i):function(a,l){if(ge(a.filters.length>0&&l.filters.length>0,48005),hl(a)&&hl(l))return HS(a,l.getFilters());const c=qg(a)?a:l,d=qg(a)?l:a,m=c.filters.map(g=>Ky(g,d));return We.create(m,"or")}(i,e),od(t)}function mA(i,e){if(hl(e))return HS(e,i.getFilters());{const t=e.filters.map(r=>Ky(i,r));return We.create(t,"or")}}function od(i){if(ge(i instanceof Le||i instanceof We,11850),i instanceof Le)return i;const e=i.getFilters();if(e.length===1)return od(e[0]);if(jS(i))return i;const t=e.map(a=>od(a)),r=[];return t.forEach(a=>{a instanceof Le?r.push(a):a instanceof We&&(a.op===i.op?r.push(...a.filters):r.push(a))}),r.length===1?r[0]:We.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.Cn=new Qy}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Un.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Un.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class Qy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Je(Ke.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Je(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="IndexedDbIndexManager",Af=new Uint8Array(0);class fV{constructor(e,t){this.databaseId=t,this.vn=new Qy,this.Fn=new xi(r=>La(r),(r,a)=>Pc(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const l={collectionId:r,parent:hn(a)};return gA(e).put(l)}return j.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[hS(t),""],!1,!0);return gA(e).J(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Mr(c.parent))}return r})}addFieldIndex(e,t){const r=Hu(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Ho(e);return l.next(d=>{c.put(oA(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=Hu(e),a=Ho(e),l=qo(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Hu(e),r=qo(e),a=Ho(e);return t.Z().next(()=>r.Z()).next(()=>a.Z())}createTargetIndexes(e,t){return j.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(a=>{if(a===0||a===1){const l=new dA(r).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const r=qo(e);let a=!0;const l=new Map;return j.forEach(this.Mn(t),c=>this.xn(e,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=De();const d=[];return j.forEach(l,(m,g)=>{re(pA,`Using index ${function(te){return`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map(fe=>`${fe.fieldPath}:${fe.kind}`).join(",")}`}(m)} to execute ${La(t)}`);const _=function(te,fe){const ue=Pg(fe);if(ue===void 0)return null;for(const Ee of nd(te,ue.fieldPath))switch(Ee.op){case"array-contains-any":return Ee.value.arrayValue.values||[];case"array-contains":return[Ee.value]}return null}(g,m),T=function(te,fe){const ue=new Map;for(const Ee of va(fe))for(const O of nd(te,Ee.fieldPath))switch(O.op){case"==":case"in":ue.set(Ee.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return ue.set(Ee.fieldPath.canonicalString(),O.value),Array.from(ue.values())}return null}(g,m),w=function(te,fe){const ue=[];let Ee=!0;for(const O of va(fe)){const b=O.kind===0?Q0(te,O.fieldPath,te.startAt):$0(te,O.fieldPath,te.startAt);ue.push(b.value),Ee&&(Ee=b.inclusive)}return new cl(ue,Ee)}(g,m),N=function(te,fe){const ue=[];let Ee=!0;for(const O of va(fe)){const b=O.kind===0?$0(te,O.fieldPath,te.endAt):Q0(te,O.fieldPath,te.endAt);ue.push(b.value),Ee&&(Ee=b.inclusive)}return new cl(ue,Ee)}(g,m),k=this.On(m,g,w),F=this.On(m,g,N),B=this.Nn(m,g,T),Q=this.Bn(m.indexId,_,k,w.inclusive,F,N.inclusive,B);return j.forEach(Q,ie=>r.Y(ie,t.limit).next(te=>{te.forEach(fe=>{const ue=ce.fromSegments(fe.documentKey);c.has(ue)||(c=c.add(ue),d.push(ue))})}))}).next(()=>d)}return j.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=cV(We.create(e.filters,"and")).map(r=>Fg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const w=t?this.Ln(t[T/g]):Af,N=this.kn(e,w,r[T%g],a),k=this.qn(e,w,l[T%g],c),F=d.map(B=>this.kn(e,w,B,!0));_.push(...this.createRange(N,k,F))}return _}kn(e,t,r,a){const l=new Sa(e,ce.empty(),t,r);return a?l:l.An()}qn(e,t,r,a){const l=new Sa(e,ce.empty(),t,r);return a?l.An():l}xn(e,t){const r=new dA(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const d of l)r.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const a=this.Mn(t);return j.forEach(a,l=>this.xn(e,l).next(c=>{c?r!==0&&c.fields.length<function(m){let g=new Je(gt.comparator),_=!1;for(const T of m.filters)for(const w of T.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?_=!0:g=g.add(w.field));for(const T of m.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(_?1:0)}(l)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&r===2?1:r)}Qn(e,t){const r=new qu;for(const a of va(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.Pn(a.kind);wa.Kt.Dt(l,c)}return r.un()}Ln(e){const t=new qu;return wa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new qu;return wa.Kt.Dt(vc(this.databaseId,t),r.Pn(function(l){const c=va(l);return c.length===0?0:c[c.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let a=[];a.push(new qu);let l=0;for(const c of va(e)){const d=r[l++];for(const m of a)if(this.Un(t,c.fieldPath)&&Ec(d))a=this.Kn(a,c,d);else{const g=m.Pn(c.kind);wa.Kt.Dt(d,g)}}return this.Wn(a)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new qu;m.seed(d.un()),wa.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find(r=>r instanceof Le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Hu(e),a=Ho(e);return(t?r.J(Lg,IDBKeyRange.bound(t,t)):r.J()).next(l=>{const c=[];return j.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(_,T){const w=T?new fc(T.sequenceNumber,new Un(Ba(T.readTime),new ce(Mr(T.documentKey)),T.largestBatchId)):fc.empty(),N=_.fields.map(([k,F])=>new Df(gt.fromServerFormat(k),F));return new Xf(_.indexId,_.collectionGroup,N,w)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Re(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=Hu(e),l=Ho(e);return this.Gn(e).next(c=>a.J(Lg,IDBKeyRange.bound(t,t)).next(d=>j.forEach(d,m=>l.put(oA(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,(a,l)=>{const c=r.get(a.collectionGroup);return(c?j.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(r.set(a.collectionGroup,d),j.forEach(d,m=>this.zn(e,a,m).next(g=>{const _=this.jn(l,m);return g.isEqual(_)?j.resolve():this.Jn(e,l,m,g,_)}))))})}Hn(e,t,r,a){return qo(e).put(a.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,a){return qo(e).delete(a.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const a=qo(e);let l=new Je(os);return a.ee({index:SS,range:IDBKeyRange.only([r.indexId,this.uid,Bf(this.$n(r,t))])},(c,d)=>{l=l.add(new Sa(r.indexId,t,fA(d.arrayValue),fA(d.directionalValue)))}).next(()=>l)}jn(e,t){let r=new Je(os);const a=this.Qn(t,e);if(a==null)return r;const l=Pg(t);if(l!=null){const c=e.data.field(l.fieldPath);if(Ec(c))for(const d of c.arrayValue.values||[])r=r.add(new Sa(t.indexId,e.key,this.Ln(d),a))}else r=r.add(new Sa(t.indexId,e.key,Af,a));return r}Jn(e,t,r,a,l){re(pA,"Updating index entries for document '%s'",t.key);const c=[];return function(m,g,_,T,w){const N=m.getIterator(),k=g.getIterator();let F=zo(N),B=zo(k);for(;F||B;){let Q=!1,ie=!1;if(F&&B){const te=_(F,B);te<0?ie=!0:te>0&&(Q=!0)}else F!=null?ie=!0:Q=!0;Q?(T(B),B=zo(k)):ie?(w(F),F=zo(N)):(F=zo(N),B=zo(k))}}(a,l,os,d=>{c.push(this.Hn(e,t,r,d))},d=>{c.push(this.Yn(e,t,r,d))}),j.waitFor(c)}Gn(e){let t=1;return Ho(e).ee({index:wS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>os(c,d)).filter((c,d,m)=>!d||os(c,m[d-1])!==0);const a=[];a.push(e);for(const c of r){const d=os(c,e),m=os(c,t);if(d===0)a[0]=e.An();else if(d>0&&m<0)a.push(c),a.push(c.An());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,Af,ce.empty()),m=a[c+1].Vn(this.uid,Af,ce.empty());l.push(IDBKeyRange.bound(d,m))}return l}Zn(e,t){return os(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yA)}getMinOffset(e,t){return j.mapArray(this.Mn(t),r=>this.xn(e,r).next(a=>a||de(44426))).next(yA)}}function gA(i){return zt(i,gc)}function qo(i){return zt(i,nc)}function Hu(i){return zt(i,Vy)}function Ho(i){return zt(i,tc)}function yA(i){ge(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;xy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Un(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cb=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(i,e,t){const r=i.store(cr),a=i.store(il),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.ee({range:c},(_,T,w)=>(d++,w.delete()));l.push(m.next(()=>{ge(d===1,47070,{batchId:t.batchId})}));const g=[];for(const _ of t.mutations){const T=ES(e,_.key.path,t.batchId);l.push(a.delete(T)),g.push(_.key)}return j.waitFor(l).next(()=>g)}function ld(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw de(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(Cb,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);class jd{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Xn={}}static wt(e,t,r,a){ge(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new jd(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ls(e).ee({index:ba,range:r},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const l=Xo(e),c=ls(e);return c.add({}).next(d=>{ge(typeof d=="number",49019);const m=new jy(d,t,r,a),g=function(N,k,F){const B=F.baseMutations.map(ie=>sd(N.yt,ie)),Q=F.mutations.map(ie=>sd(N.yt,ie));return{userId:k,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:B,mutations:Q}}(this.serializer,this.userId,m),_=[];let T=new Je((w,N)=>Re(w.canonicalString(),N.canonicalString()));for(const w of a){const N=ES(this.userId,w.key.path,d);T=T.add(w.key.path.popLast()),_.push(c.put(g)),_.push(l.put(N,HN))}return T.forEach(w=>{_.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Xn[d]=m.keys()}),j.waitFor(_).next(()=>m)})}lookupMutationBatch(e,t){return ls(e).get(t).next(r=>r?(ge(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Aa(this.serializer,r)):null)}er(e,t){return this.Xn[t]?j.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.Xn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ls(e).ee({index:ba,range:a},(c,d,m)=>{d.userId===this.userId&&(ge(d.batchId>=r,47524,{tr:r}),l=Aa(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ca;return ls(e).ee({index:ba,range:t,reverse:!0},(a,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ca],[this.userId,Number.POSITIVE_INFINITY]);return ls(e).J(ba,t).next(r=>r.map(a=>Aa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Xo(e).ee({range:a},(c,d,m)=>{const[g,_,T]=c,w=Mr(_);if(g===this.userId&&t.path.isEqual(w))return ls(e).get(T).next(N=>{if(!N)throw de(61480,{nr:c,batchId:T});ge(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:T}),l.push(Aa(this.serializer,N))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Re);const a=[];return t.forEach(l=>{const c=Vf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Xo(e).ee({range:d},(g,_,T)=>{const[w,N,k]=g,F=Mr(N);w===this.userId&&l.path.isEqual(F)?r=r.add(k):T.done()});a.push(m)}),j.waitFor(a).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Vf(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new Je(Re);return Xo(e).ee({range:c},(m,g,_)=>{const[T,w,N]=m,k=Mr(w);T===this.userId&&r.isPrefixOf(k)?k.length===a&&(d=d.add(N)):_.done()}).next(()=>this.rr(e,d))}rr(e,t){const r=[],a=[];return t.forEach(l=>{a.push(ls(e).get(l).next(c=>{if(c===null)throw de(35274,{batchId:l});ge(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(Aa(this.serializer,c))}))}),j.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return xb(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),j.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return Xo(e).ee({range:r},(l,c,d)=>{if(l[0]===this.userId){const m=Mr(l[1]);a.push(m)}else d.done()}).next(()=>{ge(a.length===0,56720,{sr:a.map(l=>l.canonicalString())})})})}containsKey(e,t){return Nb(e,this.userId,t)}_r(e){return Db(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ca,lastStreamToken:""})}}function Nb(i,e,t){const r=Vf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Xo(i).ee({range:l,X:!0},(d,m,g)=>{const[_,T,w]=d;_===e&&T===a&&(c=!0),g.done()}).next(()=>c)}function ls(i){return zt(i,cr)}function Xo(i){return zt(i,il)}function Db(i){return zt(i,mc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new za(0)}static cr(){return new za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new za(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>ve.fromTimestamp(new Ue(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fo(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(ge(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let a=0;const l=[];return Fo(e).ee((c,d)=>{const m=Xu(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>j.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Fo(e).ee((r,a)=>{const l=Xu(a);t(l)})}lr(e){return vA(e).get(Zf).next(t=>(ge(t!==null,2888),t))}hr(e,t){return vA(e).put(Zf,t)}Pr(e,t){return Fo(e).put(Sb(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=La(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Fo(e).ee({range:a,index:AS},(c,d,m)=>{const g=Xu(d);Pc(t,g.target)&&(l=g,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const a=[],l=hs(e);return t.forEach(c=>{const d=hn(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))}),j.waitFor(a)}removeMatchingKeys(e,t,r){const a=hs(e);return j.forEach(t,l=>{const c=hn(l.path);return j.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=hs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=hs(e);let l=De();return a.ee({range:r,X:!0},(c,d,m)=>{const g=Mr(c[1]),_=new ce(g);l=l.add(_)}).next(()=>l)}containsKey(e,t){const r=hn(t.path),a=IDBKeyRange.bound([r],[hS(r)],!1,!0);let l=0;return hs(e).ee({index:Dy,X:!0,range:a},([c,d],m,g)=>{c!==0&&(l++,g.done())}).next(()=>l>0)}At(e,t){return Fo(e).get(t).next(r=>r?Xu(r):null)}}function Fo(i){return zt(i,sl)}function vA(i){return zt(i,xa)}function hs(i){return zt(i,al)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="LruGarbageCollector",Vb=1048576;function TA([i,e],[t,r]){const a=Re(i,t);return a===0?Re(e,r):a}class mV{constructor(e){this.Ir=e,this.buffer=new Je(TA),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ob{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(EA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ns(t)?re(EA,"Ignoring IndexedDB error during garbage collection: ",t):await xs(t)}await this.Vr(3e5)})}}class pV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(wn.ce);const r=new mV(t);return this.mr.forEachTarget(e,a=>r.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>r.Ar(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(_A)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_A):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(g=Date.now(),Ko()<=ke.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function Mb(i,e){return new pV(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,t){this.db=e,this.garbageCollector=Mb(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,a)=>t(a))}addReference(e,t,r){return wf(e,r)}removeReference(e,t,r){return wf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return wf(e,t)}br(e,t){return function(a,l){let c=!1;return Db(a).te(d=>Nb(a,d,l).next(m=>(m&&(c=!0),j.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,(c,d)=>{if(d<=t){const m=this.br(e,c).next(g=>{if(!g)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,ve.min()),hs(e).delete(function(T){return[0,hn(T.path)]}(c))))});a.push(m)}}).next(()=>j.waitFor(a)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return wf(e,t)}Sr(e,t){const r=hs(e);let a,l=wn.ce;return r.ee({index:Dy},([c,d],{path:m,sequenceNumber:g})=>{c===0?(l!==wn.ce&&t(new ce(Mr(a)),l),l=g,a=m):l=wn.ce}).next(()=>{l!==wn.ce&&t(new ce(Mr(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wf(i,e){return hs(i).put(function(r,a){return{targetId:0,path:hn(r.path),sequenceNumber:a}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.changes=new xi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ya(e).put(r)}removeEntry(e,t,r){return ya(e).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],ad(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=Et.newInvalidDocument(t);return ya(e).ee({index:Of,range:IDBKeyRange.only(Fu(t))},(a,l)=>{r=this.Cr(t,l)}).next(()=>r)}vr(e,t){let r={size:0,document:Et.newInvalidDocument(t)};return ya(e).ee({index:Of,range:IDBKeyRange.only(Fu(t))},(a,l)=>{r={document:this.Cr(t,l),size:ld(l)}}).next(()=>r)}getEntries(e,t){let r=kn();return this.Fr(e,t,(a,l)=>{const c=this.Cr(a,l);r=r.insert(a,c)}).next(()=>r)}Mr(e,t){let r=kn(),a=new ct(ce.comparator);return this.Fr(e,t,(l,c)=>{const d=this.Cr(l,c);r=r.insert(l,d),a=a.insert(l,ld(c))}).next(()=>({documents:r,Or:a}))}Fr(e,t,r){if(t.isEmpty())return j.resolve();let a=new Je(SA);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Fu(a.first()),Fu(a.last())),c=a.getIterator();let d=c.getNext();return ya(e).ee({index:Of,range:l},(m,g,_)=>{const T=ce.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&SA(d,T)<0;)r(d,null),d=c.getNext();d&&d.isEqual(T)&&(r(d,g),d=c.hasNext()?c.getNext():null),d?_.j(Fu(d)):_.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),ad(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ya(e).J(IDBKeyRange.bound(d,m,!0)).next(g=>{l?.incrementDocumentReadCount(g.length);let _=kn();for(const T of g){const w=this.Cr(ce.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);w.isFoundDocument()&&(kc(t,w)||a.has(w.key))&&(_=_.insert(w.key,w))}return _})}getAllFromCollectionGroup(e,t,r,a){let l=kn();const c=wA(t,r),d=wA(t,Un.max());return ya(e).ee({index:TS,range:IDBKeyRange.bound(c,d,!0)},(m,g,_)=>{const T=this.Cr(ce.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(e){return new _V(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return AA(e).get(kg).next(t=>(ge(!!t,20021),t))}Dr(e,t){return AA(e).put(kg,t)}Cr(e,t){if(t){const r=rV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ve.min())))return r}return Et.newInvalidDocument(e)}}function kb(i){return new yV(i)}class _V extends Pb{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new xi(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new Je((l,c)=>Re(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=sA(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=ld(m);r+=g-d.size,t.push(this.Nr.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=sA(this.Nr.serializer,c.convertToNoDocument(ve.min()));t.push(this.Nr.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Nr.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:a})=>(a.forEach((l,c)=>{this.Br.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function AA(i){return zt(i,pc)}function ya(i){return zt(i,Jf)}function Fu(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wA(i,e){const t=e.documentKey.path.toArray();return[i,ad(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SA(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Re(t[l],r[l]),a)return a;return a=Re(t.length,r.length),a||(a=Re(t[t.length-2],r[r.length-2]),a||Re(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(r!==null&&ac(r.mutation,a,Sn.empty(),Ue.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,t,r=De()){const a=Pr();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(l=>{let c=$u();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Pr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,De()))}populateOverlays(e,t,r){const a=[];return r.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,a){let l=kn();const c=sc(),d=function(){return sc()}();return t.forEach((m,g)=>{const _=r.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Ni)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),ac(_.mutation,g,_.mutation.getFieldMask(),Ue.now())):c.set(g.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((g,_)=>c.set(g,_)),t.forEach((g,_)=>d.set(g,new vV(_,c.get(g)??null))),d))}recalculateAndSaveOverlays(e,t){const r=sc();let a=new ct((c,d)=>c-d),l=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let _=r.get(m)||Sn.empty();_=d.applyToLocalView(g,_),r.set(m,_);const T=(a.get(d.batchId)||De()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,T=eb();_.forEach(w=>{if(!l.has(w)){const N=ab(t.get(w),r.get(w));N!==null&&T.set(w,N),l=l.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return j.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,a){return function(c){return ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$S(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):j.resolve(Pr());let d=rl,m=l;return c.next(g=>j.forEach(g,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?j.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{m=m.insert(_,w)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,m,g,De())).next(_=>({batchId:d,changes:ZS(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next(r=>{let a=$u();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=$u();return this.indexManager.getCollectionParents(e,l).next(d=>j.forEach(d,m=>{const g=function(T,w){return new Sl(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next(_=>{_.forEach((T,w)=>{c=c.insert(T,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a))).next(c=>{l.forEach((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Et.newInvalidDocument(_)))});let d=$u();return c.forEach((m,g)=>{const _=l.get(m);_!==void 0&&ac(_.mutation,g,Sn.empty(),Ue.now()),kc(t,g)&&(d=d.insert(m,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:_n(a.createTime)}}(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(a){return{name:a.name,query:bb(a.bundledQuery),readTime:_n(a.readTime)}}(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.overlays=new ct(ce.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Pr();return j.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,l)=>{this.St(e,t,l)}),j.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const a=Pr(),l=t.length+1,c=new ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return j.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new ct((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let _=l.get(g.largestBatchId);_===null&&(_=Pr(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Pr(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=a)););return j.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Hy(t,r));let l=this.qr.get(t);l===void 0&&(l=De(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.Qr=new Je($t.$r),this.Ur=new Je($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new $t(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new $t(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new ce(new Ke([])),r=new $t(t,e),a=new $t(t,e+1),l=[];return this.Ur.forEachInRange([r,a],c=>{this.Gr(c),l.push(c.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ce(new Ke([])),r=new $t(t,e),a=new $t(t,e+1);let l=De();return this.Ur.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new $t(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ce.comparator(e.key,t.key)||Re(e.Yr,t.Yr)}static Kr(e,t){return Re(e.Yr,t.Yr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Je($t.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new jy(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new $t(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return j.resolve(c)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return j.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Ca:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $t(t,0),a=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],c=>{const d=this.Xr(c.Yr);l.push(d)}),j.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Re);return t.forEach(a=>{const l=new $t(a,0),c=new $t(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],d=>{r=r.add(d.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ce.isDocumentKey(l)||(l=l.child(""));const c=new $t(new ce(l),0);let d=new Je(Re);return this.Zr.forEachWhile(m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Yr)),!0)},c),j.resolve(this.ti(d))}ti(e){const t=[];return e.forEach(r=>{const a=this.Xr(r);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){ge(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(t.mutations,a=>{const l=new $t(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new $t(t,0),a=this.Zr.firstAfterOrEqual(r);return j.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.ri=e,this.docs=function(){return new ct(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let r=kn();return t.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Et.newInvalidDocument(a))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=kn();const c=t.path,d=new ce(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||xy(pS(_),r)<=0||(a.has(_.key)||kc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return j.resolve(l)}getAllFromCollectionGroup(e,t,r,a){de(9500)}ii(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bV(this)}getSize(e){return j.resolve(this.size)}}class bV extends Pb{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.persistence=e,this.si=new xi(t=>La(t),Pc),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new $y,this.targetCount=0,this.ai=za.ur()}forEachTarget(e,t){return this.si.forEach((r,a)=>t(a)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new za(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),j.waitFor(l).next(()=>a)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),j.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t){this.ui={},this.overlays={},this.ci=new wn(0),this.li=!1,this.li=!0,this.hi=new AV,this.referenceDelegate=e(this),this.Pi=new IV(this),this.indexManager=new hV,this.remoteDocumentCache=function(a){return new SV(a)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new wb(t),this.Ii=new EV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new wV(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);const a=new RV(this.ci.next());return this.referenceDelegate.Ei(),r(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ai(e,t){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class RV extends yS{constructor(e){super(),this.currentSequenceNumber=e}}class qd{constructor(e){this.persistence=e,this.Ri=new $y,this.Vi=null}static mi(e){return new qd(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(a=>this.fi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.fi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{const a=ce.fromPath(r);return this.gi(e,a).next(l=>{l||t.removeEntry(a,ve.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ud{constructor(e,t){this.persistence=e,this.pi=new xi(r=>hn(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=Mb(this,t)}static mi(e,t){return new ud(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return j.forEach(this.pi,(r,a)=>this.br(e,r,a).next(l=>l?j.resolve():t(a)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,c=>this.br(e,c,t).next(d=>{d||(r++,l.removeEntry(c,ve.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pf(e.data.value)),t}br(e,t,r){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return j.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Cd("createOrUpgrade",t);r<1&&a>=1&&(function(m){m.createObjectStore(Mc)}(e),function(m){m.createObjectStore(mc,{keyPath:qN}),m.createObjectStore(cr,{keyPath:P0,autoIncrement:!0}).createIndex(ba,k0,{unique:!0}),m.createObjectStore(il)}(e),bA(e),function(m){m.createObjectStore(Ea)}(e));let c=j.resolve();return r<3&&a>=3&&(r!==0&&(function(m){m.deleteObjectStore(al),m.deleteObjectStore(sl),m.deleteObjectStore(xa)}(e),bA(e)),c=c.next(()=>function(m){const g=m.store(xa),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return g.put(Zf,_)}(l))),r<4&&a>=4&&(r!==0&&(c=c.next(()=>function(m,g){return g.store(cr).J().next(T=>{m.deleteObjectStore(cr),m.createObjectStore(cr,{keyPath:P0,autoIncrement:!0}).createIndex(ba,k0,{unique:!0});const w=g.store(cr),N=T.map(k=>w.put(k));return j.waitFor(N)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore(ol,{keyPath:WN})})(e)})),r<5&&a>=5&&(c=c.next(()=>this.yi(l))),r<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(pc)}(e),this.wi(l)))),r<7&&a>=7&&(c=c.next(()=>this.Si(l))),r<8&&a>=8&&(c=c.next(()=>this.bi(e,l))),r<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&a>=10&&(c=c.next(()=>this.Di(l))),r<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(Nd,{keyPath:JN})})(e),function(m){m.createObjectStore(Dd,{keyPath:ZN})}(e)})),r<12&&a>=12&&(c=c.next(()=>{(function(m){const g=m.createObjectStore(Vd,{keyPath:aD});g.createIndex(Ug,oD,{unique:!1}),g.createIndex(bS,lD,{unique:!1})})(e)})),r<13&&a>=13&&(c=c.next(()=>function(m){const g=m.createObjectStore(Jf,{keyPath:FN});g.createIndex(Of,GN),g.createIndex(TS,KN)}(e)).next(()=>this.Ci(e,l)).next(()=>e.deleteObjectStore(Ea))),r<14&&a>=14&&(c=c.next(()=>this.Fi(e,l))),r<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(Vy,{keyPath:eD,autoIncrement:!0}).createIndex(Lg,tD,{unique:!1}),m.createObjectStore(tc,{keyPath:nD}).createIndex(wS,rD,{unique:!1}),m.createObjectStore(nc,{keyPath:iD}).createIndex(SS,sD,{unique:!1})}(e))),r<16&&a>=16&&(c=c.next(()=>{t.objectStore(tc).clear()}).next(()=>{t.objectStore(nc).clear()})),r<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(Oy,{keyPath:uD})})(e)})),r<18&&a>=18&&Ww()&&(c=c.next(()=>{t.objectStore(tc).clear()}).next(()=>{t.objectStore(nc).clear()})),c}wi(e){let t=0;return e.store(Ea).ee((r,a)=>{t+=ld(a)}).next(()=>{const r={byteSize:t};return e.store(pc).put(kg,r)})}yi(e){const t=e.store(mc),r=e.store(cr);return t.J().next(a=>j.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,Ca],[l.userId,l.lastAcknowledgedBatchId]);return r.J(ba,c).next(d=>j.forEach(d,m=>{ge(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=Aa(this.serializer,m);return xb(e,l.userId,g).next(()=>{})}))}))}Si(e){const t=e.store(al),r=e.store(Ea);return e.store(xa).get(Zf).next(a=>{const l=[];return r.ee((c,d)=>{const m=new Ke(c),g=function(T){return[0,hn(T)]}(m);l.push(t.get(g).next(_=>_?j.resolve():(T=>t.put({targetId:0,path:hn(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>j.waitFor(l))})}bi(e,t){e.createObjectStore(gc,{keyPath:XN});const r=t.store(gc),a=new Qy,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:hn(m)})}};return t.store(Ea).ee({X:!0},(c,d)=>{const m=new Ke(c);return l(m.popLast())}).next(()=>t.store(il).ee({X:!0},([c,d,m],g)=>{const _=Mr(d);return l(_.popLast())}))}Di(e){const t=e.store(sl);return t.ee((r,a)=>{const l=Xu(a),c=Sb(this.serializer,l);return t.put(c)})}Ci(e,t){const r=t.store(Ea),a=[];return r.ee((l,c)=>{const d=t.store(Jf),m=function(T){return T.document?new ce(Ke.fromString(T.document.name).popFirst(5)):T.noDocument?ce.fromSegments(T.noDocument.path):T.unknownDocument?ce.fromSegments(T.unknownDocument.path):de(36783)}(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))}).next(()=>j.waitFor(a))}Fi(e,t){const r=t.store(cr),a=kb(this.serializer),l=new Yy(qd.mi,this.serializer.yt);return r.J().next(c=>{const d=new Map;return c.forEach(m=>{let g=d.get(m.userId)??De();Aa(this.serializer,m).keys().forEach(_=>g=g.add(_)),d.set(m.userId,g)}),j.forEach(d,(m,g)=>{const _=new ln(g),T=zd.wt(this.serializer,_),w=l.getIndexManager(_),N=jd.wt(_,this.serializer,w,l.referenceDelegate);return new Lb(a,N,T,w).recalculateAndSaveOverlaysForDocumentKeys(new Bg(t,wn.ce),m).next()})})}}function bA(i){i.createObjectStore(al,{keyPath:$N}).createIndex(Dy,YN,{unique:!0}),i.createObjectStore(sl,{keyPath:"targetId"}).createIndex(AS,QN,{unique:!0}),i.createObjectStore(xa)}const us="IndexedDbPersistence",yg=18e5,_g=5e3,vg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xV="main";class Xy{constructor(e,t,r,a,l,c,d,m,g,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=l,this.window=c,this.document=d,this.xi=g,this.Oi=_,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!Xy.v())throw new ae(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gV(this,a),this.$i=t+xV,this.serializer=new wb(m),this.Ui=new Es(this.$i,this.Ni,new CV(this.serializer)),this.hi=new sV,this.Pi=new dV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kb(this.serializer),this.Ii=new iV,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&bt(us,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(X.FAILED_PRECONDITION,vg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new wn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ns(e))return re(us,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(us,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Gu(e).get(Bo).next(t=>j.resolve(this.es(t)))}ts(e){return Sf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,yg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=zt(t,ol);return r.J().next(a=>{const l=this.ss(a,yg),c=a.filter(d=>l.indexOf(d)===-1);return j.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):Gu(e).get(Bo).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,_g)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ae(X.FAILED_PRECONDITION,vg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sf(e).J().next(r=>this.ss(r,_g).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&re(us,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Mc,ol],e=>{const t=new Bg(e,wn.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Sf(e).J().next(t=>this.ss(t,yg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return jd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return zd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){re(us,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===18?fD:m===17?xS:m===16?hD:m===15?My:m===14?CS:m===13?RS:m===12?cD:m===11?IS:void de(60245)}(this.Ni);let c;return this.Ui.runTransaction(e,a,l,d=>(c=new Bg(d,this.ci?this.ci.next():wn.ce),t==="readwrite-primary"?this.Hi(c).next(m=>!!m||this.Yi(c)).next(m=>{if(!m)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ae(X.FAILED_PRECONDITION,gS);return r(c)}).next(m=>this.Xi(c).next(()=>m)):this.Is(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Is(e){return Gu(e).get(Bo).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,_g)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(X.FAILED_PRECONDITION,vg)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gu(e).put(Bo,t)}static v(){return Es.v()}Zi(e){const t=Gu(e);return t.get(Bo).next(r=>this.es(r)?(re(us,"Releasing primary lease."),t.delete(Bo)):j.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Xw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return re(us,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return bt(us,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gu(i){return zt(i,Mc)}function Sf(i){return zt(i,ol)}function Ub(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=De(),a=De();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Wy(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Xw()?8:_S(Bt())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ws(e,t,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new NV;return this.Ss(e,t,c).next(d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)})}).next(()=>l.result)}bs(e,t,r,a){return r.documentReadCount<this.fs?(Ko()<=ke.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Ko()<=ke.DEBUG&&re("QueryEngine","Query:",Qo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Ko()<=ke.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(t))):j.resolve())}ys(e,t){if(Y0(t))return j.resolve(null);let r=Ln(t);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=rd(t,null,"F"),r=Ln(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=De(...l);return this.ps.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(m=>{const g=this.Ds(t,d);return this.Cs(t,g,c,m.readTime)?this.ys(e,rd(t,null,"F")):this.vs(e,g,t,m)}))})))}ws(e,t,r,a){return Y0(t)||a.isEqual(ve.min())?j.resolve(null):this.ps.getDocuments(e,r).next(l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?j.resolve(null):(Ko()<=ke.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Qo(t)),this.vs(e,c,t,mS(a,rl)).next(d=>d))})}Ds(e,t){let r=new Je(WS(e));return t.forEach((a,l)=>{kc(e,l)&&(r=r.add(l))}),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return Ko()<=ke.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.ps.getDocumentsMatchingQuery(e,t,Un.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="LocalStore",DV=3e8;class VV{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new ct(Re),this.xs=new xi(l=>La(l),Pc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function zb(i,e,t,r){return new VV(i,e,t,r)}async function jb(i,e){const t=pe(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=De();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(r,m).next(g=>({Ls:g,removedBatchIds:c,addedBatchIds:d}))})})}function OV(i,e){const t=pe(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return function(d,m,g,_){const T=g.batch,w=T.keys();let N=j.resolve();return w.forEach(k=>{N=N.next(()=>_.getEntry(m,k)).next(F=>{const B=g.docVersions.get(k);ge(B!==null,48541),F.version.compareTo(B)<0&&(T.applyToRemoteDocument(F,g),F.isValidDocument()&&(F.setReadTime(g.commitVersion),_.addEntry(F)))})}),N.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=De();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function qb(i){const e=pe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function MV(i,e){const t=pe(i),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach((_,T)=>{const w=a.get(T);if(!w)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T)));let N=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?N=N.withResumeToken(Rt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):_.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(_.resumeToken,r)),a=a.insert(T,N),function(F,B,Q){return F.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=DV?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(w,N,_)&&d.push(t.Pi.updateTargetData(l,N))});let m=kn(),g=De();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(PV(l,c,e.documentUpdates).next(_=>{m=_.ks,g=_.qs})),!r.isEqual(ve.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next(T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(_)}return j.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(t.Ms=a,l))}function PV(i,e,t){let r=De(),a=De();return t.forEach(l=>r=r.add(l)),e.getEntries(i,r).next(l=>{let c=kn();return t.forEach((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(ve.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):re(Jy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)}),{ks:c,qs:a}})}function kV(i,e){const t=pe(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ca),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cd(i,e){const t=pe(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Pi.getTargetData(r,e).next(l=>l?(a=l,j.resolve(a)):t.Pi.allocateTargetId(r).next(c=>(a=new gi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function pl(i,e,t){const r=pe(i),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Ns(c))throw c;re(Jy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function Zg(i,e,t){const r=pe(i);let a=ve.min(),l=De();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,_){const T=pe(m),w=T.xs.get(_);return w!==void 0?j.resolve(T.Ms.get(w)):T.Pi.getTargetData(g,_)}(r,c,Ln(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:ve.min(),t?l:De())).next(d=>(Gb(r,XS(e),d),{documents:d,Qs:l})))}function Hb(i,e){const t=pe(i),r=pe(t.Pi),a=t.Ms.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>r.At(l,e).next(c=>c?c.target:null))}function Fb(i,e){const t=pe(i),r=t.Os.get(e)||ve.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Ns.getAllFromCollectionGroup(a,e,mS(r,rl),Number.MAX_SAFE_INTEGER)).then(a=>(Gb(t,e,a),a))}function Gb(i,e,t){let r=i.Os.get(e)||ve.min();t.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),i.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="firestore_clients";function IA(i,e){return`${Kb}_${i}_${e}`}const Qb="firestore_mutations";function RA(i,e,t){let r=`${Qb}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const $b="firestore_targets";function Eg(i,e){return`${$b}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="SharedClientState";class hd{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ws(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ae(a.error.code,a.error.message))),c?new hd(e,t,a.state,l):(bt(Or,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ae(r.error.code,r.error.message))),l?new oc(e,r.state,a):(bt(Or,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=By();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=vS(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new fd(e,l):(bt(Or,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Zy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Zy(t.clientId,t.onlineState):(bt(Or,`Failed to parse online state: ${e}`),null)}}class ey{constructor(){this.activeTargetIds=By()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tg{constructor(e,t,r,a,l){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ct(Re),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.eo=IA(this.persistenceKey,this.Js),this.no=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ey),this.ro=new RegExp(`^${Kb}_${c}_([^_]*)$`),this.io=new RegExp(`^${Qb}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${$b}_${c}_(\\d+)$`),this.oo=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this._o=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const a=this.getItem(IA(this.persistenceKey,r));if(a){const l=fd.Ws(r,a);l&&(this.Zs=this.Zs.insert(l.clientId,l))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Eg(this.persistenceKey,e));if(a){const l=oc.Ws(e,a);l&&(r=l.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Eg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Po(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return re(Or,"READ",e,t),t}setItem(e,t){re(Or,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){re(Or,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(re(Or,"EVENT",t.key,t.newValue),t.key===this.eo)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=function(l){let c=wn.ce;if(l!=null)try{const d=JSON.parse(l);ge(typeof d=="number",30636,{So:l}),c=d}catch(d){bt(Or,"Failed to read sequence number from WebStorage",d)}return c}(t.newValue);r!==wn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map(a=>this.syncEngine.Do(a)))}}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const a=new hd(this.currentUser,e,t,r),l=RA(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Gs())}Po(e){const t=RA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const a=Eg(this.persistenceKey,e),l=new oc(e,t,r);this.setItem(a,l.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return fd.Ws(r,t)}fo(e,t){const r=this.io.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return hd.Ws(new ln(l),a,t)}yo(e,t){const r=this.so.exec(e),a=Number(r[1]);return oc.Ws(a,t)}uo(e){return Zy.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);re(Or,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),a=this.lo(this.Zs),l=this.lo(r),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.Fo(c,d).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=By();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Yb{constructor(){this.Mo=new ey,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ey,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="ConnectivityMonitor";class xA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(CA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(CA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf=null;function ty(){return bf===null?bf=function(){return 268435456+Math.round(2147483648*Math.random())}():bf++,"0x"+bf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="RestConnection",UV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===ed?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=ty(),d=this.zo(e,t.toUriEncodedString());re(Ag,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(d),_=Tl(g);return this.Jo(e,d,m,r,_).then(T=>(re(Ag,`Received RPC '${e}' ${c}: `,T),T),T=>{throw hc(Ag,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",r),T})}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),r&&r.headers.forEach((a,l)=>e[l]=a)}zo(e,t){const r=UV[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class jV extends BV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=ty();return new Promise((d,m)=>{const g=new sS;g.setWithCredentials(!0),g.listenOnce(aS.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Nf.NO_ERROR:const T=g.getResponseJson();re(an,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Nf.TIMEOUT:re(an,`RPC '${e}' ${c} timed out`),m(new ae(X.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:const w=g.getStatus();if(re(an,`RPC '${e}' ${c} failed with status:`,w,"response text:",g.getResponseText()),w>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const k=N?.error;if(k&&k.status&&k.message){const F=function(Q){const ie=Q.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ie)>=0?ie:X.UNKNOWN}(k.status);m(new ae(F,k.message))}else m(new ae(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ae(X.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{re(an,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(a);re(an,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,r,15)})}T_(e,t,r){const a=ty(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=uS(),d=lS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const _=l.join("");re(an,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);this.I_(T);let w=!1,N=!1;const k=new zV({Yo:B=>{N?re(an,`Not sending because RPC '${e}' stream ${a} is closed:`,B):(w||(re(an,`Opening RPC '${e}' stream ${a} transport.`),T.open(),w=!0),re(an,`RPC '${e}' stream ${a} sending:`,B),T.send(B))},Zo:()=>T.close()}),F=(B,Q,ie)=>{B.listen(Q,te=>{try{ie(te)}catch(fe){setTimeout(()=>{throw fe},0)}})};return F(T,Qu.EventType.OPEN,()=>{N||(re(an,`RPC '${e}' stream ${a} transport opened.`),k.o_())}),F(T,Qu.EventType.CLOSE,()=>{N||(N=!0,re(an,`RPC '${e}' stream ${a} transport closed`),k.a_(),this.E_(T))}),F(T,Qu.EventType.ERROR,B=>{N||(N=!0,hc(an,`RPC '${e}' stream ${a} transport errored. Name:`,B.name,"Message:",B.message),k.a_(new ae(X.UNAVAILABLE,"The operation could not be completed")))}),F(T,Qu.EventType.MESSAGE,B=>{if(!N){const Q=B.data[0];ge(!!Q,16349);const ie=Q,te=ie?.error||ie[0]?.error;if(te){re(an,`RPC '${e}' stream ${a} received error:`,te);const fe=te.status;let ue=function(b){const R=Vt[b];if(R!==void 0)return ub(R)}(fe),Ee=te.message;ue===void 0&&(ue=X.INTERNAL,Ee="Unknown error status: "+fe+" with message "+te.message),N=!0,k.a_(new ae(ue,Ee)),T.close()}else re(an,`RPC '${e}' stream ${a} received:`,Q),k.u_(Q)}}),F(d,oS.STAT_EVENT,B=>{B.stat===Og.PROXY?re(an,`RPC '${e}' stream ${a} detected buffering proxy`):B.stat===Og.NOPROXY&&re(an,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){return typeof window<"u"?window:null}function zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(i){return new QD(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="PersistentStream";class Jb{constructor(e,t,r,a,l,c,d,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.D_===t&&this.G_(r,a)},r=>{e(()=>{const a=new ae(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{r(()=>this.z_(a))}),this.stream.onMessage(a=>{r(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(NA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(re(NA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qV extends Jb{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=XD(this.serializer,e),r=function(l){if(!("targetChange"in l))return ve.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ve.min():c.readTime?_n(c.readTime):ve.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=$g(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=td(m)?{documents:yb(l,m)}:{query:_b(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=fb(l,c.resumeToken);const g=Kg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(ve.min())>0){d.readTime=ml(l,c.snapshotVersion.toTimestamp());const g=Kg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const r=JD(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=$g(this.serializer),t.removeTarget=e,this.q_(t)}}class HV extends Jb{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=WD(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=$g(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sd(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{}class GV extends FV{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Go(e,Qg(t,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(X.UNKNOWN,l.toString())})}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Ho(e,Qg(t,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(X.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class KV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bt(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="RemoteStore";class QV{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(c=>{r.enqueueAndForget(async()=>{Ga(this)&&(re(ja,"Restarting streams for network reachability change."),await async function(m){const g=pe(m);g.Ea.add(4),await Bc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Fd(g)}(this))})}),this.Ra=new KV(r,a)}}async function Fd(i){if(Ga(i))for(const e of i.da)await e(!0)}async function Bc(i){for(const e of i.da)await e(!1)}function Gd(i,e){const t=pe(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),n_(t)?t_(t):Rl(t).O_()&&e_(t,e))}function gl(i,e){const t=pe(i),r=Rl(t);t.Ia.delete(e),r.O_()&&Zb(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ga(t)&&t.Ra.set("Unknown"))}function e_(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rl(i).Y_(e)}function Zb(i,e){i.Va.Ue(e),Rl(i).Z_(e)}function t_(i){i.Va=new HD({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Rl(i).start(),i.Ra.ua()}function n_(i){return Ga(i)&&!Rl(i).x_()&&i.Ia.size>0}function Ga(i){return pe(i).Ea.size===0}function e1(i){i.Va=void 0}async function $V(i){i.Ra.set("Online")}async function YV(i){i.Ia.forEach((e,t)=>{e_(i,e)})}async function XV(i,e){e1(i),n_(i)?(i.Ra.ha(e),t_(i)):i.Ra.set("Unknown")}async function WV(i,e,t){if(i.Ra.set("Online"),e instanceof hb&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))}(i,e)}catch(r){re(ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dd(i,r)}else if(e instanceof Uf?i.Va.Ze(e):e instanceof cb?i.Va.st(e):i.Va.tt(e),!t.isEqual(ve.min()))try{const r=await qb(i.localStore);t.compareTo(r)>=0&&await function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(Rt.EMPTY_BYTE_STRING,_.snapshotVersion)),Zb(l,m);const T=new gi(_.target,m,g,_.sequenceNumber);e_(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(r){re(ja,"Failed to raise snapshot:",r),await dd(i,r)}}async function dd(i,e,t){if(!Ns(e))throw e;i.Ea.add(1),await Bc(i),i.Ra.set("Offline"),t||(t=()=>qb(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{re(ja,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Fd(i)})}function t1(i,e){return e().catch(t=>dd(i,t,e))}async function Il(i){const e=pe(i),t=bs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ca;for(;JV(e);)try{const a=await kV(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,ZV(e,a)}catch(a){await dd(e,a)}n1(e)&&r1(e)}function JV(i){return Ga(i)&&i.Ta.length<10}function ZV(i,e){i.Ta.push(e);const t=bs(i);t.O_()&&t.X_&&t.ea(e.mutations)}function n1(i){return Ga(i)&&!bs(i).x_()&&i.Ta.length>0}function r1(i){bs(i).start()}async function eO(i){bs(i).ra()}async function tO(i){const e=bs(i);for(const t of i.Ta)e.ea(t.mutations)}async function nO(i,e,t){const r=i.Ta.shift(),a=qy.from(r,e,t);await t1(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await Il(i)}async function rO(i,e){e&&bs(i).X_&&await async function(r,a){if(function(c){return zD(c)&&c!==X.ABORTED}(a.code)){const l=r.Ta.shift();bs(r).B_(),await t1(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Il(r)}}(i,e),n1(i)&&r1(i)}async function DA(i,e){const t=pe(i);t.asyncQueue.verifyOperationInProgress(),re(ja,"RemoteStore received new credentials");const r=Ga(t);t.Ea.add(3),await Bc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fd(t)}async function ny(i,e){const t=pe(i);e?(t.Ea.delete(2),await Fd(t)):e||(t.Ea.add(2),await Bc(t),t.Ra.set("Unknown"))}function Rl(i){return i.ma||(i.ma=function(t,r,a){const l=pe(t);return l.sa(),new qV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{Xo:$V.bind(null,i),t_:YV.bind(null,i),r_:XV.bind(null,i),H_:WV.bind(null,i)}),i.da.push(async e=>{e?(i.ma.B_(),n_(i)?t_(i):i.Ra.set("Unknown")):(await i.ma.stop(),e1(i))})),i.ma}function bs(i){return i.fa||(i.fa=function(t,r,a){const l=pe(t);return l.sa(),new HV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:eO.bind(null,i),r_:rO.bind(null,i),ta:tO.bind(null,i),na:nO.bind(null,i)}),i.da.push(async e=>{e?(i.fa.B_(),await Il(i)):(await i.fa.stop(),i.Ta.length>0&&(re(ja,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))})),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new r_(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i_(i,e){if(bt("AsyncQueue",`${e}: ${i}`),Ns(i))return new ae(X.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=$u(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.ga=new ct(ce.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class yl{constructor(e,t,r,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new yl(e,t,Wo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class sO{constructor(){this.queries=OA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=pe(t),l=a.queries;a.queries=OA(),l.forEach((c,d)=>{for(const m of d.Sa)m.onError(r)})})(this,new ae(X.ABORTED,"Firestore shutting down"))}}function OA(){return new xi(i=>YS(i),kd)}async function i1(i,e){const t=pe(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new iO,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=i_(c,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&s_(t)}async function s1(i,e){const t=pe(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function aO(i,e){const t=pe(i);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(r=!0);c.wa=a}}r&&s_(t)}function oO(i,e,t){const r=pe(i),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function s_(i){i.Ca.forEach(e=>{e.next()})}var ry,MA;(MA=ry||(ry={})).Ma="default",MA.Cache="cache";class a1{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new yl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ry.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.key=e}}class l1{constructor(e){this.key=e}}class lO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=WS(e),this.tu=new Wo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new VA,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const w=a.get(_),N=kc(this.query,T)?T:null,k=!!w&&this.mutatedKeys.has(w.key),F=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let B=!1;w&&N?w.data.isEqual(N.data)?k!==F&&(r.track({type:3,doc:N}),B=!0):this.su(w,N)||(r.track({type:2,doc:N}),B=!0,(m&&this.eu(N,m)>0||g&&this.eu(N,g)<0)&&(d=!0)):!w&&N?(r.track({type:0,doc:N}),B=!0):w&&!N&&(r.track({type:1,doc:w}),B=!0,(m||g)&&(d=!0)),B&&(N?(c=c.add(N),l=F?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:c,iu:r,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort((_,T)=>function(N,k){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:B})}};return F(N)-F(k)}(_.type,T.type)||this.eu(_.doc,T.doc)),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new yl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new VA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new l1(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new o1(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=De();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cl="SyncEngine";class uO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cO{constructor(e){this.key=e,this.hu=!1}}class hO{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new xi(d=>YS(d),kd),this.Iu=new Map,this.Eu=new Set,this.du=new ct(ce.comparator),this.Au=new Map,this.Ru=new $y,this.Vu={},this.mu=new Map,this.fu=za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fO(i,e,t=!0){const r=Kd(i);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await u1(r,e,t,!0),a}async function dO(i,e){const t=Kd(i);await u1(t,e,!0,!1)}async function u1(i,e,t,r){const a=await cd(i.localStore,Ln(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await a_(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&Gd(i.remoteStore,a),d}async function a_(i,e,t,r,a){i.pu=(T,w,N)=>async function(F,B,Q,ie){let te=B.view.ru(Q);te.Cs&&(te=await Zg(F.localStore,B.query,!1).then(({documents:O})=>B.view.ru(O,te)));const fe=ie&&ie.targetChanges.get(B.targetId),ue=ie&&ie.targetMismatches.get(B.targetId)!=null,Ee=B.view.applyChanges(te,F.isPrimaryClient,fe,ue);return iy(F,B.targetId,Ee.au),Ee.snapshot}(i,T,w,N);const l=await Zg(i.localStore,e,!0),c=new lO(e,l.Qs),d=c.ru(l.documents),m=Uc.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),g=c.applyChanges(d,i.isPrimaryClient,m);iy(i,t,g.au);const _=new uO(e,t,c);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function mO(i,e,t){const r=pe(i),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter(c=>!kd(c,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await pl(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),t&&gl(r.remoteStore,a.targetId),_l(r,a.targetId)}).catch(xs)):(_l(r,a.targetId),await pl(r.localStore,a.targetId,!0))}async function pO(i,e){const t=pe(i),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gl(t.remoteStore,r.targetId))}async function gO(i,e,t){const r=c_(i);try{const a=await function(c,d){const m=pe(c),g=Ue.now(),_=d.reduce((N,k)=>N.add(k.key),De());let T,w;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>{let k=kn(),F=De();return m.Ns.getEntries(N,_).next(B=>{k=B,k.forEach((Q,ie)=>{ie.isValidDocument()||(F=F.add(Q))})}).next(()=>m.localDocuments.getOverlayedDocuments(N,k)).next(B=>{T=B;const Q=[];for(const ie of d){const te=UD(ie,T.get(ie.key).overlayedDocument);te!=null&&Q.push(new Ni(ie.key,te,BS(te.value.mapValue),yn.exists(!0)))}return m.mutationQueue.addMutationBatch(N,g,Q,d)}).next(B=>{w=B;const Q=B.applyToLocalDocumentSet(T,F);return m.documentOverlayCache.saveOverlays(N,B.batchId,Q)})}).then(()=>({batchId:w.batchId,changes:ZS(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new ct(Re)),g=g.insert(d,m),c.Vu[c.currentUser.toKey()]=g}(r,a.batchId,t),await Vs(r,a.changes),await Il(r.remoteStore)}catch(a){const l=i_(a,"Failed to persist write");t.reject(l)}}async function c1(i,e){const t=pe(i);try{const r=await MV(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Au.get(l);c&&(ge(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ge(c.hu,14607):a.removedDocuments.size>0&&(ge(c.hu,42227),c.hu=!1))}),await Vs(t,r,e)}catch(r){await xs(r)}}function PA(i,e,t){const r=pe(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=pe(c);m.onlineState=d;let g=!1;m.queries.forEach((_,T)=>{for(const w of T.Sa)w.va(d)&&(g=!0)}),g&&s_(m)}(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yO(i,e,t){const r=pe(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new ct(ce.comparator);c=c.insert(l,Et.newNoDocument(l,ve.min()));const d=De().add(l),m=new Lc(ve.min(),new Map,new ct(Re),c,d);await c1(r,m),r.du=r.du.remove(l),r.Au.delete(e),u_(r)}else await pl(r.localStore,e,!1).then(()=>_l(r,e,t)).catch(xs)}async function _O(i,e){const t=pe(i),r=e.batch.batchId;try{const a=await OV(t.localStore,e);l_(t,r,null),o_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Vs(t,a)}catch(a){await xs(a)}}async function vO(i,e,t){const r=pe(i);try{const a=await function(c,d){const m=pe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next(T=>(ge(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(g,T))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>m.localDocuments.getDocuments(g,_))})}(r.localStore,e);l_(r,e,t),o_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Vs(r,a)}catch(a){await xs(a)}}function o_(i,e){(i.mu.get(e)||[]).forEach(t=>{t.resolve()}),i.mu.delete(e)}function l_(i,e,t){const r=pe(i);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function _l(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),t&&i.Pu.yu(r,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach(r=>{i.Ru.containsKey(r)||h1(i,r)})}function h1(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(gl(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),u_(i))}function iy(i,e,t){for(const r of t)r instanceof o1?(i.Ru.addReference(r.key,e),EO(i,r)):r instanceof l1?(re(Cl,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||h1(i,r.key)):de(19791,{wu:r})}function EO(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Eu.has(r)||(re(Cl,"New document in limbo: "+t),i.Eu.add(r),u_(i))}function u_(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new ce(Ke.fromString(e)),r=i.fu.next();i.Au.set(r,new cO(t)),i.du=i.du.insert(t,r),Gd(i.remoteStore,new gi(Ln(Pd(t.path)),r,"TargetPurposeLimboResolution",wn.ce))}}async function Vs(i,e,t){const r=pe(i),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach((d,m)=>{c.push(r.pu(m,e,t).then(g=>{if((g||t)&&r.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){a.push(g);const _=Wy.As(m.targetId,g);l.push(_)}}))}),await Promise.all(c),r.Pu.H_(a),await async function(m,g){const _=pe(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>j.forEach(g,w=>j.forEach(w.Es,N=>_.persistence.referenceDelegate.addReference(T,w.targetId,N)).next(()=>j.forEach(w.ds,N=>_.persistence.referenceDelegate.removeReference(T,w.targetId,N)))))}catch(T){if(!Ns(T))throw T;re(Jy,"Failed to update sequence numbers: "+T)}for(const T of g){const w=T.targetId;if(!T.fromCache){const N=_.Ms.get(w),k=N.snapshotVersion,F=N.withLastLimboFreeSnapshotVersion(k);_.Ms=_.Ms.insert(w,F)}}}(r.localStore,l))}async function TO(i,e){const t=pe(i);if(!t.currentUser.isEqual(e)){re(Cl,"User change. New user:",e.toKey());const r=await jb(t.localStore,e);t.currentUser=e,function(l,c){l.mu.forEach(d=>{d.forEach(m=>{m.reject(new ae(X.CANCELLED,c))})}),l.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vs(t,r.Ls)}}function AO(i,e){const t=pe(i),r=t.Au.get(e);if(r&&r.hu)return De().add(r.key);{let a=De();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function wO(i,e){const t=pe(i),r=await Zg(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&iy(t,e.targetId,a.au),a}async function SO(i,e){const t=pe(i);return Fb(t.localStore,e).then(r=>Vs(t,r))}async function bO(i,e,t,r){const a=pe(i),l=await function(d,m){const g=pe(d),_=pe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.er(T,m).next(w=>w?g.localDocuments.getDocuments(T,w):j.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await Il(a.remoteStore):t==="acknowledged"||t==="rejected"?(l_(a,e,r||null),o_(a,e),function(d,m){pe(pe(d).mutationQueue).ir(m)}(a.localStore,e)):de(6720,"Unknown batchState",{Su:t}),await Vs(a,l)):re(Cl,"Cannot apply mutation batch with id: "+e)}async function IO(i,e){const t=pe(i);if(Kd(t),c_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await kA(t,r.toArray());t.gu=!0,await ny(t.remoteStore,!0);for(const l of a)Gd(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then(()=>(_l(t,c),pl(t.localStore,c,!0))),gl(t.remoteStore,c)}),await a,await kA(t,r),function(c){const d=pe(c);d.Au.forEach((m,g)=>{gl(d.remoteStore,g)}),d.Ru.Jr(),d.Au=new Map,d.du=new ct(ce.comparator)}(t),t.gu=!1,await ny(t.remoteStore,!1)}}async function kA(i,e,t){const r=pe(i),a=[],l=[];for(const c of e){let d;const m=r.Iu.get(c);if(m&&m.length!==0){d=await cd(r.localStore,Ln(m[0]));for(const g of m){const _=r.Tu.get(g),T=await wO(r,_);T.snapshot&&l.push(T.snapshot)}}else{const g=await Hb(r.localStore,c);d=await cd(r.localStore,g),await a_(r,f1(g),c,!1,d.resumeToken)}a.push(d)}return r.Pu.H_(l),a}function f1(i){return QS(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function RO(i){return function(t){return pe(pe(t).persistence).Ts()}(pe(i).localStore)}async function CO(i,e,t,r){const a=pe(i);if(a.gu)return void re(Cl,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await Fb(a.localStore,XS(l[0])),d=Lc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Rt.EMPTY_BYTE_STRING);await Vs(a,c,d);break}case"rejected":await pl(a.localStore,e,!0),_l(a,e,r);break;default:de(64155,t)}}async function xO(i,e,t){const r=Kd(i);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){re(Cl,"Adding an already active target "+a);continue}const l=await Hb(r.localStore,a),c=await cd(r.localStore,l);await a_(r,f1(l),c.targetId,!1,c.resumeToken),Gd(r.remoteStore,c)}for(const a of t)r.Iu.has(a)&&await pl(r.localStore,a,!1).then(()=>{gl(r.remoteStore,a),_l(r,a)}).catch(xs)}}function Kd(i){const e=pe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=c1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yO.bind(null,e),e.Pu.H_=aO.bind(null,e.eventManager),e.Pu.yu=oO.bind(null,e.eventManager),e}function c_(i){const e=pe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_O.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vO.bind(null,e),e}class Sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zb(this.persistence,new Bb,e.initialUser,this.serializer)}Cu(e){return new Yy(qd.mi,this.serializer)}Du(e){return new Yb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sc.provider={build:()=>new Sc};class NO extends Sc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ge(this.persistence.referenceDelegate instanceof ud,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Ob(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new Yy(r=>ud.mi(r,t),this.serializer)}}class d1 extends Sc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await c_(this.xu.syncEngine),await Il(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return zb(this.persistence,new Bb,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new Ob(r,e.asyncQueue,t)}Mu(e,t){const r=new zN(t,this.persistence);return new BN(e.asyncQueue,r)}Cu(e){const t=Ub(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new Xy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Xb(),zf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Yb}}class DO extends d1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Tg&&(this.sharedClientState.syncEngine={Co:bO.bind(null,t),vo:CO.bind(null,t),Fo:xO.bind(null,t),Ts:RO.bind(null,t),Do:SO.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await IO(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const t=Xb();if(!Tg.v(t))throw new ae(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ub(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class bc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>PA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TO.bind(null,this.syncEngine),await ny(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sO}()}createDatastore(e){const t=Hd(e.databaseInfo.databaseId),r=function(l){return new jV(l)}(e.databaseInfo);return function(l,c,d,m){return new GV(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,a,l,c,d){return new QV(r,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>PA(this.syncEngine,t,0),function(){return xA.v()?new xA:new LV}())}createSyncEngine(e,t){return function(a,l,c,d,m,g,_){const T=new hO(a,l,c,d,m,g);return _&&(T.gu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const r=pe(t);re(ja,"RemoteStore shutting down."),r.Ea.add(5),await Bc(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bc.provider={build:()=>new bc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class VO{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=ln.UNAUTHENTICATED,this.clientId=Cy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{re(Is,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(re(Is,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=i_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wg(i,e){i.asyncQueue.verifyOperationInProgress(),re(Is,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async a=>{r.isEqual(a)||(await jb(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function LA(i,e){i.asyncQueue.verifyOperationInProgress();const t=await OO(i);re(Is,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>DA(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,a)=>DA(e.remoteStore,a)),i._onlineComponents=e}async function OO(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re(Is,"Using user provided OfflineComponentProvider");try{await wg(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;hc("Error using user provided cache. Falling back to memory cache: "+t),await wg(i,new Sc)}}else re(Is,"Using default OfflineComponentProvider"),await wg(i,new NO(void 0));return i._offlineComponents}async function p1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re(Is,"Using user provided OnlineComponentProvider"),await LA(i,i._uninitializedComponentsProvider._online)):(re(Is,"Using default OnlineComponentProvider"),await LA(i,new bc))),i._onlineComponents}function MO(i){return p1(i).then(e=>e.syncEngine)}async function sy(i){const e=await p1(i),t=e.eventManager;return t.onListen=fO.bind(null,e.syncEngine),t.onUnlisten=mO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pO.bind(null,e.syncEngine),t}function PO(i,e,t={}){const r=new Ai;return i.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const _=new m1({next:w=>{_.Nu(),c.enqueueAndForget(()=>s1(l,T)),w.fromCache&&m.source==="server"?g.reject(new ae(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),T=new a1(d,_,{includeMetadataChanges:!0,qa:!0});return i1(l,T)}(await sy(i),i.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="firestore.googleapis.com",BA=!0;class zA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kO,this.ssl=BA}else this.host=e.host,this.ssl=e.ssl??BA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vb)throw new ae(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ae(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class h_{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RN;switch(r.type){case"firstParty":return new NN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=UA.get(t);r&&(re("ComponentProvider","Removing Datastore"),UA.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class It{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Oc(t,It._jsonSchema))return new It(e,r||null,new ce(Ke.fromString(t.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:Ot("string",It._jsonSchemaVersion),referencePath:Ot("string")};class Ts extends Di{constructor(e,t,r){super(e,t,Pd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new ce(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function Bn(i,e,...t){if(i=Yt(i),fS("collection","path",e),i instanceof h_){const r=Ke.fromString(e,...t);return N0(r),new Ts(i,null,r)}{if(!(i instanceof It||i instanceof Ts))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ke.fromString(e,...t));return N0(r),new Ts(i.firestore,null,r)}}function bn(i,e,...t){if(i=Yt(i),arguments.length===1&&(e=Cy.newId()),fS("doc","path",e),i instanceof h_){const r=Ke.fromString(e,...t);return x0(r),new It(i,null,new ce(r))}{if(!(i instanceof It||i instanceof Ts))throw new ae(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ke.fromString(e,...t));return x0(r),new It(i.firestore,i instanceof Ts?i.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="AsyncQueue";class qA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wb(this,"async_queue_retry"),this._c=()=>{const r=zf();r&&re(jA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=zf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=zf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ai;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ns(e))throw e;re(jA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,bt("INTERNAL UNHANDLED ERROR: ",HA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=r_.createAndSchedule(this,e,t,r,l=>this.hc(l));return this.tc.push(a),a}uc(){this.nc&&de(47125,{Pc:HA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function HA(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(i){return function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1}(i,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=-1;class qa extends h_{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new qA,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qA(e),this._firestoreClient=void 0,await e}}}function UO(i,e,t){t||(t=ed);const r=Iy(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Oa(l,e))return a;throw new ae(X.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ae(X.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vb)throw new ae(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Tl(e.host)&&$w(e.host),r.initialize({options:e,instanceIdentifier:t})}function f_(i){if(i._terminated)throw new ae(X.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||BO(i),i._firestoreClient}function BO(i){const e=i._freezeSettings(),t=function(a,l,c,d){return new mD(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,g1(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new VO(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tr(Rt.fromBase64String(e))}catch(t){throw new ae(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tr(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,tr._jsonSchema))return tr.fromBase64String(e.bytes)}}tr._jsonSchemaVersion="firestore/bytes/1.0",tr._jsonSchema={type:Ot("string",tr._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Lr._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,Lr._jsonSchema))return new Lr(e.latitude,e.longitude)}}Lr._jsonSchemaVersion="firestore/geoPoint/1.0",Lr._jsonSchema={type:Ot("string",Lr._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,Ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ur(e.vectorValues);throw new ae(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ur._jsonSchemaVersion="firestore/vectorValue/1.0",Ur._jsonSchema={type:Ot("string",Ur._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=/^__.*__$/;class jO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new bl(e,this.data,t,this.fieldTransforms)}}class y1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:i})}}class m_{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new m_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return md(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_1(this.Ac)&&zO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hd(e)}Cc(e,t,r,a=!1){return new m_({Ac:e,methodName:t,Dc:r,path:gt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function p_(i){const e=i._freezeSettings(),t=Hd(i._databaseId);return new qO(i._databaseId,!!e.ignoreUndefinedProperties,t)}function HO(i,e,t,r,a,l={}){const c=i.Cc(l.merge||l.mergeFields?2:0,e,t,a);g_("Data must be an object, but it was:",c,r);const d=v1(r,c);let m,g;if(l.merge)m=new Sn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const w=ay(e,T,t);if(!c.contains(w))throw new ae(X.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);T1(_,w)||_.push(w)}m=new Sn(_),g=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,g=c.fieldTransforms;return new jO(new cn(d),m,g)}class $d extends d_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function FO(i,e,t,r){const a=i.Cc(1,e,t);g_("Data must be an object, but it was:",a,r);const l=[],c=cn.empty();Ds(r,(m,g)=>{const _=y_(e,m,t);g=Yt(g);const T=a.yc(_);if(g instanceof $d)l.push(_);else{const w=zc(g,T);w!=null&&(l.push(_),c.set(_,w))}});const d=new Sn(l);return new y1(c,d,a.fieldTransforms)}function GO(i,e,t,r,a,l){const c=i.Cc(1,e,t),d=[ay(e,r,t)],m=[a];if(l.length%2!=0)throw new ae(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)d.push(ay(e,l[w])),m.push(l[w+1]);const g=[],_=cn.empty();for(let w=d.length-1;w>=0;--w)if(!T1(g,d[w])){const N=d[w];let k=m[w];k=Yt(k);const F=c.yc(N);if(k instanceof $d)g.push(N);else{const B=zc(k,F);B!=null&&(g.push(N),_.set(N,B))}}const T=new Sn(g);return new y1(_,T,c.fieldTransforms)}function KO(i,e,t,r=!1){return zc(t,i.Cc(r?4:3,e))}function zc(i,e){if(E1(i=Yt(i)))return g_("Unsupported field value:",e,i),v1(i,e);if(i instanceof d_)return function(r,a){if(!_1(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=zc(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(i,e)}return function(r,a){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DD(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Ue.fromDate(r);return{timestampValue:ml(a.serializer,l)}}if(r instanceof Ue){const l=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ml(a.serializer,l)}}if(r instanceof Lr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tr)return{bytesValue:fb(a.serializer,r._byteString)};if(r instanceof It){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ur)return function(c,d){return{mapValue:{fields:{[ky]:{stringValue:Ly},[ll]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return zy(d.serializer,g)})}}}}}}(r,a);throw a.Sc(`Unsupported field value: ${Rd(r)}`)}(i,e)}function v1(i,e){const t={};return NS(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(i,(r,a)=>{const l=zc(a,e.mc(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function E1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ue||i instanceof Lr||i instanceof tr||i instanceof It||i instanceof d_||i instanceof Ur)}function g_(i,e,t){if(!E1(t)||!dS(t)){const r=Rd(t);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function ay(i,e,t){if((e=Yt(e))instanceof Qd)return e._internalPath;if(typeof e=="string")return y_(i,e);throw md("Field path arguments must be of type string or ",i,!1,void 0,t)}const QO=new RegExp("[~\\*/\\[\\]]");function y_(i,e,t){if(e.search(QO)>=0)throw md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Qd(...e.split("."))._internalPath}catch{throw md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function md(i,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new ae(X.INVALID_ARGUMENT,d+i+m)}function T1(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $O(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $O extends A1{data(){return super.data()}}function Yd(i,e){return typeof e=="string"?y_(i,e):e instanceof Qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ae(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class __{}class v_ extends __{}function zn(i,e,...t){let r=[];e instanceof __&&r.push(e),r=r.concat(t),function(l){const c=l.filter(m=>m instanceof E_).length,d=l.filter(m=>m instanceof Xd).length;if(c>1||c>0&&d>0)throw new ae(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)i=a._apply(i);return i}class Xd extends v_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Xd(e,t,r)}_apply(e){const t=this._parse(e);return b1(e._query,t),new Di(e.firestore,e.converter,Gg(e._query,t))}_parse(e){const t=p_(e.firestore);return function(l,c,d,m,g,_,T){let w;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ae(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){KA(T,_);const k=[];for(const F of T)k.push(GA(m,l,F));w={arrayValue:{values:k}}}else w=GA(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||KA(T,_),w=KO(d,c,T,_==="in"||_==="not-in");return Le.create(g,_,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ut(i,e,t){const r=e,a=Yd("where",i);return Xd._create(a,r,t)}class E_ extends __{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new E_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:We.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)b1(c,m),c=Gg(c,m)}(e._query,t),new Di(e.firestore,e.converter,Gg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class T_ extends v_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new T_(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new ae(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ae(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tc(l,c)}(e._query,this._field,this._direction);return new Di(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Sl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function A_(i,e="asc"){const t=e,r=Yd("orderBy",i);return T_._create(r,t)}class w_ extends v_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new w_(e,t,r)}_apply(e){return new Di(e.firestore,e.converter,rd(e._query,this._limit,this._limitType))}}function S1(i){return w_._create("limit",i,"F")}function GA(i,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new ae(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$S(e)&&t.indexOf("/")!==-1)throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ke.fromString(t));if(!ce.isDocumentKey(r))throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vc(i,new ce(r))}if(t instanceof It)return vc(i,t._key);throw new ae(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(t)}.`)}function KA(i,e){if(!Array.isArray(i)||i.length===0)throw new ae(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b1(i,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YO{convertValue(e,t="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ds(e,(a,l)=>{r[a]=this.convertValue(l,t)}),r}convertVectorValue(e){const t=e.fields?.[ll].arrayValue?.values?.map(r=>dt(r.doubleValue));return new Ur(t)}convertGeoPoint(e){return new Lr(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Od(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){const t=bi(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ke.fromString(e);ge(Ab(r),9688,{name:e});const a=new ka(r.get(1),r.get(3)),l=new ce(r.popFirst(5));return a.isEqual(t)||bt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(i,e,t){let r;return r=i?i.toFirestore(e):e,r}class Wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Da extends A1{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Yd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Da._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Da._jsonSchemaVersion="firestore/documentSnapshot/1.0",Da._jsonSchema={type:Ot("string",Da._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class jf extends Da{data(e={}){return super.data(e)}}class Va{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Wu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jf(this._firestore,this._userDataWriter,r.key,r,new Wu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new jf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Wu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new jf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Wu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:WO(d.type),doc:m,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WO(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:i})}}Va._jsonSchemaVersion="firestore/querySnapshot/1.0",Va._jsonSchema={type:Ot("string",Va._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class S_ extends YO{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}function JO(i){i=kr(i,Di);const e=kr(i.firestore,qa),t=f_(e),r=new S_(e);return w1(i._query),PO(t,i._query).then(a=>new Va(e,r,i,a))}function jc(i,e,t){i=kr(i,It);const r=kr(i.firestore,qa),a=XO(i.converter,e);return I_(r,[HO(p_(r),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,yn.none())])}function b_(i,e,t,...r){i=kr(i,It);const a=kr(i.firestore,qa),l=p_(a);let c;return c=typeof(e=Yt(e))=="string"||e instanceof Qd?GO(l,"updateDoc",i._key,e,t,r):FO(l,"updateDoc",i._key,e),I_(a,[c.toMutation(i._key,yn.exists(!0))])}function Wd(i){return I_(kr(i.firestore,qa),[new Bd(i._key,yn.none())])}function I1(i,...e){i=Yt(i);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||FA(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(FA(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,c,d;if(i instanceof It)c=kr(i.firestore,qa),d=Pd(i._key.path),l={next:m=>{e[r]&&e[r](ZO(c,i,m))},error:e[r+1],complete:e[r+2]};else{const m=kr(i,Di);c=kr(m.firestore,qa),d=m._query;const g=new S_(c);l={next:_=>{e[r]&&e[r](new Va(c,g,m,_))},error:e[r+1],complete:e[r+2]},w1(i._query)}return function(g,_,T,w){const N=new m1(w),k=new a1(_,N,T);return g.asyncQueue.enqueueAndForget(async()=>i1(await sy(g),k)),()=>{N.Nu(),g.asyncQueue.enqueueAndForget(async()=>s1(await sy(g),k))}}(f_(c),d,a,l)}function I_(i,e){return function(r,a){const l=new Ai;return r.asyncQueue.enqueueAndForget(async()=>gO(await MO(r),a,l)),l.promise}(f_(i),e)}function ZO(i,e,t){const r=t.docs.get(e._key),a=new S_(i);return new Da(i,a,e._key,r,new Wu(t.hasPendingWrites,t.fromCache),e.converter)}class eM{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=iM(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function tM(i){return new eM(i)}class nM{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=bc.provider,this._offlineComponentProvider={build:t=>new d1(t,e?.cacheSizeBytes,this.forceOwnership)}}}class rM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=bc.provider,this._offlineComponentProvider={build:t=>new DO(t,e?.cacheSizeBytes)}}}function iM(i){return new nM(i?.forceOwnership)}function sM(){return new rM}(function(e,t=!0){(function(a){wl=a})(Al),tl(new Ma("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new qa(new CN(r.getProvider("auth-internal")),new DN(c,r.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ae(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(g.options.projectId,_)}(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),_s(b0,I0,e),_s(b0,I0,"esm2020")})();var aM="firebase",oM="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(aM,oM,"app");const lM={apiKey:"AIzaSyDh-1aOWA8DU2uacjCxJsMCI3p2v-1kJFg",authDomain:"gym-tracker-e77e5.firebaseapp.com",projectId:"gym-tracker-e77e5",storageBucket:"gym-tracker-e77e5.firebasestorage.app",messagingSenderId:"778763865283",appId:"1:778763865283:web:165931321e0b1e6e846676"},R1=tS(lM),at=UO(R1,{localCache:tM({cacheSizeBytes:LO,tabManager:sM()})});async function qc(i){return(await JO(i)).docs.map(t=>({id:t.id,...t.data()}))}function Os({query:i,enabled:e,deps:t}){const[r,a]=$.useState([]);return $.useEffect(()=>{if(e===!1){a([]);return}const l=i(),c=I1(l,d=>{const m=d.docs.map(g=>({...g.data(),id:g.id}));a(m)});return()=>c()},t),r}function C1({query:i,enabled:e,deps:t}){const[r,a]=$.useState(void 0);return $.useEffect(()=>{if(e===!1){a(void 0);return}const l=i(),c=I1(l,d=>{const m=d.data();a({...m,id:d.id})});return()=>c()},t),r}const QA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function yi(){const i=new Uint8Array(20);return crypto.getRandomValues(i),Array.from(i,e=>QA[e%QA.length]).join("")}function uM(i){return C1({query:()=>bn(at,"workouts",i),deps:[i]})}function cM(i){return Os({query:()=>zn(Bn(at,"workouts"),ut("user","==",i),ut("completedAt","!=",null),A_("completedAt","desc")),deps:[i]})}function hM(i){return Os({query:()=>zn(Bn(at,"workouts"),ut("user","==",i),ut("completedAt","==",null)),deps:[i]})}async function $A(i){const{id:e,...t}=i;await jc(bn(at,"workouts",e),t)}async function fM(i){const{id:e,...t}=i;await b_(bn(at,"workouts",e),t)}async function dM(i){await Wd(bn(at,"workouts",i.id))}function mM(){return SC()}function x1(i,e){const[t,r]=$.useState(()=>oy(i,e??Ue.now()));return $.useEffect(()=>{const a=setInterval(()=>{r(oy(i,e??Ue.now()))});return()=>{clearInterval(a)}},[i,e]),t}function oy(i,e){if(!i||!e)return"";const t=Math.floor(Math.max(e.seconds-i.seconds,0)),r=t%60,a=Math.floor(t/60)%60,l=Math.floor(t/3600),c=[];return l&&c.push(`${l}h`),(l||a)&&c.push(`${a}min`),(l||a||r)&&c.push(`${r}s`),c.slice(0,2).join(" ")}function YA(i,e){return qc(zn(Bn(at,"performances"),ut("user","==",i),ut("workout","==",e)))}function pM(i,e){return[...Os({query:()=>zn(Bn(at,"performances"),ut("user","==",i),ut("workout","==",e)),deps:[i,e]})].sort((r,a)=>r.order-a.order)}function gM(i,e,t){return Os({query:()=>zn(Bn(at,"performances"),ut("user","==",i),ut("exercise","==",e),ut("startedAt","<",t),A_("startedAt","desc"),S1(1)),deps:[e,t]})[0]}async function N1(i){const{id:e,...t}=i;await jc(bn(at,"performances",e),t)}async function yM(i){const{id:e,...t}=i;await b_(bn(at,"performances",e),t)}async function R_(i){await Wd(bn(at,"performances",i.id))}const _M="_exercise_hjv6a_1",vM="_exerciseName_hjv6a_7",EM="_sets_hjv6a_13",TM="_setNumHeader_hjv6a_21",AM="_setCompletedHeader_hjv6a_26",wM="_prevVolumeHeader_hjv6a_31",SM="_currentWeightHeader_hjv6a_32",bM="_currentRepsHeader_hjv6a_33",IM="_addSetButton_hjv6a_57",RM="_sheetHeader_hjv6a_73",CM="_sheetActions_hjv6a_79",xM="_sheetAction_hjv6a_79",gn={exercise:_M,exerciseName:vM,sets:EM,setNumHeader:TM,setCompletedHeader:AM,prevVolumeHeader:wM,currentWeightHeader:SM,currentRepsHeader:bM,addSetButton:IM,sheetHeader:RM,sheetActions:CM,sheetAction:xM};function XA({enabled:i,user:e,performance:t}){return[...Os({query:()=>zn(Bn(at,"sets"),ut("user","==",e),ut("performance","==",t)),enabled:i,deps:[e,t]})].sort((a,l)=>a.order-l.order)}function WA(i,e){return qc(zn(Bn(at,"sets"),ut("user","==",i),ut("workout","==",e)))}function NM(i,e){return Os({query:()=>zn(Bn(at,"sets"),ut("user","==",i),ut("workout","==",e)),deps:[i,e]})}async function C_(i){const{id:e,...t}=i;await jc(bn(at,"sets",e),t)}async function Ku(i){const{id:e,...t}=i;await b_(bn(at,"sets",e),t)}async function Jd(i){await Wd(bn(at,"sets",i.id))}function DM(i){return C1({query:()=>bn(at,"exercises",i),deps:[i]})}function VM(){return[...Os({query:()=>zn(Bn(at,"exercises")),deps:[]})].sort((e,t)=>e.name.localeCompare(t.name))}async function OM(i){const{id:e,...t}=i;await jc(bn(at,"exercises",e),t)}const MM="_completed_egyqd_1",PM="_setNumValue_egyqd_5",kM="_setCompletedValue_egyqd_10",LM="_prevVolumeValue_egyqd_15",UM="_currentWeightValue_egyqd_16",BM="_currentRepsValue_egyqd_17",zM="_sheetHeader_egyqd_21",jM="_sheetRecords_egyqd_27",qM="_sheetRecord_egyqd_27",HM="_recordType_egyqd_47",FM="_recordValue_egyqd_51",GM="_recordIncrement_egyqd_59",KM="_sheetActions_egyqd_73",QM="_sheetAction_egyqd_73",$M="_input_egyqd_99",YM="_setCompletedButton_egyqd_110",XM="_recordMedal_egyqd_124",St={completed:MM,setNumValue:PM,setCompletedValue:kM,prevVolumeValue:LM,currentWeightValue:UM,currentRepsValue:BM,sheetHeader:zM,sheetRecords:jM,sheetRecord:qM,recordType:HM,recordValue:FM,recordIncrement:GM,sheetActions:KM,sheetAction:QM,input:$M,setCompletedButton:YM,recordMedal:XM},WM="_backdrop_jh7xm_1",JM="_modal_jh7xm_12",JA={backdrop:WM,modal:JM};function pd({isOpen:i,children:e,onClose:t}){return i?Lw.createPortal(V.jsx("div",{className:JA.backdrop,onClick:t,children:V.jsx("div",{className:JA.modal,onClick:r=>r.stopPropagation(),children:e})}),document.body):null}async function ZM({user:i,exercise:e,type:t}){return(await qc(zn(Bn(at,"records"),ut("user","==",i),ut("exercise","==",e),ut("type","==",t),A_("createdAt","desc"),S1(1))))[0]}async function eP(i,e){return qc(zn(Bn(at,"records"),ut("user","==",i),ut("performance","==",e)))}async function tP(i,e){return qc(zn(Bn(at,"records"),ut("user","==",i),ut("workout","==",e)))}function nP(i,e){return Os({query:()=>zn(Bn(at,"records"),ut("user","==",i),ut("set","==",e)),deps:[i,e]})}async function rP(i){const{id:e,...t}=i;await jc(bn(at,"records",e),t)}async function gd(i){await Wd(bn(at,"records",i.id))}const iP={one_rep_max:"Лучший 1ПМ",weight:"Самый большой вес",volume:"Лучший объём"};function sP(i){return vn({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,96A88,88,0,1,0,72,163.83V240a8,8,0,0,0,11.58,7.16L128,225l44.43,22.21A8.07,8.07,0,0,0,176,248a8,8,0,0,0,8-8V163.83A87.85,87.85,0,0,0,216,96ZM56,96a72,72,0,1,1,72,72A72.08,72.08,0,0,1,56,96Zm16,0a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"},child:[]}]})(i)}function D1(i,e){return i*(1+e/30)}function V1(i,e){return i/(1+e/30)}function ly(i,e){return(i/e-1)*30}function aP({number:i,exercise:e,set:t,prevSet:r,recSet:a}){const[l,c]=$.useState(!1),[d,m]=$.useState(!1),[g,_]=$.useState(null),[T,w]=$.useState(null),N=nP(t.user,t.id),k=$.useRef(t);$.useEffect(()=>{k.current=t},[t]);const F=r?`${r.weight}кг x ${r.reps}`:"-",B=t.weight?t.weight.toString():"",Q=(a?.weight||"-").toString(),ie=t.reps?t.reps.toString():"",te=(a?.reps||"-").toString(),fe=x=>(k.current=x(k.current),k.current),ue=async x=>{c(!1);const I=fe(Ze=>({...Ze,type:x}));await Ku(I)},Ee=async()=>{c(!1),await Promise.all([Jd(t),...N.map(x=>gd(x))])},O=async()=>{if(g===null)return;const x=Number.parseFloat(g||"0");if(_(null),!Number.isNaN(x)&&x>=0){const I=fe(Ze=>({...Ze,weight:x}));await Ku(I)}},b=async()=>{if(T===null)return;const x=Number.parseFloat(T||"0");if(w(null),!Number.isNaN(x)&&x>=0){const I=fe(Ze=>({...Ze,reps:x}));await Ku(I)}},R=async x=>{const I=["one_rep_max","weight","volume"],Ze=[{type:"one_rep_max",value:D1(x.weight,x.reps)},{type:"weight",value:x.weight},{type:"volume",value:x.weight*x.reps}],it=await Promise.all(I.map(oe=>ZM({type:oe,exercise:e,user:x.user}))),W=[];for(const oe of Ze){const Be=it.find(D=>D?.type===oe.type)?.current??0;oe.value>Be&&W.push(rP({id:yi(),user:x.user,workout:x.workout,exercise:e,performance:x.performance,set:x.id,createdAt:Ue.now(),type:oe.type,previous:Be,current:oe.value}))}await Promise.all(W)},P=async()=>{if(t.completed){const x=fe(I=>({...I,completed:!1}));await Promise.all([Ku(x),...N.map(I=>gd(I))])}else{const x=fe(I=>{const Ze=I.weight||a?.weight,it=I.reps||a?.reps;return Ze&&it?{...I,weight:Ze,reps:it,completed:!0}:I});await Promise.all([Ku(x),R(x)])}},L=()=>{t.completed?N.length!==0&&m(!0):c(!0)};return V.jsxs(V.Fragment,{children:[V.jsxs("tr",{className:Ti(t.completed&&St.completed),children:[V.jsx("td",{className:St.setNumValue,onClick:L,children:N.length===0?V.jsx("span",{children:i}):V.jsx(sP,{className:St.recordMedal})}),V.jsx("td",{className:St.prevVolumeValue,children:F}),V.jsx("td",{className:St.currentWeightValue,children:V.jsx("input",{className:St.input,value:g??B,placeholder:Q,disabled:t.completed,type:"text",inputMode:"numeric",onContextMenu:x=>x.preventDefault(),onChange:x=>_(x.target.value),onFocus:x=>x.target.select(),onBlur:O})}),V.jsx("td",{className:St.currentRepsValue,children:V.jsx("input",{className:St.input,value:T??ie,placeholder:te,disabled:t.completed,type:"text",inputMode:"numeric",onContextMenu:x=>x.preventDefault(),onChange:x=>w(x.target.value),onFocus:x=>x.target.select(),onBlur:b})}),V.jsx("td",{className:St.setCompletedValue,children:V.jsx("button",{className:St.setCompletedButton,onClick:P,children:V.jsx(wy,{})})})]}),V.jsxs(pd,{isOpen:l,onClose:()=>c(!1),children:[V.jsx("div",{className:St.sheetHeader,children:"Выберите тип сета"}),V.jsxs("div",{className:St.sheetActions,children:[V.jsxs("button",{className:St.sheetAction,onClick:()=>ue("warm-up"),children:[V.jsx("span",{children:"W"}),V.jsx("span",{children:"Разминочный сет"})]}),V.jsxs("button",{className:St.sheetAction,onClick:()=>ue("working"),children:[V.jsx("span",{children:"1"}),V.jsx("span",{children:"Обычный сет"})]}),V.jsxs("button",{className:St.sheetAction,onClick:Ee,children:[V.jsx(Ty,{}),V.jsx("span",{children:"Удалить сет"})]})]})]}),V.jsxs(pd,{isOpen:d,onClose:()=>m(!1),children:[V.jsx("div",{className:St.sheetHeader,children:"Новый рекорд"}),V.jsx("div",{className:St.sheetRecords,children:N.map(x=>V.jsxs("div",{className:St.sheetRecord,children:[V.jsx("div",{className:St.recordType,children:iP[x.type]}),V.jsxs("div",{className:St.recordValue,children:[ZA(x.current)," кг"]}),x.previous!==0&&V.jsxs("div",{className:St.recordIncrement,children:[V.jsx(H2,{})," ",ZA(x.current-x.previous)," ","кг"]})]},x.type))})]})]})}function ZA(i){return i===Math.round(i)?i.toFixed(0):i.toFixed(2)}const oP="_root_321vk_1",lP="_toolbar_321vk_9",uP="_pageTitle_321vk_20",cP="_toolbarButton_321vk_25",hP="_search_321vk_36",fP="_exercises_321vk_45",dP="_exercise_321vk_45",mP="_exerciseName_321vk_59",pP="_muscles_321vk_63",gP="_muscle_321vk_63",ur={root:oP,toolbar:lP,pageTitle:uP,toolbarButton:cP,search:hP,exercises:fP,exercise:dP,exerciseName:mP,muscles:pP,muscle:gP},uy={abs:"Пресс",abductors:"Отводящие мышцы",adductors:"Приводящие мышцы",biceps:"Бицепсы",calves:"Икры",chest:"Грудь",forearms:"Предплечья",glutes:"Ягодицы",hamstrings:"Подколенные сухожилия",lats:"Широчайшие",lower_back:"Низ спины",neck:"Шея",quadriceps:"Квадрицепсы",shoulders:"Плечи",traps:"Трапеции",triceps:"Трицепсы",upper_back:"Верх спины"},yP="_modal_1447v_1",_P={modal:yP};function x_({isOpen:i,children:e}){return i?Lw.createPortal(V.jsx("div",{className:_P.modal,children:e}),document.body):null}const vP="_root_9pzt9_1",EP="_toolbar_9pzt9_9",TP="_pageTitle_9pzt9_20",AP="_toolbarButton_9pzt9_25",wP="_body_9pzt9_40",SP="_label_9pzt9_46",bP="_input_9pzt9_50",IP="_muscles_9pzt9_58",RP="_muscle_9pzt9_58",CP="_selected_9pzt9_74",on={root:vP,toolbar:EP,pageTitle:TP,toolbarButton:AP,body:wP,label:SP,input:bP,muscles:IP,muscle:RP,selected:CP};function xP({onCancel:i,onSubmit:e}){const[t,r]=$.useState(""),a=t.trim(),[l,c]=$.useState(null),[d,m]=$.useState([]),g=Object.entries(uy).map(([k,F])=>({key:k,label:F})),_=!a||!l||d.includes(l),T=k=>{c(l===k?null:k)},w=k=>{d.includes(k)?m(d.filter(F=>F!==k)):m([...d,k])},N=async()=>{if(!a||!l)return;const k={id:yi(),name:a,muscles:[l,...d]};e(k),await OM(k)};return V.jsxs("div",{className:on.root,children:[V.jsxs("div",{className:on.toolbar,children:[V.jsx("button",{className:on.toolbarButton,onClick:i,children:V.jsx(Ay,{})}),V.jsx("div",{className:on.pageTitle,children:"Создать упражнение"}),V.jsx("button",{className:on.toolbarButton,disabled:_,onClick:N,children:V.jsx(wy,{})})]}),V.jsxs("div",{className:on.body,children:[V.jsx("label",{className:on.label,children:"Название упражнения"}),V.jsx("input",{className:on.input,value:t,onChange:k=>r(k.target.value)}),V.jsx("label",{className:on.label,children:"Основная группа мышц"}),V.jsx("div",{className:on.muscles,children:g.map(k=>V.jsx("button",{className:Ti(on.muscle,l===k.key&&on.selected),onClick:()=>T(k.key),children:k.label},k.key))}),V.jsx("label",{className:on.label,children:"Другие мышцы"}),V.jsx("div",{className:on.muscles,children:g.map(k=>V.jsx("button",{className:Ti(on.muscle,d.includes(k.key)&&on.selected),onClick:()=>w(k.key),children:k.label},k.key))})]})]})}function O1({onCancel:i,onSubmit:e}){const t=VM(),[r,a]=$.useState(!1),[l,c]=$.useState(""),d=l.toLowerCase(),m=t.filter(g=>g.name.toLowerCase().includes(d)||g.muscles.some(_=>uy[_]?.toLowerCase()?.includes(d)));return V.jsxs("div",{className:ur.root,children:[V.jsxs("div",{className:ur.toolbar,children:[V.jsx("button",{className:ur.toolbarButton,onClick:i,children:V.jsx(Ay,{})}),V.jsx("div",{className:ur.pageTitle,children:"Выбрать упражнение"}),V.jsx("button",{className:ur.toolbarButton,onClick:()=>a(!0),children:V.jsx(bd,{})})]}),V.jsx("input",{className:ur.search,value:l,placeholder:"Поиск...",onChange:g=>c(g.target.value)}),V.jsx("div",{className:ur.exercises,children:m.map(g=>V.jsxs("div",{className:ur.exercise,onClick:()=>e(g),children:[V.jsxs("div",{className:ur.exerciseName,children:[" ",g.name]}),V.jsx("div",{className:ur.muscles,children:g.muscles.map(_=>V.jsx("div",{className:ur.muscle,children:uy[_]??_},_))})]},g.id))}),V.jsx(x_,{isOpen:r,children:V.jsx(xP,{onCancel:()=>a(!1),onSubmit:e})})]})}const ew=[30,12],M1=.8,NP=8,DP=12,VP=1.05;function OP(i){if(i.length===0)return;let e=1/0,t=1/0;for(const r of i)!e||r.weight<e?(e=r.weight,t=r.reps):r.weight===e&&(t=Math.min(t??r.reps,r.reps));return{weight:e,reps:t,oneRepMax:D1(e,t)}}function tw(i,e){const t=i*M1,r=V1(t,e);return Math.floor(r)}function MP(i,e){const t=i*M1,r=ly(t,e);return Math.floor(r)}function PP(i,e,t,r){let a=e.weight,l=e.reps;if(i){if(!l&&a)l=MP(i.oneRepMax,a);else if(l&&!a)a=tw(i.oneRepMax,l);else if(!l&&!a){const c=Math.min(r,ew.length-1);l=ew[c],a=tw(i.oneRepMax,l)}}else a=t.weight,l=t.reps;return{type:"warm-up",weight:a,reps:l}}function kP(i,e){let t=e.weight,r=e.reps;if(i&&!t&&i.reps>=DP&&(r=NP,t=Math.floor(V1(i.oneRepMax,r))),i&&!t&&(t=i.weight),i&&t===i.weight){const a=i.oneRepMax*VP;r=Math.ceil(ly(a,t))}return i&&t>i.weight&&!r&&(r=Math.ceil(ly(i.oneRepMax,t))),{type:"working",weight:t,reps:r}}function LP(i,e){const t=i.filter(d=>d.type==="working"),r=OP(t),a=[],l={type:"warm-up",weight:0,reps:0};let c=0;for(const d of e)switch(l.type!==d.type&&(l.type=d.type,l.weight=0,l.reps=0),l.weight=d.weight||l.weight,l.reps=d.reps||l.reps,d.type){case"warm-up":{const m=PP(r,d,l,c);a.push(m),c+=1;break}case"working":{const m=kP(r,l);a.push(m);break}}return a}function UP({performance:i}){const e=DM(i.exercise),t=XA({user:i.user,performance:i.id}),r=gM(i.user,i.exercise,i.startedAt),a=XA({enabled:r?.id!==void 0,user:r?.user,performance:r?.id}),[l,c]=$.useState(!1),[d,m]=$.useState(!1),g=async()=>{await C_({id:yi(),user:i.user,workout:i.workout,performance:i.id,order:Math.max(-1,...t.map(F=>F.order))+1,type:"working",weight:0,reps:0,completed:!1})},_=()=>{alert("TBD")},T=()=>{alert("TBD")},w=()=>{c(!1),m(!0)},N=async F=>{m(!1),await yM({...i,exercise:F.id})},k=async()=>{c(!1);const F=await eP(i.user,i.id);await Promise.all([...t.map(B=>Jd(B)),...F.map(B=>gd(B)),R_(i)])};return V.jsxs("div",{className:gn.exercise,children:[V.jsx("div",{className:gn.exerciseName,onClick:()=>c(!0),children:e?.name??"-"}),V.jsxs("table",{className:gn.sets,children:[V.jsx("thead",{children:V.jsxs("tr",{children:[V.jsx("th",{className:gn.setNumHeader,children:"Подх."}),V.jsx("th",{className:gn.prevVolumeHeader,children:"Пред."}),V.jsx("th",{className:gn.currentWeightHeader,children:"КГ"}),V.jsx("th",{className:gn.currentRepsHeader,children:"Повт."}),V.jsx("th",{className:gn.setCompletedHeader,children:V.jsx(wy,{})})]})}),V.jsx("tbody",{children:BP(i,a,t)})]}),V.jsxs("button",{className:gn.addSetButton,onClick:g,children:[V.jsx(bd,{}),"Добавить сет"]}),V.jsxs(pd,{isOpen:l,onClose:()=>c(!1),children:[V.jsx("div",{className:gn.sheetHeader,children:"Упражнение"}),V.jsxs("div",{className:gn.sheetActions,children:[V.jsxs("button",{className:gn.sheetAction,onClick:_,children:[V.jsx(j2,{}),V.jsx("span",{children:"История выполнения"})]}),V.jsxs("button",{className:gn.sheetAction,onClick:T,children:[V.jsx(z2,{}),V.jsx("span",{children:"Порядок выполнения"})]}),V.jsxs("button",{className:gn.sheetAction,onClick:w,children:[V.jsx(U2,{}),V.jsx("span",{children:"Заменить на другое"})]}),V.jsxs("button",{className:gn.sheetAction,onClick:k,children:[V.jsx(Ty,{}),V.jsx("span",{children:"Удалить из тренировки"})]})]})]}),V.jsx(x_,{isOpen:d,children:V.jsx(O1,{onCancel:()=>m(!1),onSubmit:N})})]})}function BP(i,e,t){const r=e.filter(g=>g.type==="warm-up"&&g.weight&&g.reps),a=e.filter(g=>g.type==="working"&&g.weight&&g.reps),l=LP(e,t),c=[];let d=0,m=0;return t.forEach((g,_)=>{let T="-",w;const N=l[_];g.type==="warm-up"?(T="W",w=r[d],d+=1):g.type==="working"&&(T=(m+1).toString(),w=a[m],m+=1),c.push(V.jsx(aP,{number:T,exercise:i.exercise,set:g,prevSet:w,recSet:N},g.id))}),c}const zP="_backdrop_1mgvq_1",jP="_modal_1mgvq_15",qP="_title_1mgvq_25",HP="_body_1mgvq_30",FP="_actions_1mgvq_35",GP="_action_1mgvq_35",KP="_cancel_1mgvq_53",QP="_submit_1mgvq_58",mi={backdrop:zP,modal:jP,title:qP,body:HP,actions:FP,action:GP,cancel:KP,submit:QP};function P1({title:i,width:e,cancelText:t,cancelDisabled:r,submitText:a,submitDisabled:l,isOpen:c,children:d,onClose:m,onSubmit:g}){return c?V.jsx("div",{className:mi.backdrop,onClick:m,children:V.jsxs("div",{className:mi.modal,style:{width:e},onClick:_=>_.stopPropagation(),children:[V.jsx("div",{className:mi.title,children:i}),V.jsx("div",{className:mi.body,children:d}),V.jsxs("div",{className:mi.actions,children:[t&&V.jsx("button",{className:Ti(mi.action,mi.cancel),disabled:r,onClick:m,children:t}),a&&V.jsx("button",{className:Ti(mi.action,mi.submit),disabled:l,onClick:g,children:a})]})]})}):null}const $P="_label_1psv4_1",YP="_input_1psv4_5",nw={label:$P,input:YP};function XP({workout:i,isOpen:e,onClose:t,onSubmit:r}){const[a,l]=$.useState("");$.useEffect(()=>{l(i.name)},[i,e]);const d=!a.trim();return V.jsxs(P1,{title:"Завершение",width:"300px",cancelText:"Отмена",submitText:"Завершить",submitDisabled:d,isOpen:e,onClose:t,onSubmit:()=>r({name:a}),children:[V.jsx("label",{className:nw.label,children:"Название тренировки"}),V.jsx("input",{className:nw.input,value:a,onChange:m=>l(m.target.value)})]})}function k1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WP=k1,L1=new Dc("auth","Firebase",k1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Sy("@firebase/auth");function JP(i,...e){yd.logLevel<=ke.WARN&&yd.warn(`Auth (${Al}): ${i}`,...e)}function qf(i,...e){yd.logLevel<=ke.ERROR&&yd.error(`Auth (${Al}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(i,...e){throw D_(i,...e)}function fr(i,...e){return D_(i,...e)}function N_(i,e,t){const r={...WP(),[e]:t};return new Dc("auth","Firebase",r).create(e,{appName:i.name})}function As(i){return N_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZP(i,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&jr(i,"argument-error"),N_(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function D_(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return L1.create(i,...e)}function be(i,e,...t){if(!i)throw D_(e,...t)}function _i(i){const e="INTERNAL ASSERTION FAILED: "+i;throw qf(e),new Error(e)}function Ri(i,e){i||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(){return typeof self<"u"&&self.location?.href||""}function e4(){return rw()==="http:"||rw()==="https:"}function rw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e4()||ax()||"connection"in navigator)?navigator.onLine:!0}function n4(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=ix()||ox()}get(){return t4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(i,e){Ri(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s4=new Hc(3e4,6e4);function Zd(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function xl(i,e,t,r,a={}){return B1(i,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=Vc({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...l};return sx()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Tl(i.emulatorConfig.host)&&(g.credentials="include"),U1.fetch()(await j1(i,i.config.apiHost,t,d),g)})}async function B1(i,e,t){i._canInitEmulator=!1;const r={...r4,...e};try{const a=new a4(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw If(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw If(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw If(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw If(i,"user-disabled",c);const _=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw N_(i,_,g);jr(i,_)}}catch(a){if(a instanceof Ci)throw a;jr(i,"network-request-failed",{message:String(a)})}}async function z1(i,e,t,r,a={}){const l=await xl(i,e,t,r,a);return"mfaPendingCredential"in l&&jr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function j1(i,e,t,r){const a=`${e}${t}?${r}`,l=i,c=l.config.emulator?V_(i.config,a):`${i.config.apiScheme}://${a}`;return i4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class a4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(fr(this.auth,"network-request-failed")),s4.get())})}}function If(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=fr(i,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(i,e){return xl(i,"POST","/v1/accounts:delete",e)}async function _d(i,e){return xl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l4(i,e=!1){const t=Yt(i),r=await t.getIdToken(e),a=O_(r);be(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:lc(Sg(a.auth_time)),issuedAtTime:lc(Sg(a.iat)),expirationTime:lc(Sg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Sg(i){return Number(i)*1e3}function O_(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return qf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Fw(t);return a?JSON.parse(a):(qf("Failed to decode base64 JWT payload"),null)}catch(a){return qf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function iw(i){const e=O_(i);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ci&&u4(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function u4({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(i){const e=i.auth,t=await i.getIdToken(),r=await Ic(i,_d(e,{idToken:t}));be(r?.users.length,e,"internal-error");const a=r.users[0];i._notifyReloadListener(a);const l=a.providerUserInfo?.length?q1(a.providerUserInfo):[],c=f4(i.providerData,l),d=i.isAnonymous,m=!(i.email&&a.passwordHash)&&!c?.length,g=d?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new hy(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function h4(i){const e=Yt(i);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f4(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function q1(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(i,e){const t=await B1(i,{},async()=>{const r=Vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await j1(i,a,"/v1/token",`key=${l}`),d=await i._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return i.emulatorConfig&&Tl(i.emulatorConfig.host)&&(m.credentials="include"),U1.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function m4(i,e){return xl(i,"POST","/v2/accounts:revokeToken",Zd(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=iw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await d4(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new Jo;return r&&(be(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(be(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(be(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(i,e){be(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class hr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new c4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ic(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return l4(this,e)}reload(){return h4(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await vd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await Ic(this,o4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:w,isAnonymous:N,providerData:k,stsTokenManager:F}=t;be(T&&F,e,"internal-error");const B=Jo.fromJSON(this.name,F);be(typeof T=="string",e,"internal-error"),cs(r,e.name),cs(a,e.name),be(typeof w=="boolean",e,"internal-error"),be(typeof N=="boolean",e,"internal-error"),cs(l,e.name),cs(c,e.name),cs(d,e.name),cs(m,e.name),cs(g,e.name),cs(_,e.name);const Q=new hr({uid:T,auth:e,email:a,emailVerified:w,displayName:r,isAnonymous:N,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:B,createdAt:g,lastLoginAt:_});return k&&Array.isArray(k)&&(Q.providerData=k.map(ie=>({...ie}))),m&&(Q._redirectEventId=m),Q}static async _fromIdTokenResponse(e,t,r=!1){const a=new Jo;a.updateFromServerResponse(t);const l=new hr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await vd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];be(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?q1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Jo;d.updateFromIdToken(r);const m=new hr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Map;function vi(i){Ri(i instanceof Function,"Expected a class definition");let e=sw.get(i);return e?(Ri(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,sw.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}H1.type="NONE";const aw=H1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(i,e,t){return`firebase:${i}:${e}:${t}`}class Zo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Hf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Hf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _d(this.auth,{idToken:e}).catch(()=>{});return t?hr._fromGetAccountInfoResponse(this.auth,t,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Zo(vi(aw),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||vi(aw);const c=Hf(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const w=await _d(e,{idToken:_}).catch(()=>{});if(!w)break;T=await hr._fromGetAccountInfoResponse(e,w,_)}else T=hr._fromJSON(e,_);g!==l&&(d=T),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Zo(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Zo(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y1(e))return"Blackberry";if(X1(e))return"Webos";if(G1(e))return"Safari";if((e.includes("chrome/")||K1(e))&&!e.includes("edge/"))return"Chrome";if($1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function F1(i=Bt()){return/firefox\//i.test(i)}function G1(i=Bt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K1(i=Bt()){return/crios\//i.test(i)}function Q1(i=Bt()){return/iemobile/i.test(i)}function $1(i=Bt()){return/android/i.test(i)}function Y1(i=Bt()){return/blackberry/i.test(i)}function X1(i=Bt()){return/webos/i.test(i)}function M_(i=Bt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function p4(i=Bt()){return M_(i)&&!!window.navigator?.standalone}function g4(){return lx()&&document.documentMode===10}function W1(i=Bt()){return M_(i)||$1(i)||X1(i)||Y1(i)||/windows phone/i.test(i)||Q1(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(i,e=[]){let t;switch(i){case"Browser":t=ow(Bt());break;case"Worker":t=`${ow(Bt())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(i,e={}){return xl(i,"GET","/v2/passwordPolicy",Zd(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=6;class E4{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??v4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lw(this),this.idTokenSubscription=new lw(this),this.beforeStateQueue=new y4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _d(this,{idToken:e}),r=await hr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(er(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=n4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(As(this));const t=e?Yt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _4(this),t=new E4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await m4(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vi(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JP(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Fc(i){return Yt(i)}class lw{constructor(e){this.auth=e,this.observer=null,this.addObserver=mx(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A4(i){P_=i}function w4(i){return P_.loadJS(i)}function S4(){return P_.gapiScript}function b4(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(i,e){const t=Iy(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Oa(l,e??{}))return a;jr(a,"already-initialized")}return t.initialize({options:e})}function R4(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function C4(i,e,t){const r=Fc(i);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=Z1(e),{host:c,port:d}=x4(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(Oa(g,r.config.emulator)&&Oa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Tl(c)?($w(`${l}//${c}${m}`),rx("Auth",!0)):N4()}function Z1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function x4(i){const e=Z1(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:uw(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:uw(c)}}}function uw(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function N4(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,t){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(i,e){return z1(i,"POST","/v1/accounts:signInWithIdp",Zd(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="http://localhost";class Ha extends eI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Ha(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return el(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,el(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,el(e,t)}buildRequest(){const e={requestUri:D4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends k_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Gc{constructor(){super("facebook.com")}static credential(e){return Ha._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ha._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return pi.credential(t,r)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Gc{constructor(){super("github.com")}static credential(e){return Ha._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Gc{constructor(){super("twitter.com")}static credential(e,t){return Ha._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ms.credential(t,r)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(i,e){return z1(i,"POST","/v1/accounts:signUp",Zd(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await hr._fromIdTokenResponse(e,r,a),c=cw(r);return new Rs({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=cw(r);return new Rs({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function cw(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(i){if(er(i.app))return Promise.reject(As(i));const e=Fc(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Rs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await V4(e,{returnSecureToken:!0}),r=await Rs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends Ci{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Ed(e,t,r,a)}}function tI(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(i,l,e,r):l})}async function M4(i,e,t=!1){const r=await Ic(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Rs._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(i,e,t=!1){const{auth:r}=i;if(er(r.app))return Promise.reject(As(r));const a="reauthenticate";try{const l=await Ic(i,tI(r,a,e,i),t);be(l.idToken,r,"internal-error");const c=O_(l.idToken);be(c,r,"internal-error");const{sub:d}=c;return be(i.uid===d,r,"user-mismatch"),Rs._forOperation(i,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&jr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(i,e,t=!1){if(er(i.app))return Promise.reject(As(i));const r="signIn",a=await tI(i,r,e),l=await Rs._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}function L4(i,e,t,r){return Yt(i).onIdTokenChanged(e,t,r)}function U4(i,e,t){return Yt(i).beforeAuthStateChanged(e,t)}function B4(i,e,t,r){return Yt(i).onAuthStateChanged(e,t,r)}function z4(i){return Yt(i).signOut()}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=1e3,q4=10;class rI extends nI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);g4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,q4):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},j4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rI.type="LOCAL";const H4=rI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI extends nI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iI.type="SESSION";const sI=iI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new em(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await F4(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}em.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=L_("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(T){const w=T;if(w.data.eventId===g)switch(w.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(w.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function K4(i){Br().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function Q4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $4(){return navigator?.serviceWorker?.controller||null}function Y4(){return aI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="firebaseLocalStorageDb",X4=1,Ad="firebaseLocalStorage",lI="fbase_key";class Kc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tm(i,e){return i.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function W4(){const i=indexedDB.deleteDatabase(oI);return new Kc(i).toPromise()}function fy(){const i=indexedDB.open(oI,X4);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Ad,{keyPath:lI})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Ad)?e(r):(r.close(),await W4(),e(await fy()))})})}async function hw(i,e,t){const r=tm(i,!0).put({[lI]:e,value:t});return new Kc(r).toPromise()}async function J4(i,e){const t=tm(i,!1).get(e),r=await new Kc(t).toPromise();return r===void 0?null:r.value}function fw(i,e){const t=tm(i,!0).delete(e);return new Kc(t).toPromise()}const Z4=800,ek=3;class uI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ek)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=em._getInstance(Y4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Q4(),!this.activeServiceWorker)return;this.sender=new G4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fy();return await hw(e,Td,"1"),await fw(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>J4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=tm(a,!1).getAll();return new Kc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uI.type="LOCAL";const tk=uI;new Hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(i,e){return e?vi(e):(be(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_ extends eI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,t){return el(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nk(i){return k4(i.auth,new U_(i),i.bypassAuthState)}function rk(i){const{auth:e,user:t}=i;return be(t,e,"internal-error"),P4(t,new U_(i),i.bypassAuthState)}async function ik(i){const{auth:e,user:t}=i;return be(t,e,"internal-error"),M4(t,new U_(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nk;case"linkViaPopup":case"linkViaRedirect":return ik;case"reauthViaPopup":case"reauthViaRedirect":return rk;default:jr(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new Hc(2e3,1e4);async function ak(i,e,t){if(er(i.app))return Promise.reject(fr(i,"operation-not-supported-in-this-environment"));const r=Fc(i);ZP(i,e,k_);const a=cI(r,t);return new Ia(r,"signInViaPopup",e,a).executeNotNull()}class Ia extends hI{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Ia.currentPopupAction&&Ia.currentPopupAction.cancel(),Ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=L_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sk.get())};e()}}Ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="pendingRedirect",Ff=new Map;class lk extends hI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ff.get(this.auth._key());if(!e){try{const r=await uk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ff.set(this.auth._key(),e)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uk(i,e){const t=fk(e),r=hk(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function ck(i,e){Ff.set(i._key(),e)}function hk(i){return vi(i._redirectPersistence)}function fk(i){return Hf(ok,i.config.apiKey,i.name)}async function dk(i,e,t=!1){if(er(i.app))return Promise.reject(As(i));const r=Fc(i),a=cI(r,e),c=await new lk(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=600*1e3;class pk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!fI(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(fr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mk&&this.cachedEventUids.clear(),this.cachedEventUids.has(dw(e))}saveEventToCache(e){this.cachedEventUids.add(dw(e)),this.lastProcessedEventTime=Date.now()}}function dw(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function fI({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function gk(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fI(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(i,e={}){return xl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vk=/^https?/;async function Ek(i){if(i.config.emulator)return;const{authorizedDomains:e}=await yk(i);for(const t of e)try{if(Tk(t))return}catch{}jr(i,"unauthorized-domain")}function Tk(i){const e=cy(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!vk.test(t))return!1;if(_k.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new Hc(3e4,6e4);function mw(){const i=Br().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function wk(i){return new Promise((e,t)=>{function r(){mw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mw(),t(fr(i,"network-request-failed"))},timeout:Ak.get()})}if(Br().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Br().gapi?.load)r();else{const a=b4("iframefcb");return Br()[a]=()=>{gapi.load?r():t(fr(i,"network-request-failed"))},w4(`${S4()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Gf=null,e})}let Gf=null;function Sk(i){return Gf=Gf||wk(i),Gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new Hc(5e3,15e3),Ik="__/auth/iframe",Rk="emulator/auth/iframe",Ck={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nk(i){const e=i.config;be(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?V_(e,Rk):`https://${i.config.authDomain}/${Ik}`,r={apiKey:e.apiKey,appName:i.name,v:Al},a=xk.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Vc(r).slice(1)}`}async function Dk(i){const e=await Sk(i),t=Br().gapi;return be(t,i,"internal-error"),e.open({where:document.body,url:Nk(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ck,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=fr(i,"network-request-failed"),d=Br().setTimeout(()=>{l(c)},bk.get());function m(){Br().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ok=500,Mk=600,Pk="_blank",kk="http://localhost";class pw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lk(i,e,t,r=Ok,a=Mk){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...Vk,width:r.toString(),height:a.toString(),top:l,left:c},g=Bt().toLowerCase();t&&(d=K1(g)?Pk:t),F1(g)&&(e=e||kk,m.scrollbars="yes");const _=Object.entries(m).reduce((w,[N,k])=>`${w}${N}=${k},`,"");if(p4(g)&&d!=="_self")return Uk(e||"",d),new pw(null);const T=window.open(e||"",d,_);be(T,i,"popup-blocked");try{T.focus()}catch{}return new pw(T)}function Uk(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="__/auth/handler",zk="emulator/auth/handler",jk=encodeURIComponent("fac");async function gw(i,e,t,r,a,l){be(i.config.authDomain,i,"auth-domain-config-required"),be(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:Al,eventId:a};if(e instanceof k_){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",dx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof Gc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await i._getAppCheckToken(),g=m?`#${jk}=${encodeURIComponent(m)}`:"";return`${qk(i)}?${Vc(d).slice(1)}${g}`}function qk({config:i}){return i.emulator?V_(i,zk):`https://${i.authDomain}/${Bk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="webStorageSupport";class Hk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sI,this._completeRedirectFn=dk,this._overrideRedirectResult=ck}async _openPopup(e,t,r,a){Ri(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await gw(e,t,r,cy(),a);return Lk(e,l,L_())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await gw(e,t,r,cy(),a);return K4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ri(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Dk(e),r=new pk(e);return t.register("authEvent",a=>(be(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bg,{type:bg},a=>{const l=a?.[0]?.[bg];l!==void 0&&t(!!l),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ek(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return W1()||G1()||M_()}}const Fk=Hk;var yw="@firebase/auth",_w="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Qk(i){tl(new Ma("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J1(i)},g=new T4(r,a,l,m);return R4(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),tl(new Ma("auth-internal",e=>{const t=Fc(e.getProvider("auth").getImmediate());return(r=>new Gk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(yw,_w,Kk(i)),_s(yw,_w,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=300,Yk=Qw("authIdTokenMaxAge")||$k;let vw=null;const Xk=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Yk)return;const a=t?.token;vw!==a&&(vw=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Wk(i=pN()){const e=Iy(i,"auth");if(e.isInitialized())return e.getImmediate();const t=I4(i,{popupRedirectResolver:Fk,persistence:[tk,H4,sI]}),r=Qw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=Xk(l.toString());U4(t,c,()=>c(t.currentUser)),L4(t,d=>c(d))}}const a=Z2("auth");return a&&C4(t,`http://${a}`),t}function Jk(){return document.getElementsByTagName("head")?.[0]??document}A4({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=fr("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",Jk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Qk("Browser");const Rc=Wk(R1);async function Zk(){const i=new pi;return(await ak(Rc,i)).user}async function e6(){return(await O4(Rc)).user}async function t6(){await z4(Rc)}function dI(){const[i,e]=$.useState(()=>Rc.currentUser),[t,r]=$.useState(!0);return $.useEffect(()=>{const a=B4(Rc,l=>{e(l),r(!1)});return()=>a()},[]),{user:i,loading:t}}function mI(){const{user:i}=dI();if(!i)throw new Error("User is not authenticated");return i}function n6(){const{workoutId:i}=mM(),e=mI(),t=xc(),r=uM(i),a=x1(r?.startedAt,r?.completedAt??void 0),l=pM(e.uid,i),c=NM(e.uid,i),d=c.filter(B=>B.completed),m=d.reduce((B,Q)=>B+Q.weight*Q.reps,0),[g,_]=$.useState(!1),[T,w]=$.useState(null),N=async B=>{if(!r)return;_(!1);const Q=yi(),ie=N1({id:Q,user:r.user,workout:r.id,exercise:B.id,order:Math.max(-1,...l.map(fe=>fe.order))+1,startedAt:r.startedAt}),te=C_({id:yi(),user:r.user,workout:r.id,performance:Q,order:0,type:"working",weight:0,reps:0,completed:!1});await Promise.all([ie,te])},k=()=>{const B=c.every(Q=>Q.completed);w(B?"form":"warning")},F=async B=>{if(!r)return;w(null);const Q=[];Q.push(fM({...r,completedAt:Ue.now(),name:B.name,volume:m,sets:d.length}));for(const ie of l){const te=c.filter(ue=>ue.performance===ie.id);let fe=!0;for(const ue of te)ue.completed?fe=!1:Q.push(Jd(ue));fe&&Q.push(R_(ie))}t("/",{replace:!0}),await Promise.all(Q)};return V.jsxs("div",{className:Qt.root,children:[V.jsxs("div",{className:Qt.toolbar,children:[V.jsx("button",{className:Qt.backButton,onClick:()=>t("/",{replace:!0}),children:V.jsx(Ay,{})}),V.jsx("div",{className:Qt.pageTitle,children:"Тренировка"}),V.jsx("button",{className:Qt.finishButton,onClick:k,children:"Закончить"})]}),V.jsxs("div",{className:Qt.stats,children:[V.jsxs("div",{className:Qt.stat,children:[V.jsx("div",{className:Qt.statName,children:"Время"}),V.jsx("div",{className:Ti(Qt.statValue,Qt.accent),children:a})]}),V.jsxs("div",{className:Qt.stat,children:[V.jsx("div",{className:Qt.statName,children:"Объём"}),V.jsxs("div",{className:Qt.statValue,children:[m.toLocaleString()," кг"]})]}),V.jsxs("div",{className:Qt.stat,children:[V.jsx("div",{className:Qt.statName,children:"Сеты"}),V.jsxs("div",{className:Qt.statValue,children:[d.length," / ",c.length]})]})]}),V.jsxs("div",{className:Qt.exercises,children:[l.map(B=>V.jsx(UP,{performance:B},B.id)),V.jsxs("button",{className:Qt.addExerciseButton,onClick:()=>_(!0),children:[V.jsx(bd,{}),"Добавить упражнение"]})]}),V.jsx(x_,{isOpen:g,children:V.jsx(O1,{onCancel:()=>_(!1),onSubmit:N})}),V.jsx(P1,{title:"Подтверждение",width:"300px",cancelText:"Отмена",submitText:"Завершить",isOpen:T==="warning",onClose:()=>w(null),onSubmit:()=>w("form"),children:"Не все сеты выполнены. Вы точно ходите завершить тренировку?"}),r&&V.jsx(XP,{workout:r,isOpen:T==="form",onClose:()=>w(null),onSubmit:F})]})}const r6="_body_28rmx_1",i6="_user_28rmx_9",s6="_userImage_28rmx_16",a6="_userInfo_28rmx_28",o6="_userName_28rmx_36",l6="_signOut_28rmx_40",u6="_workoutButtons_28rmx_57",c6="_workoutButton_28rmx_57",h6="_startWorkout_28rmx_78",f6="_workouts_28rmx_83",d6="_workout_28rmx_57",m6="_workoutName_28rmx_97",p6="_workoutTimer_28rmx_101",g6="_workoutDate_28rmx_105",y6="_workoutStats_28rmx_111",_6="_workoutStat_28rmx_111",v6="_statName_28rmx_123",E6="_statValue_28rmx_128",T6="_sheetHeader_28rmx_132",A6="_sheetActions_28rmx_138",w6="_sheetAction_28rmx_138",S6="_appVersion_28rmx_164",xe={body:r6,user:i6,userImage:s6,userInfo:a6,userName:o6,signOut:l6,workoutButtons:u6,workoutButton:c6,startWorkout:h6,workouts:f6,workout:d6,workoutName:m6,workoutTimer:p6,workoutDate:g6,workoutStats:y6,workoutStat:_6,statName:v6,statValue:E6,sheetHeader:T6,sheetActions:A6,sheetAction:w6,appVersion:S6},b6="1.3.0",I6=new Intl.DateTimeFormat("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",weekday:"long"});function R6(){const i=mI(),e=xc(),t=cM(i.uid),[r]=hM(i.uid),[a,l]=$.useState(null),c=x1(r?.startedAt,void 0),d=w=>{w&&e(`/workouts/${w.id}`)},m=async()=>{const w=[],N={id:yi(),user:i.uid,name:"Новая тренировка",startedAt:Ue.now(),completedAt:null,volume:0,sets:0};w.push($A(N)),d(N),await Promise.all(w)},g=async w=>{const N=[],k=await YA(w.user,w.id),F=await WA(w.user,w.id),B=await tP(w.user,w.id);N.push(dM(w)),N.push(...k.map(Q=>R_(Q))),N.push(...F.map(Q=>Jd(Q))),N.push(...B.map(Q=>gd(Q))),await Promise.all(N)},_=async()=>{if(!a)return;const w=[],N=await YA(a.user,a.id),k=await WA(a.user,a.id),F={id:yi(),user:a.user,name:a.name,startedAt:Ue.now(),completedAt:null,volume:0,sets:0};w.push($A(F));for(const B of N){const Q={id:yi(),user:F.user,workout:F.id,exercise:B.exercise,order:B.order,startedAt:F.startedAt};w.push(N1(Q));const ie=k.filter(te=>te.performance===B.id);for(const te of ie){const fe={id:yi(),user:F.user,workout:F.id,performance:Q.id,order:te.order,type:te.type,weight:0,reps:0,completed:!1};w.push(C_(fe))}}d(F),await Promise.all(w)},T=()=>{alert("TBD")};return V.jsxs("div",{className:xe.body,children:[V.jsxs("div",{className:xe.user,children:[i.photoURL?V.jsx("img",{className:xe.userImage,src:i.photoURL,alt:"User Photo"}):V.jsx("div",{className:xe.userImage,children:V.jsx(G2,{})}),V.jsxs("div",{className:xe.userInfo,children:[V.jsx("div",{className:xe.userName,children:i.displayName??"Анонимный Пользователь"}),V.jsxs("button",{className:xe.signOut,onClick:t6,children:[V.jsx(B2,{}),V.jsx("span",{children:"Выйти"})]})]})]}),V.jsxs("div",{className:xe.workouts,children:[r?V.jsxs("div",{className:xe.workout,children:[V.jsx("div",{className:xe.workoutName,children:"Активная тренировка"}),V.jsx("div",{className:xe.workoutTimer,children:c}),V.jsxs("div",{className:xe.workoutButtons,children:[V.jsxs("button",{className:Ti(xe.workoutButton,xe.startWorkout),onClick:()=>d(r),children:[V.jsx(f0,{}),"Продолжить"]}),V.jsxs("button",{className:Ti(xe.workoutButton,xe.cancelWorkout),onClick:()=>g(r),children:[V.jsx(F2,{}),"Отменить"]})]})]}):V.jsxs("div",{className:xe.workout,children:[V.jsx("div",{className:xe.workoutName,children:"Новая тренировка"}),V.jsx("div",{className:xe.workoutButtons,children:V.jsxs("button",{className:Ti(xe.workoutButton,xe.startWorkout),onClick:()=>m(),children:[V.jsx(bd,{}),"Начать тренировку"]})})]}),t.map(w=>V.jsxs("div",{className:xe.workout,onClick:()=>l(w),children:[V.jsx("div",{className:xe.workoutName,children:w.name}),V.jsx("div",{className:xe.workoutDate,children:I6.format(w.startedAt?.toDate())}),V.jsxs("div",{className:xe.workoutStats,children:[V.jsxs("div",{className:xe.workoutStat,children:[V.jsx("div",{className:xe.statName,children:"Время"}),V.jsx("div",{className:xe.statValue,children:oy(w.startedAt,w.completedAt??void 0)})]}),V.jsxs("div",{className:xe.workoutStat,children:[V.jsx("div",{className:xe.statName,children:"Объём"}),V.jsxs("div",{className:xe.statValue,children:[w.volume?.toLocaleString()??"-"," кг"]})]}),V.jsxs("div",{className:xe.workoutStat,children:[V.jsx("div",{className:xe.statName,children:"Сеты"}),V.jsx("div",{className:xe.statValue,children:w.sets})]})]})]},w.id))]}),V.jsxs("div",{className:xe.appVersion,children:["App Version: ",b6]}),V.jsxs(pd,{isOpen:a!==null,onClose:()=>l(null),children:[V.jsx("div",{className:xe.sheetHeader,children:"Тренировка"}),V.jsxs("div",{className:xe.sheetActions,children:[V.jsxs("button",{className:xe.sheetAction,onClick:()=>d(a),children:[V.jsx(q2,{}),V.jsx("span",{children:"Открыть тренировку"})]}),V.jsxs("button",{className:xe.sheetAction,disabled:!!r,onClick:_,children:[V.jsx(f0,{}),V.jsx("span",{children:"Повторить тренировку"})]}),V.jsxs("button",{className:xe.sheetAction,onClick:T,children:[V.jsx(Ty,{}),V.jsx("span",{children:"Удалить тренировку"})]})]})]})]})}function Ew({children:i}){const{user:e,loading:t}=dI();return t?null:e?V.jsx(V.Fragment,{children:i}):V.jsx(UC,{to:"/auth/sign-in",replace:!0})}function C6(i){return vn({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(i)}const x6="_root_wop2o_1",N6="_icon_wop2o_7",D6="_title_wop2o_12",V6="_providers_wop2o_18",O6="_providerButton_wop2o_25",Go={root:x6,icon:N6,title:D6,providers:V6,providerButton:O6},M6="/gym-tracker/assets/app-icon-WyA6dgiH.png";function P6(){const i=xc(),e=async()=>{await Zk(),i("/",{replace:!0})},t=async()=>{await e6(),i("/",{replace:!0})};return V.jsxs("div",{className:Go.root,children:[V.jsx("img",{className:Go.icon,src:M6,alt:"App Icon"}),V.jsx("div",{className:Go.title,children:"Gym Tracker"}),V.jsxs("div",{className:Go.providers,children:[V.jsxs("button",{className:Go.providerButton,onClick:e,children:[V.jsx(C6,{}),"Войти через Google"]}),V.jsx("button",{className:Go.providerButton,onClick:t,children:"Войти анонимно"})]})]})}function k6(){return V.jsx(u2,{children:V.jsxs(zC,{children:[V.jsx(Rf,{path:"/",element:V.jsx(Ew,{children:V.jsx(R6,{})})}),V.jsx(Rf,{path:"/workouts/:workoutId",element:V.jsx(Ew,{children:V.jsx(n6,{})})}),V.jsx(Rf,{path:"/auth/sign-in",element:V.jsx(P6,{})})]})})}$R.createRoot(document.getElementById("root")).render(V.jsx($.StrictMode,{children:V.jsx(k6,{})}));
